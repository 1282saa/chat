"use strict";(self.webpackChunkbedrock_diy_frontend=self.webpackChunkbedrock_diy_frontend||[]).push([[156],{4156:(e,r,a)=>{a.r(r),a.d(r,{default:()=>c});var t=a(5043),s=a(8164),d=a(3216),l=a(3768),i=a(7625),n=a(9144),x=a(579);const c=()=>{const{user:e,getAuthToken:r}=(0,s.A)(),a=(0,d.Zp)(),[c,o]=(0,t.useState)(!0),[m,h]=(0,t.useState)(null),[g,y]=(0,t.useState)(null),[b,u]=(0,t.useState)(null),[j,k]=(0,t.useState)(!1),[p,v]=(0,t.useState)({name:""}),[N,f]=(0,t.useState)("month");(0,t.useEffect)(()=>{w()},[N]);const w=async()=>{try{o(!0);const e=await r(),[a,t,s]=await Promise.all([fetch("https://nq5qrt16lb.execute-api.us-east-1.amazonaws.com/prod/user/profile",{headers:{Authorization:`Bearer ${e}`}}),fetch(`https://nq5qrt16lb.execute-api.us-east-1.amazonaws.com/prod/user/usage?period=${N}`,{headers:{Authorization:`Bearer ${e}`}}),fetch("https://nq5qrt16lb.execute-api.us-east-1.amazonaws.com/prod/user/subscription",{headers:{Authorization:`Bearer ${e}`}})]),d=await a.json(),l=await t.json(),i=await s.json();h(d),y(l),u(i),v({name:d.name||""})}catch(e){console.error("\ub300\uc2dc\ubcf4\ub4dc \ub370\uc774\ud130 \ub85c\ub4dc \uc624\ub958:",e),l.Ay.error("\ub370\uc774\ud130\ub97c \ubd88\ub7ec\uc624\ub294\ub370 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4.")}finally{o(!1)}},_=e=>e?new Date(e).toLocaleDateString("ko-KR"):"-",A=e=>"number"!==typeof e?"0":e.toLocaleString();return c?(0,x.jsx)("div",{className:"min-h-screen bg-gray-50 dark:bg-dark-primary flex items-center justify-center",children:(0,x.jsx)(n.A,{})}):(0,x.jsxs)("div",{className:"min-h-screen bg-gray-50 dark:bg-dark-primary",children:[(0,x.jsx)("div",{className:"bg-white dark:bg-dark-secondary shadow-sm border-b border-gray-200 dark:border-dark-border",children:(0,x.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,x.jsxs)("div",{className:"flex justify-between items-center py-4",children:[(0,x.jsx)("div",{className:"flex items-center space-x-4",children:(0,x.jsx)("button",{onClick:()=>a("/chat"),className:"text-blue-600 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-300 font-medium",children:"\u2190 \ucc44\ud305\uc73c\ub85c \ub3cc\uc544\uac00\uae30"})}),(0,x.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,x.jsx)("span",{className:"text-sm text-gray-600 dark:text-gray-300",children:(null===e||void 0===e?void 0:e.name)||(null===e||void 0===e?void 0:e.email)}),(0,x.jsx)(i.A,{})]})]})})}),(0,x.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,x.jsxs)("div",{className:"mb-8",children:[(0,x.jsx)("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"\ub300\uc2dc\ubcf4\ub4dc"}),(0,x.jsx)("p",{className:"mt-2 text-gray-600 dark:text-gray-300",children:"\uacc4\uc815 \uc815\ubcf4\uc640 \uc0ac\uc6a9\ub7c9\uc744 \ud655\uc778\ud558\uace0 \uad00\ub9ac\ud558\uc138\uc694."})]}),(0,x.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,x.jsx)("div",{className:"lg:col-span-1",children:(0,x.jsxs)("div",{className:"bg-white dark:bg-dark-secondary rounded-lg shadow-sm border border-gray-200 dark:border-dark-border",children:[(0,x.jsx)("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-dark-border",children:(0,x.jsxs)("div",{className:"flex justify-between items-center",children:[(0,x.jsx)("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"\uacc4\uc815 \uc815\ubcf4"}),(0,x.jsx)("button",{onClick:()=>k(!j),className:"text-sm text-blue-600 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-300",children:j?"\ucde8\uc18c":"\uc218\uc815"})]})}),(0,x.jsx)("div",{className:"px-6 py-4 space-y-4",children:j?(0,x.jsxs)("div",{className:"space-y-4",children:[(0,x.jsxs)("div",{children:[(0,x.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"\uc774\ub984"}),(0,x.jsx)("input",{type:"text",value:p.name,onChange:e=>v({...p,name:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-dark-border rounded-md shadow-sm bg-white dark:bg-dark-tertiary text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400"})]}),(0,x.jsxs)("div",{className:"flex space-x-3",children:[(0,x.jsx)("button",{onClick:async()=>{try{const e=await r();(await fetch("https://nq5qrt16lb.execute-api.us-east-1.amazonaws.com/prod/user/profile",{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`},body:JSON.stringify(p)})).ok?(l.Ay.success("\ud504\ub85c\ud544\uc774 \uc5c5\ub370\uc774\ud2b8\ub418\uc5c8\uc2b5\ub2c8\ub2e4."),k(!1),w()):l.Ay.error("\ud504\ub85c\ud544 \uc5c5\ub370\uc774\ud2b8\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4.")}catch(e){console.error("\ud504\ub85c\ud544 \uc5c5\ub370\uc774\ud2b8 \uc624\ub958:",e),l.Ay.error("\ud504\ub85c\ud544 \uc5c5\ub370\uc774\ud2b8\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4.")}},className:"flex-1 bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors",children:"\uc800\uc7a5"}),(0,x.jsx)("button",{onClick:()=>k(!1),className:"flex-1 bg-gray-300 text-gray-700 px-4 py-2 rounded-md hover:bg-gray-400 transition-colors",children:"\ucde8\uc18c"})]})]}):(0,x.jsxs)("div",{className:"space-y-4",children:[(0,x.jsxs)("div",{children:[(0,x.jsx)("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"\uc774\uba54\uc77c"}),(0,x.jsx)("div",{className:"text-gray-900 dark:text-white",children:(null===m||void 0===m?void 0:m.email)||"-"})]}),(0,x.jsxs)("div",{children:[(0,x.jsx)("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"\uc774\ub984"}),(0,x.jsx)("div",{className:"text-gray-900 dark:text-white",children:(null===m||void 0===m?void 0:m.name)||"-"})]}),(0,x.jsxs)("div",{children:[(0,x.jsx)("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"\uacc4\uc815 \ud0c0\uc785"}),(0,x.jsx)("div",{className:"text-gray-900 dark:text-white",children:(0,x.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200",children:"\uc77c\ubc18 \uc0ac\uc6a9\uc790"})})]}),(0,x.jsxs)("div",{children:[(0,x.jsx)("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"\uac00\uc785\uc77c"}),(0,x.jsx)("div",{className:"text-gray-900 dark:text-white",children:_(null===m||void 0===m?void 0:m.created_at)})]})]})})]})}),(0,x.jsx)("div",{className:"lg:col-span-2",children:(0,x.jsxs)("div",{className:"bg-white dark:bg-dark-secondary rounded-lg shadow-sm border border-gray-200 dark:border-dark-border",children:[(0,x.jsx)("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-dark-border",children:(0,x.jsxs)("div",{className:"flex justify-between items-center",children:[(0,x.jsx)("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"\uc0ac\uc6a9\ub7c9 \uc815\ubcf4"}),(0,x.jsxs)("select",{value:N,onChange:e=>f(e.target.value),className:"text-sm border border-gray-300 dark:border-dark-border rounded-md px-2 py-1 bg-white dark:bg-dark-tertiary text-gray-900 dark:text-white",children:[(0,x.jsx)("option",{value:"day",children:"\ucd5c\uadfc 1\uc77c"}),(0,x.jsx)("option",{value:"week",children:"\ucd5c\uadfc 1\uc8fc"}),(0,x.jsx)("option",{value:"month",children:"\ucd5c\uadfc 1\uac1c\uc6d4"})]})]})}),(0,x.jsx)("div",{className:"px-6 py-4",children:g?(0,x.jsxs)("div",{className:"space-y-6",children:[(0,x.jsxs)("div",{children:[(0,x.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,x.jsx)("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"\ud1a0\ud070 \uc0ac\uc6a9\ub7c9"}),(0,x.jsxs)("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:[A(g.total_tokens)," /"," ",A(g.token_limit)]})]}),(0,x.jsx)("div",{className:"w-full bg-gray-200 dark:bg-dark-tertiary rounded-full h-2",children:(0,x.jsx)("div",{className:"h-2 rounded-full transition-all duration-300 "+(S=g.usage_percentage,S>=90?"bg-red-500":S>=70?"bg-yellow-500":"bg-blue-500"),style:{width:`${q=g.total_tokens,C=g.token_limit,C?Math.min(q/C*100,100):0}%`}})}),(0,x.jsxs)("div",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:[g.usage_percentage.toFixed(1),"% \uc0ac\uc6a9"]})]}),(0,x.jsx)("div",{children:(0,x.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,x.jsx)("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"\uc694\uccad \ud69f\uc218"}),(0,x.jsxs)("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:[A(g.total_requests),"\ud68c"]})]})}),Object.keys(g.daily_usage||{}).length>0&&(0,x.jsxs)("div",{children:[(0,x.jsx)("h3",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:"\uc77c\ubcc4 \uc0ac\uc6a9\ub7c9"}),(0,x.jsx)("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:Object.entries(g.daily_usage).sort((e,r)=>{let[a]=e,[t]=r;return t.localeCompare(a)}).map(e=>{let[r,a]=e;return(0,x.jsxs)("div",{className:"flex justify-between items-center text-sm",children:[(0,x.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:_(r)}),(0,x.jsxs)("div",{className:"text-right",children:[(0,x.jsxs)("div",{className:"text-gray-900 dark:text-white",children:[A(a.tokens)," \ud1a0\ud070"]}),(0,x.jsxs)("div",{className:"text-gray-500 dark:text-gray-400",children:[A(a.requests),"\ud68c"]})]})]},r)})})]})]}):(0,x.jsx)("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:"\uc0ac\uc6a9\ub7c9 \ub370\uc774\ud130\ub97c \ubd88\ub7ec\uc62c \uc218 \uc5c6\uc2b5\ub2c8\ub2e4."})})]})}),(0,x.jsx)("div",{className:"lg:col-span-3",children:(0,x.jsxs)("div",{className:"bg-white dark:bg-dark-secondary rounded-lg shadow-sm border border-gray-200 dark:border-dark-border",children:[(0,x.jsx)("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-dark-border",children:(0,x.jsx)("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"\uad6c\ub3c5 \uc815\ubcf4"})}),(0,x.jsx)("div",{className:"px-6 py-4",children:b?(0,x.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[(0,x.jsxs)("div",{children:[(0,x.jsx)("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"\ud50c\ub79c"}),(0,x.jsx)("div",{className:"text-gray-900 dark:text-white capitalize",children:(0,x.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium "+("free"===b.plan_type?"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200":"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200"),children:"free"===b.plan_type?"\ubb34\ub8cc \ud50c\ub79c":"\ud504\ub9ac\ubbf8\uc5c4 \ud50c\ub79c"})})]}),(0,x.jsxs)("div",{children:[(0,x.jsx)("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"\uc0c1\ud0dc"}),(0,x.jsx)("div",{className:"text-gray-900 dark:text-white",children:(0,x.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium "+("active"===b.status?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200"),children:"active"===b.status?"\ud65c\uc131":"\ube44\ud65c\uc131"})})]}),(0,x.jsxs)("div",{children:[(0,x.jsx)("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"\uc2dc\uc791\uc77c"}),(0,x.jsx)("div",{className:"text-gray-900 dark:text-white",children:_(b.start_date)})]}),(0,x.jsxs)("div",{children:[(0,x.jsx)("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"\ub9cc\ub8cc\uc77c"}),(0,x.jsx)("div",{className:"text-gray-900 dark:text-white",children:_(b.expiry_date)})]})]}):(0,x.jsx)("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:"\uad6c\ub3c5 \uc815\ubcf4\ub97c \ubd88\ub7ec\uc62c \uc218 \uc5c6\uc2b5\ub2c8\ub2e4."})})]})})]})]})]});var q,C,S}},9144:(e,r,a)=>{a.d(r,{A:()=>s});a(5043);var t=a(579);const s=e=>{let{message:r="\ub85c\ub529 \uc911..."}=e;return(0,t.jsx)("div",{className:"min-h-screen bg-gray-50 dark:bg-dark-primary flex items-center justify-center transition-colors duration-300",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),(0,t.jsx)("p",{className:"text-gray-600 dark:text-gray-300",children:r})]})})}}}]);
//# sourceMappingURL=156.729b34f8.chunk.js.map