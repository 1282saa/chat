"use strict";(self.webpackChunkbedrock_diy_frontend=self.webpackChunkbedrock_diy_frontend||[]).push([[566],{4505:(e,t,a)=>{a.d(t,{R2:()=>l,YG:()=>i,_x:()=>n,dF:()=>d,t6:()=>c,zz:()=>u});var s=a(6213);const r="https://gcm3qzoy04.execute-api.us-east-1.amazonaws.com/prod",o=s.A.create({baseURL:r,headers:{"Content-Type":"application/json"},timeout:3e5});o.interceptors.request.use(e=>{var t;return console.log("API \uc694\uccad:",null===(t=e.method)||void 0===t?void 0:t.toUpperCase(),e.url),e}),o.interceptors.response.use(e=>(console.log("API \uc751\ub2f5:",e.status,e.config.url),e),e=>{var t,a,s;return console.error("API \uc624\ub958 \uc0c1\uc138:",{status:null===(t=e.response)||void 0===t?void 0:t.status,message:e.message,code:e.code,url:null===(a=e.config)||void 0===a?void 0:a.url,data:null===(s=e.response)||void 0===s?void 0:s.data}),Promise.reject(e)});const n={getProjects:async()=>(await o.get("/projects")).data,getProject:async e=>(await o.get(`/projects/${e}`)).data,createProject:async e=>(await o.post("/projects",e)).data,updateProject:async(e,t)=>(await o.put(`/projects/${e}`,t)).data,deleteProject:async e=>(await o.delete(`/projects/${e}`)).data,getUploadUrl:async(e,t)=>(await o.get(`/projects/${e}/upload-url`,{params:{fileName:t}})).data},d={getPromptCards:async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return(await o.get(`/prompts/${e}`,{params:{includeContent:t,includeStats:a}})).data},createPromptCard:async(e,t)=>(await o.post(`/prompts/${e}`,t)).data,updatePromptCard:async(e,t,a)=>(await o.put(`/prompts/${e}/${t}`,a)).data,getPromptContent:async(e,t)=>(await o.get(`/prompts/${e}/${t}/content`)).data,deletePromptCard:async(e,t)=>(await o.delete(`/prompts/${e}/${t}`)).data,reorderPromptCards:async(e,t)=>{const a=t.map(t=>{let{promptId:a,stepOrder:s}=t;return o.put(`/prompts/${e}/${a}`,{stepOrder:s})});return{message:"\ud504\ub86c\ud504\ud2b8 \uce74\ub4dc \uc21c\uc11c\uac00 \uc5c5\ub370\uc774\ud2b8\ub418\uc5c8\uc2b5\ub2c8\ub2e4.",updatedCards:(await Promise.all(a)).map(e=>e.data)}}},i={generateTitle:async(e,t)=>{var a;console.log("\ub300\ud654 \uc0dd\uc131 \uc694\uccad \uc2dc\uc791:",{projectId:e,inputLength:t.userInput.length,historyLength:(null===(a=t.chat_history)||void 0===a?void 0:a.length)||0,timestamp:(new Date).toISOString()});try{const a=await o.post(`/projects/${e}/generate`,t);return console.log("\ub300\ud654 \uc0dd\uc131 \uc131\uacf5:",{status:a.status,mode:a.data.mode,message:a.data.message,timestamp:(new Date).toISOString()}),a.data}catch(n){var s,r;throw console.error("\ub300\ud654 \uc0dd\uc131 \uc2e4\ud328:",{code:n.code,message:n.message,status:null===(s=n.response)||void 0===s?void 0:s.status,responseData:null===(r=n.response)||void 0===r?void 0:r.data,timestamp:(new Date).toISOString()}),n}},generateTitleStream:async(e,t,a,s,n)=>{var d;console.log("\uc2a4\ud2b8\ub9ac\ubc0d \ub300\ud654 \uc0dd\uc131 \uc694\uccad \uc2dc\uc791:",{projectId:e,inputLength:t.userInput.length,historyLength:(null===(d=t.chat_history)||void 0===d?void 0:d.length)||0,timestamp:(new Date).toISOString()});try{const s=`${r}/projects/${e}/generate/stream`;console.log("\ud83d\ude80 \uc2e4\uc81c \uc2a4\ud2b8\ub9ac\ubc0d API \uc2dc\ub3c4:",s);const o=await fetch(s,{method:"POST",headers:{"Content-Type":"application/json",Accept:"text/event-stream"},body:JSON.stringify(t)});if(!o.ok)throw new Error(`HTTP ${o.status}: ${o.statusText}`);const d=o.headers.get("content-type");if(!d||!d.includes("text/event-stream"))throw console.log("\u274c \uc2a4\ud2b8\ub9ac\ubc0d \uc751\ub2f5\uc774 \uc544\ub2d8, \ud3f4\ubc31 \ucc98\ub9ac"),new Error("\uc2a4\ud2b8\ub9ac\ubc0d \uc751\ub2f5\uc774 \uc544\ub2d9\ub2c8\ub2e4");const l=o.body.getReader(),c=new TextDecoder;let u="",p="";try{for(;;){const{done:e,value:t}=await l.read();if(e)break;u+=c.decode(t,{stream:!0});const s=u.split("\n");u=s.pop()||"";for(const r of s)if(r.startsWith("data: "))try{const e=JSON.parse(r.slice(6));if("start"===e.type)console.log("\u2705 \uc2a4\ud2b8\ub9ac\ubc0d \uc2dc\uc791");else if("chunk"===e.type)p+=e.response,a&&a(e.response,{content:e.response});else{if("complete"===e.type)return console.log("\u2705 \uc2a4\ud2b8\ub9ac\ubc0d \uc644\ub8cc"),n&&n({result:e.fullResponse||p,timestamp:(new Date).toISOString()}),{result:e.fullResponse||p};if("error"===e.type)throw new Error(e.error)}}catch(i){console.error("JSON \ud30c\uc2f1 \uc624\ub958:",i)}}}finally{l.releaseLock()}return{result:p}}catch(l){console.log("\u26a0\ufe0f \uc2a4\ud2b8\ub9ac\ubc0d \uc2e4\ud328, \ud3f4\ubc31 \ucc98\ub9ac:",l.message);try{const s=await o.post(`/projects/${e}/generate`,t);if(console.log("\u2705 \ud3f4\ubc31 API \uc131\uacf5:",{mode:s.data.mode,timestamp:(new Date).toISOString()}),s.data.result&&a){const e=s.data.result.split(" ");for(let t=0;t<e.length;t++){const s=e[t]+(t<e.length-1?" ":"");a(s,{content:s}),await new Promise(e=>setTimeout(e,30))}}return n&&n({result:s.data.result,model_info:s.data.model_info,performance_metrics:s.data.performance_metrics,timestamp:(new Date).toISOString()}),s.data}catch(c){throw console.error("\u274c \ud3f4\ubc31 API\ub3c4 \uc2e4\ud328:",c),s&&s(new Error("\uc11c\ube44\uc2a4\uc5d0 \uc5f0\uacb0\ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4. \uc7a0\uc2dc \ud6c4 \ub2e4\uc2dc \uc2dc\ub3c4\ud574\uc8fc\uc138\uc694.")),new Error("\uc11c\ube44\uc2a4\ub97c \uc0ac\uc6a9\ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.")}}},getExecutionStatus:async e=>({status:"SUCCEEDED",output:"{}"})},l={isAuthenticated:()=>!0,getCurrentUser:()=>({id:"user",email:"user@example.com",name:"\uc0ac\uc6a9\uc790"}),signin:async e=>(await o.post("/auth/signin",e)).data,signup:async e=>(await o.post("/auth/signup",e)).data,signout:async()=>(await o.post("/auth/signout")).data,verifyEmail:async e=>(await o.post("/auth/verify-email",e)).data,forgotPassword:async e=>(await o.post("/auth/forgot-password",{email:e})).data,confirmPassword:async e=>(await o.post("/auth/confirm-password",e)).data},c=e=>{var t,a,s,r,o,n,d;if(console.error("API \uc624\ub958 \uc0c1\uc138 \ubd84\uc11d:",{message:e.message,code:e.code,status:null===(t=e.response)||void 0===t?void 0:t.status,statusText:null===(a=e.response)||void 0===a?void 0:a.statusText,data:null===(s=e.response)||void 0===s?void 0:s.data,timestamp:(new Date).toISOString()}),403===(null===(r=e.response)||void 0===r?void 0:r.status))return{message:"API \uc811\uadfc\uc774 \ucc28\ub2e8\ub418\uc5c8\uc2b5\ub2c8\ub2e4. \uad00\ub9ac\uc790\uc5d0\uac8c \ubb38\uc758\ud558\uc138\uc694.",statusCode:403,errorType:"FORBIDDEN"};if(504===(null===(o=e.response)||void 0===o?void 0:o.status))return{message:"\uc11c\ubc84 \uc751\ub2f5 \uc2dc\uac04\uc774 \ucd08\uacfc\ub418\uc5c8\uc2b5\ub2c8\ub2e4. \uc694\uccad\uc744 \uac04\uc18c\ud654\ud558\uac70\ub098 \uc7a0\uc2dc \ud6c4 \ub2e4\uc2dc \uc2dc\ub3c4\ud574\uc8fc\uc138\uc694.",statusCode:504,errorType:"GATEWAY_TIMEOUT"};if(null!==(n=e.message)&&void 0!==n&&n.includes("CORS")||"ERR_NETWORK"===e.code||null!==(d=e.message)&&void 0!==d&&d.includes("Access-Control-Allow-Origin"))return{message:"\uc11c\ubc84 \uc5f0\uacb0 \uc124\uc815\uc5d0 \ubb38\uc81c\uac00 \uc788\uc2b5\ub2c8\ub2e4. \ud398\uc774\uc9c0\ub97c \uc0c8\ub85c\uace0\uce68\ud558\uace0 \ub2e4\uc2dc \uc2dc\ub3c4\ud574\uc8fc\uc138\uc694.",statusCode:0,errorType:"CORS_ERROR"};if("ECONNABORTED"===e.code)return{message:"\uc694\uccad \ucc98\ub9ac \uc2dc\uac04\uc774 \ucd08\uacfc\ub418\uc5c8\uc2b5\ub2c8\ub2e4. \uc785\ub825\uc744 \uc904\uc774\uac70\ub098 \uc7a0\uc2dc \ud6c4 \ub2e4\uc2dc \uc2dc\ub3c4\ud574\uc8fc\uc138\uc694.",statusCode:0,errorType:"TIMEOUT_ERROR"};if(!e.response)return e.request?{message:"\uc11c\ubc84\uc5d0 \uc5f0\uacb0\ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4. \ub124\ud2b8\uc6cc\ud06c \uc5f0\uacb0\uc744 \ud655\uc778\ud574\uc8fc\uc138\uc694",statusCode:0,errorType:"NETWORK_ERROR"}:{message:`\uc694\uccad \uc624\ub958: ${e.message}`,statusCode:-1,errorType:"REQUEST_ERROR"};{var i,l;const t=e.response.status,a=(null===(i=e.response.data)||void 0===i?void 0:i.message)||(null===(l=e.response.data)||void 0===l?void 0:l.error)||"\uc11c\ubc84 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4";switch(t){case 400:return{message:`\uc798\ubabb\ub41c \uc694\uccad: ${a}`,statusCode:400};case 401:return{message:"\uc778\uc99d\uc774 \ud544\uc694\ud569\ub2c8\ub2e4",statusCode:401};case 404:return{message:"\uc694\uccad\ud55c \ub9ac\uc18c\uc2a4\ub97c \ucc3e\uc744 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4",statusCode:404};case 429:return{message:"\uc694\uccad\uc774 \ub108\ubb34 \ub9ce\uc2b5\ub2c8\ub2e4. \uc7a0\uc2dc \ud6c4 \ub2e4\uc2dc \uc2dc\ub3c4\ud574\uc8fc\uc138\uc694",statusCode:429};case 500:return{message:"\uc11c\ubc84 \ub0b4\ubd80 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4",statusCode:500};default:return{message:`\uc11c\ubc84 \uc624\ub958 (${t}): ${a}`,statusCode:t}}}},u=(e,t)=>{let a=[...e];if(t.searchQuery){const e=t.searchQuery.toLowerCase();a=a.filter(t=>{var a,s,r;return(null===(a=t.name)||void 0===a?void 0:a.toLowerCase().includes(e))||(null===(s=t.description)||void 0===s?void 0:s.toLowerCase().includes(e))||(null===(r=t.tags)||void 0===r?void 0:r.some(t=>t.toLowerCase().includes(e)))})}switch(t.sortBy){case"created":a.sort((e,t)=>new Date(t.createdAt)-new Date(e.createdAt));break;case"updated":a.sort((e,t)=>new Date(t.updatedAt)-new Date(e.updatedAt));break;case"name":a.sort((e,t)=>{var a;return null===(a=e.name)||void 0===a?void 0:a.localeCompare(t.name)})}return a}},4566:(e,t,a)=>{a.r(t),a.d(t,{default:()=>n});var s=a(5043),r=a(4505),o=a(579);const n=e=>{let{email:t,onVerificationSuccess:a,onBackToLogin:n}=e;const[d,i]=(0,s.useState)(""),[l,c]=(0,s.useState)(!1),[u,p]=(0,s.useState)(""),[m,g]=(0,s.useState)(!1);return(0,o.jsx)("div",{className:"min-h-screen flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:(0,o.jsxs)("div",{className:"max-w-md w-full space-y-8",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900 dark:text-white",children:"\uc774\uba54\uc77c \uc778\uc99d"}),(0,o.jsxs)("p",{className:"mt-2 text-center text-sm text-gray-600 dark:text-gray-300",children:[(0,o.jsx)("span",{className:"font-medium",children:t}),"\ub85c",(0,o.jsx)("br",{}),"\uc778\uc99d \ucf54\ub4dc\uac00 \uc804\uc1a1\ub418\uc5c8\uc2b5\ub2c8\ub2e4."]})]}),(0,o.jsxs)("form",{className:"mt-8 space-y-6",onSubmit:async e=>{e.preventDefault(),c(!0),p("");try{const e=await r.R2.verifyEmail({email:t,code:d});console.log("\uc774\uba54\uc77c \uc778\uc99d \uc131\uacf5:",e),a&&a(e)}catch(u){const t=(0,r.t6)(u);p(t.message)}finally{c(!1)}},children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{htmlFor:"code",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"\uc778\uc99d \ucf54\ub4dc (6\uc790\ub9ac)"}),(0,o.jsx)("input",{id:"code",name:"code",type:"text",required:!0,maxLength:6,value:d,onChange:e=>i(e.target.value),className:"mt-1 appearance-none relative block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 placeholder-gray-500 dark:placeholder-gray-400 text-gray-900 dark:text-white bg-white dark:bg-gray-700 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 text-center text-2xl font-mono tracking-widest sm:text-sm transition-colors duration-200",placeholder:"000000"})]}),u&&(0,o.jsx)("div",{className:"bg-red-50 dark:bg-red-900 border border-red-200 dark:border-red-700 text-red-700 dark:text-red-300 px-4 py-3 rounded relative",children:u}),(0,o.jsxs)("div",{className:"space-y-3",children:[(0,o.jsx)("button",{type:"submit",disabled:l||6!==d.length,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",children:l?"\uc778\uc99d \uc911...":"\uc778\uc99d \uc644\ub8cc"}),(0,o.jsx)("button",{type:"button",onClick:async()=>{g(!0),p("");try{await r.R2.signup({email:t,password:"dummy",fullname:""}),alert("\uc778\uc99d \ucf54\ub4dc\uac00 \ub2e4\uc2dc \uc804\uc1a1\ub418\uc5c8\uc2b5\ub2c8\ub2e4.")}catch(u){const t=(0,r.t6)(u);t.message.includes("\uc774\ubbf8 \uc874\uc7ac")?alert("\uc778\uc99d \ucf54\ub4dc\uac00 \ub2e4\uc2dc \uc804\uc1a1\ub418\uc5c8\uc2b5\ub2c8\ub2e4."):p(t.message)}finally{g(!1)}},disabled:m,className:"w-full text-center py-2 px-4 border border-gray-300 dark:border-gray-600 text-sm font-medium rounded-md text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200",children:m?"\uc804\uc1a1 \uc911...":"\uc778\uc99d \ucf54\ub4dc \ub2e4\uc2dc \ubc1b\uae30"})]}),(0,o.jsx)("div",{className:"text-center",children:(0,o.jsx)("button",{type:"button",onClick:n,className:"text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 text-sm transition-colors duration-200",children:"\ub85c\uadf8\uc778\uc73c\ub85c \ub3cc\uc544\uac00\uae30"})})]})]})})}}}]);
//# sourceMappingURL=566.6e6cb1df.chunk.js.map