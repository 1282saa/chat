"use strict";(self.webpackChunkbedrock_diy_frontend=self.webpackChunkbedrock_diy_frontend||[]).push([[164],{1164:(e,t,r)=>{r.r(t),r.d(t,{default:()=>q});var a=r(5043),s=r(3216),n=r(3768),o=r(5442),l=r(4505),i=(r(9144),r(8662)),d=r(7985),c=r(2811),u=r(9248),m=r(7591),x=r(6214),g=r(3063),p=r(5799),h=r(2302),b=r(7438);const y=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"\ud074\ub9bd\ubcf4\ub4dc\uc5d0 \ubcf5\uc0ac\ub418\uc5c8\uc2b5\ub2c8\ub2e4!",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"\ubcf5\uc0ac\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4.";try{return await navigator.clipboard.writeText(e),n.oR.success(t),!0}catch(a){return console.error("\ubcf5\uc0ac \uc2e4\ud328:",a),n.oR.error(r),!1}},v=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];const[s,o]=(0,a.useState)([]),[i,d]=(0,a.useState)(""),[c,u]=(0,a.useState)(null),[m,x]=(0,a.useState)(!0),[g,p]=(0,a.useState)(24),[h,b]=(0,a.useState)("anthropic.claude-3-5-sonnet-20241022-v2:0"),v=(0,a.useRef)(null),k=(0,a.useRef)(null),f=(0,a.useRef)(null),j=(0,a.useRef)(null),N=(0,a.useRef)(null),[w,S]=(0,a.useState)(!1),C=(0,a.useRef)(null),_=(0,a.useRef)(0),{isExecuting:A,isStreaming:E,executeOrchestration:R,pollOrchestrationResult:I,resetOrchestration:P}=(e=>{const[t,r]=(0,a.useState)(!1),[s,o]=(0,a.useState)(null),[i,d]=(0,a.useState)(null),[c,u]=(0,a.useState)(!1),m=(0,a.useCallback)(async function(t){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!t.trim())return n.oR.error("\uba54\uc2dc\uc9c0\ub97c \uc785\ub825\ud574\uc8fc\uc138\uc694."),null;try{r(!0),d("STARTING");const s={userInput:t,chat_history:a.chat_history||[],prompt_cards:a.prompt_cards||[],modelId:a.modelId||null};if(console.log("\ud83d\ude80 \ub300\ud654 \uc0dd\uc131 \uc694\uccad \uc2dc\uc791:",{projectId:e,inputLength:t.length,historyLength:s.chat_history.length,promptCardsCount:s.prompt_cards.length,useStreaming:!0===a.useStreaming,modelId:s.modelId,timestamp:(new Date).toISOString()}),!0===a.useStreaming){u(!0);const t=a.onChunk||(()=>{}),o=e=>{var t,s,o,l;console.error("\ud83d\udd27 \uc2a4\ud2b8\ub9ac\ubc0d \uc624\ub958 \ucc98\ub9ac:",e),r(!1),u(!1),d("FAILED"),null!==(t=e.message)&&void 0!==t&&t.includes("Gateway Timeout")||null!==(s=e.message)&&void 0!==s&&s.includes("504")||"ECONNABORTED"===e.code?n.oR.error("\uc11c\ubc84 \uc751\ub2f5 \uc2dc\uac04\uc774 \ucd08\uacfc\ub418\uc5c8\uc2b5\ub2c8\ub2e4. \uc694\uccad\uc744 \uac04\ub2e8\ud788 \ud558\uac70\ub098 \uc7a0\uc2dc \ud6c4 \ub2e4\uc2dc \uc2dc\ub3c4\ud574\uc8fc\uc138\uc694."):null!==(o=e.message)&&void 0!==o&&o.includes("CORS")||null!==(l=e.message)&&void 0!==l&&l.includes("Network Error")?n.oR.error("\uc11c\ubc84 \uc5f0\uacb0\uc5d0 \ubb38\uc81c\uac00 \uc788\uc2b5\ub2c8\ub2e4. \uc0c8\ub85c\uace0\uce68 \ud6c4 \ub2e4\uc2dc \uc2dc\ub3c4\ud574\uc8fc\uc138\uc694."):n.oR.error("\ucc98\ub9ac \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4. \uc7a0\uc2dc \ud6c4 \ub2e4\uc2dc \uc2dc\ub3c4\ud574\uc8fc\uc138\uc694."),a.onError&&a.onError(e)},i=e=>{var t;console.log("\u2705 \uc2a4\ud2b8\ub9ac\ubc0d \uc644\ub8cc:",{resultLength:(null===(t=e.result)||void 0===t?void 0:t.length)||0,timestamp:(new Date).toISOString()}),r(!1),u(!1),d("COMPLETED"),a.onComplete&&a.onComplete(e)};try{return await l.YG.generateTitleStream(e,s,t,o,i)}catch(b){throw console.error("\ud83d\udd27 \uc2a4\ud2b8\ub9ac\ubc0d \ucd5c\uc885 \uc2e4\ud328:",b),u(!1),r(!1),d("FAILED"),n.oR.error("\uc11c\ube44\uc2a4\uc5d0 \uc77c\uc2dc\uc801\uc778 \ubb38\uc81c\uac00 \uc788\uc2b5\ub2c8\ub2e4. \uc7a0\uc2dc \ud6c4 \ub2e4\uc2dc \uc2dc\ub3c4\ud574\uc8fc\uc138\uc694."),b}}console.log("\ud83d\udcc4 \uc77c\ubc18 API \ud638\ucd9c \uc2dc\uc791...");const o=await l.YG.generateTitle(e,s);return console.log("\u2705 \ub300\ud654 \uc0dd\uc131 \uc644\ub8cc:",{mode:o.mode,message:o.message,timestamp:(new Date).toISOString()}),r(!1),d("COMPLETED"),o}catch(y){var s,o,i,c,m,x,g,p,h;throw console.error("\u274c \uc81c\ubaa9 \uc0dd\uc131 \uc2e4\ud328:",{error:y.message,code:y.code,status:null===(s=y.response)||void 0===s?void 0:s.status,timestamp:(new Date).toISOString()}),r(!1),u(!1),d("FAILED"),504===(null===(o=y.response)||void 0===o?void 0:o.status)?n.oR.error("\uc11c\ubc84 \uc751\ub2f5 \uc2dc\uac04\uc774 \ucd08\uacfc\ub418\uc5c8\uc2b5\ub2c8\ub2e4. \uc785\ub825\uc744 \uac04\uc18c\ud654\ud558\uac70\ub098 \uc7a0\uc2dc \ud6c4 \ub2e4\uc2dc \uc2dc\ub3c4\ud574\uc8fc\uc138\uc694."):null!==(i=y.message)&&void 0!==i&&i.includes("CORS")||"ERR_NETWORK"===y.code?n.oR.error("\uc11c\ubc84 \uc5f0\uacb0\uc5d0 \ubb38\uc81c\uac00 \uc788\uc2b5\ub2c8\ub2e4. \ud398\uc774\uc9c0\ub97c \uc0c8\ub85c\uace0\uce68\ud558\uace0 \ub2e4\uc2dc \uc2dc\ub3c4\ud574\uc8fc\uc138\uc694."):400===(null===(c=y.response)||void 0===c?void 0:c.status)&&null!==(m=y.response)&&void 0!==m&&null!==(x=m.data)&&void 0!==x&&x.setup_required?n.oR.error("\ud504\ub86c\ud504\ud2b8 \uce74\ub4dc\ub97c \uba3c\uc800 \uc124\uc815\ud574\uc8fc\uc138\uc694!"):"ECONNABORTED"===y.code?n.oR.error("\uc694\uccad \ucc98\ub9ac \uc2dc\uac04\uc774 \ucd08\uacfc\ub418\uc5c8\uc2b5\ub2c8\ub2e4. \uc785\ub825\uc744 \uc904\uc774\uac70\ub098 \uc7a0\uc2dc \ud6c4 \ub2e4\uc2dc \uc2dc\ub3c4\ud574\uc8fc\uc138\uc694."):500===(null===(g=y.response)||void 0===g?void 0:g.status)?n.oR.error("\uc11c\ubc84\uc5d0 \uc77c\uc2dc\uc801\uc778 \ubb38\uc81c\uac00 \uc788\uc2b5\ub2c8\ub2e4. \uc7a0\uc2dc \ud6c4 \ub2e4\uc2dc \uc2dc\ub3c4\ud574\uc8fc\uc138\uc694."):403===(null===(p=y.response)||void 0===p?void 0:p.status)?n.oR.error("\uad8c\ud55c\uc774 \uc5c6\uc2b5\ub2c8\ub2e4. \ub85c\uadf8\uc778 \uc0c1\ud0dc\ub97c \ud655\uc778\ud574\uc8fc\uc138\uc694."):429===(null===(h=y.response)||void 0===h?void 0:h.status)?n.oR.error("\uc694\uccad\uc774 \ub108\ubb34 \ub9ce\uc2b5\ub2c8\ub2e4. \uc7a0\uc2dc \ud6c4 \ub2e4\uc2dc \uc2dc\ub3c4\ud574\uc8fc\uc138\uc694."):n.oR.error("\ucc98\ub9ac \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4. \ub124\ud2b8\uc6cc\ud06c \uc5f0\uacb0\uc744 \ud655\uc778\ud558\uace0 \ub2e4\uc2dc \uc2dc\ub3c4\ud574\uc8fc\uc138\uc694."),y}},[e]),x=(0,a.useCallback)(async(e,t,a)=>{if(c)return;const s=async()=>{try{const n=await l.YG.getExecutionStatus(e);d(n.status),"SUCCEEDED"===n.status?(r(!1),d("COMPLETED"),t&&t(n)):"FAILED"===n.status?(r(!1),d("FAILED"),a&&a(new Error("\ucc98\ub9ac \uc2e4\ud328"))):"RUNNING"===n.status&&setTimeout(s,3e3)}catch(n){console.error("\uc2e4\ud589 \uc0c1\ud0dc \uc870\ud68c \uc2e4\ud328:",n),r(!1),d("FAILED"),a&&a(n)}};s()},[e,c]),g=(0,a.useCallback)(()=>{r(!1),u(!1),o(null),d(null)},[]);return{isExecuting:t,isStreaming:c,currentExecution:s,executionStatus:i,executeOrchestration:m,pollOrchestrationResult:x,resetOrchestration:g}})(e),{isConnected:D,isConnecting:T,error:L,startStreaming:O,addMessageListener:M,removeMessageListener:W}=(e=>{const[t,r]=(0,a.useState)(!1),[s,n]=(0,a.useState)(!1),[o,l]=(0,a.useState)(null),i=(0,a.useRef)(null),d=(0,a.useRef)(null),c=(0,a.useRef)(0),u=(0,a.useCallback)(()=>{const e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_AWS_REGION:"us-east-1",REACT_APP_USER_POOL_ID:"us-east-1_4r8jFAnMV",REACT_APP_USER_POOL_CLIENT_ID:"71d45chj5280cavgvtu53r9fmb",REACT_APP_API_URL:"https://gcm3qzoy04.execute-api.us-east-1.amazonaws.com/prod",REACT_APP_ENVIRONMENT:"development"}.REACT_APP_WS_URL||"wss://na17isxiri.execute-api.us-east-1.amazonaws.com/prod";if(!e.startsWith("wss://")&&!e.startsWith("ws://"))return console.error("\uc798\ubabb\ub41c WebSocket URL \ud615\uc2dd:",e),null;const t=e.replace(/\/$/,"");return console.log("WebSocket URL \ud655\uc778:",t),console.log("\ud658\uacbd\ubcc0\uc218 REACT_APP_WS_URL:",{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_AWS_REGION:"us-east-1",REACT_APP_USER_POOL_ID:"us-east-1_4r8jFAnMV",REACT_APP_USER_POOL_CLIENT_ID:"71d45chj5280cavgvtu53r9fmb",REACT_APP_API_URL:"https://gcm3qzoy04.execute-api.us-east-1.amazonaws.com/prod",REACT_APP_ENVIRONMENT:"development"}.REACT_APP_WS_URL),t},[]),m=(0,a.useCallback)(()=>{var e,t;if((null===(e=i.current)||void 0===e?void 0:e.readyState)!==WebSocket.OPEN&&(null===(t=i.current)||void 0===t?void 0:t.readyState)!==WebSocket.CONNECTING){i.current&&(i.current.close(),i.current=null),n(!0),l(null);try{const e=u();if(!e)return l("\uc720\ud6a8\ud558\uc9c0 \uc54a\uc740 WebSocket URL"),void n(!1);console.log("WebSocket \uc5f0\uacb0 \uc2dc\ub3c4:",e),console.log("\ube0c\ub77c\uc6b0\uc800 WebSocket \uc9c0\uc6d0:",!!window.WebSocket),window.wsConnectStart=Date.now(),i.current=new WebSocket(e);const t=setTimeout(()=>{var e;(null===(e=i.current)||void 0===e?void 0:e.readyState)===WebSocket.CONNECTING&&(console.error("WebSocket \uc5f0\uacb0 \uc2dc\uac04 \ucd08\uacfc"),i.current.close(),l("\uc5f0\uacb0 \uc2dc\uac04\uc774 \ucd08\uacfc\ub418\uc5c8\uc2b5\ub2c8\ub2e4"),n(!1))},1e4);i.current.onopen=e=>{var a,s,o;clearTimeout(t),console.log("\ud83d\udfe2 WebSocket \uc5f0\uacb0 \uc131\uacf5!"),console.log("- Event:",e),console.log("- URL:",null===(a=i.current)||void 0===a?void 0:a.url),console.log("- Protocol:",null===(s=i.current)||void 0===s?void 0:s.protocol),console.log("- Extensions:",null===(o=i.current)||void 0===o?void 0:o.extensions),r(!0),n(!1),l(null),c.current=0},i.current.onclose=e=>{clearTimeout(t);const a=Date.now()-(window.wsConnectStart||0);if(console.log("\ud83d\udd34 WebSocket \uc5f0\uacb0 \uc885\ub8cc:"),console.log("- Code:",e.code),console.log("- Reason:",e.reason||"(no reason provided)"),console.log("- WasClean:",e.wasClean),console.log("- Connection duration:",a+"ms"),r(!1),n(!1),a<500){console.error("\u26a0\ufe0f WebSocket\uc774 \uc989\uc2dc \uc885\ub8cc\ub428 - \uc11c\ubc84 \ubb38\uc81c \uac00\ub2a5\uc131");let t="\uc11c\ubc84 \uc5f0\uacb0\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4.";switch(e.code){case 1006:t="\ube44\uc815\uc0c1\uc801\uc778 \uc5f0\uacb0 \uc885\ub8cc (\ub124\ud2b8\uc6cc\ud06c \ubb38\uc81c \uac00\ub2a5\uc131)";break;case 1002:t="\ud504\ub85c\ud1a0\ucf5c \uc624\ub958";break;case 1003:t="\uc9c0\uc6d0\ud558\uc9c0 \uc54a\ub294 \ub370\uc774\ud130 \ud0c0\uc785";break;case 1011:t="\uc11c\ubc84 \ub0b4\ubd80 \uc624\ub958"}return void l(t)}if(1e3!==e.code&&c.current<5){const e=Math.min(1e3*Math.pow(2,c.current),3e4);console.log(`\ud83d\udd04 ${e}ms \ud6c4 \uc7ac\uc5f0\uacb0 \uc2dc\ub3c4 (${c.current+1}/5)`),d.current=setTimeout(()=>{c.current++,m()},e)}else c.current>=5&&l("\ucd5c\ub300 \uc7ac\uc5f0\uacb0 \uc2dc\ub3c4 \ud69f\uc218\uc5d0 \ub3c4\ub2ec\ud588\uc2b5\ub2c8\ub2e4.")},i.current.onerror=e=>{var r,a;clearTimeout(t),console.error("\ud83d\udca5 WebSocket \uc624\ub958:",e),console.log("- ReadyState:",null===(r=i.current)||void 0===r?void 0:r.readyState),console.log("- URL:",null===(a=i.current)||void 0===a?void 0:a.url),l("WebSocket \uc5f0\uacb0 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4"),n(!1)}}catch(a){console.error("\ud83d\udca5 WebSocket \uc0dd\uc131 \uc2e4\ud328:",a),l("WebSocket \uc5f0\uacb0\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4: "+a.message),n(!1)}}else console.log("\uc774\ubbf8 \uc5f0\uacb0\ub41c WebSocket\uc774 \uc788\uc2b5\ub2c8\ub2e4 (readyState:",i.current.readyState,")")},[u]),x=(0,a.useCallback)(()=>{d.current&&(clearTimeout(d.current),d.current=null),i.current&&(i.current.close(1e3,"Manual disconnect"),i.current=null),r(!1),n(!1),c.current=0},[]),g=(0,a.useCallback)(e=>{var t;return(null===(t=i.current)||void 0===t?void 0:t.readyState)===WebSocket.OPEN?(i.current.send(JSON.stringify(e)),!0):(console.error("WebSocket\uc774 \uc5f0\uacb0\ub418\uc9c0 \uc54a\uc558\uc2b5\ub2c8\ub2e4"),l("WebSocket \uc5f0\uacb0\uc774 \ud544\uc694\ud569\ub2c8\ub2e4"),!1)},[]),p=(0,a.useCallback)(function(r){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(!t)return l("WebSocket \uc5f0\uacb0\uc774 \ud544\uc694\ud569\ub2c8\ub2e4"),!1;const o={action:"stream",projectId:e,userInput:r,chat_history:a,prompt_cards:s,modelId:n};return console.log("WebSocket \uba54\uc2dc\uc9c0 \uc804\uc1a1:",{action:o.action,projectId:o.projectId,inputLength:r.length,historyLength:a.length,promptCardsCount:s.length}),g(o)},[t,e,g]),h=(0,a.useCallback)(e=>{i.current&&i.current.addEventListener("message",e)},[]),b=(0,a.useCallback)(e=>{i.current&&i.current.removeEventListener("message",e)},[]);return(0,a.useEffect)(()=>{const e=setTimeout(()=>{m()},100);return()=>{clearTimeout(e),x()}},[]),(0,a.useEffect)(()=>{t&&e&&(console.log("ProjectId \ubcc0\uacbd\ub428, \uc7ac\uc5f0\uacb0 \uc911:",e),x(),setTimeout(m,200))},[e]),{isConnected:t,isConnecting:s,error:o,connect:m,disconnect:x,sendMessage:g,startStreaming:p,addMessageListener:h,removeMessageListener:b}})(e);(0,a.useEffect)(()=>{o([])},[t]);const H=(0,a.useCallback)(()=>{if(!C.current)return;const e=C.current,t=e.scrollTop,r=e.scrollHeight-e.clientHeight;if(Math.abs(t-_.current)>2){S(!(t>=r-20))}_.current=t},[]),U=(0,a.useCallback)(()=>{!w&&j.current&&j.current.scrollIntoView({behavior:"smooth"})},[w]);(0,a.useEffect)(()=>{U()},[s,U]),(0,a.useEffect)(()=>{const e=e=>{try{const t=JSON.parse(e.data);console.log("WebSocket \uba54\uc2dc\uc9c0 \uc218\uc2e0:",t);const r=v.current;switch(t.type){case"stream_start":console.log("WebSocket \uc2a4\ud2b8\ub9ac\ubc0d \uc2dc\uc791");break;case"progress":console.log(`\uc9c4\ud589 \uc0c1\ud669: ${t.step} (${t.progress}%)`);break;case"stream_chunk":r&&(o(e=>{const a=[...e],s=a.findIndex(e=>e.id===r);if(-1!==s){const e=a[s].content||"";a[s]={...a[s],content:e+t.content,isLoading:!0,isStreaming:!0}}return a}),w||U());break;case"stream_complete":r&&(o(e=>{const a=[...e],s=a.findIndex(e=>e.id===r);return-1!==s&&(a[s]={...a[s],content:t.fullContent,isLoading:!1,isStreaming:!1,timestamp:new Date}),a}),v.current=null,U());break;case"error":console.error("WebSocket \uc2a4\ud2b8\ub9ac\ubc0d \uc624\ub958:",t.message),r&&(o(e=>{const t=[...e],a=t.findIndex(e=>e.id===r);return-1!==a&&(t[a]={...t[a],content:"\uba54\uc2dc\uc9c0 \ucc98\ub9ac \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4. \ub2e4\uc2dc \uc2dc\ub3c4\ud574\uc8fc\uc138\uc694.",isLoading:!1,isStreaming:!1,isError:!0,timestamp:new Date}),t}),v.current=null),n.oR.error(t.message);break;default:console.log("\uc54c \uc218 \uc5c6\ub294 WebSocket \uba54\uc2dc\uc9c0 \ud0c0\uc785:",t.type)}}catch(t){console.error("WebSocket \uba54\uc2dc\uc9c0 \ud30c\uc2f1 \uc624\ub958:",t)}};return D&&M(e),()=>{D&&W(e)}},[D,M,W,U]);const z=(0,a.useCallback)((e,t)=>{const r=v.current;console.log("\uccad\ud06c \uc218\uc2e0:",e,"\uc2a4\ud2b8\ub9ac\ubc0d ID:",r),r?(o(t=>{const a=[...t],s=a.findIndex(e=>e.id===r);return-1!==s?(a[s]={...a[s],content:a[s].content+e,isLoading:!0,isStreaming:!0},console.log("\uc2a4\ud2b8\ub9ac\ubc0d \uba54\uc2dc\uc9c0 \uc5c5\ub370\uc774\ud2b8 \uc131\uacf5:",a[s].content)):console.error("\uc2a4\ud2b8\ub9ac\ubc0d \uba54\uc2dc\uc9c0\ub97c \ucc3e\uc744 \uc218 \uc5c6\uc74c:",r),a}),w||U()):console.error("\uc2a4\ud2b8\ub9ac\ubc0d ID\uac00 \uc5c6\uc2b5\ub2c8\ub2e4!")},[U,w]),F=(0,a.useCallback)(e=>{const t=v.current;console.log("\uc2a4\ud2b8\ub9ac\ubc0d \uc644\ub8cc:",e,"\uc2a4\ud2b8\ub9ac\ubc0d ID:",t),t?(o(r=>{const a=[...r],s=a.findIndex(e=>e.id===t);return-1!==s?(a[s]={...a[s],content:e.result,isLoading:!1,isStreaming:!1,performance_metrics:e.performance_metrics,model_info:e.model_info,timestamp:new Date},console.log("\uc2a4\ud2b8\ub9ac\ubc0d \uc644\ub8cc \ucc98\ub9ac \uc131\uacf5:",a[s].content)):console.error("\uc2a4\ud2b8\ub9ac\ubc0d \uc644\ub8cc \ucc98\ub9ac \uc911 \uba54\uc2dc\uc9c0\ub97c \ucc3e\uc744 \uc218 \uc5c6\uc74c:",t),a}),v.current=null,console.log("WebSocket \uc2a4\ud2b8\ub9ac\ubc0d \uc644\ub8cc - \uc785\ub825 \ud65c\uc131\ud654"),x(!0),U()):console.error("\uc2a4\ud2b8\ub9ac\ubc0d \uc644\ub8cc \ucc98\ub9ac \uc911 ID\uac00 \uc5c6\uc2b5\ub2c8\ub2e4!")},[U]),$=(0,a.useCallback)(()=>{console.log("\uc0dd\uc131 \uc911\ub2e8 \uc694\uccad"),k.current&&(k.current.close(),k.current=null),f.current&&(f.current=null);const e=v.current;e&&(o(t=>{const r=[...t],a=r.findIndex(t=>t.id===e);return-1!==a&&(r[a]={...r[a],content:r[a].content+"\n\n[\uc0dd\uc131\uc774 \uc911\ub2e8\ub418\uc5c8\uc2b5\ub2c8\ub2e4]",isLoading:!1,isStreaming:!1,timestamp:new Date}),r}),v.current=null),x(!0),P(),n.oR.success("\uc0dd\uc131\uc774 \uc911\ub2e8\ub418\uc5c8\uc2b5\ub2c8\ub2e4")},[P]),q=(0,a.useCallback)(e=>{if(!e.trim())return void p(24);const t=e.split("\n").length,r=Math.ceil(e.length/80),a=Math.max(t,r);let s;s=a<=3?24+22*(a-1):a<=10?150+15*(a-6):Math.min(400,150+12*(a-6)),p(Math.max(24,s))},[]),G=(0,a.useCallback)(e=>{d(e),q(e)},[q]),K=(0,a.useCallback)(async()=>{if(console.log("\ud574\ub4e4 \uc804\uc1a1 \ud638\ucd9c:",{inputValue:i.trim(),isGenerating:A,canSendMessage:m}),!i.trim()||A)return void console.log("\uc804\uc1a1 \uc911\ub2e8: \uc870\uac74 \ubd80\uc871");console.log("\uc785\ub825 \ube44\ud65c\uc131\ud654"),x(!1);const e={id:"user-"+Date.now(),type:"user",content:i.trim(),timestamp:new Date},t="streaming-"+Date.now();v.current=t,console.log("\uc0c8 \uc2a4\ud2b8\ub9ac\ubc0d \uba54\uc2dc\uc9c0 ID \uc0dd\uc131:",t);const a={id:t,type:"assistant",content:"",timestamp:new Date,isLoading:!0,isStreaming:!0};o(t=>[...t,e,a]),d(""),p(24);const n=[...s,e],l=n.filter(e=>!e.isLoading&&!e.isError&&!e.isStreaming).map(e=>({role:"user"===e.type?"user":"assistant",content:e.content})),c=l.slice(-50);console.log("\ub300\ud654 \ud788\uc2a4\ud1a0\ub9ac \uc0dd\uc131:",{totalMessages:n.length,fullHistoryLength:l.length,trimmedHistoryLength:c.length,maxHistoryLength:50,recentHistory:c.slice(-6)});try{const t=(Array.isArray(r)?r:[]).filter(e=>!1!==e.isActive&&!1!==e.enabled).map(e=>({promptId:e.promptId||e.prompt_id,title:e.title||"Untitled",prompt_text:e.prompt_text||e.content||"",tags:e.tags||[],isActive:!1!==e.isActive,stepOrder:e.stepOrder||0})).filter(e=>e.prompt_text.trim()).sort((e,t)=>(e.stepOrder||0)-(t.stepOrder||0));if(console.log("\ub300\ud654 \uc804\uc1a1 \ub370\uc774\ud130 \ud655\uc778:",{messageContent:e.content,chatHistoryLength:c.length,promptCardsCount:t.length,chatHistory:c,promptCards:t.map(e=>({id:e.promptId,title:e.title,contentLength:e.prompt_text.length,stepOrder:e.stepOrder,hasContent:!!e.prompt_text.trim()}))}),D){console.log("WebSocket\uc744 \ud1b5\ud55c \uc2e4\uc2dc\uac04 \uc2a4\ud2b8\ub9ac\ubc0d \uc2dc\uc791");if(O(e.content,c,t,h))return;console.log("WebSocket \uc804\uc1a1 \uc2e4\ud328, SSE \ud3f4\ubc31 \ubaa8\ub4dc\ub85c \uc804\ud658")}else console.log("WebSocket \ubbf8\uc5f0\uacb0, SSE \ubaa8\ub4dc \uc0ac\uc6a9");const a={userInput:e.content,chat_history:c,prompt_cards:t,modelId:h};console.log("\ubc31\uc5d4\ub4dc \uc804\uc1a1 \ub370\uc774\ud130 \ucd5c\uc885 \ud655\uc778:",a);const s={useStreaming:!0,chat_history:a.chat_history,prompt_cards:a.prompt_cards,modelId:a.modelId,onChunk:z,onError:e=>{console.error("\uc2a4\ud2b8\ub9ac\ubc0d \uc624\ub958:",e);const t=v.current;console.log("\uc5d0\ub7ec \ucc98\ub9ac \uc2a4\ud2b8\ub9ac\ubc0d ID:",t),o(e=>{const r=[...e],a=r.findIndex(e=>e.id===t);return-1!==a&&(r[a]={...r[a],content:"\uba54\uc2dc\uc9c0 \ucc98\ub9ac \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4. \ub2e4\uc2dc \uc2dc\ub3c4\ud574\uc8fc\uc138\uc694.",isLoading:!1,isStreaming:!1,isError:!0,timestamp:new Date}),r}),v.current=null},onComplete:F};await R(e.content,s),console.log("SSE \uc2a4\ud2b8\ub9ac\ubc0d \uc644\ub8cc - \uc785\ub825 \ud65c\uc131\ud654"),x(!0)}catch(g){var u;console.error("\uba54\uc2dc\uc9c0 \uc804\uc1a1 \uc2e4\ud328:",g);const e="ECONNABORTED"===g.code?"timeout":"general",t={id:"error-"+Date.now(),type:"assistant",content:"timeout"===e?"\ucc98\ub9ac \uc2dc\uac04\uc774 \ucd08\uacfc\ub418\uc5c8\uc2b5\ub2c8\ub2e4. \uc694\uccad\uc774 \ubcf5\uc7a1\ud558\uac70\ub098 \uc11c\ubc84\uac00 \ubc14\uc05c \uc0c1\ud0dc\uc77c \uc218 \uc788\uc2b5\ub2c8\ub2e4. \uc7a0\uc2dc \ud6c4 \ub2e4\uc2dc \uc2dc\ub3c4\ud574\uc8fc\uc138\uc694.":"\uba54\uc2dc\uc9c0 \ucc98\ub9ac \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4. \ub124\ud2b8\uc6cc\ud06c \uc5f0\uacb0\uc744 \ud655\uc778\ud558\uace0 \ub2e4\uc2dc \uc2dc\ub3c4\ud574\uc8fc\uc138\uc694.",timestamp:new Date,isError:!0,errorDetails:{type:e,message:g.message,status:null===(u=g.response)||void 0===u?void 0:u.status}};o(e=>{const r=v.current;return[...e.filter(e=>e.id!==r),t]}),v.current=null,x(!0)}x(!0)},[i,A,R,z,F,s]),V=(0,a.useCallback)(e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),K())},[K]),B=(0,a.useCallback)(async(e,t)=>{await y(e)&&(u(t),setTimeout(()=>u(null),2e3))},[]),Y=(0,a.useCallback)(async(e,t,r)=>{await y(e,"\ubcf5\uc0ac\ub418\uc5c8\uc2b5\ub2c8\ub2e4!")&&(u(`${t}_title_${r}`),setTimeout(()=>u(null),2e3))},[]),J=(0,a.useCallback)(()=>{o([]),d(""),u(null),x(!0),v.current=null,k.current=null,f.current=null,P()},[P]);return{messages:s,inputValue:i,setInputValue:d,handleInputChange:G,copiedMessage:c,isGenerating:A,isStreaming:E,canSendMessage:m,streamingMessageId:v.current,messagesEndRef:j,inputRef:N,inputHeight:g,handleSendMessage:K,handleStopGeneration:$,handleKeyPress:V,handleCopyMessage:B,handleCopyTitle:Y,resetChat:J,scrollToBottom:U,wsConnected:D,wsConnecting:T,wsError:L,scrollContainerRef:C,handleScroll:H,isUserScrolling:w,selectedModel:h,setSelectedModel:b}};var k=r(5440),f=r(3546),j=r(8047),N=r(9399),w=r(4538),S=r(3744),C=r(5377),_=r(4546),A=r(579);const E=()=>(0,A.jsxs)(k.P.div,{className:"inline-flex items-center mt-2 px-2 py-1 bg-blue-50 dark:bg-blue-900 rounded-lg text-blue-600 dark:text-blue-400 text-xs font-medium",initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{duration:.3},children:[(0,A.jsxs)(k.P.div,{className:"relative h-2 w-2 mr-2",animate:{scale:[1,1.2,1]},transition:{repeat:1/0,duration:1.5},children:[(0,A.jsx)("div",{className:"absolute animate-ping h-2 w-2 rounded-full bg-blue-400 opacity-75"}),(0,A.jsx)("div",{className:"absolute h-2 w-2 rounded-full bg-blue-600 dark:bg-blue-400"})]}),(0,A.jsx)(k.P.span,{animate:{opacity:[.5,1,.5]},transition:{repeat:1/0,duration:2},children:"\uc2a4\ud2b8\ub9ac\ubc0d \uc911..."})]}),R=e=>{let{errorDetails:t}=e;return t?(0,A.jsxs)(k.P.div,{className:"mt-3 p-3 bg-red-50 dark:bg-red-900/20 rounded-lg border border-red-200 dark:border-red-800",initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},transition:{duration:.3},children:[(0,A.jsxs)("div",{className:"flex items-center text-sm text-red-700 dark:text-red-400 mb-2",children:[(0,A.jsx)(N.A,{className:"h-4 w-4 mr-2"}),(0,A.jsx)("span",{className:"font-medium",children:"\uc624\ub958 \uc0c1\uc138 \uc815\ubcf4"})]}),(0,A.jsxs)("div",{className:"text-xs text-red-600 dark:text-red-400 space-y-1",children:[(0,A.jsxs)("div",{children:[(0,A.jsx)("span",{className:"font-medium",children:"\uc720\ud615:"})," ",t.type]}),t.status&&(0,A.jsxs)("div",{children:[(0,A.jsx)("span",{className:"font-medium",children:"\uc0c1\ud0dc:"})," ",t.status]}),t.message&&(0,A.jsxs)("div",{children:[(0,A.jsx)("span",{className:"font-medium",children:"\uba54\uc2dc\uc9c0:"})," ",t.message]})]})]}):null},I=e=>{var t,r;let{message:a,onCopyMessage:s,onCopyTitle:n,copiedMessage:o}=e;const l="user"===a.type,i={initial:{opacity:0,y:10},animate:{opacity:1,y:0,transition:{type:"spring",stiffness:300,damping:25}}},d={initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1,transition:{type:"spring",stiffness:400,damping:20}},hover:{scale:1.05,transition:{type:"spring",stiffness:400,damping:20}},tap:{scale:.95,transition:{type:"spring",stiffness:600,damping:30}}};return(0,A.jsx)(k.P.div,{className:`group relative ${l?"ml-8":"mr-8"} mb-6`,variants:{initial:{opacity:0,y:20,scale:.95},animate:{opacity:1,y:0,scale:1,transition:{type:"spring",stiffness:300,damping:25,staggerChildren:.1}}},initial:"initial",animate:"animate",children:(0,A.jsx)("div",{className:"flex "+(l?"justify-end":"justify-start"),children:l?(0,A.jsxs)(k.P.div,{className:"max-w-[85%] rounded-lg px-6 py-4 bg-blue-600 dark:bg-blue-700 text-white",variants:i,whileHover:{scale:1.01},transition:{type:"spring",stiffness:300,damping:25},children:[(0,A.jsx)(k.P.div,{className:"text-base font-medium whitespace-pre-wrap leading-relaxed",variants:i,children:a.content}),(0,A.jsx)(k.P.div,{className:"text-xs mt-3 font-medium text-blue-100 dark:text-blue-200",variants:i,children:(null===(t=a.timestamp)||void 0===t?void 0:t.toLocaleTimeString())||""})]}):(0,A.jsxs)(k.P.div,{className:"max-w-[85%] w-full",variants:i,children:[(0,A.jsx)(k.P.div,{className:"whitespace-pre-wrap leading-relaxed text-gray-800 dark:text-gray-200",variants:i,children:a.isError?(0,A.jsxs)(k.P.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.4},children:[(0,A.jsx)("div",{className:"text-red-600 dark:text-red-400 text-base",children:a.content}),(0,A.jsx)(R,{errorDetails:a.errorDetails})]}):a.isLoading?(0,A.jsx)("div",{children:a.isStreaming?(0,A.jsxs)("div",{children:[a.content?(0,A.jsx)("div",{className:"prose prose-base max-w-none prose-p:text-gray-800 dark:prose-p:text-white prose-headings:text-gray-900 dark:prose-headings:text-white prose-strong:text-gray-900 dark:prose-strong:text-white prose-ul:text-gray-800 dark:prose-ul:text-white prose-li:text-gray-800 dark:prose-li:text-white prose-code:text-gray-800 dark:prose-code:text-white prose-pre:bg-transparent dark:prose-pre:bg-transparent",children:(0,A.jsx)(j.oz,{children:a.content})}):(0,A.jsx)("div",{className:"text-blue-600 dark:text-blue-400 text-base font-medium",children:"\uc751\ub2f5\uc744 \uc0dd\uc131\ud558\ub294 \uc911..."}),(0,A.jsx)(E,{})]}):(0,A.jsx)(_.dO,{isUser:!1})}):(0,A.jsx)("div",{className:"prose prose-base max-w-none prose-p:text-gray-800 dark:prose-p:text-white prose-headings:text-gray-900 dark:prose-headings:text-white prose-strong:text-gray-900 dark:prose-strong:text-white prose-ul:text-gray-800 dark:prose-ul:text-white prose-li:text-gray-800 dark:prose-li:text-white prose-code:text-gray-800 dark:prose-code:text-white prose-pre:bg-transparent dark:prose-pre:bg-transparent",children:(0,A.jsx)(j.oz,{children:a.content})})}),(0,A.jsx)(f.N,{children:a.titles&&(0,A.jsx)(k.P.div,{className:"mt-4 pt-3",initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},transition:{duration:.3},children:(0,A.jsx)("div",{className:"flex flex-wrap gap-2",children:a.titles.map((e,t)=>(0,A.jsxs)(k.P.button,{onClick:()=>n(e,a.id,t),className:"flex items-center px-3 py-1.5 bg-gray-50 dark:bg-dark-tertiary border-0 text-gray-800 dark:text-white rounded-lg hover:bg-gray-100 dark:hover:bg-dark-secondary transition-colors text-sm font-medium "+(o===`${a.id}_title_${t}`?"bg-green-100 dark:bg-green-900 text-green-700 dark:text-green-400 border border-green-200 dark:border-green-700":"bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-300 border border-gray-200 dark:border-gray-600"),variants:d,initial:"initial",animate:"animate",whileHover:"hover",whileTap:"tap",custom:t,children:[(0,A.jsx)(k.P.div,{animate:o===`${a.id}_title_${t}`?{scale:[1,1.2,1]}:{},transition:{duration:.3},children:o===`${a.id}_title_${t}`?(0,A.jsx)(w.A,{className:"h-3 w-3 mr-1"}):(0,A.jsx)(S.A,{className:"h-3 w-3 mr-1"})}),"\uc81c\ubaa9 ",t+1," \ubcf5\uc0ac"]},t))})})}),!a.isLoading&&!a.isError&&(0,A.jsxs)(k.P.div,{className:"flex items-center justify-between mt-3",variants:i,children:[(0,A.jsx)(k.P.button,{onClick:()=>s(a.content),className:"flex items-center gap-2 text-xs text-gray-500 dark:text-gray-400 hover:text-blue-600 dark:hover:text-blue-400 transition-colors",variants:d,initial:"initial",animate:"animate",whileHover:"hover",whileTap:"tap",children:o===a.content?(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(w.A,{className:"h-4 w-4 text-green-500"}),(0,A.jsx)("span",{className:"text-green-600 dark:text-green-400",children:"\ubcf5\uc0ac \uc644\ub8cc"})]}):(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(C.A,{className:"h-4 w-4"}),(0,A.jsx)("span",{children:"\ub2f5\ubcc0 \ubcf5\uc0ac"})]})}),(0,A.jsx)("div",{className:"text-xs text-gray-400 dark:text-gray-500",children:(null===(r=a.timestamp)||void 0===r?void 0:r.toLocaleTimeString())||""})]})]})})})};var P=r(2517);const D=[{id:"anthropic.claude-3-5-sonnet-20241022-v2:0",name:"Claude 3.5 Sonnet v2",provider:"Anthropic",category:"premium",speed:"\ube60\ub984",quality:"\ucd5c\uace0",description:"\ud14d\uc2a4\ud2b8 \uc0dd\uc131, \ub2e4\uad6d\uc5b4 \uc9c0\uc6d0, \ubcf5\uc7a1\ud55c \ucd94\ub860\uc5d0 \ucd5c\uc801",recommended:!0},{id:"anthropic.claude-3-5-haiku-20241022-v1:0",name:"Claude 3.5 Haiku",provider:"Anthropic",category:"fast",speed:"\ub9e4\uc6b0 \ube60\ub984",quality:"\uc88b\uc74c",description:"\ube60\ub978 \uc751\ub2f5, \ud14d\uc2a4\ud2b8 \uc0dd\uc131\uc5d0 \ucd5c\uc801\ud654",recommended:!0},{id:"anthropic.claude-sonnet-4-v1:0",name:"Claude Sonnet 4",provider:"Anthropic",category:"premium",speed:"\ubcf4\ud1b5",quality:"\ucd5c\uace0",description:"\ucd5c\uc2e0 \ubaa8\ub378\ub85c \ud5a5\uc0c1\ub41c \ud14d\uc2a4\ud2b8 \uc0dd\uc131, \uc2e4\uc2dc\uac04 \uc9c0\uc6d0",new:!0},{id:"anthropic.claude-opus-4-v1:0",name:"Claude Opus 4",provider:"Anthropic",category:"premium",speed:"\ub290\ub9bc",quality:"\ucd5c\uace0",description:"\ucd5c\uace0 \uc131\ub2a5\uc774 \ud544\uc694\ud55c \ubcf5\uc7a1\ud55c \uc81c\ubaa9 \uc0dd\uc131",new:!0},{id:"anthropic.claude-3-opus-20240229-v1:0",name:"Claude 3 Opus",provider:"Anthropic",category:"premium",speed:"\ub290\ub9bc",quality:"\ucd5c\uace0",description:"\uc774\ubbf8\uc9c0\ub97c \ud14d\uc2a4\ud2b8 \ubc0f \ucf54\ub4dc\ub85c \ubcc0\ud658, \ubcf5\uc7a1\ud55c \ucd94\ub860"},{id:"anthropic.claude-3-sonnet-20240229-v1:0",name:"Claude 3 Sonnet",provider:"Anthropic",category:"balanced",speed:"\ubcf4\ud1b5",quality:"\uc88b\uc74c",description:"\uade0\ud615\uc7a1\ud78c \uc131\ub2a5\uacfc \uc18d\ub3c4"},{id:"anthropic.claude-3-haiku-20240307-v1:0",name:"Claude 3 Haiku",provider:"Anthropic",category:"fast",speed:"\ube60\ub984",quality:"\ubcf4\ud1b5",description:"\ub300\ud654, \ucc44\ud305 \ucd5c\uc801\ud654"},{id:"amazon.nova-pro-v1:0",name:"Nova Pro",provider:"Amazon",category:"balanced",speed:"\ube60\ub984",quality:"\uc88b\uc74c",description:"\ud14d\uc2a4\ud2b8 \uc0dd\uc131, \ucf54\ub4dc \uc0dd\uc131, \ubcf5\uc7a1\ud55c \ucd94\ub860",recommended:!0},{id:"amazon.nova-lite-v1:0",name:"Nova Lite",provider:"Amazon",category:"fast",speed:"\ub9e4\uc6b0 \ube60\ub984",quality:"\ubcf4\ud1b5",description:"\uac00\ubcbc\uc6b4 \ubaa8\ub378\ub85c \ube60\ub978 \uc751\ub2f5, \ub2e4\uad6d\uc5b4 \uc9c0\uc6d0"},{id:"amazon.nova-micro-v1:0",name:"Nova Micro",provider:"Amazon",category:"fast",speed:"\ucd08\uace0\uc18d",quality:"\uae30\ubcf8",description:"\ucd08\uacbd\ub7c9 \ubaa8\ub378\ub85c \ub9e4\uc6b0 \ube60\ub978 \uc751\ub2f5"},{id:"meta.llama3-3-70b-instruct-v1:0",name:"Llama 3.3 70B",provider:"Meta",category:"balanced",speed:"\ubcf4\ud1b5",quality:"\uc88b\uc74c",description:"\ud234 \uc0ac\uc6a9, \ucf54\ub4dc \uc0dd\uc131, \uace0\uae09 \ucd94\ub860"},{id:"meta.llama3-2-3b-instruct-v1:0",name:"Llama 3.2 3B",provider:"Meta",category:"fast",speed:"\ube60\ub984",quality:"\ubcf4\ud1b5",description:"\uacbd\ub7c9 \ubaa8\ub378\ub85c \ube60\ub978 \ucc98\ub9ac"}],T=e=>{let{selectedModel:t,onModelChange:r}=e;const[s,n]=(0,a.useState)(!1),[o,l]=(0,a.useState)("all");console.log("\ud83e\udd16 ModelSelector \ub80c\ub354\ub9c1\ub428:",{selectedModel:t,isOpen:s});const i=D.find(e=>e.id===t)||D[0],d=D.filter(e=>"all"===o||e.provider.toLowerCase()===o);return(0,A.jsxs)("div",{className:"relative",children:[(0,A.jsxs)("button",{onClick:()=>n(!s),className:"flex items-center gap-2 px-2 py-1 bg-gray-50 dark:bg-gray-700 rounded-md hover:bg-gray-100 dark:hover:bg-gray-600 shadow-sm dark:shadow-none transition-colors text-xs",title:`${i.name} (${i.provider})`,children:[(0,A.jsx)("span",{className:"text-gray-700 dark:text-gray-300 font-medium",children:i.name.replace(/Claude |Llama |Nova /,"")}),(0,A.jsx)(P.A,{className:"h-3 w-3 text-gray-500 transition-transform "+(s?"rotate-180":"")})]}),s&&(0,A.jsxs)("div",{className:"absolute bottom-full left-0 mb-2 bg-white dark:bg-dark-secondary  rounded-lg shadow-lg z-50 max-h-[400px] overflow-hidden min-w-[300px]",children:[(0,A.jsx)("div",{className:"p-3 ",children:(0,A.jsx)("div",{className:"flex gap-1 text-xs",children:[{key:"all",label:"\uc804\uccb4"},{key:"anthropic",label:"Anthropic"},{key:"amazon",label:"Amazon"},{key:"meta",label:"Meta"}].map(e=>(0,A.jsx)("button",{onClick:()=>l(e.key),className:"px-2 py-1 rounded transition-colors "+(o===e.key?"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200":"text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-dark-tertiary"),children:e.label},e.key))})}),(0,A.jsx)("div",{className:"max-h-[300px] overflow-y-auto",children:d.map(e=>(0,A.jsx)("button",{onClick:()=>{return t=e.id,r(t),void n(!1);var t},className:"w-full p-3 text-left hover:bg-gray-50 dark:hover:bg-gray-700 last:border-b-0 transition-colors "+(e.id===t?"bg-blue-50 dark:bg-blue-900/20":""),children:(0,A.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,A.jsx)("div",{className:"mb-1",children:(0,A.jsx)("span",{className:"font-medium text-gray-900 dark:text-white",children:e.name})}),(0,A.jsxs)("div",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1",children:[e.provider," \u2022 \uc18d\ub3c4: ",e.speed," \u2022 \ud488\uc9c8:"," ",e.quality]}),(0,A.jsx)("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:e.description})]})},e.id))})]}),s&&(0,A.jsx)("div",{className:"fixed inset-0 z-40",onClick:()=>n(!1)})]})},L=e=>{let{projectId:t,projectName:r,promptCards:n=[]}=e;(0,s.Zp)();const[o,l]=(0,a.useState)(null),[i,c]=(0,a.useState)(!1),{messages:u,inputValue:x,setInputValue:y,handleInputChange:k,copiedMessage:f,isGenerating:j,canSendMessage:N,messagesEndRef:w,inputRef:S,inputHeight:C,handleSendMessage:_,handleStopGeneration:E,handleKeyPress:R,handleCopyMessage:P,handleCopyTitle:D,wsConnected:L,wsConnecting:O,wsError:M,scrollContainerRef:W,handleScroll:H,isUserScrolling:U,selectedModel:z,setSelectedModel:F}=v(t,r,n);return(0,A.jsxs)("div",{className:"flex flex-col h-full bg-gray-50 dark:bg-dark-primary transition-colors duration-300",children:[(0,A.jsx)("div",{ref:W,onScroll:H,className:"flex-1 overflow-y-auto px-6 py-6 min-h-0 bg-gray-50 dark:bg-dark-primary",children:(0,A.jsxs)("div",{className:"max-w-4xl mx-auto space-y-6",children:[0===u.length?(0,A.jsx)("div",{className:"flex flex-col items-center justify-center py-24 mt-12",children:(0,A.jsxs)("div",{className:"bg-white dark:bg-dark-secondary card-dark rounded-2xl shadow-md p-8 max-w-2xl w-full transition-colors duration-300",children:[(0,A.jsx)("div",{className:"flex justify-center mb-6",children:(0,A.jsx)("div",{className:"bg-blue-100 dark:bg-dark-tertiary p-3 rounded-full",children:(0,A.jsx)(g.A,{className:"h-8 w-8 text-blue-600 dark:text-blue-400"})})}),(0,A.jsx)("h2",{className:"text-xl font-semibold text-center text-gray-800 dark:text-white mb-4",children:"AI \ud5e4\ub4dc\ub77c\uc778 \uc5b4\uc2dc\uc2a4\ud134\ud2b8"}),(0,A.jsx)("p",{className:"text-gray-600 dark:text-gray-300 text-center mb-6",children:"\ubcf8\ubb38\uc744 \uc785\ub825\ud558\uba74 AI\uac00 \ucd5c\uc801\uc758 \ud5e4\ub4dc\ub77c\uc778\uc744 \uc81c\uc548\ud574 \ub4dc\ub9bd\ub2c8\ub2e4."}),(0,A.jsxs)("div",{className:"space-y-4",children:[(0,A.jsxs)("div",{className:"flex items-start p-3 bg-gray-50 dark:bg-dark-tertiary rounded-lg",children:[(0,A.jsx)("div",{className:"mr-3 mt-1",children:(0,A.jsx)(d.A,{className:"h-5 w-5 text-blue-500 dark:text-blue-400"})}),(0,A.jsx)("div",{children:(0,A.jsxs)("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:[(0,A.jsx)("span",{className:"font-medium",children:"\uc2dc\uc791\ud558\ub294 \ubc29\ubc95:"})," \uc544\ub798 \uc785\ub825\ucc3d\uc5d0 \ubcf8\ubb38\uc744 \ubd99\uc5ec\ub123\uace0 \uc804\uc1a1 \ubc84\ud2bc\uc744 \ud074\ub9ad\ud558\uc138\uc694"]})})]}),(0,A.jsxs)("div",{className:"flex items-start p-3 bg-gray-50 dark:bg-dark-tertiary rounded-lg",children:[(0,A.jsx)("div",{className:"mr-3 mt-1",children:(0,A.jsx)(d.A,{className:"h-5 w-5 text-blue-500 dark:text-blue-400"})}),(0,A.jsx)("div",{children:(0,A.jsxs)("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:[(0,A.jsx)("span",{className:"font-medium",children:"\ud504\ub86c\ud504\ud2b8 \uce74\ub4dc:"})," ","\uad00\ub9ac\uc790 \ubaa8\ub4dc\uc5d0\uc11c \ud504\ub86c\ud504\ud2b8 \uce74\ub4dc\ub97c \uc791\uc131\ud558\uc5ec \uc81c\ubaa9\uc744 \uc0dd\uc131\ud558\uc138\uc694"]})})]})]})]})}):u.map(e=>(0,A.jsx)(I,{message:e,onCopyMessage:P,onCopyTitle:D,copiedMessage:f},e.id)),(0,A.jsx)("div",{ref:w})]})}),(0,A.jsx)("div",{className:"flex-shrink-0 px-6 py-4",children:(0,A.jsxs)("div",{className:"max-w-4xl mx-auto",children:[o&&(0,A.jsxs)("div",{className:"mb-3 p-3 bg-blue-50 dark:bg-dark-tertiary rounded-lg flex items-center justify-between",children:[(0,A.jsxs)("div",{className:"flex items-center gap-2",children:[(0,A.jsx)(p.A,{className:"h-4 w-4 text-blue-600 dark:text-blue-400"}),(0,A.jsx)("span",{className:"text-sm text-blue-700 dark:text-white",children:o.name})]}),(0,A.jsx)("button",{onClick:()=>{l(null),k("")},className:"text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300 p-1",children:(0,A.jsx)(m.A,{className:"h-4 w-4"})})]}),(0,A.jsxs)("div",{className:"bg-white dark:bg-dark-secondary rounded-[20px] p-4 relative transition-colors duration-300 flex flex-col gap-6",style:{minHeight:Math.max(128,C+80),transition:"min-height 0.2s ease-in-out",boxShadow:"none"},onDrop:e=>{e.preventDefault(),c(!1);const t=e.dataTransfer.files;if(t.length>0){const e=t[0];if("text/plain"===e.type){const t=new FileReader;t.onload=t=>{var r;const a=(null===(r=t.target)||void 0===r?void 0:r.result)||"";k(a),l(e)},t.readAsText(e)}}},onDragOver:e=>{e.preventDefault(),c(!0)},onDragLeave:()=>{c(!1)},children:[(0,A.jsxs)("div",{className:"flex-1 relative focus:outline-none",children:[(0,A.jsx)("textarea",{ref:S,value:x,onChange:e=>k(e.target.value),onKeyPress:R,placeholder:j?"\uc0dd\uc131 \uc911\uc785\ub2c8\ub2e4...":"\uae30\uc0ac \ubcf8\ubb38\uc744 \uc785\ub825\ud558\uc138\uc694...",className:"w-full pr-14 pl-2 border-0 focus:outline-none resize-none transition-all duration-300 "+(i?"bg-blue-50 dark:bg-dark-tertiary":j?"bg-gray-50 dark:bg-dark-primary":"bg-white dark:bg-dark-secondary text-gray-900 dark:text-white"),rows:1,style:{height:`${C}px`,minHeight:"24px",maxHeight:"400px",lineHeight:"1.4",paddingTop:"0px",paddingBottom:"6px",overflowY:C>200?"auto":"hidden",whiteSpace:"pre-wrap",fontSize:"16px",fontWeight:"400",color:j?"var(--text-muted)":"inherit",outline:"none",boxShadow:"none"},disabled:j}),(0,A.jsxs)("div",{className:"absolute right-3 bottom-0 flex items-center gap-2",style:{bottom:"2px"},children:[j&&(0,A.jsx)("button",{onClick:E,className:"flex-shrink-0 bg-red-600 hover:bg-red-700 text-white p-2 rounded-full transition-colors flex items-center justify-center",style:{width:"32px",height:"32px"},title:"\uc0dd\uc131 \uc911\ub2e8",children:(0,A.jsx)(h.A,{className:"h-4 w-4"})}),(0,A.jsx)("button",{onClick:_,disabled:!x.trim()||j,className:"flex-shrink-0 bg-blue-600 dark:bg-blue-600 hover:bg-blue-700 dark:hover:bg-blue-700 text-white p-2 rounded-full disabled:opacity-70 disabled:cursor-not-allowed transition-colors flex items-center justify-center",style:{width:"32px",height:"32px"},title:j?"\uc0dd\uc131 \uc911...":L?"\uc2e4\uc2dc\uac04 \uc2a4\ud2b8\ub9ac\ubc0d \uc0ac\uc6a9 \uac00\ub2a5":"\uc77c\ubc18 \ubaa8\ub4dc (WebSocket \uc5f0\uacb0 \uc548\ub428)",children:j?(0,A.jsx)("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}):(0,A.jsx)(b.A,{className:"h-5 w-5"})})]})]}),(0,A.jsxs)("div",{className:"flex items-center justify-between",children:[(0,A.jsxs)("div",{className:"flex items-center gap-4",children:[(0,A.jsx)("div",{className:"flex items-center gap-2 text-xs text-gray-400 dark:text-dark-muted",children:(0,A.jsxs)("span",{children:[x.length,"\uc790"]})}),(0,A.jsx)("div",{className:"flex items-center gap-2",children:(0,A.jsx)(T,{selectedModel:z,onModelChange:F})})]}),(0,A.jsxs)("div",{className:"flex items-center gap-3 text-xs",children:[U&&(0,A.jsxs)("div",{className:"flex items-center gap-1 text-blue-600 dark:text-blue-400",children:[(0,A.jsx)("span",{children:"\ud83d\udcdc"}),(0,A.jsx)("span",{children:"\uc790\uc720 \uc2a4\ud06c\ub864"})]}),O?(0,A.jsxs)("div",{className:"flex items-center gap-1 text-yellow-600 dark:text-yellow-400",children:[(0,A.jsx)("div",{className:"animate-spin rounded-full h-3 w-3 border-b-2 border-yellow-600"}),(0,A.jsx)("span",{children:"\uc5f0\uacb0 \uc911..."})]}):L?(0,A.jsxs)("div",{className:"flex items-center gap-1 text-green-600 dark:text-green-400",children:[(0,A.jsx)("div",{className:"w-2 h-2 bg-green-600 rounded-full"}),(0,A.jsx)("span",{children:"\uc2e4\uc2dc\uac04 \uc2a4\ud2b8\ub9ac\ubc0d"})]}):(0,A.jsxs)("div",{className:"flex items-center gap-1 text-gray-500 dark:text-dark-muted",children:[(0,A.jsx)("div",{className:"w-2 h-2 bg-gray-400 dark:bg-gray-500 rounded-full"}),(0,A.jsx)("span",{children:"\uc77c\ubc18 \ubaa8\ub4dc"})]}),M&&(0,A.jsx)("div",{className:"text-red-500 dark:text-red-400 text-xs",title:M,children:"\u26a0\ufe0f"})]})]})]})]})})]})},O=e=>{let{card:t,onEdit:r,onDelete:a}=e;return(0,A.jsxs)("div",{className:"bg-white dark:bg-gray-600 rounded-xl p-4 flex flex-col space-y-3 shadow-md dark:shadow-lg hover:shadow-lg dark:hover:shadow-xl transition-all duration-200 hover:bg-blue-50 dark:hover:bg-gray-500",children:[(0,A.jsxs)("div",{className:"flex items-start justify-between",children:[(0,A.jsx)("h3",{className:"font-semibold text-sm text-gray-800 dark:text-white leading-tight pr-2 flex-1",children:t.title||`\ud504\ub86c\ud504\ud2b8 ${t.promptId||t.prompt_id}`}),(0,A.jsxs)("div",{className:"flex items-center flex-shrink-0",children:[(0,A.jsx)("button",{onClick:async e=>{e.preventDefault(),e.stopPropagation(),await r()},className:"p-1 text-gray-500 dark:text-gray-400 rounded-full hover:bg-gray-100 dark:hover:bg-dark-secondary hover:text-blue-600 dark:hover:text-blue-400 transition-colors",children:(0,A.jsx)(c.A,{className:"h-4 w-4"})}),(0,A.jsx)("button",{onClick:a,className:"p-1 text-gray-500 dark:text-gray-400 rounded-full hover:bg-gray-100 dark:hover:bg-dark-secondary hover:text-red-600 dark:hover:text-red-400 transition-colors",children:(0,A.jsx)(u.A,{className:"h-4 w-4"})})]})]}),t.tags&&t.tags.length>0&&(0,A.jsxs)("div",{className:"flex flex-wrap gap-1.5",children:[t.tags.slice(0,3).map(e=>(0,A.jsxs)("span",{className:"px-2 py-0.5 text-xs bg-gray-100 dark:bg-dark-secondary text-gray-700 dark:text-gray-300 rounded-full",children:["#",e]},e)),t.tags.length>3&&(0,A.jsxs)("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:["+",t.tags.length-3]})]}),(t.content||t.prompt_text)&&(0,A.jsx)("p",{className:"text-xs text-gray-600 dark:text-gray-300 leading-relaxed line-clamp-2",children:t.content||t.prompt_text}),(0,A.jsxs)("div",{className:"flex items-end justify-between pt-2 text-xs text-gray-400 dark:text-gray-500",children:[(0,A.jsxs)("span",{className:"flex-shrink-0",children:["\uc0dd\uc131:"," ",new Date(t.createdAt||new Date).toLocaleDateString("ko-KR",{year:"2-digit",month:"2-digit",day:"2-digit"})]}),t.updatedAt&&new Date(t.updatedAt)>new Date(t.createdAt)&&(0,A.jsxs)("span",{className:"flex-shrink-0 ml-2",children:["\uc218\uc815:"," ",new Date(t.updatedAt).toLocaleDateString("ko-KR",{year:"2-digit",month:"2-digit",day:"2-digit"})]})]})]})},M=e=>{let{isOpen:t,onSubmit:r,onCancel:s,initialData:o}=e;const[l,i]=(0,a.useState)({title:"",prompt_text:"",tags:[],enabled:!0}),[d,u]=(0,a.useState)("");(0,a.useEffect)(()=>{o&&i({title:o.title||"",prompt_text:o.prompt_text||o.content||"",tags:Array.isArray(o.tags)?[...o.tags]:[],enabled:!1!==o.enabled&&!1!==o.isActive})},[o]);const g=(e,t)=>{i(r=>({...r,[e]:t}))};return t?(0,A.jsx)("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:(0,A.jsxs)("div",{className:"bg-white dark:bg-dark-secondary rounded-2xl max-w-3xl w-full max-h-[90vh] overflow-hidden shadow-xl dark:shadow-none transition-colors duration-300 ",children:[(0,A.jsx)("div",{className:" p-6 bg-white dark:bg-dark-secondary",children:(0,A.jsxs)("div",{className:"flex items-center justify-between",children:[(0,A.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,A.jsx)("div",{className:"w-10 h-10 bg-gray-100 dark:bg-dark-tertiary rounded-lg flex items-center justify-center",children:(0,A.jsx)(c.A,{className:"h-6 w-6 text-gray-600 dark:text-gray-300"})}),(0,A.jsxs)("div",{children:[(0,A.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:o?"\ud504\ub86c\ud504\ud2b8 \ud3b8\uc9d1":"\uc0c8 \ud504\ub86c\ud504\ud2b8"}),(0,A.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:o?"\ud504\ub86c\ud504\ud2b8 \ub0b4\uc6a9\uc744 \uc218\uc815\ud558\uc138\uc694":"\uc0c8\ub85c\uc6b4 \ud504\ub86c\ud504\ud2b8\ub97c \uc791\uc131\ud558\uc138\uc694"})]})]}),(0,A.jsx)("button",{type:"button",onClick:s,className:"p-2 text-gray-400 dark:text-gray-500 hover:text-gray-600 dark:hover:text-gray-300 rounded-lg hover:bg-gray-100 dark:hover:bg-dark-tertiary transition-colors",children:(0,A.jsx)(m.A,{className:"h-5 w-5"})})]})}),(0,A.jsxs)("form",{onSubmit:e=>{e.preventDefault(),l.prompt_text.trim()?r(l):n.oR.error("\ud504\ub86c\ud504\ud2b8 \ub0b4\uc6a9\uc744 \uc785\ub825\ud574\uc8fc\uc138\uc694")},className:"p-6 space-y-6 overflow-y-auto max-h-[calc(90vh-120px)]",children:[(0,A.jsxs)("div",{className:"space-y-2",children:[(0,A.jsx)("label",{className:"flex items-center text-sm font-semibold text-gray-800 dark:text-gray-200",children:"\ud504\ub86c\ud504\ud2b8 \uc81c\ubaa9"}),(0,A.jsx)("input",{type:"text",value:l.title,onChange:e=>g("title",e.target.value),className:"w-full px-4 py-3  rounded-xl bg-gray-50 dark:bg-dark-tertiary text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:outline-none focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 dark:focus:ring-blue-500/30 transition-all duration-200",placeholder:"\ud504\ub86c\ud504\ud2b8 \uc81c\ubaa9\uc744 \uc785\ub825\ud558\uc138\uc694"})]}),(0,A.jsxs)("div",{className:"space-y-2",children:[(0,A.jsxs)("label",{className:"flex items-center text-sm font-semibold text-gray-800 dark:text-gray-200",children:[(0,A.jsx)(x.A,{className:"h-4 w-4 mr-2 text-gray-500 dark:text-gray-400"}),"\ud0dc\uadf8"]}),(0,A.jsxs)("div",{className:"space-y-3",children:[(0,A.jsx)("input",{type:"text",value:d,onChange:e=>u(e.target.value),onKeyPress:e=>{if("Enter"===e.key&&d.trim()){e.preventDefault();const t=d.trim();!l.tags.includes(t)&&l.tags.length<5&&i(e=>({...e,tags:[...e.tags,t]})),u("")}},className:"w-full px-4 py-3  rounded-xl bg-gray-50 dark:bg-dark-tertiary text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:outline-none focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 dark:focus:ring-blue-500/30 transition-all duration-200",placeholder:"\ud0dc\uadf8\ub97c \uc785\ub825\ud558\uace0 Enter\ub97c \ub204\ub974\uc138\uc694 (\ucd5c\ub300 5\uac1c)",maxLength:20,disabled:l.tags.length>=5}),l.tags.length>0&&(0,A.jsx)("div",{className:"flex flex-wrap gap-2",children:l.tags.map((e,t)=>(0,A.jsxs)("span",{className:"inline-flex items-center px-3 py-1 bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200 text-sm rounded-full",children:["#",e,(0,A.jsx)("button",{type:"button",onClick:()=>{return t=e,void i(e=>({...e,tags:e.tags.filter(e=>e!==t)}));var t},className:"ml-2 text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-200",children:(0,A.jsx)(m.A,{className:"h-3 w-3"})})]},t))}),(0,A.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"\ud0dc\uadf8\ub294 \ud504\ub86c\ud504\ud2b8\ub97c \ubd84\ub958\ud558\uace0 \uac80\uc0c9\ud558\ub294 \ub370 \ub3c4\uc6c0\uc774 \ub429\ub2c8\ub2e4. \uac01 \ud0dc\uadf8\ub294 20\uc790 \uc774\ub0b4\ub85c \uc785\ub825\ud558\uc138\uc694."})]})]}),(0,A.jsxs)("div",{className:"space-y-2",children:[(0,A.jsxs)("label",{className:"flex items-center text-sm font-semibold text-gray-800 dark:text-gray-200",children:["\ud504\ub86c\ud504\ud2b8 \ub0b4\uc6a9 ",(0,A.jsx)("span",{className:"text-red-500 ml-1",children:"*"})]}),(0,A.jsxs)("div",{className:"relative",children:[(0,A.jsx)("textarea",{value:l.prompt_text,onChange:e=>g("prompt_text",e.target.value),rows:12,className:"w-full px-4 py-3  rounded-xl bg-gray-50 dark:bg-dark-tertiary text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:outline-none focus:border-green-500 focus:ring-2 focus:ring-green-500/20 dark:focus:ring-green-500/30 transition-all duration-200 resize-none",placeholder:"\ud504\ub86c\ud504\ud2b8 \ub0b4\uc6a9\uc744 \uc785\ub825\ud558\uc138\uc694",required:!0}),(0,A.jsxs)("div",{className:"absolute bottom-3 right-3 text-xs text-gray-500 dark:text-gray-400 flex items-center space-x-2",children:[(0,A.jsxs)("span",{children:[l.prompt_text.length," \uc790"]}),(0,A.jsx)("span",{className:"text-gray-400 dark:text-gray-500",children:"/ \ud83d\udcdd 50\uc790 \uc774\uc0c1 \uad8c\uc7a5"})]})]})]}),(0,A.jsxs)("div",{className:"flex items-center",children:[(0,A.jsx)("input",{type:"checkbox",id:"enabled",checked:l.enabled,onChange:e=>g("enabled",e.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 rounded"}),(0,A.jsx)("label",{htmlFor:"enabled",className:"ml-2 text-sm text-gray-700 dark:text-gray-300",children:"\ud65c\uc131\ud654"})]}),(0,A.jsxs)("div",{className:"flex justify-end space-x-3 pt-6 ",children:[(0,A.jsx)("button",{type:"button",onClick:s,className:"px-6 py-2.5 text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700  rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors font-medium",children:"\ucde8\uc18c"}),(0,A.jsx)("button",{type:"submit",disabled:!l.prompt_text.trim(),className:"px-6 py-2.5 bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white rounded-lg disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 font-medium shadow-lg hover:shadow-xl",children:o?"\uc218\uc815":"\uc0dd\uc131"})]})]})]})}):null},W=e=>{let{projectId:t,projectName:r}=e;const[s,o]=(0,a.useState)([]),[c,u]=(0,a.useState)(!0),[m,x]=(0,a.useState)(null),[g,p]=(0,a.useState)(!1);(0,a.useEffect)(()=>{h()},[t]);const h=async()=>{try{u(!0);const e=await l.dF.getPromptCards(t,!0);o(e.promptCards||[])}catch(e){console.error("\ud504\ub86c\ud504\ud2b8 \uce74\ub4dc \ub85c\ub4dc \uc2e4\ud328:",e);const t=(0,l.t6)(e);n.oR.error(t.message)}finally{u(!1)}},b=()=>{console.log("\uc0c8 \ud504\ub86c\ud504\ud2b8 \ucd94\uac00 \ubc84\ud2bc \ud074\ub9ad"),x(null),p(!0)};return c?(0,A.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,A.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):(0,A.jsxs)("div",{className:"flex h-full bg-gray-50 dark:bg-dark-primary",children:[(0,A.jsx)("div",{className:"flex-1 min-w-0",children:(0,A.jsx)(L,{projectId:t,projectName:r,promptCards:s})}),(0,A.jsxs)("div",{className:"w-80 bg-white dark:bg-dark-primary flex flex-col shadow-lg border-l border-gray-200 dark:border-gray-700 flex-shrink-0",children:[(0,A.jsx)("div",{className:"flex-shrink-0 p-4 bg-gray-50 dark:bg-dark-primary",children:(0,A.jsxs)("div",{className:"flex items-center justify-between",children:[(0,A.jsx)("h2",{className:"text-lg font-semibold text-gray-800 dark:text-white",children:"\ud504\ub86c\ud504\ud2b8 \uce74\ub4dc"}),(0,A.jsxs)("button",{onClick:b,className:"inline-flex items-center px-4 py-2 text-sm bg-blue-600 dark:bg-blue-500 text-white rounded-lg hover:bg-blue-700 dark:hover:bg-blue-600 transition-colors shadow-md hover:shadow-lg font-medium",children:[(0,A.jsx)(i.A,{className:"h-4 w-4 mr-1.5"}),"\uc0c8 \ucd94\uac00"]})]})}),(0,A.jsx)("div",{className:"flex-1 overflow-y-auto p-4 space-y-3 min-h-0 bg-gray-50 dark:bg-dark-secondary",children:0===s.length?(0,A.jsxs)("div",{className:"text-center py-8",children:[(0,A.jsx)(d.A,{className:"h-12 w-12 text-gray-300 dark:text-gray-600 mx-auto mb-4"}),(0,A.jsx)("p",{className:"text-gray-500 dark:text-gray-400 mb-4",children:"\ud504\ub86c\ud504\ud2b8 \uce74\ub4dc\uac00 \uc5c6\uc2b5\ub2c8\ub2e4"}),(0,A.jsxs)("button",{onClick:b,className:"inline-flex items-center px-4 py-2 bg-blue-600 dark:bg-blue-500 text-white rounded-lg hover:bg-blue-700 dark:hover:bg-blue-600 transition-colors shadow-sm font-medium",children:[(0,A.jsx)(i.A,{className:"h-4 w-4 mr-1.5"}),"\uccab \ubc88\uc9f8 \uce74\ub4dc \ub9cc\ub4e4\uae30"]})]}):s.map(e=>(0,A.jsx)(O,{card:e,onEdit:()=>(async e=>{console.log("\ud504\ub86c\ud504\ud2b8 \uc218\uc815 \ubc84\ud2bc \ud074\ub9ad:",e);let r={...e};if(!e.prompt_text&&!e.content)try{var a;console.log("S3\uc5d0\uc11c \ud504\ub86c\ud504\ud2b8 \ub0b4\uc6a9 \ub85c\ub4dc \uc911...");const s=await l.dF.getPromptContent(t,e.promptId||e.prompt_id);r.prompt_text=s.content,console.log("S3\uc5d0\uc11c \ud504\ub86c\ud504\ud2b8 \ub0b4\uc6a9 \ub85c\ub4dc \uc644\ub8cc:",null===(a=s.content)||void 0===a?void 0:a.length,"\ubb38\uc790")}catch(s){return console.error("\ud504\ub86c\ud504\ud2b8 \ub0b4\uc6a9 \ub85c\ub4dc \uc2e4\ud328:",s),void n.oR.error("\ud504\ub86c\ud504\ud2b8 \ub0b4\uc6a9\uc744 \ubd88\ub7ec\uc62c \uc218 \uc5c6\uc2b5\ub2c8\ub2e4")}x(r),p(!0)})(e),onDelete:()=>(async e=>{if(window.confirm("\uc815\ub9d0\ub85c \uc774 \ud504\ub86c\ud504\ud2b8\ub97c \uc0ad\uc81c\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?"))try{await l.dF.deletePromptCard(t,e),n.oR.success("\ud504\ub86c\ud504\ud2b8\uac00 \uc0ad\uc81c\ub418\uc5c8\uc2b5\ub2c8\ub2e4"),o(t=>t.filter(t=>(t.promptId||t.prompt_id)!==e)),await h()}catch(r){console.error("\ud504\ub86c\ud504\ud2b8 \uc0ad\uc81c \uc2e4\ud328:",r);const e=(0,l.t6)(r);n.oR.error(e.message)}})(e.promptId||e.prompt_id)},e.promptId||e.prompt_id))})]}),g&&(0,A.jsx)(M,{isOpen:g,onSubmit:async e=>{try{const r={title:e.title,prompt_text:e.prompt_text,tags:e.tags||[],isActive:!1!==e.enabled};m?(await l.dF.updatePromptCard(t,m.promptId||m.prompt_id,r),n.oR.success("\ud504\ub86c\ud504\ud2b8\uac00 \uc218\uc815\ub418\uc5c8\uc2b5\ub2c8\ub2e4")):(await l.dF.createPromptCard(t,r),n.oR.success("\ud504\ub86c\ud504\ud2b8\uac00 \uc0dd\uc131\ub418\uc5c8\uc2b5\ub2c8\ub2e4")),p(!1),x(null),await h()}catch(r){console.error("\ud504\ub86c\ud504\ud2b8 \uc800\uc7a5 \uc2e4\ud328:",r);const e=(0,l.t6)(r);n.oR.error(e.message)}},onCancel:()=>{console.log("\ubaa8\ub2ec \ucde8\uc18c \ubc84\ud2bc \ud074\ub9ad"),p(!1),x(null)},initialData:m})]})},H=e=>{let{projectId:t,projectName:r}=e;return(0,A.jsx)("div",{className:"h-full bg-white dark:bg-dark-primary transition-colors duration-300",children:(0,A.jsx)(W,{projectId:t,projectName:r})})},U=e=>{let{projectId:t,projectName:r}=e;const[s,n]=(0,a.useState)([]),[o,i]=(0,a.useState)(!0);return(0,a.useEffect)(()=>{(async()=>{try{i(!0);const e=await l.dF.getPromptCards(t,!0);n(e.promptCards||[])}catch(e){console.warn("\ud504\ub86c\ud504\ud2b8 \uce74\ub4dc \ub85c\ub4dc \uc2e4\ud328:",e),n([])}finally{i(!1)}})()},[t]),o?(0,A.jsx)(_.P7,{}):(0,A.jsx)("div",{className:"h-full bg-white dark:bg-dark-primary transition-colors duration-300",children:(0,A.jsx)(L,{projectId:t,projectName:r,promptCards:s})})};var z=r(9415),F=r(8164),$=r(7625);const q=()=>{const{projectId:e}=(0,s.g)(),t=(0,s.Zp)(),{mode:r,setMode:i}=(0,z.nm)(),{user:d}=(0,F.A)(),[c,u]=(0,a.useState)(null),[m,x]=(0,a.useState)(!0),g="admin"===(null===d||void 0===d?void 0:d.role)?r:"user";(0,a.useEffect)(()=>{p()},[e,t]);const p=async()=>{try{let t;if(x(!0),"user"===(null===d||void 0===d?void 0:d.role))try{t=await l._x.getProject(e||"default")}catch(r){t={projectId:"chat",name:"AI \ucc44\ud305",description:"AI\uc640 \uc790\uc720\ub86d\uac8c \ub300\ud654\ud558\uc138\uc694",promptCards:[],createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString()}}else t=await l._x.getProject(e);u(t)}catch(r){console.error("\ud504\ub85c\uc81d\ud2b8 \ub85c\ub4dc \uc2e4\ud328:",r);const e=(0,l.t6)(r);n.oR.error(e.message),"admin"===(null===d||void 0===d?void 0:d.role)?t("/projects"):t("/dashboard")}finally{x(!1)}},h=()=>{"admin"===(null===d||void 0===d?void 0:d.role)?t("/projects"):t("/dashboard")};return m?(0,A.jsx)(_.P7,{}):c?(0,A.jsxs)("div",{className:"h-screen flex flex-col bg-gray-50 dark:bg-dark-primary transition-all duration-500",children:[(0,A.jsx)("div",{className:"flex-shrink-0 bg-gray-50 dark:bg-dark-secondary px-6 py-4 transition-all duration-300 shadow-sm",children:(0,A.jsxs)("div",{className:"flex items-center justify-between",children:[(0,A.jsxs)("div",{className:"flex items-center space-x-6",children:[(0,A.jsxs)("button",{onClick:h,className:"btn-neo group relative overflow-hidden bg-white dark:bg-dark-tertiary",children:[(0,A.jsx)(o.A,{className:"h-4 w-4 mr-2 group-hover:-translate-x-1 transition-transform duration-300 text-gray-700 dark:text-white"}),(0,A.jsx)("span",{className:"group-hover:text-blue-500 dark:group-hover:text-blue-400 transition-colors duration-300 text-gray-700 dark:text-white",children:"admin"===(null===d||void 0===d?void 0:d.role)?"\ubaa9\ub85d\uc73c\ub85c":"\ub300\uc2dc\ubcf4\ub4dc\ub85c"})]}),(0,A.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,A.jsx)("div",{className:"w-2 h-8 bg-blue-500 rounded-full"}),(0,A.jsx)("h1",{className:"text-xl font-bold text-gray-900 dark:text-white",children:c.name})]})]}),(0,A.jsxs)("div",{className:"flex items-center gap-4",children:[(0,A.jsx)($.A,{size:"md"}),"user"===(null===d||void 0===d?void 0:d.role)&&(0,A.jsx)("button",{onClick:()=>t("/dashboard"),className:"btn-neo bg-white dark:bg-dark-tertiary px-4 py-2 text-sm font-medium text-gray-700 dark:text-white hover:bg-gray-50 dark:hover:bg-dark-secondary transition-colors duration-300",children:"\ud83d\udcca \ub300\uc2dc\ubcf4\ub4dc"}),(0,A.jsx)("div",{className:"card-neo px-4 py-2 rounded-xl",children:(0,A.jsxs)("div",{className:"flex items-center gap-2",children:[(0,A.jsxs)("div",{className:"relative",children:[(0,A.jsx)("div",{className:"w-2 h-2 bg-emerald-500 rounded-full animate-pulse"}),(0,A.jsx)("div",{className:"absolute inset-0 w-2 h-2 bg-emerald-500 rounded-full animate-ping opacity-30"})]}),(0,A.jsx)("span",{className:"text-xs text-emerald-500 font-medium",children:"\uc900\ube44\uc644\ub8cc"})]})})]})]})}),(0,A.jsx)("div",{className:"flex-1 overflow-hidden",children:"admin"===g&&"admin"===(null===d||void 0===d?void 0:d.role)?(0,A.jsx)(H,{projectId:e,projectName:c.name}):(0,A.jsx)(U,{projectId:e,projectName:c.name})})]}):(0,A.jsx)("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center transition-colors duration-200",children:(0,A.jsxs)("div",{className:"text-center",children:[(0,A.jsx)("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4",children:"\ud504\ub85c\uc81d\ud2b8\ub97c \ucc3e\uc744 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4"}),(0,A.jsxs)("button",{onClick:h,className:"inline-flex items-center px-4 py-2 text-sm font-medium rounded-md text-blue-700 dark:text-blue-300 bg-blue-100 dark:bg-blue-900 hover:bg-blue-200 dark:hover:bg-blue-800 focus:outline-none transition-colors duration-200",children:[(0,A.jsx)(o.A,{className:"h-5 w-5 mr-2"}),"admin"===(null===d||void 0===d?void 0:d.role)?"\ud504\ub85c\uc81d\ud2b8 \ubaa9\ub85d\uc73c\ub85c":"\ub300\uc2dc\ubcf4\ub4dc\ub85c"]})]})})}},9144:(e,t,r)=>{r.d(t,{A:()=>s});r(5043);var a=r(579);const s=e=>{let{message:t="\ub85c\ub529 \uc911..."}=e;return(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 dark:bg-dark-primary flex items-center justify-center transition-colors duration-300",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-gray-600 dark:text-gray-300",children:t})]})})}}}]);
//# sourceMappingURL=164.3bed31d3.chunk.js.map