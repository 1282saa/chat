"use strict";(self.webpackChunkbedrock_diy_frontend=self.webpackChunkbedrock_diy_frontend||[]).push([[441],{3441:(e,t,r)=>{r.r(t),r.d(t,{default:()=>q});var s=r(5043),a=r(3216),n=r(3768),o=r(5442),l=r(9621),i=r(579);var c=r(8662),d=r(7985),u=r(2811),m=r(9248),g=r(7591),x=r(6214),p=r(3063),h=r(5799),b=r(2302),y=r(7438);const v=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"\ud074\ub9bd\ubcf4\ub4dc\uc5d0 \ubcf5\uc0ac\ub418\uc5c8\uc2b5\ub2c8\ub2e4!",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"\ubcf5\uc0ac\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4.";try{return await navigator.clipboard.writeText(e),n.oR.success(t),!0}catch(s){return console.error("\ubcf5\uc0ac \uc2e4\ud328:",s),n.oR.error(r),!1}},f=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];const[a,o]=(0,s.useState)([]),[i,c]=(0,s.useState)(""),[d,u]=(0,s.useState)(null),[m,g]=(0,s.useState)(!0),[x,p]=(0,s.useState)("anthropic.claude-3-5-sonnet-20241022-v2:0"),h=(0,s.useRef)(null),b=(0,s.useRef)(null),y=(0,s.useRef)(null),f=(0,s.useRef)(""),j=(0,s.useRef)(null),k=(0,s.useRef)(null),N=(0,s.useRef)(null),[w,S]=(0,s.useState)(!1),C=(0,s.useRef)(null),I=(0,s.useRef)(0),{isExecuting:_,isStreaming:A,executeOrchestration:R,pollOrchestrationResult:E,resetOrchestration:D}=(e=>{const[t,r]=(0,s.useState)(!1),[a,o]=(0,s.useState)(null),[i,c]=(0,s.useState)(null),[d,u]=(0,s.useState)(!1),m=(0,s.useCallback)(async function(t){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!t.trim())return n.oR.error("\uba54\uc2dc\uc9c0\ub97c \uc785\ub825\ud574\uc8fc\uc138\uc694."),null;try{r(!0),c("STARTING");const a={userInput:t,chat_history:s.chat_history||[],prompt_cards:s.prompt_cards||[],modelId:s.modelId||null};if(console.log("\ud83d\ude80 \ub300\ud654 \uc0dd\uc131 \uc694\uccad \uc2dc\uc791:",{projectId:e,inputLength:t.length,historyLength:a.chat_history.length,promptCardsCount:a.prompt_cards.length,useStreaming:!0===s.useStreaming,modelId:a.modelId,timestamp:(new Date).toISOString()}),!0===s.useStreaming){u(!0);const t=s.onChunk||(()=>{}),o=e=>{var t,a,o,l;console.error("\ud83d\udd27 \uc2a4\ud2b8\ub9ac\ubc0d \uc624\ub958 \ucc98\ub9ac:",e),r(!1),u(!1),c("FAILED"),null!==(t=e.message)&&void 0!==t&&t.includes("Gateway Timeout")||null!==(a=e.message)&&void 0!==a&&a.includes("504")||"ECONNABORTED"===e.code?n.oR.error("\uc11c\ubc84 \uc751\ub2f5 \uc2dc\uac04\uc774 \ucd08\uacfc\ub418\uc5c8\uc2b5\ub2c8\ub2e4. \uc694\uccad\uc744 \uac04\ub2e8\ud788 \ud558\uac70\ub098 \uc7a0\uc2dc \ud6c4 \ub2e4\uc2dc \uc2dc\ub3c4\ud574\uc8fc\uc138\uc694."):null!==(o=e.message)&&void 0!==o&&o.includes("CORS")||null!==(l=e.message)&&void 0!==l&&l.includes("Network Error")?n.oR.error("\uc11c\ubc84 \uc5f0\uacb0\uc5d0 \ubb38\uc81c\uac00 \uc788\uc2b5\ub2c8\ub2e4. \uc0c8\ub85c\uace0\uce68 \ud6c4 \ub2e4\uc2dc \uc2dc\ub3c4\ud574\uc8fc\uc138\uc694."):n.oR.error("\ucc98\ub9ac \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4. \uc7a0\uc2dc \ud6c4 \ub2e4\uc2dc \uc2dc\ub3c4\ud574\uc8fc\uc138\uc694."),s.onError&&s.onError(e)},i=e=>{var t;console.log("\u2705 \uc2a4\ud2b8\ub9ac\ubc0d \uc644\ub8cc:",{resultLength:(null===(t=e.result)||void 0===t?void 0:t.length)||0,timestamp:(new Date).toISOString()}),r(!1),u(!1),c("COMPLETED"),s.onComplete&&s.onComplete(e)};try{return await l.YG.generateTitleStream(e,a,t,o,i)}catch(b){throw console.error("\ud83d\udd27 \uc2a4\ud2b8\ub9ac\ubc0d \ucd5c\uc885 \uc2e4\ud328:",b),u(!1),r(!1),c("FAILED"),n.oR.error("\uc11c\ube44\uc2a4\uc5d0 \uc77c\uc2dc\uc801\uc778 \ubb38\uc81c\uac00 \uc788\uc2b5\ub2c8\ub2e4. \uc7a0\uc2dc \ud6c4 \ub2e4\uc2dc \uc2dc\ub3c4\ud574\uc8fc\uc138\uc694."),b}}console.log("\ud83d\udcc4 \uc77c\ubc18 API \ud638\ucd9c \uc2dc\uc791...");const o=await l.YG.generateTitle(e,a);return console.log("\u2705 \ub300\ud654 \uc0dd\uc131 \uc644\ub8cc:",{mode:o.mode,message:o.message,timestamp:(new Date).toISOString()}),r(!1),c("COMPLETED"),o}catch(y){var a,o,i,d,m,g,x,p,h;throw console.error("\u274c \uc81c\ubaa9 \uc0dd\uc131 \uc2e4\ud328:",{error:y.message,code:y.code,status:null===(a=y.response)||void 0===a?void 0:a.status,timestamp:(new Date).toISOString()}),r(!1),u(!1),c("FAILED"),504===(null===(o=y.response)||void 0===o?void 0:o.status)?n.oR.error("\uc11c\ubc84 \uc751\ub2f5 \uc2dc\uac04\uc774 \ucd08\uacfc\ub418\uc5c8\uc2b5\ub2c8\ub2e4. \uc785\ub825\uc744 \uac04\uc18c\ud654\ud558\uac70\ub098 \uc7a0\uc2dc \ud6c4 \ub2e4\uc2dc \uc2dc\ub3c4\ud574\uc8fc\uc138\uc694."):null!==(i=y.message)&&void 0!==i&&i.includes("CORS")||"ERR_NETWORK"===y.code?n.oR.error("\uc11c\ubc84 \uc5f0\uacb0\uc5d0 \ubb38\uc81c\uac00 \uc788\uc2b5\ub2c8\ub2e4. \ud398\uc774\uc9c0\ub97c \uc0c8\ub85c\uace0\uce68\ud558\uace0 \ub2e4\uc2dc \uc2dc\ub3c4\ud574\uc8fc\uc138\uc694."):400===(null===(d=y.response)||void 0===d?void 0:d.status)&&null!==(m=y.response)&&void 0!==m&&null!==(g=m.data)&&void 0!==g&&g.setup_required?n.oR.error("\ud504\ub86c\ud504\ud2b8 \uce74\ub4dc\ub97c \uba3c\uc800 \uc124\uc815\ud574\uc8fc\uc138\uc694!"):"ECONNABORTED"===y.code?n.oR.error("\uc694\uccad \ucc98\ub9ac \uc2dc\uac04\uc774 \ucd08\uacfc\ub418\uc5c8\uc2b5\ub2c8\ub2e4. \uc785\ub825\uc744 \uc904\uc774\uac70\ub098 \uc7a0\uc2dc \ud6c4 \ub2e4\uc2dc \uc2dc\ub3c4\ud574\uc8fc\uc138\uc694."):500===(null===(x=y.response)||void 0===x?void 0:x.status)?n.oR.error("\uc11c\ubc84\uc5d0 \uc77c\uc2dc\uc801\uc778 \ubb38\uc81c\uac00 \uc788\uc2b5\ub2c8\ub2e4. \uc7a0\uc2dc \ud6c4 \ub2e4\uc2dc \uc2dc\ub3c4\ud574\uc8fc\uc138\uc694."):403===(null===(p=y.response)||void 0===p?void 0:p.status)?n.oR.error("\uad8c\ud55c\uc774 \uc5c6\uc2b5\ub2c8\ub2e4. \ub85c\uadf8\uc778 \uc0c1\ud0dc\ub97c \ud655\uc778\ud574\uc8fc\uc138\uc694."):429===(null===(h=y.response)||void 0===h?void 0:h.status)?n.oR.error("\uc694\uccad\uc774 \ub108\ubb34 \ub9ce\uc2b5\ub2c8\ub2e4. \uc7a0\uc2dc \ud6c4 \ub2e4\uc2dc \uc2dc\ub3c4\ud574\uc8fc\uc138\uc694."):n.oR.error("\ucc98\ub9ac \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4. \ub124\ud2b8\uc6cc\ud06c \uc5f0\uacb0\uc744 \ud655\uc778\ud558\uace0 \ub2e4\uc2dc \uc2dc\ub3c4\ud574\uc8fc\uc138\uc694."),y}},[e]),g=(0,s.useCallback)(async(e,t,s)=>{if(d)return;const a=async()=>{try{const n=await l.YG.getExecutionStatus(e);c(n.status),"SUCCEEDED"===n.status?(r(!1),c("COMPLETED"),t&&t(n)):"FAILED"===n.status?(r(!1),c("FAILED"),s&&s(new Error("\ucc98\ub9ac \uc2e4\ud328"))):"RUNNING"===n.status&&setTimeout(a,3e3)}catch(n){console.error("\uc2e4\ud589 \uc0c1\ud0dc \uc870\ud68c \uc2e4\ud328:",n),r(!1),c("FAILED"),s&&s(n)}};a()},[e,d]),x=(0,s.useCallback)(()=>{r(!1),u(!1),o(null),c(null)},[]);return{isExecuting:t,isStreaming:d,currentExecution:a,executionStatus:i,executeOrchestration:m,pollOrchestrationResult:g,resetOrchestration:x}})(e),{isConnected:L,isConnecting:T,error:P,startStreaming:M,addMessageListener:O,removeMessageListener:W}=(e=>{const[t,r]=(0,s.useState)(!1),[a,n]=(0,s.useState)(!1),[o,l]=(0,s.useState)(null),i=(0,s.useRef)(null),c=(0,s.useRef)(null),d=(0,s.useRef)(0),u=(0,s.useCallback)(()=>{const e="wss://na17isxiri.execute-api.us-east-1.amazonaws.com/prod";if(!e.startsWith("wss://")&&!e.startsWith("ws://"))return console.error("\uc798\ubabb\ub41c WebSocket URL \ud615\uc2dd:",e),null;const t=e.replace(/\/$/,"");return console.log("WebSocket URL \ud655\uc778:",t),console.log("\ud658\uacbd\ubcc0\uc218 REACT_APP_WS_URL:","wss://na17isxiri.execute-api.us-east-1.amazonaws.com/prod"),t},[]),m=(0,s.useCallback)(()=>{var e,t;if((null===(e=i.current)||void 0===e?void 0:e.readyState)!==WebSocket.OPEN&&(null===(t=i.current)||void 0===t?void 0:t.readyState)!==WebSocket.CONNECTING){i.current&&(i.current.close(),i.current=null),n(!0),l(null);try{const e=u();if(!e)return l("\uc720\ud6a8\ud558\uc9c0 \uc54a\uc740 WebSocket URL"),void n(!1);console.log("WebSocket \uc5f0\uacb0 \uc2dc\ub3c4:",e),console.log("\ube0c\ub77c\uc6b0\uc800 WebSocket \uc9c0\uc6d0:",!!window.WebSocket),window.wsConnectStart=Date.now(),i.current=new WebSocket(e);const t=setTimeout(()=>{var e;(null===(e=i.current)||void 0===e?void 0:e.readyState)===WebSocket.CONNECTING&&(console.error("WebSocket \uc5f0\uacb0 \uc2dc\uac04 \ucd08\uacfc"),i.current.close(),l("\uc5f0\uacb0 \uc2dc\uac04\uc774 \ucd08\uacfc\ub418\uc5c8\uc2b5\ub2c8\ub2e4"),n(!1))},1e4);i.current.onopen=e=>{var s,a,o;clearTimeout(t),console.log("\ud83d\udfe2 WebSocket \uc5f0\uacb0 \uc131\uacf5!"),console.log("- Event:",e),console.log("- URL:",null===(s=i.current)||void 0===s?void 0:s.url),console.log("- Protocol:",null===(a=i.current)||void 0===a?void 0:a.protocol),console.log("- Extensions:",null===(o=i.current)||void 0===o?void 0:o.extensions),r(!0),n(!1),l(null),d.current=0},i.current.onclose=e=>{clearTimeout(t);const s=Date.now()-(window.wsConnectStart||0);if(console.log("\ud83d\udd34 WebSocket \uc5f0\uacb0 \uc885\ub8cc:"),console.log("- Code:",e.code),console.log("- Reason:",e.reason||"(no reason provided)"),console.log("- WasClean:",e.wasClean),console.log("- Connection duration:",s+"ms"),r(!1),n(!1),s<500){console.error("\u26a0\ufe0f WebSocket\uc774 \uc989\uc2dc \uc885\ub8cc\ub428 - \uc11c\ubc84 \ubb38\uc81c \uac00\ub2a5\uc131");let t="\uc11c\ubc84 \uc5f0\uacb0\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4.";switch(e.code){case 1006:t="\ube44\uc815\uc0c1\uc801\uc778 \uc5f0\uacb0 \uc885\ub8cc (\ub124\ud2b8\uc6cc\ud06c \ubb38\uc81c \uac00\ub2a5\uc131)";break;case 1002:t="\ud504\ub85c\ud1a0\ucf5c \uc624\ub958";break;case 1003:t="\uc9c0\uc6d0\ud558\uc9c0 \uc54a\ub294 \ub370\uc774\ud130 \ud0c0\uc785";break;case 1011:t="\uc11c\ubc84 \ub0b4\ubd80 \uc624\ub958"}return void l(t)}if(1e3!==e.code&&d.current<5){const e=Math.min(1e3*Math.pow(2,d.current),3e4);console.log(`\ud83d\udd04 ${e}ms \ud6c4 \uc7ac\uc5f0\uacb0 \uc2dc\ub3c4 (${d.current+1}/5)`),c.current=setTimeout(()=>{d.current++,m()},e)}else d.current>=5&&l("\ucd5c\ub300 \uc7ac\uc5f0\uacb0 \uc2dc\ub3c4 \ud69f\uc218\uc5d0 \ub3c4\ub2ec\ud588\uc2b5\ub2c8\ub2e4.")},i.current.onerror=e=>{var r,s;clearTimeout(t),console.error("\ud83d\udca5 WebSocket \uc624\ub958:",e),console.log("- ReadyState:",null===(r=i.current)||void 0===r?void 0:r.readyState),console.log("- URL:",null===(s=i.current)||void 0===s?void 0:s.url),l("WebSocket \uc5f0\uacb0 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4"),n(!1)}}catch(s){console.error("\ud83d\udca5 WebSocket \uc0dd\uc131 \uc2e4\ud328:",s),l("WebSocket \uc5f0\uacb0\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4: "+s.message),n(!1)}}else console.log("\uc774\ubbf8 \uc5f0\uacb0\ub41c WebSocket\uc774 \uc788\uc2b5\ub2c8\ub2e4 (readyState:",i.current.readyState,")")},[u]),g=(0,s.useCallback)(()=>{c.current&&(clearTimeout(c.current),c.current=null),i.current&&(i.current.close(1e3,"Manual disconnect"),i.current=null),r(!1),n(!1),d.current=0},[]),x=(0,s.useCallback)(e=>{var t;return(null===(t=i.current)||void 0===t?void 0:t.readyState)===WebSocket.OPEN?(i.current.send(JSON.stringify(e)),!0):(console.error("WebSocket\uc774 \uc5f0\uacb0\ub418\uc9c0 \uc54a\uc558\uc2b5\ub2c8\ub2e4"),l("WebSocket \uc5f0\uacb0\uc774 \ud544\uc694\ud569\ub2c8\ub2e4"),!1)},[]),p=(0,s.useCallback)(function(r){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(!t)return l("WebSocket \uc5f0\uacb0\uc774 \ud544\uc694\ud569\ub2c8\ub2e4"),!1;const o={action:"stream",projectId:e,userInput:r,chat_history:s,prompt_cards:a,modelId:n};return console.log("WebSocket \uba54\uc2dc\uc9c0 \uc804\uc1a1:",{action:o.action,projectId:o.projectId,inputLength:r.length,historyLength:s.length,promptCardsCount:a.length}),x(o)},[t,e,x]),h=(0,s.useCallback)(e=>{i.current&&i.current.addEventListener("message",e)},[]),b=(0,s.useCallback)(e=>{i.current&&i.current.removeEventListener("message",e)},[]);return(0,s.useEffect)(()=>{const e=setTimeout(()=>{m()},100);return()=>{clearTimeout(e),g()}},[]),(0,s.useEffect)(()=>{t&&e&&(console.log("ProjectId \ubcc0\uacbd\ub428, \uc7ac\uc5f0\uacb0 \uc911:",e),g(),setTimeout(m,200))},[e]),{isConnected:t,isConnecting:a,error:o,connect:m,disconnect:g,sendMessage:x,startStreaming:p,addMessageListener:h,removeMessageListener:b}})(e);(0,s.useEffect)(()=>{o([])},[t]);const z=(0,s.useCallback)(()=>{if(!C.current)return;const e=C.current,t=e.scrollTop,r=e.scrollHeight-e.clientHeight;if(Math.abs(t-I.current)>2){S(!(t>=r-20))}I.current=t},[]),H=(0,s.useCallback)(()=>{!w&&k.current&&k.current.scrollIntoView({behavior:"smooth"})},[w]);(0,s.useEffect)(()=>{H()},[a,H]),(0,s.useEffect)(()=>{const e=e=>{try{const t=JSON.parse(e.data);"stream_chunk"!==t.type&&console.log("WebSocket \uba54\uc2dc\uc9c0 \uc218\uc2e0:",t);const r=h.current;switch(t.type){case"stream_start":console.log("WebSocket \uc2a4\ud2b8\ub9ac\ubc0d \uc2dc\uc791");break;case"progress":t.progress%10===0&&console.log(`\uc9c4\ud589 \uc0c1\ud669: ${t.progress}%`);break;case"stream_chunk":r&&(f.current+=t.content,j.current&&clearTimeout(j.current),j.current=setTimeout(()=>{o(e=>{const t=[...e],s=t.findIndex(e=>e.id===r);if(-1!==s){const e=t[s].content||"";t[s]={...t[s],content:e+f.current,isLoading:!0,isStreaming:!0}}return t}),f.current="",w||H()},50));break;case"stream_complete":r&&(o(e=>{const s=[...e],a=s.findIndex(e=>e.id===r);return-1!==a&&(s[a]={...s[a],content:t.fullContent,isLoading:!1,isStreaming:!1,timestamp:new Date}),s}),h.current=null,H());break;case"error":console.error("WebSocket \uc2a4\ud2b8\ub9ac\ubc0d \uc624\ub958:",t.message),r&&(o(e=>{const t=[...e],s=t.findIndex(e=>e.id===r);return-1!==s&&(t[s]={...t[s],content:"\uba54\uc2dc\uc9c0 \ucc98\ub9ac \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4. \ub2e4\uc2dc \uc2dc\ub3c4\ud574\uc8fc\uc138\uc694.",isLoading:!1,isStreaming:!1,isError:!0,timestamp:new Date}),t}),h.current=null),n.oR.error(t.message);break;default:console.log("\uc54c \uc218 \uc5c6\ub294 WebSocket \uba54\uc2dc\uc9c0 \ud0c0\uc785:",t.type)}}catch(t){console.error("WebSocket \uba54\uc2dc\uc9c0 \ud30c\uc2f1 \uc624\ub958:",t)}};return L&&O(e),()=>{L&&W(e)}},[L,O,W,H]);const $=(0,s.useCallback)((e,t)=>{const r=h.current;console.log("\uccad\ud06c \uc218\uc2e0:",e,"\uc2a4\ud2b8\ub9ac\ubc0d ID:",r),r?(o(t=>{const s=[...t],a=s.findIndex(e=>e.id===r);return-1!==a?(s[a]={...s[a],content:s[a].content+e,isLoading:!0,isStreaming:!0},console.log("\uc2a4\ud2b8\ub9ac\ubc0d \uba54\uc2dc\uc9c0 \uc5c5\ub370\uc774\ud2b8 \uc131\uacf5:",s[a].content)):console.error("\uc2a4\ud2b8\ub9ac\ubc0d \uba54\uc2dc\uc9c0\ub97c \ucc3e\uc744 \uc218 \uc5c6\uc74c:",r),s}),w||H()):console.error("\uc2a4\ud2b8\ub9ac\ubc0d ID\uac00 \uc5c6\uc2b5\ub2c8\ub2e4!")},[H,w]),q=(0,s.useCallback)(e=>{const t=h.current;console.log("\uc2a4\ud2b8\ub9ac\ubc0d \uc644\ub8cc:",e,"\uc2a4\ud2b8\ub9ac\ubc0d ID:",t),t?(o(r=>{const s=[...r],a=s.findIndex(e=>e.id===t);return-1!==a?(s[a]={...s[a],content:e.result,isLoading:!1,isStreaming:!1,performance_metrics:e.performance_metrics,model_info:e.model_info,timestamp:new Date},console.log("\uc2a4\ud2b8\ub9ac\ubc0d \uc644\ub8cc \ucc98\ub9ac \uc131\uacf5:",s[a].content)):console.error("\uc2a4\ud2b8\ub9ac\ubc0d \uc644\ub8cc \ucc98\ub9ac \uc911 \uba54\uc2dc\uc9c0\ub97c \ucc3e\uc744 \uc218 \uc5c6\uc74c:",t),s}),h.current=null,console.log("WebSocket \uc2a4\ud2b8\ub9ac\ubc0d \uc644\ub8cc - \uc785\ub825 \ud65c\uc131\ud654"),g(!0),H()):console.error("\uc2a4\ud2b8\ub9ac\ubc0d \uc644\ub8cc \ucc98\ub9ac \uc911 ID\uac00 \uc5c6\uc2b5\ub2c8\ub2e4!")},[H]),F=(0,s.useCallback)(()=>{console.log("\uc0dd\uc131 \uc911\ub2e8 \uc694\uccad"),b.current&&(b.current.close(),b.current=null),y.current&&(y.current=null);const e=h.current;e&&(o(t=>{const r=[...t],s=r.findIndex(t=>t.id===e);return-1!==s&&(r[s]={...r[s],content:r[s].content+"\n\n[\uc0dd\uc131\uc774 \uc911\ub2e8\ub418\uc5c8\uc2b5\ub2c8\ub2e4]",isLoading:!1,isStreaming:!1,timestamp:new Date}),r}),h.current=null),g(!0),D(),n.oR.success("\uc0dd\uc131\uc774 \uc911\ub2e8\ub418\uc5c8\uc2b5\ub2c8\ub2e4")},[D]),G=(0,s.useCallback)(async()=>{if(console.log("\ud574\ub4e4 \uc804\uc1a1 \ud638\ucd9c:",{inputValue:i.trim(),isGenerating:_,canSendMessage:m}),!i.trim()||_)return void console.log("\uc804\uc1a1 \uc911\ub2e8: \uc870\uac74 \ubd80\uc871");console.log("\uc785\ub825 \ube44\ud65c\uc131\ud654"),g(!1);const e={id:"user-"+Date.now(),type:"user",content:i.trim(),timestamp:new Date},t="streaming-"+Date.now();h.current=t,console.log("\uc0c8 \uc2a4\ud2b8\ub9ac\ubc0d \uba54\uc2dc\uc9c0 ID \uc0dd\uc131:",t);const s={id:t,type:"assistant",content:"",timestamp:new Date,isLoading:!0,isStreaming:!0};o(t=>[...t,e,s]),c("");const n=[...a,e],l=n.filter(e=>!e.isLoading&&!e.isError&&!e.isStreaming).map(e=>({role:"user"===e.type?"user":"assistant",content:e.content})),d=l.slice(-50);console.log("\ub300\ud654 \ud788\uc2a4\ud1a0\ub9ac \uc0dd\uc131:",{totalMessages:n.length,fullHistoryLength:l.length,trimmedHistoryLength:d.length,maxHistoryLength:50,recentHistory:d.slice(-6)});try{const t=(Array.isArray(r)?r:[]).filter(e=>!1!==e.isActive&&!1!==e.enabled).map(e=>({promptId:e.promptId||e.prompt_id,title:e.title||"Untitled",prompt_text:e.prompt_text||e.content||"",tags:e.tags||[],isActive:!1!==e.isActive,stepOrder:e.stepOrder||0})).filter(e=>e.prompt_text.trim()).sort((e,t)=>(e.stepOrder||0)-(t.stepOrder||0));if(console.log("\ub300\ud654 \uc804\uc1a1 \ub370\uc774\ud130 \ud655\uc778:",{messageContent:e.content,chatHistoryLength:d.length,promptCardsCount:t.length,chatHistory:d,promptCards:t.map(e=>({id:e.promptId,title:e.title,contentLength:e.prompt_text.length,stepOrder:e.stepOrder,hasContent:!!e.prompt_text.trim()}))}),L){console.log("WebSocket\uc744 \ud1b5\ud55c \uc2e4\uc2dc\uac04 \uc2a4\ud2b8\ub9ac\ubc0d \uc2dc\uc791");if(M(e.content,d,t,x))return;console.log("WebSocket \uc804\uc1a1 \uc2e4\ud328, SSE \ud3f4\ubc31 \ubaa8\ub4dc\ub85c \uc804\ud658")}else console.log("WebSocket \ubbf8\uc5f0\uacb0, SSE \ubaa8\ub4dc \uc0ac\uc6a9");const s={userInput:e.content,chat_history:d,prompt_cards:t,modelId:x};console.log("\ubc31\uc5d4\ub4dc \uc804\uc1a1 \ub370\uc774\ud130 \ucd5c\uc885 \ud655\uc778:",s);const a={useStreaming:!0,chat_history:s.chat_history,prompt_cards:s.prompt_cards,modelId:s.modelId,onChunk:$,onError:e=>{console.error("\uc2a4\ud2b8\ub9ac\ubc0d \uc624\ub958:",e);const t=h.current;console.log("\uc5d0\ub7ec \ucc98\ub9ac \uc2a4\ud2b8\ub9ac\ubc0d ID:",t),o(e=>{const r=[...e],s=r.findIndex(e=>e.id===t);return-1!==s&&(r[s]={...r[s],content:"\uba54\uc2dc\uc9c0 \ucc98\ub9ac \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4. \ub2e4\uc2dc \uc2dc\ub3c4\ud574\uc8fc\uc138\uc694.",isLoading:!1,isStreaming:!1,isError:!0,timestamp:new Date}),r}),h.current=null},onComplete:q};await R(e.content,a),console.log("SSE \uc2a4\ud2b8\ub9ac\ubc0d \uc644\ub8cc - \uc785\ub825 \ud65c\uc131\ud654"),g(!0)}catch(p){var u;console.error("\uba54\uc2dc\uc9c0 \uc804\uc1a1 \uc2e4\ud328:",p);const e="ECONNABORTED"===p.code?"timeout":"general",t={id:"error-"+Date.now(),type:"assistant",content:"timeout"===e?"\ucc98\ub9ac \uc2dc\uac04\uc774 \ucd08\uacfc\ub418\uc5c8\uc2b5\ub2c8\ub2e4. \uc694\uccad\uc774 \ubcf5\uc7a1\ud558\uac70\ub098 \uc11c\ubc84\uac00 \ubc14\uc05c \uc0c1\ud0dc\uc77c \uc218 \uc788\uc2b5\ub2c8\ub2e4. \uc7a0\uc2dc \ud6c4 \ub2e4\uc2dc \uc2dc\ub3c4\ud574\uc8fc\uc138\uc694.":"\uba54\uc2dc\uc9c0 \ucc98\ub9ac \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4. \ub124\ud2b8\uc6cc\ud06c \uc5f0\uacb0\uc744 \ud655\uc778\ud558\uace0 \ub2e4\uc2dc \uc2dc\ub3c4\ud574\uc8fc\uc138\uc694.",timestamp:new Date,isError:!0,errorDetails:{type:e,message:p.message,status:null===(u=p.response)||void 0===u?void 0:u.status}};o(e=>{const r=h.current;return[...e.filter(e=>e.id!==r),t]}),h.current=null,g(!0)}g(!0)},[i,_,R,$,q,a]),U=(0,s.useCallback)(e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),G())},[G]),K=(0,s.useCallback)(async(e,t)=>{await v(e)&&(u(t),setTimeout(()=>u(null),2e3))},[]),B=(0,s.useCallback)(async(e,t,r)=>{await v(e,"\ubcf5\uc0ac\ub418\uc5c8\uc2b5\ub2c8\ub2e4!")&&(u(`${t}_title_${r}`),setTimeout(()=>u(null),2e3))},[]),V=(0,s.useCallback)(()=>{o([]),c(""),u(null),g(!0),h.current=null,b.current=null,y.current=null,D()},[D]);return{messages:a,inputValue:i,setInputValue:c,copiedMessage:d,isGenerating:_,isStreaming:A,canSendMessage:m,streamingMessageId:h.current,messagesEndRef:k,inputRef:N,handleSendMessage:G,handleStopGeneration:F,handleKeyPress:U,handleCopyMessage:K,handleCopyTitle:B,resetChat:V,scrollToBottom:H,wsConnected:L,wsConnecting:T,wsError:P,scrollContainerRef:C,handleScroll:z,isUserScrolling:w,selectedModel:x,setSelectedModel:p}};var j=r(5440),k=r(3546),N=r(8047),w=r(9399),S=r(4538),C=r(3744),I=r(5377),_=r(4546);const A=()=>(0,i.jsxs)(j.P.div,{className:"inline-flex items-center mt-2 px-2 py-1 bg-blue-50 dark:bg-blue-900 rounded-lg text-blue-600 dark:text-blue-400 text-xs font-medium",initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{duration:.3},children:[(0,i.jsxs)(j.P.div,{className:"relative h-2 w-2 mr-2",animate:{scale:[1,1.2,1]},transition:{repeat:1/0,duration:1.5},children:[(0,i.jsx)("div",{className:"absolute animate-ping h-2 w-2 rounded-full bg-blue-400 opacity-75"}),(0,i.jsx)("div",{className:"absolute h-2 w-2 rounded-full bg-blue-600 dark:bg-blue-400"})]}),(0,i.jsx)(j.P.span,{animate:{opacity:[.5,1,.5]},transition:{repeat:1/0,duration:2},children:"\uc2a4\ud2b8\ub9ac\ubc0d \uc911..."})]}),R=e=>{let{errorDetails:t}=e;return t?(0,i.jsxs)(j.P.div,{className:"mt-3 p-3 bg-red-50 dark:bg-red-900/20 rounded-lg border border-red-200 dark:border-red-800",initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},transition:{duration:.3},children:[(0,i.jsxs)("div",{className:"flex items-center text-sm text-red-700 dark:text-red-400 mb-2",children:[(0,i.jsx)(w.A,{className:"h-4 w-4 mr-2"}),(0,i.jsx)("span",{className:"font-medium",children:"\uc624\ub958 \uc0c1\uc138 \uc815\ubcf4"})]}),(0,i.jsxs)("div",{className:"text-xs text-red-600 dark:text-red-400 space-y-1",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("span",{className:"font-medium",children:"\uc720\ud615:"})," ",t.type]}),t.status&&(0,i.jsxs)("div",{children:[(0,i.jsx)("span",{className:"font-medium",children:"\uc0c1\ud0dc:"})," ",t.status]}),t.message&&(0,i.jsxs)("div",{children:[(0,i.jsx)("span",{className:"font-medium",children:"\uba54\uc2dc\uc9c0:"})," ",t.message]})]})]}):null},E=e=>{var t,r;let{message:s,onCopyMessage:a,onCopyTitle:n,copiedMessage:o}=e;const l="user"===s.type,c={initial:{opacity:0,y:10},animate:{opacity:1,y:0,transition:{type:"spring",stiffness:300,damping:25}}},d={initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1,transition:{type:"spring",stiffness:400,damping:20}},hover:{scale:1.05,transition:{type:"spring",stiffness:400,damping:20}},tap:{scale:.95,transition:{type:"spring",stiffness:600,damping:30}}};return(0,i.jsx)(j.P.div,{className:`group relative ${l?"ml-8":"mr-8"} mb-6`,variants:{initial:{opacity:0,y:20,scale:.95},animate:{opacity:1,y:0,scale:1,transition:{type:"spring",stiffness:300,damping:25,staggerChildren:.1}}},initial:"initial",animate:"animate",children:(0,i.jsx)("div",{className:"flex "+(l?"justify-end":"justify-start"),children:l?(0,i.jsxs)(j.P.div,{className:"max-w-[85%] rounded-lg px-6 py-4 bg-blue-600 dark:bg-blue-700 text-white",variants:c,whileHover:{scale:1.01},transition:{type:"spring",stiffness:300,damping:25},children:[(0,i.jsx)(j.P.div,{className:"text-base font-medium whitespace-pre-wrap leading-relaxed",variants:c,children:s.content}),(0,i.jsx)(j.P.div,{className:"text-xs mt-3 font-medium text-blue-100 dark:text-blue-200",variants:c,children:(null===(t=s.timestamp)||void 0===t?void 0:t.toLocaleTimeString())||""})]}):(0,i.jsxs)(j.P.div,{className:"max-w-[85%] w-full",variants:c,children:[(0,i.jsx)(j.P.div,{className:"whitespace-pre-wrap leading-relaxed text-gray-800 dark:text-gray-200",variants:c,children:s.isError?(0,i.jsxs)(j.P.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.4},children:[(0,i.jsx)("div",{className:"text-red-600 dark:text-red-400 text-base",children:s.content}),(0,i.jsx)(R,{errorDetails:s.errorDetails})]}):s.isLoading?(0,i.jsx)("div",{children:s.isStreaming?(0,i.jsxs)("div",{children:[s.content?(0,i.jsx)("div",{className:"prose prose-base max-w-none prose-headings:text-gray-900 dark:prose-headings:text-white prose-p:text-gray-800 dark:prose-p:text-gray-200 prose-strong:text-gray-900 dark:prose-strong:text-white prose-ul:text-gray-800 dark:prose-ul:text-gray-200 prose-li:text-gray-800 dark:prose-li:text-gray-200 prose-code:text-gray-800 dark:prose-code:text-gray-200 prose-pre:bg-gray-50 dark:prose-pre:bg-gray-800",children:(0,i.jsx)(N.oz,{children:s.content})}):(0,i.jsx)("div",{className:"text-blue-600 dark:text-blue-400 text-base font-medium",children:"\uc751\ub2f5\uc744 \uc0dd\uc131\ud558\ub294 \uc911..."}),(0,i.jsx)(A,{})]}):(0,i.jsx)(_.dO,{isUser:!1})}):(0,i.jsx)("div",{className:"prose prose-base max-w-none prose-headings:text-gray-900 dark:prose-headings:text-white prose-p:text-gray-800 dark:prose-p:text-gray-200 prose-strong:text-gray-900 dark:prose-strong:text-white prose-ul:text-gray-800 dark:prose-ul:text-gray-200 prose-li:text-gray-800 dark:prose-li:text-gray-200 prose-code:text-gray-800 dark:prose-code:text-gray-200 prose-pre:bg-gray-50 dark:prose-pre:bg-gray-800",children:(0,i.jsx)(N.oz,{children:s.content})})}),(0,i.jsx)(k.N,{children:s.titles&&(0,i.jsx)(j.P.div,{className:"mt-4 pt-3 border-t border-gray-200 dark:border-gray-700",initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.3},children:(0,i.jsx)("div",{className:"flex flex-wrap gap-2",children:s.titles.map((e,t)=>(0,i.jsxs)(j.P.button,{onClick:()=>n(e,s.id,t),className:"flex items-center px-3 py-1.5 rounded-lg text-xs font-medium transition-colors "+(o===`${s.id}_title_${t}`?"bg-green-100 dark:bg-green-900 text-green-700 dark:text-green-400 border border-green-200 dark:border-green-700":"bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-300 border border-gray-200 dark:border-gray-600"),variants:d,initial:"initial",animate:"animate",whileHover:"hover",whileTap:"tap",custom:t,children:[(0,i.jsx)(j.P.div,{animate:o===`${s.id}_title_${t}`?{scale:[1,1.2,1]}:{},transition:{duration:.3},children:o===`${s.id}_title_${t}`?(0,i.jsx)(S.A,{className:"h-3 w-3 mr-1"}):(0,i.jsx)(C.A,{className:"h-3 w-3 mr-1"})}),"\uc81c\ubaa9 ",t+1," \ubcf5\uc0ac"]},t))})})}),!s.isLoading&&(0,i.jsxs)("div",{className:"mt-4 flex items-center justify-between",children:[(0,i.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,i.jsxs)(j.P.button,{onClick:()=>a(s.content,s.id),className:"flex items-center px-3 py-2 rounded-lg text-sm font-medium transition-colors "+(o===s.id?"bg-green-100 dark:bg-green-900 text-green-700 dark:text-green-400 border border-green-200 dark:border-green-700":"bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-300 border border-gray-200 dark:border-gray-600"),variants:d,whileHover:"hover",whileTap:"tap",children:[(0,i.jsx)(j.P.div,{animate:o===s.id?{scale:[1,1.2,1]}:{},transition:{duration:.3},children:o===s.id?(0,i.jsx)(S.A,{className:"h-4 w-4 mr-2"}):(0,i.jsx)(I.A,{className:"h-4 w-4 mr-2"})}),o===s.id?"\ubcf5\uc0ac\ub428!":"\ubcf5\uc0ac\ud558\uae30"]}),s.performance_metrics&&(0,i.jsxs)("div",{className:"text-xs text-gray-500 dark:text-gray-400 bg-gray-50 dark:bg-gray-800 px-2 py-1 rounded",children:["\ucc98\ub9ac\uc2dc\uac04: ",s.performance_metrics.total_time,"\ucd08"]})]}),(0,i.jsx)("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:(null===(r=s.timestamp)||void 0===r?void 0:r.toLocaleTimeString())||""})]})]})})})};var D=r(2517);const L=[{id:"anthropic.claude-3-5-sonnet-20241022-v2:0",name:"Claude 3.5 Sonnet v2",provider:"Anthropic",category:"premium",speed:"\ube60\ub984",quality:"\ucd5c\uace0",description:"\ud14d\uc2a4\ud2b8 \uc0dd\uc131, \ub2e4\uad6d\uc5b4 \uc9c0\uc6d0, \ubcf5\uc7a1\ud55c \ucd94\ub860\uc5d0 \ucd5c\uc801",recommended:!0},{id:"anthropic.claude-3-5-haiku-20241022-v1:0",name:"Claude 3.5 Haiku",provider:"Anthropic",category:"fast",speed:"\ub9e4\uc6b0 \ube60\ub984",quality:"\uc88b\uc74c",description:"\ube60\ub978 \uc751\ub2f5, \ud14d\uc2a4\ud2b8 \uc0dd\uc131\uc5d0 \ucd5c\uc801\ud654",recommended:!0},{id:"anthropic.claude-sonnet-4-v1:0",name:"Claude Sonnet 4",provider:"Anthropic",category:"premium",speed:"\ubcf4\ud1b5",quality:"\ucd5c\uace0",description:"\ucd5c\uc2e0 \ubaa8\ub378\ub85c \ud5a5\uc0c1\ub41c \ud14d\uc2a4\ud2b8 \uc0dd\uc131, \uc2e4\uc2dc\uac04 \uc9c0\uc6d0",new:!0},{id:"anthropic.claude-opus-4-v1:0",name:"Claude Opus 4",provider:"Anthropic",category:"premium",speed:"\ub290\ub9bc",quality:"\ucd5c\uace0",description:"\ucd5c\uace0 \uc131\ub2a5\uc774 \ud544\uc694\ud55c \ubcf5\uc7a1\ud55c \uc81c\ubaa9 \uc0dd\uc131",new:!0},{id:"anthropic.claude-3-opus-20240229-v1:0",name:"Claude 3 Opus",provider:"Anthropic",category:"premium",speed:"\ub290\ub9bc",quality:"\ucd5c\uace0",description:"\uc774\ubbf8\uc9c0\ub97c \ud14d\uc2a4\ud2b8 \ubc0f \ucf54\ub4dc\ub85c \ubcc0\ud658, \ubcf5\uc7a1\ud55c \ucd94\ub860"},{id:"anthropic.claude-3-sonnet-20240229-v1:0",name:"Claude 3 Sonnet",provider:"Anthropic",category:"balanced",speed:"\ubcf4\ud1b5",quality:"\uc88b\uc74c",description:"\uade0\ud615\uc7a1\ud78c \uc131\ub2a5\uacfc \uc18d\ub3c4"},{id:"anthropic.claude-3-haiku-20240307-v1:0",name:"Claude 3 Haiku",provider:"Anthropic",category:"fast",speed:"\ube60\ub984",quality:"\ubcf4\ud1b5",description:"\ub300\ud654, \ucc44\ud305 \ucd5c\uc801\ud654"},{id:"amazon.nova-pro-v1:0",name:"Nova Pro",provider:"Amazon",category:"balanced",speed:"\ube60\ub984",quality:"\uc88b\uc74c",description:"\ud14d\uc2a4\ud2b8 \uc0dd\uc131, \ucf54\ub4dc \uc0dd\uc131, \ubcf5\uc7a1\ud55c \ucd94\ub860",recommended:!0},{id:"amazon.nova-lite-v1:0",name:"Nova Lite",provider:"Amazon",category:"fast",speed:"\ub9e4\uc6b0 \ube60\ub984",quality:"\ubcf4\ud1b5",description:"\uac00\ubcbc\uc6b4 \ubaa8\ub378\ub85c \ube60\ub978 \uc751\ub2f5, \ub2e4\uad6d\uc5b4 \uc9c0\uc6d0"},{id:"amazon.nova-micro-v1:0",name:"Nova Micro",provider:"Amazon",category:"fast",speed:"\ucd08\uace0\uc18d",quality:"\uae30\ubcf8",description:"\ucd08\uacbd\ub7c9 \ubaa8\ub378\ub85c \ub9e4\uc6b0 \ube60\ub978 \uc751\ub2f5"},{id:"meta.llama3-3-70b-instruct-v1:0",name:"Llama 3.3 70B",provider:"Meta",category:"balanced",speed:"\ubcf4\ud1b5",quality:"\uc88b\uc74c",description:"\ud234 \uc0ac\uc6a9, \ucf54\ub4dc \uc0dd\uc131, \uace0\uae09 \ucd94\ub860"},{id:"meta.llama3-2-3b-instruct-v1:0",name:"Llama 3.2 3B",provider:"Meta",category:"fast",speed:"\ube60\ub984",quality:"\ubcf4\ud1b5",description:"\uacbd\ub7c9 \ubaa8\ub378\ub85c \ube60\ub978 \ucc98\ub9ac"}],T=e=>{let{selectedModel:t,onModelChange:r}=e;const[a,n]=(0,s.useState)(!1),[o,l]=(0,s.useState)("all"),c=L.find(e=>e.id===t)||L[0],d=L.filter(e=>"all"===o||e.provider.toLowerCase()===o);return(0,i.jsxs)("div",{className:"relative",children:[(0,i.jsxs)("button",{onClick:()=>n(!a),className:"flex items-center gap-2 px-2 py-1 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-md hover:bg-gray-100 dark:hover:bg-gray-600 transition-colors text-xs",title:`${c.name} (${c.provider})`,children:[(0,i.jsx)("span",{className:"text-gray-700 dark:text-gray-300 font-medium",children:c.name.replace(/Claude |Llama |Nova /,"")}),(0,i.jsx)(D.A,{className:"h-3 w-3 text-gray-500 transition-transform "+(a?"rotate-180":"")})]}),a&&(0,i.jsxs)("div",{className:"absolute bottom-full left-0 mb-2 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-600 rounded-lg shadow-lg z-50 max-h-[400px] overflow-hidden min-w-[300px]",children:[(0,i.jsx)("div",{className:"p-3 border-b border-gray-200 dark:border-gray-600",children:(0,i.jsx)("div",{className:"flex gap-1 text-xs",children:[{key:"all",label:"\uc804\uccb4"},{key:"anthropic",label:"Anthropic"},{key:"amazon",label:"Amazon"},{key:"meta",label:"Meta"}].map(e=>(0,i.jsx)("button",{onClick:()=>l(e.key),className:"px-2 py-1 rounded transition-colors "+(o===e.key?"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200":"text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700"),children:e.label},e.key))})}),(0,i.jsx)("div",{className:"max-h-[300px] overflow-y-auto",children:d.map(e=>(0,i.jsx)("button",{onClick:()=>{return t=e.id,r(t),void n(!1);var t},className:"w-full p-3 text-left hover:bg-gray-50 dark:hover:bg-gray-700 border-b border-gray-100 dark:border-gray-700 last:border-b-0 transition-colors "+(e.id===t?"bg-blue-50 dark:bg-blue-900/20":""),children:(0,i.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,i.jsx)("div",{className:"mb-1",children:(0,i.jsx)("span",{className:"font-medium text-gray-900 dark:text-white",children:e.name})}),(0,i.jsxs)("div",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1",children:[e.provider," \u2022 \uc18d\ub3c4: ",e.speed," \u2022 \ud488\uc9c8: ",e.quality]}),(0,i.jsx)("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:e.description})]})},e.id))})]}),a&&(0,i.jsx)("div",{className:"fixed inset-0 z-40",onClick:()=>n(!1)})]})},P=e=>{let{projectId:t,projectName:r,promptCards:n=[]}=e;(0,a.Zp)();const[o,l]=(0,s.useState)(null),[c,u]=(0,s.useState)(!1),{messages:m,inputValue:x,setInputValue:v,copiedMessage:j,isGenerating:k,canSendMessage:N,messagesEndRef:w,inputRef:S,handleSendMessage:C,handleStopGeneration:I,handleKeyPress:_,handleCopyMessage:A,handleCopyTitle:R,wsConnected:D,wsConnecting:L,wsError:P,scrollContainerRef:M,handleScroll:O,isUserScrolling:W,selectedModel:z,setSelectedModel:H}=f(t,r,n);return(0,i.jsxs)("div",{className:"flex flex-col h-full bg-gray-50 dark:bg-gray-900 transition-colors duration-200",children:[(0,i.jsx)("div",{ref:M,onScroll:O,className:"flex-1 overflow-y-auto px-6 py-6 min-h-0 bg-gray-50 dark:bg-gray-900",children:(0,i.jsxs)("div",{className:"max-w-4xl mx-auto space-y-6",children:[0===m.length?(0,i.jsx)("div",{className:"flex flex-col items-center justify-center py-24 mt-12",children:(0,i.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-md p-8 max-w-2xl w-full transition-colors duration-200",children:[(0,i.jsx)("div",{className:"flex justify-center mb-6",children:(0,i.jsx)("div",{className:"bg-blue-100 dark:bg-blue-900 p-3 rounded-full",children:(0,i.jsx)(p.A,{className:"h-8 w-8 text-blue-600 dark:text-blue-400"})})}),(0,i.jsx)("h2",{className:"text-xl font-semibold text-center text-gray-800 dark:text-white mb-4",children:"AI \ud5e4\ub4dc\ub77c\uc778 \uc5b4\uc2dc\uc2a4\ud134\ud2b8"}),(0,i.jsx)("p",{className:"text-gray-600 dark:text-gray-300 text-center mb-6",children:"\ubcf8\ubb38\uc744 \uc785\ub825\ud558\uba74 AI\uac00 \ucd5c\uc801\uc758 \ud5e4\ub4dc\ub77c\uc778\uc744 \uc81c\uc548\ud574 \ub4dc\ub9bd\ub2c8\ub2e4."}),(0,i.jsxs)("div",{className:"space-y-4",children:[(0,i.jsxs)("div",{className:"flex items-start p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[(0,i.jsx)("div",{className:"mr-3 mt-1",children:(0,i.jsx)(d.A,{className:"h-5 w-5 text-blue-500 dark:text-blue-400"})}),(0,i.jsx)("div",{children:(0,i.jsxs)("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:[(0,i.jsx)("span",{className:"font-medium",children:"\uc2dc\uc791\ud558\ub294 \ubc29\ubc95:"})," \uc544\ub798 \uc785\ub825\ucc3d\uc5d0 \ubcf8\ubb38\uc744 \ubd99\uc5ec\ub123\uace0 \uc804\uc1a1 \ubc84\ud2bc\uc744 \ud074\ub9ad\ud558\uc138\uc694"]})})]}),(0,i.jsxs)("div",{className:"flex items-start p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[(0,i.jsx)("div",{className:"mr-3 mt-1",children:(0,i.jsx)(d.A,{className:"h-5 w-5 text-blue-500 dark:text-blue-400"})}),(0,i.jsx)("div",{children:(0,i.jsxs)("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:[(0,i.jsx)("span",{className:"font-medium",children:"\ud504\ub86c\ud504\ud2b8 \uce74\ub4dc:"})," ","\uad00\ub9ac\uc790 \ubaa8\ub4dc\uc5d0\uc11c \ud504\ub86c\ud504\ud2b8 \uce74\ub4dc\ub97c \uc791\uc131\ud558\uc5ec \uc81c\ubaa9\uc744 \uc0dd\uc131\ud558\uc138\uc694"]})})]})]})]})}):m.map(e=>(0,i.jsx)(E,{message:e,onCopyMessage:A,onCopyTitle:R,copiedMessage:j},e.id)),(0,i.jsx)("div",{ref:w})]})}),(0,i.jsx)("div",{className:"flex-shrink-0 px-6 py-4",children:(0,i.jsxs)("div",{className:"max-w-4xl mx-auto",children:[o&&(0,i.jsxs)("div",{className:"mb-3 p-3 bg-blue-50 border border-blue-200 rounded-lg flex items-center justify-between",children:[(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsx)(h.A,{className:"h-4 w-4 text-blue-600"}),(0,i.jsx)("span",{className:"text-sm text-blue-700",children:o.name})]}),(0,i.jsx)("button",{onClick:()=>{l(null),v("")},className:"text-blue-600 hover:text-blue-800 p-1",children:(0,i.jsx)(g.A,{className:"h-4 w-4"})})]}),(0,i.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-[20px] shadow-md p-4 relative transition-colors duration-200",style:{boxShadow:"rgba(0, 0, 0, 0.1) 0px 4px 12px 0px",border:"1px solid rgba(112, 115, 124, 0.08)",minHeight:"128px",display:"flex",flexDirection:"column",gap:"24px"},onDrop:e=>{e.preventDefault(),u(!1);const t=e.dataTransfer.files;if(t.length>0){const e=t[0];if("text/plain"===e.type){const t=new FileReader;t.onload=t=>{var r;v((null===(r=t.target)||void 0===r?void 0:r.result)||""),l(e)},t.readAsText(e)}}},onDragOver:e=>{e.preventDefault(),u(!0)},onDragLeave:()=>{u(!1)},children:[(0,i.jsxs)("div",{className:"flex-1 relative",children:[(0,i.jsx)("textarea",{ref:S,value:x,onChange:e=>v(e.target.value),onKeyPress:_,placeholder:k?"\uc0dd\uc131 \uc911\uc785\ub2c8\ub2e4...":"\uae30\uc0ac \ubcf8\ubb38\uc744 \uc785\ub825\ud558\uc138\uc694...",className:"w-full pr-14 pl-2 py-2 border-0 focus:outline-none resize-none transition-colors "+(c?"bg-blue-50 dark:bg-blue-900":k?"bg-gray-50 dark:bg-gray-700":"bg-white dark:bg-gray-800 text-gray-900 dark:text-white"),rows:1,style:{minHeight:"24px",maxHeight:"150px",lineHeight:"1.4",overflowY:"auto",whiteSpace:"pre-wrap",fontSize:"16px",fontWeight:"400",color:k?"#9CA3AF":"#171719"},disabled:k}),(0,i.jsxs)("div",{className:"absolute right-3 bottom-3 flex items-center gap-2",children:[k&&(0,i.jsx)("button",{onClick:I,className:"flex-shrink-0 bg-red-600 text-white p-2 rounded-full hover:bg-red-700 transition-colors flex items-center justify-center",style:{width:"32px",height:"32px"},title:"\uc0dd\uc131 \uc911\ub2e8",children:(0,i.jsx)(b.A,{className:"h-4 w-4"})}),(0,i.jsx)("button",{onClick:C,disabled:!x.trim()||k,className:"flex-shrink-0 bg-blue-600 text-white p-2 rounded-full hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center justify-center",style:{width:"32px",height:"32px"},title:k?"\uc0dd\uc131 \uc911...":D?"\uc2e4\uc2dc\uac04 \uc2a4\ud2b8\ub9ac\ubc0d \uc0ac\uc6a9 \uac00\ub2a5":"\uc77c\ubc18 \ubaa8\ub4dc (WebSocket \uc5f0\uacb0 \uc548\ub428)",children:k?(0,i.jsx)("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}):(0,i.jsx)(y.A,{className:"h-5 w-5"})})]})]}),(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)("div",{className:"flex items-center gap-4",children:[(0,i.jsxs)("div",{className:"flex items-center gap-2 text-xs text-gray-400 dark:text-gray-500",children:[(0,i.jsxs)("span",{children:[x.length,"\uc790"]}),x.length<50&&(0,i.jsx)("span",{children:"\ud83d\udcdd 50\uc790 \uc774\uc0c1 \uad8c\uc7a5"})]}),(0,i.jsx)("div",{className:"flex items-center gap-2",children:(0,i.jsx)(T,{selectedModel:z,onModelChange:H})})]}),(0,i.jsxs)("div",{className:"flex items-center gap-3 text-xs",children:[W&&(0,i.jsxs)("div",{className:"flex items-center gap-1 text-blue-600 dark:text-blue-400",children:[(0,i.jsx)("span",{children:"\ud83d\udcdc"}),(0,i.jsx)("span",{children:"\uc790\uc720 \uc2a4\ud06c\ub864"})]}),L?(0,i.jsxs)("div",{className:"flex items-center gap-1 text-yellow-600 dark:text-yellow-400",children:[(0,i.jsx)("div",{className:"animate-spin rounded-full h-3 w-3 border-b-2 border-yellow-600"}),(0,i.jsx)("span",{children:"\uc5f0\uacb0 \uc911..."})]}):D?(0,i.jsxs)("div",{className:"flex items-center gap-1 text-green-600 dark:text-green-400",children:[(0,i.jsx)("div",{className:"w-2 h-2 bg-green-600 rounded-full"}),(0,i.jsx)("span",{children:"\uc2e4\uc2dc\uac04 \uc2a4\ud2b8\ub9ac\ubc0d"})]}):(0,i.jsxs)("div",{className:"flex items-center gap-1 text-gray-500 dark:text-gray-400",children:[(0,i.jsx)("div",{className:"w-2 h-2 bg-gray-400 rounded-full"}),(0,i.jsx)("span",{children:"\uc77c\ubc18 \ubaa8\ub4dc"})]}),P&&(0,i.jsx)("div",{className:"text-red-500 dark:text-red-400 text-xs",title:P,children:"\u26a0\ufe0f"})]})]})]})]})})]})},M=e=>{let{card:t,onEdit:r,onDelete:s}=e;return(0,i.jsxs)("div",{className:"bg-white dark:bg-gray-700 rounded-xl p-4 flex flex-col space-y-3 border border-gray-200 dark:border-gray-600 hover:shadow-lg hover:border-blue-400 dark:hover:border-blue-500 transition-all duration-200",children:[(0,i.jsxs)("div",{className:"flex items-start justify-between",children:[(0,i.jsx)("h3",{className:"font-semibold text-sm text-gray-800 dark:text-gray-200 leading-tight pr-2 flex-1",children:t.title||`\ud504\ub86c\ud504\ud2b8 ${t.promptId||t.prompt_id}`}),(0,i.jsxs)("div",{className:"flex items-center flex-shrink-0",children:[(0,i.jsx)("button",{onClick:async e=>{e.preventDefault(),e.stopPropagation(),await r()},className:"p-1 text-gray-500 dark:text-gray-400 rounded-full hover:bg-gray-100 dark:hover:bg-gray-600 hover:text-blue-600 dark:hover:text-blue-400 transition-colors",children:(0,i.jsx)(u.A,{className:"h-4 w-4"})}),(0,i.jsx)("button",{onClick:s,className:"p-1 text-gray-500 dark:text-gray-400 rounded-full hover:bg-gray-100 dark:hover:bg-gray-600 hover:text-red-600 dark:hover:text-red-400 transition-colors",children:(0,i.jsx)(m.A,{className:"h-4 w-4"})})]})]}),t.tags&&t.tags.length>0&&(0,i.jsxs)("div",{className:"flex flex-wrap gap-1.5",children:[t.tags.slice(0,3).map(e=>(0,i.jsxs)("span",{className:"px-2 py-0.5 text-xs bg-gray-100 dark:bg-gray-600 text-gray-700 dark:text-gray-300 rounded-full",children:["#",e]},e)),t.tags.length>3&&(0,i.jsxs)("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:["+",t.tags.length-3]})]}),(t.content||t.prompt_text)&&(0,i.jsx)("p",{className:"text-xs text-gray-600 dark:text-gray-300 leading-relaxed line-clamp-2",children:t.content||t.prompt_text}),(0,i.jsxs)("div",{className:"flex items-end justify-between pt-2 text-xs text-gray-400 dark:text-gray-500",children:[(0,i.jsxs)("span",{className:"flex-shrink-0",children:["\uc0dd\uc131:"," ",new Date(t.createdAt||new Date).toLocaleDateString("ko-KR",{year:"2-digit",month:"2-digit",day:"2-digit"})]}),t.updatedAt&&new Date(t.updatedAt)>new Date(t.createdAt)&&(0,i.jsxs)("span",{className:"flex-shrink-0 ml-2",children:["\uc218\uc815:"," ",new Date(t.updatedAt).toLocaleDateString("ko-KR",{year:"2-digit",month:"2-digit",day:"2-digit"})]})]})]})},O=e=>{let{isOpen:t,onSubmit:r,onCancel:a,initialData:o}=e;const[l,c]=(0,s.useState)({title:"",prompt_text:"",tags:[],enabled:!0}),[d,m]=(0,s.useState)("");(0,s.useEffect)(()=>{o&&c({title:o.title||"",prompt_text:o.prompt_text||o.content||"",tags:Array.isArray(o.tags)?[...o.tags]:[],enabled:!1!==o.enabled&&!1!==o.isActive})},[o]);const p=(e,t)=>{c(r=>({...r,[e]:t}))};return t?(0,i.jsx)("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:(0,i.jsxs)("div",{className:"bg-white rounded-2xl max-w-3xl w-full max-h-[90vh] overflow-hidden shadow-2xl",children:[(0,i.jsx)("div",{className:"border-b border-gray-200 p-6 bg-white",children:(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,i.jsx)("div",{className:"w-10 h-10 bg-gray-100 rounded-lg flex items-center justify-center",children:(0,i.jsx)(u.A,{className:"h-6 w-6 text-gray-600"})}),(0,i.jsxs)("div",{children:[(0,i.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:o?"\ud504\ub86c\ud504\ud2b8 \ud3b8\uc9d1":"\uc0c8 \ud504\ub86c\ud504\ud2b8"}),(0,i.jsx)("p",{className:"text-sm text-gray-500",children:o?"\ud504\ub86c\ud504\ud2b8 \ub0b4\uc6a9\uc744 \uc218\uc815\ud558\uc138\uc694":"\uc0c8\ub85c\uc6b4 \ud504\ub86c\ud504\ud2b8\ub97c \uc791\uc131\ud558\uc138\uc694"})]})]}),(0,i.jsx)("button",{type:"button",onClick:a,className:"p-2 text-gray-400 hover:text-gray-600 rounded-lg hover:bg-gray-100 transition-colors",children:(0,i.jsx)(g.A,{className:"h-5 w-5"})})]})}),(0,i.jsxs)("form",{onSubmit:e=>{e.preventDefault(),l.prompt_text.trim()?r(l):n.oR.error("\ud504\ub86c\ud504\ud2b8 \ub0b4\uc6a9\uc744 \uc785\ub825\ud574\uc8fc\uc138\uc694")},className:"p-6 space-y-6 overflow-y-auto max-h-[calc(90vh-120px)]",children:[(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsx)("label",{className:"flex items-center text-sm font-semibold text-gray-800",children:"\ud504\ub86c\ud504\ud2b8 \uc81c\ubaa9"}),(0,i.jsx)("input",{type:"text",value:l.title,onChange:e=>p("title",e.target.value),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:outline-none focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all duration-200 text-gray-800 placeholder-gray-400",placeholder:"\ud504\ub86c\ud504\ud2b8 \uc81c\ubaa9\uc744 \uc785\ub825\ud558\uc138\uc694"})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsxs)("label",{className:"flex items-center text-sm font-semibold text-gray-800",children:[(0,i.jsx)(x.A,{className:"h-4 w-4 mr-2 text-gray-500"}),"\ud0dc\uadf8"]}),(0,i.jsxs)("div",{className:"space-y-3",children:[(0,i.jsx)("input",{type:"text",value:d,onChange:e=>m(e.target.value),onKeyPress:e=>{if("Enter"===e.key&&d.trim()){e.preventDefault();const t=d.trim();!l.tags.includes(t)&&l.tags.length<5&&c(e=>({...e,tags:[...e.tags,t]})),m("")}},className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:outline-none focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all duration-200",placeholder:"\ud0dc\uadf8\ub97c \uc785\ub825\ud558\uace0 Enter\ub97c \ub204\ub974\uc138\uc694 (\ucd5c\ub300 5\uac1c)",maxLength:20,disabled:l.tags.length>=5}),l.tags.length>0&&(0,i.jsx)("div",{className:"flex flex-wrap gap-2",children:l.tags.map((e,t)=>(0,i.jsxs)("span",{className:"inline-flex items-center px-3 py-1 bg-blue-100 text-blue-800 text-sm rounded-full",children:["#",e,(0,i.jsx)("button",{type:"button",onClick:()=>{return t=e,void c(e=>({...e,tags:e.tags.filter(e=>e!==t)}));var t},className:"ml-2 text-blue-600 hover:text-blue-800",children:(0,i.jsx)(g.A,{className:"h-3 w-3"})})]},t))}),(0,i.jsx)("p",{className:"text-xs text-gray-500",children:"\ud0dc\uadf8\ub294 \ud504\ub86c\ud504\ud2b8\ub97c \ubd84\ub958\ud558\uace0 \uac80\uc0c9\ud558\ub294 \ub370 \ub3c4\uc6c0\uc774 \ub429\ub2c8\ub2e4. \uac01 \ud0dc\uadf8\ub294 20\uc790 \uc774\ub0b4\ub85c \uc785\ub825\ud558\uc138\uc694."})]})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsxs)("label",{className:"flex items-center text-sm font-semibold text-gray-800",children:["\ud504\ub86c\ud504\ud2b8 \ub0b4\uc6a9 ",(0,i.jsx)("span",{className:"text-red-500 ml-1",children:"*"})]}),(0,i.jsxs)("div",{className:"relative",children:[(0,i.jsx)("textarea",{value:l.prompt_text,onChange:e=>p("prompt_text",e.target.value),rows:10,className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:outline-none focus:border-green-500 focus:ring-4 focus:ring-green-100 transition-all duration-200 text-gray-800 placeholder-gray-400 resize-none",placeholder:"\ud504\ub86c\ud504\ud2b8 \ub0b4\uc6a9\uc744 \uc785\ub825\ud558\uc138\uc694",required:!0}),(0,i.jsxs)("div",{className:"absolute bottom-3 right-3 text-xs text-gray-500 flex items-center space-x-2",children:[(0,i.jsxs)("span",{children:[l.prompt_text.length," \uc790"]}),(0,i.jsx)("span",{className:"text-gray-400",children:"/ \ud83d\udcdd 50\uc790 \uc774\uc0c1 \uad8c\uc7a5"})]})]})]}),(0,i.jsxs)("div",{className:"flex items-center",children:[(0,i.jsx)("input",{type:"checkbox",id:"enabled",checked:l.enabled,onChange:e=>p("enabled",e.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),(0,i.jsx)("label",{htmlFor:"enabled",className:"ml-2 text-sm text-gray-700",children:"\ud65c\uc131\ud654"})]}),(0,i.jsxs)("div",{className:"flex justify-end space-x-3 pt-6 border-t border-gray-200",children:[(0,i.jsx)("button",{type:"button",onClick:a,className:"px-4 py-2 text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors font-medium",children:"\ucde8\uc18c"}),(0,i.jsx)("button",{type:"submit",disabled:!l.prompt_text.trim(),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors font-medium",children:o?"\uc218\uc815":"\uc0dd\uc131"})]})]})]})}):null},W=e=>{let{projectId:t,projectName:r}=e;const[a,o]=(0,s.useState)([]),[u,m]=(0,s.useState)(!0),[g,x]=(0,s.useState)(null),[p,h]=(0,s.useState)(!1);(0,s.useEffect)(()=>{b()},[t]);const b=async()=>{try{m(!0);const e=await l.dF.getPromptCards(t,!0);o(e.promptCards||[])}catch(e){console.error("\ud504\ub86c\ud504\ud2b8 \uce74\ub4dc \ub85c\ub4dc \uc2e4\ud328:",e);const t=(0,l.t6)(e);n.oR.error(t.message)}finally{m(!1)}},y=()=>{console.log("\uc0c8 \ud504\ub86c\ud504\ud2b8 \ucd94\uac00 \ubc84\ud2bc \ud074\ub9ad"),x(null),h(!0)};return u?(0,i.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,i.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):(0,i.jsxs)("div",{className:"flex h-full bg-gray-50 dark:bg-gray-900",children:[(0,i.jsx)("div",{className:"flex-1 min-w-0",children:(0,i.jsx)(P,{projectId:t,projectName:r,promptCards:a})}),(0,i.jsxs)("div",{className:"w-80 bg-white dark:bg-gray-800 border-l border-gray-100 dark:border-gray-700 flex flex-col shadow-sm flex-shrink-0",children:[(0,i.jsx)("div",{className:"flex-shrink-0 p-4 border-b border-gray-100 dark:border-gray-700 bg-gray-50 dark:bg-gray-800",children:(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsx)("h2",{className:"text-lg font-semibold text-gray-800 dark:text-white",children:"\ud504\ub86c\ud504\ud2b8 \uce74\ub4dc"}),(0,i.jsxs)("button",{onClick:y,className:"inline-flex items-center px-4 py-2 text-sm bg-blue-600 dark:bg-blue-500 text-white rounded-lg hover:bg-blue-700 dark:hover:bg-blue-600 transition-colors shadow-md hover:shadow-lg font-medium",children:[(0,i.jsx)(c.A,{className:"h-4 w-4 mr-1.5"}),"\uc0c8 \ucd94\uac00"]})]})}),(0,i.jsx)("div",{className:"flex-1 overflow-y-auto p-4 space-y-3 min-h-0",children:0===a.length?(0,i.jsxs)("div",{className:"text-center py-8",children:[(0,i.jsx)(d.A,{className:"h-12 w-12 text-gray-300 dark:text-gray-600 mx-auto mb-4"}),(0,i.jsx)("p",{className:"text-gray-500 dark:text-gray-400 mb-4",children:"\ud504\ub86c\ud504\ud2b8 \uce74\ub4dc\uac00 \uc5c6\uc2b5\ub2c8\ub2e4"}),(0,i.jsxs)("button",{onClick:y,className:"inline-flex items-center px-4 py-2 bg-blue-600 dark:bg-blue-500 text-white rounded-lg hover:bg-blue-700 dark:hover:bg-blue-600 transition-colors shadow-sm font-medium",children:[(0,i.jsx)(c.A,{className:"h-4 w-4 mr-1.5"}),"\uccab \ubc88\uc9f8 \uce74\ub4dc \ub9cc\ub4e4\uae30"]})]}):a.map(e=>(0,i.jsx)(M,{card:e,onEdit:()=>(async e=>{console.log("\ud504\ub86c\ud504\ud2b8 \uc218\uc815 \ubc84\ud2bc \ud074\ub9ad:",e);let r={...e};if(!e.prompt_text&&!e.content)try{var s;console.log("S3\uc5d0\uc11c \ud504\ub86c\ud504\ud2b8 \ub0b4\uc6a9 \ub85c\ub4dc \uc911...");const a=await l.dF.getPromptContent(t,e.promptId||e.prompt_id);r.prompt_text=a.content,console.log("S3\uc5d0\uc11c \ud504\ub86c\ud504\ud2b8 \ub0b4\uc6a9 \ub85c\ub4dc \uc644\ub8cc:",null===(s=a.content)||void 0===s?void 0:s.length,"\ubb38\uc790")}catch(a){return console.error("\ud504\ub86c\ud504\ud2b8 \ub0b4\uc6a9 \ub85c\ub4dc \uc2e4\ud328:",a),void n.oR.error("\ud504\ub86c\ud504\ud2b8 \ub0b4\uc6a9\uc744 \ubd88\ub7ec\uc62c \uc218 \uc5c6\uc2b5\ub2c8\ub2e4")}x(r),h(!0)})(e),onDelete:()=>(async e=>{if(window.confirm("\uc815\ub9d0\ub85c \uc774 \ud504\ub86c\ud504\ud2b8\ub97c \uc0ad\uc81c\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?"))try{await l.dF.deletePromptCard(t,e),n.oR.success("\ud504\ub86c\ud504\ud2b8\uac00 \uc0ad\uc81c\ub418\uc5c8\uc2b5\ub2c8\ub2e4"),o(t=>t.filter(t=>(t.promptId||t.prompt_id)!==e)),await b()}catch(r){console.error("\ud504\ub86c\ud504\ud2b8 \uc0ad\uc81c \uc2e4\ud328:",r);const e=(0,l.t6)(r);n.oR.error(e.message)}})(e.promptId||e.prompt_id)},e.promptId||e.prompt_id))})]}),p&&(0,i.jsx)(O,{isOpen:p,onSubmit:async e=>{try{const r={title:e.title,prompt_text:e.prompt_text,tags:e.tags||[],isActive:!1!==e.enabled};g?(await l.dF.updatePromptCard(t,g.promptId||g.prompt_id,r),n.oR.success("\ud504\ub86c\ud504\ud2b8\uac00 \uc218\uc815\ub418\uc5c8\uc2b5\ub2c8\ub2e4")):(await l.dF.createPromptCard(t,r),n.oR.success("\ud504\ub86c\ud504\ud2b8\uac00 \uc0dd\uc131\ub418\uc5c8\uc2b5\ub2c8\ub2e4")),h(!1),x(null),await b()}catch(r){console.error("\ud504\ub86c\ud504\ud2b8 \uc800\uc7a5 \uc2e4\ud328:",r);const e=(0,l.t6)(r);n.oR.error(e.message)}},onCancel:()=>{console.log("\ubaa8\ub2ec \ucde8\uc18c \ubc84\ud2bc \ud074\ub9ad"),h(!1),x(null)},initialData:g})]})},z=e=>{let{projectId:t,projectName:r}=e;return(0,i.jsx)("div",{className:"h-full",children:(0,i.jsx)(W,{projectId:t,projectName:r})})},H=e=>{let{projectId:t,projectName:r}=e;const[a,n]=(0,s.useState)([]),[o,c]=(0,s.useState)(!0);return(0,s.useEffect)(()=>{(async()=>{try{c(!0);const e=await l.dF.getPromptCards(t,!0);n(e.promptCards||[])}catch(e){console.warn("\ud504\ub86c\ud504\ud2b8 \uce74\ub4dc \ub85c\ub4dc \uc2e4\ud328:",e),n([])}finally{c(!1)}})()},[t]),o?(0,i.jsx)(_.P7,{}):(0,i.jsx)("div",{className:"h-full bg-white",children:(0,i.jsx)(P,{projectId:t,projectName:r,promptCards:a})})};var $=r(9415);const q=()=>{const{projectId:e}=(0,a.g)(),t=(0,a.Zp)(),{mode:r,setMode:c}=(0,$.nm)(),[d,u]=(0,s.useState)(null),[m,g]=(0,s.useState)(!0);(0,s.useEffect)(()=>{x()},[e,t]);const x=async()=>{try{g(!0);const t=await l._x.getProject(e);u(t)}catch(r){console.error("\ud504\ub85c\uc81d\ud2b8 \ub85c\ub4dc \uc2e4\ud328:",r);const e=(0,l.t6)(r);n.oR.error(e.message),t("/projects")}finally{g(!1)}};return m?(0,i.jsx)(_.P7,{}):d?(0,i.jsxs)("div",{className:"h-screen flex flex-col bg-gray-50",children:[(0,i.jsx)("div",{className:"flex-shrink-0 bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 px-4 py-3 transition-colors duration-200",children:(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,i.jsxs)("button",{onClick:()=>{t("/projects")},className:"inline-flex items-center px-3 py-2 border border-gray-300 dark:border-gray-600 shadow-sm text-sm leading-4 font-medium rounded-md text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors duration-200",children:[(0,i.jsx)(o.A,{className:"h-4 w-4 mr-2"}),"\ubaa9\ub85d\uc73c\ub85c"]}),(0,i.jsx)("div",{className:"flex items-center",children:(0,i.jsx)("h1",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:d.name})})]}),(0,i.jsxs)("div",{className:"flex items-center gap-3",children:[(0,i.jsxs)("div",{className:"flex items-center bg-gray-100 dark:bg-gray-700 rounded-lg p-1",children:[(0,i.jsx)("button",{onClick:()=>c("user"),className:"px-3 py-1.5 text-sm font-medium rounded-md transition-colors "+("user"===r?"bg-white dark:bg-gray-600 text-blue-600 dark:text-blue-400 shadow-sm":"text-gray-600 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white"),children:"\uc0ac\uc6a9\uc790"}),(0,i.jsx)("button",{onClick:()=>c("admin"),className:"px-3 py-1.5 text-sm font-medium rounded-md transition-colors "+("admin"===r?"bg-white dark:bg-gray-600 text-blue-600 dark:text-blue-400 shadow-sm":"text-gray-600 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white"),children:"\uad00\ub9ac\uc790"})]}),(0,i.jsxs)("div",{className:"flex items-center gap-2 px-3 py-1 bg-green-50 dark:bg-green-900 border border-green-100 dark:border-green-700 rounded-full",children:[(0,i.jsx)("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),(0,i.jsx)("span",{className:"text-xs text-green-700 dark:text-green-300",children:"\uc900\ube44\uc644\ub8cc"})]})]})]})}),(0,i.jsx)("div",{className:"flex-1 overflow-hidden",children:"admin"===r?(0,i.jsx)(z,{projectId:e,projectName:d.name}):(0,i.jsx)(H,{projectId:e,projectName:d.name})})]}):(0,i.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,i.jsxs)("div",{className:"text-center",children:[(0,i.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"\ud504\ub85c\uc81d\ud2b8\ub97c \ucc3e\uc744 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4"}),(0,i.jsxs)("button",{onClick:()=>t("/projects"),className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-blue-700 bg-blue-100 hover:bg-blue-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[(0,i.jsx)(o.A,{className:"h-5 w-5 mr-2"}),"\ud504\ub85c\uc81d\ud2b8 \ubaa9\ub85d\uc73c\ub85c"]})]})})}}}]);
//# sourceMappingURL=441.9c93a1b1.chunk.js.map