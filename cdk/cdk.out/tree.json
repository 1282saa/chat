{"version":"tree-0.1","tree":{"id":"App","path":"","constructInfo":{"fqn":"aws-cdk-lib.App","version":"2.204.0"},"children":{"ChatbotBackend":{"id":"ChatbotBackend","path":"ChatbotBackend","constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"2.204.0"},"children":{"ChatbotUserPool":{"id":"ChatbotUserPool","path":"ChatbotBackend/ChatbotUserPool","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.UserPool","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotBackend/ChatbotUserPool/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.CfnUserPool","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Cognito::UserPool","aws:cdk:cloudformation:props":{"accountRecoverySetting":{"recoveryMechanisms":[{"name":"verified_email","priority":1}]},"adminCreateUserConfig":{"allowAdminCreateUserOnly":false},"autoVerifiedAttributes":["email"],"emailVerificationMessage":"The verification code to your new account is {####}","emailVerificationSubject":"Verify your new account","policies":{"passwordPolicy":{"minimumLength":8,"requireLowercase":false,"requireUppercase":false,"requireNumbers":true,"requireSymbols":true}},"schema":[{"name":"email","mutable":true,"required":true},{"name":"name","mutable":true,"required":false}],"smsVerificationMessage":"The verification code to your new account is {####}","usernameAttributes":["email"],"userPoolName":"chatbot-users","verificationMessageTemplate":{"defaultEmailOption":"CONFIRM_WITH_CODE","emailMessage":"The verification code to your new account is {####}","emailSubject":"Verify your new account","smsMessage":"The verification code to your new account is {####}"}}}},"ChatbotWebClient":{"id":"ChatbotWebClient","path":"ChatbotBackend/ChatbotUserPool/ChatbotWebClient","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.UserPoolClient","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotBackend/ChatbotUserPool/ChatbotWebClient/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.CfnUserPoolClient","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Cognito::UserPoolClient","aws:cdk:cloudformation:props":{"accessTokenValidity":60,"allowedOAuthFlows":["implicit","code"],"allowedOAuthFlowsUserPoolClient":true,"allowedOAuthScopes":["profile","phone","email","openid","aws.cognito.signin.user.admin"],"callbackUrLs":["https://example.com"],"clientName":"chatbot-web-client","enableTokenRevocation":true,"explicitAuthFlows":["ALLOW_USER_PASSWORD_AUTH","ALLOW_USER_SRP_AUTH","ALLOW_REFRESH_TOKEN_AUTH"],"generateSecret":false,"idTokenValidity":60,"preventUserExistenceErrors":"ENABLED","refreshTokenValidity":43200,"supportedIdentityProviders":["COGNITO"],"tokenValidityUnits":{"idToken":"minutes","accessToken":"minutes","refreshToken":"minutes"},"userPoolId":{"Ref":"ChatbotUserPool01970AAD"}}}}}},"ChatbotDomain":{"id":"ChatbotDomain","path":"ChatbotBackend/ChatbotUserPool/ChatbotDomain","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.UserPoolDomain","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotBackend/ChatbotUserPool/ChatbotDomain/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.CfnUserPoolDomain","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Cognito::UserPoolDomain","aws:cdk:cloudformation:props":{"domain":"chatbot-887078546492","userPoolId":{"Ref":"ChatbotUserPool01970AAD"}}}}}}}},"AdminGroup":{"id":"AdminGroup","path":"ChatbotBackend/AdminGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.CfnUserPoolGroup","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Cognito::UserPoolGroup","aws:cdk:cloudformation:props":{"description":"관리자 그룹","groupName":"admin","precedence":1,"userPoolId":{"Ref":"ChatbotUserPool01970AAD"}}}},"PromptBucket":{"id":"PromptBucket","path":"ChatbotBackend/PromptBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.Bucket","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotBackend/PromptBucket/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.CfnBucket","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::S3::Bucket","aws:cdk:cloudformation:props":{"bucketEncryption":{"serverSideEncryptionConfiguration":[{"serverSideEncryptionByDefault":{"sseAlgorithm":"AES256"}}]},"bucketName":"chatbot-prompts-887078546492-ap-northeast-2","corsConfiguration":{"corsRules":[{"maxAge":3600,"allowedHeaders":["*"],"allowedMethods":["GET","PUT","POST"],"allowedOrigins":["*"]}]},"tags":[{"key":"aws-cdk:auto-delete-objects","value":"true"}],"versioningConfiguration":{"status":"Enabled"}}}},"Policy":{"id":"Policy","path":"ChatbotBackend/PromptBucket/Policy","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketPolicy","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotBackend/PromptBucket/Policy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.CfnBucketPolicy","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::S3::BucketPolicy","aws:cdk:cloudformation:props":{"bucket":{"Ref":"PromptBucket1668FD1C"},"policyDocument":{"Statement":[{"Action":["s3:PutBucketPolicy","s3:GetBucket*","s3:List*","s3:DeleteObject*"],"Effect":"Allow","Principal":{"AWS":{"Fn::GetAtt":["CustomS3AutoDeleteObjectsCustomResourceProviderRole3B1BD092","Arn"]}},"Resource":[{"Fn::GetAtt":["PromptBucket1668FD1C","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["PromptBucket1668FD1C","Arn"]},"/*"]]}]}],"Version":"2012-10-17"}}}}}},"AutoDeleteObjectsCustomResource":{"id":"AutoDeleteObjectsCustomResource","path":"ChatbotBackend/PromptBucket/AutoDeleteObjectsCustomResource","constructInfo":{"fqn":"aws-cdk-lib.CustomResource","version":"2.204.0","metadata":[]},"children":{"Default":{"id":"Default","path":"ChatbotBackend/PromptBucket/AutoDeleteObjectsCustomResource/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.204.0"}}}}}},"Custom::S3AutoDeleteObjectsCustomResourceProvider":{"id":"Custom::S3AutoDeleteObjectsCustomResourceProvider","path":"ChatbotBackend/Custom::S3AutoDeleteObjectsCustomResourceProvider","constructInfo":{"fqn":"aws-cdk-lib.CustomResourceProviderBase","version":"2.204.0"},"children":{"Staging":{"id":"Staging","path":"ChatbotBackend/Custom::S3AutoDeleteObjectsCustomResourceProvider/Staging","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.204.0"}},"Role":{"id":"Role","path":"ChatbotBackend/Custom::S3AutoDeleteObjectsCustomResourceProvider/Role","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.204.0"}},"Handler":{"id":"Handler","path":"ChatbotBackend/Custom::S3AutoDeleteObjectsCustomResourceProvider/Handler","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.204.0"}}}},"ArticleBucket":{"id":"ArticleBucket","path":"ChatbotBackend/ArticleBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.Bucket","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotBackend/ArticleBucket/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.CfnBucket","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::S3::Bucket","aws:cdk:cloudformation:props":{"bucketEncryption":{"serverSideEncryptionConfiguration":[{"serverSideEncryptionByDefault":{"sseAlgorithm":"AES256"}}]},"bucketName":"chatbot-data-887078546492-ap-northeast-2","corsConfiguration":{"corsRules":[{"maxAge":3600,"allowedHeaders":["*"],"allowedMethods":["GET","PUT","POST"],"allowedOrigins":["*"]}]},"tags":[{"key":"aws-cdk:auto-delete-objects","value":"true"}],"versioningConfiguration":{"status":"Enabled"}}}},"Policy":{"id":"Policy","path":"ChatbotBackend/ArticleBucket/Policy","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketPolicy","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotBackend/ArticleBucket/Policy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.CfnBucketPolicy","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::S3::BucketPolicy","aws:cdk:cloudformation:props":{"bucket":{"Ref":"ArticleBucket38F6CD07"},"policyDocument":{"Statement":[{"Action":["s3:PutBucketPolicy","s3:GetBucket*","s3:List*","s3:DeleteObject*"],"Effect":"Allow","Principal":{"AWS":{"Fn::GetAtt":["CustomS3AutoDeleteObjectsCustomResourceProviderRole3B1BD092","Arn"]}},"Resource":[{"Fn::GetAtt":["ArticleBucket38F6CD07","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["ArticleBucket38F6CD07","Arn"]},"/*"]]}]}],"Version":"2012-10-17"}}}}}},"AutoDeleteObjectsCustomResource":{"id":"AutoDeleteObjectsCustomResource","path":"ChatbotBackend/ArticleBucket/AutoDeleteObjectsCustomResource","constructInfo":{"fqn":"aws-cdk-lib.CustomResource","version":"2.204.0","metadata":[]},"children":{"Default":{"id":"Default","path":"ChatbotBackend/ArticleBucket/AutoDeleteObjectsCustomResource/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.204.0"}}}}}},"UsersTable":{"id":"UsersTable","path":"ChatbotBackend/UsersTable","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.Table","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotBackend/UsersTable/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.CfnTable","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::DynamoDB::Table","aws:cdk:cloudformation:props":{"attributeDefinitions":[{"attributeName":"user_id","attributeType":"S"},{"attributeName":"email","attributeType":"S"}],"billingMode":"PAY_PER_REQUEST","globalSecondaryIndexes":[{"indexName":"email-index","keySchema":[{"attributeName":"email","keyType":"HASH"}],"projection":{"projectionType":"ALL"}}],"keySchema":[{"attributeName":"user_id","keyType":"HASH"}],"pointInTimeRecoverySpecification":{"pointInTimeRecoveryEnabled":true},"tableName":"chatbot-users"}}},"ScalingRole":{"id":"ScalingRole","path":"ChatbotBackend/UsersTable/ScalingRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.204.0","metadata":[]}}}},"UsageTable":{"id":"UsageTable","path":"ChatbotBackend/UsageTable","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.Table","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotBackend/UsageTable/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.CfnTable","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::DynamoDB::Table","aws:cdk:cloudformation:props":{"attributeDefinitions":[{"attributeName":"user_id","attributeType":"S"},{"attributeName":"date","attributeType":"S"},{"attributeName":"month","attributeType":"S"}],"billingMode":"PAY_PER_REQUEST","globalSecondaryIndexes":[{"indexName":"user_id-month-index","keySchema":[{"attributeName":"user_id","keyType":"HASH"},{"attributeName":"month","keyType":"RANGE"}],"projection":{"projectionType":"ALL"}}],"keySchema":[{"attributeName":"user_id","keyType":"HASH"},{"attributeName":"date","keyType":"RANGE"}],"tableName":"chatbot-usage","timeToLiveSpecification":{"attributeName":"ttl","enabled":true}}}},"ScalingRole":{"id":"ScalingRole","path":"ChatbotBackend/UsageTable/ScalingRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.204.0","metadata":[]}}}},"SubscriptionsTable":{"id":"SubscriptionsTable","path":"ChatbotBackend/SubscriptionsTable","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.Table","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotBackend/SubscriptionsTable/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.CfnTable","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::DynamoDB::Table","aws:cdk:cloudformation:props":{"attributeDefinitions":[{"attributeName":"user_id","attributeType":"S"},{"attributeName":"status","attributeType":"S"},{"attributeName":"expiry_date","attributeType":"S"}],"billingMode":"PAY_PER_REQUEST","globalSecondaryIndexes":[{"indexName":"status-expiry_date-index","keySchema":[{"attributeName":"status","keyType":"HASH"},{"attributeName":"expiry_date","keyType":"RANGE"}],"projection":{"projectionType":"ALL"}}],"keySchema":[{"attributeName":"user_id","keyType":"HASH"}],"pointInTimeRecoverySpecification":{"pointInTimeRecoveryEnabled":true},"tableName":"chatbot-subscriptions"}}},"ScalingRole":{"id":"ScalingRole","path":"ChatbotBackend/SubscriptionsTable/ScalingRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.204.0","metadata":[]}}}},"PromptMetaTable":{"id":"PromptMetaTable","path":"ChatbotBackend/PromptMetaTable","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.Table","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotBackend/PromptMetaTable/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.CfnTable","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::DynamoDB::Table","aws:cdk:cloudformation:props":{"attributeDefinitions":[{"attributeName":"user_id","attributeType":"S"},{"attributeName":"promptId","attributeType":"S"},{"attributeName":"stepOrder","attributeType":"N"}],"billingMode":"PAY_PER_REQUEST","globalSecondaryIndexes":[{"indexName":"user_id-stepOrder-index","keySchema":[{"attributeName":"user_id","keyType":"HASH"},{"attributeName":"stepOrder","keyType":"RANGE"}],"projection":{"projectionType":"ALL"}}],"keySchema":[{"attributeName":"user_id","keyType":"HASH"},{"attributeName":"promptId","keyType":"RANGE"}],"tableName":"chatbot-prompts"}}},"ScalingRole":{"id":"ScalingRole","path":"ChatbotBackend/PromptMetaTable/ScalingRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.204.0","metadata":[]}}}},"ConversationTable":{"id":"ConversationTable","path":"ChatbotBackend/ConversationTable","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.Table","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotBackend/ConversationTable/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.CfnTable","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::DynamoDB::Table","aws:cdk:cloudformation:props":{"attributeDefinitions":[{"attributeName":"user_id","attributeType":"S"},{"attributeName":"timestamp","attributeType":"N"}],"billingMode":"PAY_PER_REQUEST","keySchema":[{"attributeName":"user_id","keyType":"HASH"},{"attributeName":"timestamp","keyType":"RANGE"}],"tableName":"chatbot-conversations"}}},"ScalingRole":{"id":"ScalingRole","path":"ChatbotBackend/ConversationTable/ScalingRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.204.0","metadata":[]}}}},"ExecutionTable":{"id":"ExecutionTable","path":"ChatbotBackend/ExecutionTable","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.Table","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotBackend/ExecutionTable/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.CfnTable","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::DynamoDB::Table","aws:cdk:cloudformation:props":{"attributeDefinitions":[{"attributeName":"executionId","attributeType":"S"}],"billingMode":"PAY_PER_REQUEST","keySchema":[{"attributeName":"executionId","keyType":"HASH"}],"tableName":"chatbot-executions","timeToLiveSpecification":{"attributeName":"ttl","enabled":true}}}},"ScalingRole":{"id":"ScalingRole","path":"ChatbotBackend/ExecutionTable/ScalingRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.204.0","metadata":[]}}}},"PerplexityCacheTable":{"id":"PerplexityCacheTable","path":"ChatbotBackend/PerplexityCacheTable","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.Table","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotBackend/PerplexityCacheTable/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.CfnTable","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::DynamoDB::Table","aws:cdk:cloudformation:props":{"attributeDefinitions":[{"attributeName":"query_hash","attributeType":"S"}],"billingMode":"PAY_PER_REQUEST","keySchema":[{"attributeName":"query_hash","keyType":"HASH"}],"tableName":"perplexity-search-cache","timeToLiveSpecification":{"attributeName":"ttl","enabled":true}}}},"ScalingRole":{"id":"ScalingRole","path":"ChatbotBackend/PerplexityCacheTable/ScalingRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.204.0","metadata":[]}}}},"ExecutionMetricsTable":{"id":"ExecutionMetricsTable","path":"ChatbotBackend/ExecutionMetricsTable","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.Table","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotBackend/ExecutionMetricsTable/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.CfnTable","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::DynamoDB::Table","aws:cdk:cloudformation:props":{"attributeDefinitions":[{"attributeName":"execution_date","attributeType":"S"},{"attributeName":"execution_id","attributeType":"S"}],"billingMode":"PAY_PER_REQUEST","keySchema":[{"attributeName":"execution_date","keyType":"HASH"},{"attributeName":"execution_id","keyType":"RANGE"}],"tableName":"workflow-execution-metrics","timeToLiveSpecification":{"attributeName":"ttl","enabled":true}}}},"ScalingRole":{"id":"ScalingRole","path":"ChatbotBackend/ExecutionMetricsTable/ScalingRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.204.0","metadata":[]}}}},"IndexPromptDLQ":{"id":"IndexPromptDLQ","path":"ChatbotBackend/IndexPromptDLQ","constructInfo":{"fqn":"aws-cdk-lib.aws_sqs.Queue","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotBackend/IndexPromptDLQ/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_sqs.CfnQueue","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SQS::Queue","aws:cdk:cloudformation:props":{"messageRetentionPeriod":1209600,"queueName":"chatbot-index-prompt-dlq","visibilityTimeout":300}}}}},"IndexPromptQueue":{"id":"IndexPromptQueue","path":"ChatbotBackend/IndexPromptQueue","constructInfo":{"fqn":"aws-cdk-lib.aws_sqs.Queue","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotBackend/IndexPromptQueue/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_sqs.CfnQueue","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SQS::Queue","aws:cdk:cloudformation:props":{"queueName":"chatbot-index-prompt","redrivePolicy":{"deadLetterTargetArn":{"Fn::GetAtt":["IndexPromptDLQ5C143C72","Arn"]},"maxReceiveCount":3},"visibilityTimeout":300}}}}},"CompletionTopic":{"id":"CompletionTopic","path":"ChatbotBackend/CompletionTopic","constructInfo":{"fqn":"aws-cdk-lib.aws_sns.Topic","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotBackend/CompletionTopic/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_sns.CfnTopic","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SNS::Topic","aws:cdk:cloudformation:props":{"topicName":"chatbot-completion"}}}}},"ErrorTopic":{"id":"ErrorTopic","path":"ChatbotBackend/ErrorTopic","constructInfo":{"fqn":"aws-cdk-lib.aws_sns.Topic","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotBackend/ErrorTopic/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_sns.CfnTopic","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SNS::Topic","aws:cdk:cloudformation:props":{"topicName":"chatbot-errors"}}}}},"BedrockAgentRole":{"id":"BedrockAgentRole","path":"ChatbotBackend/BedrockAgentRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.204.0","metadata":[]},"children":{"ImportBedrockAgentRole":{"id":"ImportBedrockAgentRole","path":"ChatbotBackend/BedrockAgentRole/ImportBedrockAgentRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.204.0","metadata":[]}},"Resource":{"id":"Resource","path":"ChatbotBackend/BedrockAgentRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"bedrock.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/AmazonBedrockFullAccess"]]}]}}}}},"BedrockKnowledgeBaseRole":{"id":"BedrockKnowledgeBaseRole","path":"ChatbotBackend/BedrockKnowledgeBaseRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.204.0","metadata":[]},"children":{"ImportBedrockKnowledgeBaseRole":{"id":"ImportBedrockKnowledgeBaseRole","path":"ChatbotBackend/BedrockKnowledgeBaseRole/ImportBedrockKnowledgeBaseRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.204.0","metadata":[]}},"Resource":{"id":"Resource","path":"ChatbotBackend/BedrockKnowledgeBaseRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"bedrock.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/AmazonBedrockFullAccess"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"ChatbotBackend/BedrockKnowledgeBaseRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotBackend/BedrockKnowledgeBaseRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["s3:GetObject","s3:ListBucket"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["PromptBucket1668FD1C","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["PromptBucket1668FD1C","Arn"]},"/*"]]}]}],"Version":"2012-10-17"},"policyName":"BedrockKnowledgeBaseRoleDefaultPolicy3434A684","roles":[{"Ref":"BedrockKnowledgeBaseRole24C5E17B"}]}}}}}}},"DynamicPromptAgent":{"id":"DynamicPromptAgent","path":"ChatbotBackend/DynamicPromptAgent","constructInfo":{"fqn":"aws-cdk-lib.aws_bedrock.CfnAgent","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Bedrock::Agent","aws:cdk:cloudformation:props":{"agentName":"dynamic-prompt-agent-1753737999","agentResourceRoleArn":{"Fn::GetAtt":["BedrockAgentRole7C982E0C","Arn"]},"description":"동적 프롬프트 시스템 AI 어시스턴트","foundationModel":"apac.anthropic.claude-3-sonnet-20240229-v1:0","idleSessionTtlInSeconds":1800,"instruction":"당신은 동적 프롬프트 시스템의 AI 어시스턴트입니다. 사용자가 제공하는 프롬프트 카드의 내용에 따라 다양한 작업을 수행하며, 창의적이고 정확한 응답을 제공합니다. 항상 한국어로 응답하고, 사용자의 요청에 맞춰 유연하게 대응하세요."}}},"DynamicPromptAgentAlias":{"id":"DynamicPromptAgentAlias","path":"ChatbotBackend/DynamicPromptAgentAlias","constructInfo":{"fqn":"aws-cdk-lib.aws_bedrock.CfnAgentAlias","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Bedrock::AgentAlias","aws:cdk:cloudformation:props":{"agentAliasName":"production","agentId":{"Fn::GetAtt":["DynamicPromptAgent","AgentId"]},"description":"Production alias for Dynamic Prompt System agent"}}},"LambdaRole":{"id":"LambdaRole","path":"ChatbotBackend/LambdaRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.204.0","metadata":[]},"children":{"ImportLambdaRole":{"id":"ImportLambdaRole","path":"ChatbotBackend/LambdaRole/ImportLambdaRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.204.0","metadata":[]}},"Resource":{"id":"Resource","path":"ChatbotBackend/LambdaRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]},{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/AmazonBedrockFullAccess"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"ChatbotBackend/LambdaRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotBackend/LambdaRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["s3:GetObject","s3:PutObject","s3:DeleteObject","s3:ListBucket","dynamodb:Query","dynamodb:PutItem","dynamodb:UpdateItem","dynamodb:GetItem","dynamodb:DeleteItem","dynamodb:Scan","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:DescribeStream","dynamodb:ListStreams","sqs:SendMessage","sqs:ReceiveMessage","sns:Publish","bedrock:InvokeModel","bedrock:InvokeModelWithResponseStream","bedrock:Retrieve","bedrock:RetrieveAndGenerate","cognito-idp:AdminCreateUser","cognito-idp:AdminSetUserPassword","cognito-idp:AdminGetUser","cognito-idp:AdminDeleteUser","cognito-idp:AdminConfirmSignUp","cognito-idp:AdminInitiateAuth","cognito-idp:AdminRespondToAuthChallenge","cognito-idp:AdminListGroupsForUser","cognito-idp:AdminAddUserToGroup","cognito-idp:ConfirmForgotPassword","cognito-idp:ForgotPassword","cognito-idp:ConfirmSignUp","cognito-idp:ResendConfirmationCode"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["PromptBucket1668FD1C","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["PromptBucket1668FD1C","Arn"]},"/*"]]},{"Fn::GetAtt":["ArticleBucket38F6CD07","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["ArticleBucket38F6CD07","Arn"]},"/*"]]},"arn:aws:s3:::seoul-economic-news-data-2025","arn:aws:s3:::seoul-economic-news-data-2025/*",{"Fn::GetAtt":["PromptMetaTable0A0B3876","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["PromptMetaTable0A0B3876","Arn"]},"/index/user_id-stepOrder-index"]]},{"Fn::GetAtt":["ConversationTable75C14D21","Arn"]},{"Fn::GetAtt":["ExecutionTable914EA6E7","Arn"]},{"Fn::GetAtt":["UsersTable9725E9C8","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["UsersTable9725E9C8","Arn"]},"/index/email-index"]]},{"Fn::GetAtt":["UsageTable28300137","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["UsageTable28300137","Arn"]},"/index/user_id-month-index"]]},{"Fn::GetAtt":["SubscriptionsTable40965A9D","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["SubscriptionsTable40965A9D","Arn"]},"/index/status-expiry_date-index"]]},{"Fn::GetAtt":["PerplexityCacheTable47347F70","Arn"]},{"Fn::GetAtt":["ExecutionMetricsTable37348B2C","Arn"]},{"Fn::GetAtt":["IndexPromptDLQ5C143C72","Arn"]},{"Fn::GetAtt":["IndexPromptQueueC7C25CCE","Arn"]},{"Ref":"CompletionTopic50E1DF26"},{"Ref":"ErrorTopicA0904A23"},{"Fn::GetAtt":["ChatbotUserPool01970AAD","Arn"]},{"Fn::Join":["",["arn:aws:cognito-idp:ap-northeast-2:887078546492:userpool/",{"Ref":"ChatbotUserPool01970AAD"}]]}]},{"Action":"sqs:SendMessage","Effect":"Allow","Resource":{"Fn::GetAtt":["IndexPromptDLQ5C143C72","Arn"]}}],"Version":"2012-10-17"},"policyName":"LambdaRoleDefaultPolicy75625A82","roles":[{"Ref":"LambdaRole3A44B857"}]}}}}}}},"NewsProcessingLayer":{"id":"NewsProcessingLayer","path":"ChatbotBackend/NewsProcessingLayer","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.LayerVersion","version":"2.204.0","metadata":[]},"children":{"Code":{"id":"Code","path":"ChatbotBackend/NewsProcessingLayer/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.204.0"},"children":{"Stage":{"id":"Stage","path":"ChatbotBackend/NewsProcessingLayer/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.204.0"}},"AssetBucket":{"id":"AssetBucket","path":"ChatbotBackend/NewsProcessingLayer/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.204.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"ChatbotBackend/NewsProcessingLayer/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnLayerVersion","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::LayerVersion","aws:cdk:cloudformation:props":{"compatibleRuntimes":["python3.11"],"content":{"s3Bucket":"cdk-hnb659fds-assets-887078546492-ap-northeast-2","s3Key":"18a51c5acfed584a3f2087b20ba5b1612d2f023a4515ada44a9337d6c2af78c5.zip"},"description":"서울경제신문 AI 요약 시스템 - 간단화된 7단계 플로우 처리"}}}}},"GenerateFunction":{"id":"GenerateFunction","path":"ChatbotBackend/GenerateFunction","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.204.0","metadata":[]},"children":{"Code":{"id":"Code","path":"ChatbotBackend/GenerateFunction/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.204.0"},"children":{"Stage":{"id":"Stage","path":"ChatbotBackend/GenerateFunction/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.204.0"}},"AssetBucket":{"id":"AssetBucket","path":"ChatbotBackend/GenerateFunction/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.204.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"ChatbotBackend/GenerateFunction/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-887078546492-ap-northeast-2","s3Key":"5faef22f4206e472b85a192a2e6011689a90acfb998c1ea9c4d0b861a47fc723.zip"},"deadLetterConfig":{"targetArn":{"Fn::GetAtt":["IndexPromptDLQ5C143C72","Arn"]}},"environment":{"variables":{"PROMPT_META_TABLE":{"Ref":"PromptMetaTable0A0B3876"},"PROMPT_BUCKET":{"Ref":"PromptBucket1668FD1C"},"EXECUTION_TABLE":{"Ref":"ExecutionTable914EA6E7"},"KNOWLEDGE_BASE_ID":"PGQV3JXPET","OPENSEARCH_COLLECTION_ID":"i56h0ibud5e0sd0hz7ch","S3_BUCKET_NAME":"seoul-economic-news-data-2025","S3_DATA_PREFIX":"news-data-md/","NEWS_BUCKET":"seoul-economic-news-data-2025","PERPLEXITY_API_KEY":"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","PERPLEXITY_CACHE_TABLE":"perplexity-search-cache","EXECUTION_METRICS_TABLE":"workflow-execution-metrics","REGION":"ap-northeast-2"}},"handler":"generate.lambda_handler","layers":[{"Ref":"NewsProcessingLayer63A6C836"}],"memorySize":3008,"role":{"Fn::GetAtt":["LambdaRole3A44B857","Arn"]},"runtime":"python3.11","timeout":900}}}}},"AuthFunction":{"id":"AuthFunction","path":"ChatbotBackend/AuthFunction","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.204.0","metadata":[]},"children":{"Code":{"id":"Code","path":"ChatbotBackend/AuthFunction/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.204.0"},"children":{"Stage":{"id":"Stage","path":"ChatbotBackend/AuthFunction/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.204.0"}},"AssetBucket":{"id":"AssetBucket","path":"ChatbotBackend/AuthFunction/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.204.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"ChatbotBackend/AuthFunction/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-887078546492-ap-northeast-2","s3Key":"52acb937fba0c7e4b573368f21b4589784987c779f1f0cc3b6d82fb819cfed8e.zip"},"environment":{"variables":{"USER_POOL_ID":{"Ref":"ChatbotUserPool01970AAD"},"USER_POOL_CLIENT_ID":{"Ref":"ChatbotUserPoolChatbotWebClientF2B8B64F"},"REGION":"ap-northeast-2","LOG_LEVEL":"INFO"}},"handler":"auth.handler","memorySize":256,"role":{"Fn::GetAtt":["LambdaRole3A44B857","Arn"]},"runtime":"python3.11","timeout":60}}}}},"UserManagementFunction":{"id":"UserManagementFunction","path":"ChatbotBackend/UserManagementFunction","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.204.0","metadata":[]},"children":{"Code":{"id":"Code","path":"ChatbotBackend/UserManagementFunction/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.204.0"},"children":{"Stage":{"id":"Stage","path":"ChatbotBackend/UserManagementFunction/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.204.0"}},"AssetBucket":{"id":"AssetBucket","path":"ChatbotBackend/UserManagementFunction/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.204.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"ChatbotBackend/UserManagementFunction/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-887078546492-ap-northeast-2","s3Key":"6c461cbea9a9ecc89c6283688efbec024d4d6586f8bce6db701ceba0eef2d2fd.zip"},"environment":{"variables":{"USERS_TABLE_NAME":{"Ref":"UsersTable9725E9C8"},"USAGE_TABLE_NAME":{"Ref":"UsageTable28300137"},"SUBSCRIPTIONS_TABLE_NAME":{"Ref":"SubscriptionsTable40965A9D"},"USER_POOL_ID":{"Ref":"ChatbotUserPool01970AAD"},"LOG_LEVEL":"INFO"}},"handler":"user_management.lambda_handler","memorySize":512,"role":{"Fn::GetAtt":["LambdaRole3A44B857","Arn"]},"runtime":"python3.11","timeout":120}}}}},"JWTAuthorizerFunction":{"id":"JWTAuthorizerFunction","path":"ChatbotBackend/JWTAuthorizerFunction","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.204.0","metadata":[]},"children":{"Code":{"id":"Code","path":"ChatbotBackend/JWTAuthorizerFunction/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.204.0"},"children":{"Stage":{"id":"Stage","path":"ChatbotBackend/JWTAuthorizerFunction/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.204.0"}},"AssetBucket":{"id":"AssetBucket","path":"ChatbotBackend/JWTAuthorizerFunction/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.204.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"ChatbotBackend/JWTAuthorizerFunction/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-887078546492-ap-northeast-2","s3Key":"08656a1de06b13f088679093a003aab21621934f20175eb3a900f8c9b66936a1.zip"},"environment":{"variables":{"USER_POOL_ID":{"Ref":"ChatbotUserPool01970AAD"},"USER_POOL_CLIENT_ID":{"Ref":"ChatbotUserPoolChatbotWebClientF2B8B64F"},"REGION":"ap-northeast-2","LOG_LEVEL":"INFO"}},"handler":"authorizer.handler","memorySize":256,"role":{"Fn::GetAtt":["LambdaRole3A44B857","Arn"]},"runtime":"python3.11","timeout":60}}},"ChatbotBackendChatbotApiAuthorizer7C77C4DB:Permissions":{"id":"ChatbotBackendChatbotApiAuthorizer7C77C4DB:Permissions","path":"ChatbotBackend/JWTAuthorizerFunction/ChatbotBackendChatbotApiAuthorizer7C77C4DB:Permissions","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["JWTAuthorizerFunction9F386173","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:ap-northeast-2:887078546492:",{"Ref":"ChatbotApiF211B502"},"/authorizers/",{"Ref":"ChatbotApiAuthorizer801BDC78"}]]}}}}}},"ChatbotApi":{"id":"ChatbotApi","path":"ChatbotBackend/ChatbotApi","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.RestApi","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotBackend/ChatbotApi/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnRestApi","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::RestApi","aws:cdk:cloudformation:props":{"description":"동적 프롬프트 시스템 - 완전한 빈깡통 AI","name":"chatbot-api"}}},"CloudWatchRole":{"id":"CloudWatchRole","path":"ChatbotBackend/ChatbotApi/CloudWatchRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.204.0","metadata":[]},"children":{"ImportCloudWatchRole":{"id":"ImportCloudWatchRole","path":"ChatbotBackend/ChatbotApi/CloudWatchRole/ImportCloudWatchRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.204.0","metadata":[]}},"Resource":{"id":"Resource","path":"ChatbotBackend/ChatbotApi/CloudWatchRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"apigateway.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AmazonAPIGatewayPushToCloudWatchLogs"]]}]}}}}},"Account":{"id":"Account","path":"ChatbotBackend/ChatbotApi/Account","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnAccount","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Account","aws:cdk:cloudformation:props":{"cloudWatchRoleArn":{"Fn::GetAtt":["ChatbotApiCloudWatchRoleD8E3EB91","Arn"]}}}},"Deployment":{"id":"Deployment","path":"ChatbotBackend/ChatbotApi/Deployment","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Deployment","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotBackend/ChatbotApi/Deployment/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnDeployment","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Deployment","aws:cdk:cloudformation:props":{"description":"동적 프롬프트 시스템 - 완전한 빈깡통 AI","restApiId":{"Ref":"ChatbotApiF211B502"}}}}}},"DeploymentStage.prod":{"id":"DeploymentStage.prod","path":"ChatbotBackend/ChatbotApi/DeploymentStage.prod","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Stage","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotBackend/ChatbotApi/DeploymentStage.prod/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnStage","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Stage","aws:cdk:cloudformation:props":{"deploymentId":{"Ref":"ChatbotApiDeploymentB78958153fc91a2813333901880c75f9ea5ccb10"},"restApiId":{"Ref":"ChatbotApiF211B502"},"stageName":"prod"}}}}},"Endpoint":{"id":"Endpoint","path":"ChatbotBackend/ChatbotApi/Endpoint","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.204.0"}},"Default":{"id":"Default","path":"ChatbotBackend/ChatbotApi/Default","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.ResourceBase","version":"2.204.0","metadata":[]},"children":{"auth":{"id":"auth","path":"ChatbotBackend/ChatbotApi/Default/auth","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotBackend/ChatbotApi/Default/auth/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Fn::GetAtt":["ChatbotApiF211B502","RootResourceId"]},"pathPart":"auth","restApiId":{"Ref":"ChatbotApiF211B502"}}}},"signup":{"id":"signup","path":"ChatbotBackend/ChatbotApi/Default/auth/signup","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotBackend/ChatbotApi/Default/auth/signup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Ref":"ChatbotApiauthD0EAC720"},"pathPart":"signup","restApiId":{"Ref":"ChatbotApiF211B502"}}}},"POST":{"id":"POST","path":"ChatbotBackend/ChatbotApi/Default/auth/signup/POST","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.204.0","metadata":[]},"children":{"ApiPermission.ChatbotBackendChatbotApi34F97BD6.POST..auth.signup":{"id":"ApiPermission.ChatbotBackendChatbotApi34F97BD6.POST..auth.signup","path":"ChatbotBackend/ChatbotApi/Default/auth/signup/POST/ApiPermission.ChatbotBackendChatbotApi34F97BD6.POST..auth.signup","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["AuthFunctionA1CD5E0F","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:ap-northeast-2:887078546492:",{"Ref":"ChatbotApiF211B502"},"/",{"Ref":"ChatbotApiDeploymentStageprod27096855"},"/POST/auth/signup"]]}}}},"ApiPermission.Test.ChatbotBackendChatbotApi34F97BD6.POST..auth.signup":{"id":"ApiPermission.Test.ChatbotBackendChatbotApi34F97BD6.POST..auth.signup","path":"ChatbotBackend/ChatbotApi/Default/auth/signup/POST/ApiPermission.Test.ChatbotBackendChatbotApi34F97BD6.POST..auth.signup","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["AuthFunctionA1CD5E0F","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:ap-northeast-2:887078546492:",{"Ref":"ChatbotApiF211B502"},"/test-invoke-stage/POST/auth/signup"]]}}}},"Resource":{"id":"Resource","path":"ChatbotBackend/ChatbotApi/Default/auth/signup/POST/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"NONE","httpMethod":"POST","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":apigateway:ap-northeast-2:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["AuthFunctionA1CD5E0F","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"resourceId":{"Ref":"ChatbotApiauthsignup28B15E0C"},"restApiId":{"Ref":"ChatbotApiF211B502"}}}}}},"OPTIONS":{"id":"OPTIONS","path":"ChatbotBackend/ChatbotApi/Default/auth/signup/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotBackend/ChatbotApi/Default/auth/signup/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{\"statusCode\": 200}"},"integrationResponses":[{"statusCode":"200","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'POST,OPTIONS'"}}]},"methodResponses":[{"statusCode":"200","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true}}],"resourceId":{"Ref":"ChatbotApiauthsignup28B15E0C"},"restApiId":{"Ref":"ChatbotApiF211B502"}}}}}}}},"signin":{"id":"signin","path":"ChatbotBackend/ChatbotApi/Default/auth/signin","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotBackend/ChatbotApi/Default/auth/signin/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Ref":"ChatbotApiauthD0EAC720"},"pathPart":"signin","restApiId":{"Ref":"ChatbotApiF211B502"}}}},"POST":{"id":"POST","path":"ChatbotBackend/ChatbotApi/Default/auth/signin/POST","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.204.0","metadata":[]},"children":{"ApiPermission.ChatbotBackendChatbotApi34F97BD6.POST..auth.signin":{"id":"ApiPermission.ChatbotBackendChatbotApi34F97BD6.POST..auth.signin","path":"ChatbotBackend/ChatbotApi/Default/auth/signin/POST/ApiPermission.ChatbotBackendChatbotApi34F97BD6.POST..auth.signin","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["AuthFunctionA1CD5E0F","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:ap-northeast-2:887078546492:",{"Ref":"ChatbotApiF211B502"},"/",{"Ref":"ChatbotApiDeploymentStageprod27096855"},"/POST/auth/signin"]]}}}},"ApiPermission.Test.ChatbotBackendChatbotApi34F97BD6.POST..auth.signin":{"id":"ApiPermission.Test.ChatbotBackendChatbotApi34F97BD6.POST..auth.signin","path":"ChatbotBackend/ChatbotApi/Default/auth/signin/POST/ApiPermission.Test.ChatbotBackendChatbotApi34F97BD6.POST..auth.signin","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["AuthFunctionA1CD5E0F","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:ap-northeast-2:887078546492:",{"Ref":"ChatbotApiF211B502"},"/test-invoke-stage/POST/auth/signin"]]}}}},"Resource":{"id":"Resource","path":"ChatbotBackend/ChatbotApi/Default/auth/signin/POST/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"NONE","httpMethod":"POST","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":apigateway:ap-northeast-2:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["AuthFunctionA1CD5E0F","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"resourceId":{"Ref":"ChatbotApiauthsigninFEBE7F7E"},"restApiId":{"Ref":"ChatbotApiF211B502"}}}}}},"OPTIONS":{"id":"OPTIONS","path":"ChatbotBackend/ChatbotApi/Default/auth/signin/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotBackend/ChatbotApi/Default/auth/signin/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{\"statusCode\": 200}"},"integrationResponses":[{"statusCode":"200","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'POST,OPTIONS'"}}]},"methodResponses":[{"statusCode":"200","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true}}],"resourceId":{"Ref":"ChatbotApiauthsigninFEBE7F7E"},"restApiId":{"Ref":"ChatbotApiF211B502"}}}}}}}},"refresh":{"id":"refresh","path":"ChatbotBackend/ChatbotApi/Default/auth/refresh","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotBackend/ChatbotApi/Default/auth/refresh/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Ref":"ChatbotApiauthD0EAC720"},"pathPart":"refresh","restApiId":{"Ref":"ChatbotApiF211B502"}}}},"POST":{"id":"POST","path":"ChatbotBackend/ChatbotApi/Default/auth/refresh/POST","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.204.0","metadata":[]},"children":{"ApiPermission.ChatbotBackendChatbotApi34F97BD6.POST..auth.refresh":{"id":"ApiPermission.ChatbotBackendChatbotApi34F97BD6.POST..auth.refresh","path":"ChatbotBackend/ChatbotApi/Default/auth/refresh/POST/ApiPermission.ChatbotBackendChatbotApi34F97BD6.POST..auth.refresh","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["AuthFunctionA1CD5E0F","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:ap-northeast-2:887078546492:",{"Ref":"ChatbotApiF211B502"},"/",{"Ref":"ChatbotApiDeploymentStageprod27096855"},"/POST/auth/refresh"]]}}}},"ApiPermission.Test.ChatbotBackendChatbotApi34F97BD6.POST..auth.refresh":{"id":"ApiPermission.Test.ChatbotBackendChatbotApi34F97BD6.POST..auth.refresh","path":"ChatbotBackend/ChatbotApi/Default/auth/refresh/POST/ApiPermission.Test.ChatbotBackendChatbotApi34F97BD6.POST..auth.refresh","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["AuthFunctionA1CD5E0F","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:ap-northeast-2:887078546492:",{"Ref":"ChatbotApiF211B502"},"/test-invoke-stage/POST/auth/refresh"]]}}}},"Resource":{"id":"Resource","path":"ChatbotBackend/ChatbotApi/Default/auth/refresh/POST/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"NONE","httpMethod":"POST","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":apigateway:ap-northeast-2:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["AuthFunctionA1CD5E0F","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"resourceId":{"Ref":"ChatbotApiauthrefreshF6C87EBE"},"restApiId":{"Ref":"ChatbotApiF211B502"}}}}}},"OPTIONS":{"id":"OPTIONS","path":"ChatbotBackend/ChatbotApi/Default/auth/refresh/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotBackend/ChatbotApi/Default/auth/refresh/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{\"statusCode\": 200}"},"integrationResponses":[{"statusCode":"200","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'POST,OPTIONS'"}}]},"methodResponses":[{"statusCode":"200","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true}}],"resourceId":{"Ref":"ChatbotApiauthrefreshF6C87EBE"},"restApiId":{"Ref":"ChatbotApiF211B502"}}}}}}}},"signout":{"id":"signout","path":"ChatbotBackend/ChatbotApi/Default/auth/signout","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotBackend/ChatbotApi/Default/auth/signout/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Ref":"ChatbotApiauthD0EAC720"},"pathPart":"signout","restApiId":{"Ref":"ChatbotApiF211B502"}}}},"POST":{"id":"POST","path":"ChatbotBackend/ChatbotApi/Default/auth/signout/POST","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.204.0","metadata":[]},"children":{"ApiPermission.ChatbotBackendChatbotApi34F97BD6.POST..auth.signout":{"id":"ApiPermission.ChatbotBackendChatbotApi34F97BD6.POST..auth.signout","path":"ChatbotBackend/ChatbotApi/Default/auth/signout/POST/ApiPermission.ChatbotBackendChatbotApi34F97BD6.POST..auth.signout","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["AuthFunctionA1CD5E0F","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:ap-northeast-2:887078546492:",{"Ref":"ChatbotApiF211B502"},"/",{"Ref":"ChatbotApiDeploymentStageprod27096855"},"/POST/auth/signout"]]}}}},"ApiPermission.Test.ChatbotBackendChatbotApi34F97BD6.POST..auth.signout":{"id":"ApiPermission.Test.ChatbotBackendChatbotApi34F97BD6.POST..auth.signout","path":"ChatbotBackend/ChatbotApi/Default/auth/signout/POST/ApiPermission.Test.ChatbotBackendChatbotApi34F97BD6.POST..auth.signout","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["AuthFunctionA1CD5E0F","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:ap-northeast-2:887078546492:",{"Ref":"ChatbotApiF211B502"},"/test-invoke-stage/POST/auth/signout"]]}}}},"Resource":{"id":"Resource","path":"ChatbotBackend/ChatbotApi/Default/auth/signout/POST/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"NONE","httpMethod":"POST","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":apigateway:ap-northeast-2:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["AuthFunctionA1CD5E0F","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"resourceId":{"Ref":"ChatbotApiauthsignoutCD0FB0B3"},"restApiId":{"Ref":"ChatbotApiF211B502"}}}}}},"OPTIONS":{"id":"OPTIONS","path":"ChatbotBackend/ChatbotApi/Default/auth/signout/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotBackend/ChatbotApi/Default/auth/signout/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{\"statusCode\": 200}"},"integrationResponses":[{"statusCode":"200","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'POST,OPTIONS'"}}]},"methodResponses":[{"statusCode":"200","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true}}],"resourceId":{"Ref":"ChatbotApiauthsignoutCD0FB0B3"},"restApiId":{"Ref":"ChatbotApiF211B502"}}}}}}}},"verify":{"id":"verify","path":"ChatbotBackend/ChatbotApi/Default/auth/verify","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotBackend/ChatbotApi/Default/auth/verify/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Ref":"ChatbotApiauthD0EAC720"},"pathPart":"verify","restApiId":{"Ref":"ChatbotApiF211B502"}}}},"POST":{"id":"POST","path":"ChatbotBackend/ChatbotApi/Default/auth/verify/POST","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.204.0","metadata":[]},"children":{"ApiPermission.ChatbotBackendChatbotApi34F97BD6.POST..auth.verify":{"id":"ApiPermission.ChatbotBackendChatbotApi34F97BD6.POST..auth.verify","path":"ChatbotBackend/ChatbotApi/Default/auth/verify/POST/ApiPermission.ChatbotBackendChatbotApi34F97BD6.POST..auth.verify","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["AuthFunctionA1CD5E0F","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:ap-northeast-2:887078546492:",{"Ref":"ChatbotApiF211B502"},"/",{"Ref":"ChatbotApiDeploymentStageprod27096855"},"/POST/auth/verify"]]}}}},"ApiPermission.Test.ChatbotBackendChatbotApi34F97BD6.POST..auth.verify":{"id":"ApiPermission.Test.ChatbotBackendChatbotApi34F97BD6.POST..auth.verify","path":"ChatbotBackend/ChatbotApi/Default/auth/verify/POST/ApiPermission.Test.ChatbotBackendChatbotApi34F97BD6.POST..auth.verify","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["AuthFunctionA1CD5E0F","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:ap-northeast-2:887078546492:",{"Ref":"ChatbotApiF211B502"},"/test-invoke-stage/POST/auth/verify"]]}}}},"Resource":{"id":"Resource","path":"ChatbotBackend/ChatbotApi/Default/auth/verify/POST/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"NONE","httpMethod":"POST","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":apigateway:ap-northeast-2:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["AuthFunctionA1CD5E0F","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"resourceId":{"Ref":"ChatbotApiauthverifyCDA8800C"},"restApiId":{"Ref":"ChatbotApiF211B502"}}}}}},"OPTIONS":{"id":"OPTIONS","path":"ChatbotBackend/ChatbotApi/Default/auth/verify/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotBackend/ChatbotApi/Default/auth/verify/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{\"statusCode\": 200}"},"integrationResponses":[{"statusCode":"200","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'POST,OPTIONS'"}}]},"methodResponses":[{"statusCode":"200","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true}}],"resourceId":{"Ref":"ChatbotApiauthverifyCDA8800C"},"restApiId":{"Ref":"ChatbotApiF211B502"}}}}}}}},"forgot-password":{"id":"forgot-password","path":"ChatbotBackend/ChatbotApi/Default/auth/forgot-password","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotBackend/ChatbotApi/Default/auth/forgot-password/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Ref":"ChatbotApiauthD0EAC720"},"pathPart":"forgot-password","restApiId":{"Ref":"ChatbotApiF211B502"}}}},"POST":{"id":"POST","path":"ChatbotBackend/ChatbotApi/Default/auth/forgot-password/POST","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.204.0","metadata":[]},"children":{"ApiPermission.ChatbotBackendChatbotApi34F97BD6.POST..auth.forgot-password":{"id":"ApiPermission.ChatbotBackendChatbotApi34F97BD6.POST..auth.forgot-password","path":"ChatbotBackend/ChatbotApi/Default/auth/forgot-password/POST/ApiPermission.ChatbotBackendChatbotApi34F97BD6.POST..auth.forgot-password","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["AuthFunctionA1CD5E0F","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:ap-northeast-2:887078546492:",{"Ref":"ChatbotApiF211B502"},"/",{"Ref":"ChatbotApiDeploymentStageprod27096855"},"/POST/auth/forgot-password"]]}}}},"ApiPermission.Test.ChatbotBackendChatbotApi34F97BD6.POST..auth.forgot-password":{"id":"ApiPermission.Test.ChatbotBackendChatbotApi34F97BD6.POST..auth.forgot-password","path":"ChatbotBackend/ChatbotApi/Default/auth/forgot-password/POST/ApiPermission.Test.ChatbotBackendChatbotApi34F97BD6.POST..auth.forgot-password","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["AuthFunctionA1CD5E0F","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:ap-northeast-2:887078546492:",{"Ref":"ChatbotApiF211B502"},"/test-invoke-stage/POST/auth/forgot-password"]]}}}},"Resource":{"id":"Resource","path":"ChatbotBackend/ChatbotApi/Default/auth/forgot-password/POST/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"NONE","httpMethod":"POST","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":apigateway:ap-northeast-2:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["AuthFunctionA1CD5E0F","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"resourceId":{"Ref":"ChatbotApiauthforgotpasswordEC47AED7"},"restApiId":{"Ref":"ChatbotApiF211B502"}}}}}},"OPTIONS":{"id":"OPTIONS","path":"ChatbotBackend/ChatbotApi/Default/auth/forgot-password/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotBackend/ChatbotApi/Default/auth/forgot-password/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{\"statusCode\": 200}"},"integrationResponses":[{"statusCode":"200","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'POST,OPTIONS'"}}]},"methodResponses":[{"statusCode":"200","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true}}],"resourceId":{"Ref":"ChatbotApiauthforgotpasswordEC47AED7"},"restApiId":{"Ref":"ChatbotApiF211B502"}}}}}}}},"confirm-password":{"id":"confirm-password","path":"ChatbotBackend/ChatbotApi/Default/auth/confirm-password","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotBackend/ChatbotApi/Default/auth/confirm-password/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Ref":"ChatbotApiauthD0EAC720"},"pathPart":"confirm-password","restApiId":{"Ref":"ChatbotApiF211B502"}}}},"POST":{"id":"POST","path":"ChatbotBackend/ChatbotApi/Default/auth/confirm-password/POST","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.204.0","metadata":[]},"children":{"ApiPermission.ChatbotBackendChatbotApi34F97BD6.POST..auth.confirm-password":{"id":"ApiPermission.ChatbotBackendChatbotApi34F97BD6.POST..auth.confirm-password","path":"ChatbotBackend/ChatbotApi/Default/auth/confirm-password/POST/ApiPermission.ChatbotBackendChatbotApi34F97BD6.POST..auth.confirm-password","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["AuthFunctionA1CD5E0F","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:ap-northeast-2:887078546492:",{"Ref":"ChatbotApiF211B502"},"/",{"Ref":"ChatbotApiDeploymentStageprod27096855"},"/POST/auth/confirm-password"]]}}}},"ApiPermission.Test.ChatbotBackendChatbotApi34F97BD6.POST..auth.confirm-password":{"id":"ApiPermission.Test.ChatbotBackendChatbotApi34F97BD6.POST..auth.confirm-password","path":"ChatbotBackend/ChatbotApi/Default/auth/confirm-password/POST/ApiPermission.Test.ChatbotBackendChatbotApi34F97BD6.POST..auth.confirm-password","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["AuthFunctionA1CD5E0F","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:ap-northeast-2:887078546492:",{"Ref":"ChatbotApiF211B502"},"/test-invoke-stage/POST/auth/confirm-password"]]}}}},"Resource":{"id":"Resource","path":"ChatbotBackend/ChatbotApi/Default/auth/confirm-password/POST/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"NONE","httpMethod":"POST","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":apigateway:ap-northeast-2:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["AuthFunctionA1CD5E0F","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"resourceId":{"Ref":"ChatbotApiauthconfirmpassword75F58B7B"},"restApiId":{"Ref":"ChatbotApiF211B502"}}}}}},"OPTIONS":{"id":"OPTIONS","path":"ChatbotBackend/ChatbotApi/Default/auth/confirm-password/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotBackend/ChatbotApi/Default/auth/confirm-password/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{\"statusCode\": 200}"},"integrationResponses":[{"statusCode":"200","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'POST,OPTIONS'"}}]},"methodResponses":[{"statusCode":"200","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true}}],"resourceId":{"Ref":"ChatbotApiauthconfirmpassword75F58B7B"},"restApiId":{"Ref":"ChatbotApiF211B502"}}}}}}}},"init-admin":{"id":"init-admin","path":"ChatbotBackend/ChatbotApi/Default/auth/init-admin","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotBackend/ChatbotApi/Default/auth/init-admin/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Ref":"ChatbotApiauthD0EAC720"},"pathPart":"init-admin","restApiId":{"Ref":"ChatbotApiF211B502"}}}},"POST":{"id":"POST","path":"ChatbotBackend/ChatbotApi/Default/auth/init-admin/POST","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.204.0","metadata":[]},"children":{"ApiPermission.ChatbotBackendChatbotApi34F97BD6.POST..auth.init-admin":{"id":"ApiPermission.ChatbotBackendChatbotApi34F97BD6.POST..auth.init-admin","path":"ChatbotBackend/ChatbotApi/Default/auth/init-admin/POST/ApiPermission.ChatbotBackendChatbotApi34F97BD6.POST..auth.init-admin","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["AuthFunctionA1CD5E0F","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:ap-northeast-2:887078546492:",{"Ref":"ChatbotApiF211B502"},"/",{"Ref":"ChatbotApiDeploymentStageprod27096855"},"/POST/auth/init-admin"]]}}}},"ApiPermission.Test.ChatbotBackendChatbotApi34F97BD6.POST..auth.init-admin":{"id":"ApiPermission.Test.ChatbotBackendChatbotApi34F97BD6.POST..auth.init-admin","path":"ChatbotBackend/ChatbotApi/Default/auth/init-admin/POST/ApiPermission.Test.ChatbotBackendChatbotApi34F97BD6.POST..auth.init-admin","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["AuthFunctionA1CD5E0F","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:ap-northeast-2:887078546492:",{"Ref":"ChatbotApiF211B502"},"/test-invoke-stage/POST/auth/init-admin"]]}}}},"Resource":{"id":"Resource","path":"ChatbotBackend/ChatbotApi/Default/auth/init-admin/POST/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"NONE","httpMethod":"POST","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":apigateway:ap-northeast-2:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["AuthFunctionA1CD5E0F","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"resourceId":{"Ref":"ChatbotApiauthinitadmin839B9BFD"},"restApiId":{"Ref":"ChatbotApiF211B502"}}}}}},"OPTIONS":{"id":"OPTIONS","path":"ChatbotBackend/ChatbotApi/Default/auth/init-admin/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotBackend/ChatbotApi/Default/auth/init-admin/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{\"statusCode\": 200}"},"integrationResponses":[{"statusCode":"200","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'POST,OPTIONS'"}}]},"methodResponses":[{"statusCode":"200","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true}}],"resourceId":{"Ref":"ChatbotApiauthinitadmin839B9BFD"},"restApiId":{"Ref":"ChatbotApiF211B502"}}}}}}}}}},"user":{"id":"user","path":"ChatbotBackend/ChatbotApi/Default/user","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotBackend/ChatbotApi/Default/user/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Fn::GetAtt":["ChatbotApiF211B502","RootResourceId"]},"pathPart":"user","restApiId":{"Ref":"ChatbotApiF211B502"}}}},"profile":{"id":"profile","path":"ChatbotBackend/ChatbotApi/Default/user/profile","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotBackend/ChatbotApi/Default/user/profile/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Ref":"ChatbotApiuser787F7D3D"},"pathPart":"profile","restApiId":{"Ref":"ChatbotApiF211B502"}}}},"GET":{"id":"GET","path":"ChatbotBackend/ChatbotApi/Default/user/profile/GET","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.204.0","metadata":[]},"children":{"ApiPermission.ChatbotBackendChatbotApi34F97BD6.GET..user.profile":{"id":"ApiPermission.ChatbotBackendChatbotApi34F97BD6.GET..user.profile","path":"ChatbotBackend/ChatbotApi/Default/user/profile/GET/ApiPermission.ChatbotBackendChatbotApi34F97BD6.GET..user.profile","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["UserManagementFunction2338B082","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:ap-northeast-2:887078546492:",{"Ref":"ChatbotApiF211B502"},"/",{"Ref":"ChatbotApiDeploymentStageprod27096855"},"/GET/user/profile"]]}}}},"ApiPermission.Test.ChatbotBackendChatbotApi34F97BD6.GET..user.profile":{"id":"ApiPermission.Test.ChatbotBackendChatbotApi34F97BD6.GET..user.profile","path":"ChatbotBackend/ChatbotApi/Default/user/profile/GET/ApiPermission.Test.ChatbotBackendChatbotApi34F97BD6.GET..user.profile","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["UserManagementFunction2338B082","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:ap-northeast-2:887078546492:",{"Ref":"ChatbotApiF211B502"},"/test-invoke-stage/GET/user/profile"]]}}}},"Resource":{"id":"Resource","path":"ChatbotBackend/ChatbotApi/Default/user/profile/GET/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"CUSTOM","authorizerId":{"Ref":"ChatbotApiAuthorizer801BDC78"},"httpMethod":"GET","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":apigateway:ap-northeast-2:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["UserManagementFunction2338B082","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"resourceId":{"Ref":"ChatbotApiuserprofile39527181"},"restApiId":{"Ref":"ChatbotApiF211B502"}}}}}},"PUT":{"id":"PUT","path":"ChatbotBackend/ChatbotApi/Default/user/profile/PUT","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.204.0","metadata":[]},"children":{"ApiPermission.ChatbotBackendChatbotApi34F97BD6.PUT..user.profile":{"id":"ApiPermission.ChatbotBackendChatbotApi34F97BD6.PUT..user.profile","path":"ChatbotBackend/ChatbotApi/Default/user/profile/PUT/ApiPermission.ChatbotBackendChatbotApi34F97BD6.PUT..user.profile","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["UserManagementFunction2338B082","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:ap-northeast-2:887078546492:",{"Ref":"ChatbotApiF211B502"},"/",{"Ref":"ChatbotApiDeploymentStageprod27096855"},"/PUT/user/profile"]]}}}},"ApiPermission.Test.ChatbotBackendChatbotApi34F97BD6.PUT..user.profile":{"id":"ApiPermission.Test.ChatbotBackendChatbotApi34F97BD6.PUT..user.profile","path":"ChatbotBackend/ChatbotApi/Default/user/profile/PUT/ApiPermission.Test.ChatbotBackendChatbotApi34F97BD6.PUT..user.profile","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["UserManagementFunction2338B082","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:ap-northeast-2:887078546492:",{"Ref":"ChatbotApiF211B502"},"/test-invoke-stage/PUT/user/profile"]]}}}},"Resource":{"id":"Resource","path":"ChatbotBackend/ChatbotApi/Default/user/profile/PUT/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"CUSTOM","authorizerId":{"Ref":"ChatbotApiAuthorizer801BDC78"},"httpMethod":"PUT","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":apigateway:ap-northeast-2:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["UserManagementFunction2338B082","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"resourceId":{"Ref":"ChatbotApiuserprofile39527181"},"restApiId":{"Ref":"ChatbotApiF211B502"}}}}}},"OPTIONS":{"id":"OPTIONS","path":"ChatbotBackend/ChatbotApi/Default/user/profile/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotBackend/ChatbotApi/Default/user/profile/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{\"statusCode\": 200}"},"integrationResponses":[{"statusCode":"200","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'GET,PUT,OPTIONS'"}}]},"methodResponses":[{"statusCode":"200","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true}}],"resourceId":{"Ref":"ChatbotApiuserprofile39527181"},"restApiId":{"Ref":"ChatbotApiF211B502"}}}}}}}},"usage":{"id":"usage","path":"ChatbotBackend/ChatbotApi/Default/user/usage","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotBackend/ChatbotApi/Default/user/usage/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Ref":"ChatbotApiuser787F7D3D"},"pathPart":"usage","restApiId":{"Ref":"ChatbotApiF211B502"}}}},"GET":{"id":"GET","path":"ChatbotBackend/ChatbotApi/Default/user/usage/GET","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.204.0","metadata":[]},"children":{"ApiPermission.ChatbotBackendChatbotApi34F97BD6.GET..user.usage":{"id":"ApiPermission.ChatbotBackendChatbotApi34F97BD6.GET..user.usage","path":"ChatbotBackend/ChatbotApi/Default/user/usage/GET/ApiPermission.ChatbotBackendChatbotApi34F97BD6.GET..user.usage","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["UserManagementFunction2338B082","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:ap-northeast-2:887078546492:",{"Ref":"ChatbotApiF211B502"},"/",{"Ref":"ChatbotApiDeploymentStageprod27096855"},"/GET/user/usage"]]}}}},"ApiPermission.Test.ChatbotBackendChatbotApi34F97BD6.GET..user.usage":{"id":"ApiPermission.Test.ChatbotBackendChatbotApi34F97BD6.GET..user.usage","path":"ChatbotBackend/ChatbotApi/Default/user/usage/GET/ApiPermission.Test.ChatbotBackendChatbotApi34F97BD6.GET..user.usage","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["UserManagementFunction2338B082","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:ap-northeast-2:887078546492:",{"Ref":"ChatbotApiF211B502"},"/test-invoke-stage/GET/user/usage"]]}}}},"Resource":{"id":"Resource","path":"ChatbotBackend/ChatbotApi/Default/user/usage/GET/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"CUSTOM","authorizerId":{"Ref":"ChatbotApiAuthorizer801BDC78"},"httpMethod":"GET","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":apigateway:ap-northeast-2:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["UserManagementFunction2338B082","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"resourceId":{"Ref":"ChatbotApiuserusageD0840B97"},"restApiId":{"Ref":"ChatbotApiF211B502"}}}}}},"OPTIONS":{"id":"OPTIONS","path":"ChatbotBackend/ChatbotApi/Default/user/usage/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotBackend/ChatbotApi/Default/user/usage/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{\"statusCode\": 200}"},"integrationResponses":[{"statusCode":"200","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'GET,OPTIONS'"}}]},"methodResponses":[{"statusCode":"200","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true}}],"resourceId":{"Ref":"ChatbotApiuserusageD0840B97"},"restApiId":{"Ref":"ChatbotApiF211B502"}}}}}}}},"subscription":{"id":"subscription","path":"ChatbotBackend/ChatbotApi/Default/user/subscription","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotBackend/ChatbotApi/Default/user/subscription/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Ref":"ChatbotApiuser787F7D3D"},"pathPart":"subscription","restApiId":{"Ref":"ChatbotApiF211B502"}}}},"GET":{"id":"GET","path":"ChatbotBackend/ChatbotApi/Default/user/subscription/GET","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.204.0","metadata":[]},"children":{"ApiPermission.ChatbotBackendChatbotApi34F97BD6.GET..user.subscription":{"id":"ApiPermission.ChatbotBackendChatbotApi34F97BD6.GET..user.subscription","path":"ChatbotBackend/ChatbotApi/Default/user/subscription/GET/ApiPermission.ChatbotBackendChatbotApi34F97BD6.GET..user.subscription","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["UserManagementFunction2338B082","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:ap-northeast-2:887078546492:",{"Ref":"ChatbotApiF211B502"},"/",{"Ref":"ChatbotApiDeploymentStageprod27096855"},"/GET/user/subscription"]]}}}},"ApiPermission.Test.ChatbotBackendChatbotApi34F97BD6.GET..user.subscription":{"id":"ApiPermission.Test.ChatbotBackendChatbotApi34F97BD6.GET..user.subscription","path":"ChatbotBackend/ChatbotApi/Default/user/subscription/GET/ApiPermission.Test.ChatbotBackendChatbotApi34F97BD6.GET..user.subscription","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["UserManagementFunction2338B082","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:ap-northeast-2:887078546492:",{"Ref":"ChatbotApiF211B502"},"/test-invoke-stage/GET/user/subscription"]]}}}},"Resource":{"id":"Resource","path":"ChatbotBackend/ChatbotApi/Default/user/subscription/GET/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"CUSTOM","authorizerId":{"Ref":"ChatbotApiAuthorizer801BDC78"},"httpMethod":"GET","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":apigateway:ap-northeast-2:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["UserManagementFunction2338B082","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"resourceId":{"Ref":"ChatbotApiusersubscriptionD8DD4043"},"restApiId":{"Ref":"ChatbotApiF211B502"}}}}}},"PUT":{"id":"PUT","path":"ChatbotBackend/ChatbotApi/Default/user/subscription/PUT","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.204.0","metadata":[]},"children":{"ApiPermission.ChatbotBackendChatbotApi34F97BD6.PUT..user.subscription":{"id":"ApiPermission.ChatbotBackendChatbotApi34F97BD6.PUT..user.subscription","path":"ChatbotBackend/ChatbotApi/Default/user/subscription/PUT/ApiPermission.ChatbotBackendChatbotApi34F97BD6.PUT..user.subscription","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["UserManagementFunction2338B082","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:ap-northeast-2:887078546492:",{"Ref":"ChatbotApiF211B502"},"/",{"Ref":"ChatbotApiDeploymentStageprod27096855"},"/PUT/user/subscription"]]}}}},"ApiPermission.Test.ChatbotBackendChatbotApi34F97BD6.PUT..user.subscription":{"id":"ApiPermission.Test.ChatbotBackendChatbotApi34F97BD6.PUT..user.subscription","path":"ChatbotBackend/ChatbotApi/Default/user/subscription/PUT/ApiPermission.Test.ChatbotBackendChatbotApi34F97BD6.PUT..user.subscription","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["UserManagementFunction2338B082","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:ap-northeast-2:887078546492:",{"Ref":"ChatbotApiF211B502"},"/test-invoke-stage/PUT/user/subscription"]]}}}},"Resource":{"id":"Resource","path":"ChatbotBackend/ChatbotApi/Default/user/subscription/PUT/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"CUSTOM","authorizerId":{"Ref":"ChatbotApiAuthorizer801BDC78"},"httpMethod":"PUT","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":apigateway:ap-northeast-2:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["UserManagementFunction2338B082","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"resourceId":{"Ref":"ChatbotApiusersubscriptionD8DD4043"},"restApiId":{"Ref":"ChatbotApiF211B502"}}}}}},"OPTIONS":{"id":"OPTIONS","path":"ChatbotBackend/ChatbotApi/Default/user/subscription/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotBackend/ChatbotApi/Default/user/subscription/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{\"statusCode\": 200}"},"integrationResponses":[{"statusCode":"200","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'GET,PUT,OPTIONS'"}}]},"methodResponses":[{"statusCode":"200","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true}}],"resourceId":{"Ref":"ChatbotApiusersubscriptionD8DD4043"},"restApiId":{"Ref":"ChatbotApiF211B502"}}}}}}}}}},"prompts":{"id":"prompts","path":"ChatbotBackend/ChatbotApi/Default/prompts","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotBackend/ChatbotApi/Default/prompts/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Fn::GetAtt":["ChatbotApiF211B502","RootResourceId"]},"pathPart":"prompts","restApiId":{"Ref":"ChatbotApiF211B502"}}}},"POST":{"id":"POST","path":"ChatbotBackend/ChatbotApi/Default/prompts/POST","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.204.0","metadata":[]},"children":{"ApiPermission.ChatbotBackendChatbotApi34F97BD6.POST..prompts":{"id":"ApiPermission.ChatbotBackendChatbotApi34F97BD6.POST..prompts","path":"ChatbotBackend/ChatbotApi/Default/prompts/POST/ApiPermission.ChatbotBackendChatbotApi34F97BD6.POST..prompts","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["GenerateFunctionD11A7A28","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:ap-northeast-2:887078546492:",{"Ref":"ChatbotApiF211B502"},"/",{"Ref":"ChatbotApiDeploymentStageprod27096855"},"/POST/prompts"]]}}}},"ApiPermission.Test.ChatbotBackendChatbotApi34F97BD6.POST..prompts":{"id":"ApiPermission.Test.ChatbotBackendChatbotApi34F97BD6.POST..prompts","path":"ChatbotBackend/ChatbotApi/Default/prompts/POST/ApiPermission.Test.ChatbotBackendChatbotApi34F97BD6.POST..prompts","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["GenerateFunctionD11A7A28","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:ap-northeast-2:887078546492:",{"Ref":"ChatbotApiF211B502"},"/test-invoke-stage/POST/prompts"]]}}}},"Resource":{"id":"Resource","path":"ChatbotBackend/ChatbotApi/Default/prompts/POST/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"CUSTOM","authorizerId":{"Ref":"ChatbotApiAuthorizer801BDC78"},"httpMethod":"POST","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":apigateway:ap-northeast-2:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["GenerateFunctionD11A7A28","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"resourceId":{"Ref":"ChatbotApiprompts03168F80"},"restApiId":{"Ref":"ChatbotApiF211B502"}}}}}},"GET":{"id":"GET","path":"ChatbotBackend/ChatbotApi/Default/prompts/GET","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.204.0","metadata":[]},"children":{"ApiPermission.ChatbotBackendChatbotApi34F97BD6.GET..prompts":{"id":"ApiPermission.ChatbotBackendChatbotApi34F97BD6.GET..prompts","path":"ChatbotBackend/ChatbotApi/Default/prompts/GET/ApiPermission.ChatbotBackendChatbotApi34F97BD6.GET..prompts","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["GenerateFunctionD11A7A28","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:ap-northeast-2:887078546492:",{"Ref":"ChatbotApiF211B502"},"/",{"Ref":"ChatbotApiDeploymentStageprod27096855"},"/GET/prompts"]]}}}},"ApiPermission.Test.ChatbotBackendChatbotApi34F97BD6.GET..prompts":{"id":"ApiPermission.Test.ChatbotBackendChatbotApi34F97BD6.GET..prompts","path":"ChatbotBackend/ChatbotApi/Default/prompts/GET/ApiPermission.Test.ChatbotBackendChatbotApi34F97BD6.GET..prompts","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["GenerateFunctionD11A7A28","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:ap-northeast-2:887078546492:",{"Ref":"ChatbotApiF211B502"},"/test-invoke-stage/GET/prompts"]]}}}},"Resource":{"id":"Resource","path":"ChatbotBackend/ChatbotApi/Default/prompts/GET/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"CUSTOM","authorizerId":{"Ref":"ChatbotApiAuthorizer801BDC78"},"httpMethod":"GET","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":apigateway:ap-northeast-2:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["GenerateFunctionD11A7A28","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"resourceId":{"Ref":"ChatbotApiprompts03168F80"},"restApiId":{"Ref":"ChatbotApiF211B502"}}}}}},"OPTIONS":{"id":"OPTIONS","path":"ChatbotBackend/ChatbotApi/Default/prompts/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotBackend/ChatbotApi/Default/prompts/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{\"statusCode\": 200}"},"integrationResponses":[{"statusCode":"200","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'GET,POST,PUT,DELETE,OPTIONS'"}}]},"methodResponses":[{"statusCode":"200","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true}}],"resourceId":{"Ref":"ChatbotApiprompts03168F80"},"restApiId":{"Ref":"ChatbotApiF211B502"}}}}}},"{promptId}":{"id":"{promptId}","path":"ChatbotBackend/ChatbotApi/Default/prompts/{promptId}","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotBackend/ChatbotApi/Default/prompts/{promptId}/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Ref":"ChatbotApiprompts03168F80"},"pathPart":"{promptId}","restApiId":{"Ref":"ChatbotApiF211B502"}}}},"PUT":{"id":"PUT","path":"ChatbotBackend/ChatbotApi/Default/prompts/{promptId}/PUT","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.204.0","metadata":[]},"children":{"ApiPermission.ChatbotBackendChatbotApi34F97BD6.PUT..prompts.{promptId}":{"id":"ApiPermission.ChatbotBackendChatbotApi34F97BD6.PUT..prompts.{promptId}","path":"ChatbotBackend/ChatbotApi/Default/prompts/{promptId}/PUT/ApiPermission.ChatbotBackendChatbotApi34F97BD6.PUT..prompts.{promptId}","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["GenerateFunctionD11A7A28","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:ap-northeast-2:887078546492:",{"Ref":"ChatbotApiF211B502"},"/",{"Ref":"ChatbotApiDeploymentStageprod27096855"},"/PUT/prompts/*"]]}}}},"ApiPermission.Test.ChatbotBackendChatbotApi34F97BD6.PUT..prompts.{promptId}":{"id":"ApiPermission.Test.ChatbotBackendChatbotApi34F97BD6.PUT..prompts.{promptId}","path":"ChatbotBackend/ChatbotApi/Default/prompts/{promptId}/PUT/ApiPermission.Test.ChatbotBackendChatbotApi34F97BD6.PUT..prompts.{promptId}","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["GenerateFunctionD11A7A28","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:ap-northeast-2:887078546492:",{"Ref":"ChatbotApiF211B502"},"/test-invoke-stage/PUT/prompts/*"]]}}}},"Resource":{"id":"Resource","path":"ChatbotBackend/ChatbotApi/Default/prompts/{promptId}/PUT/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"CUSTOM","authorizerId":{"Ref":"ChatbotApiAuthorizer801BDC78"},"httpMethod":"PUT","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":apigateway:ap-northeast-2:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["GenerateFunctionD11A7A28","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"resourceId":{"Ref":"ChatbotApipromptspromptId68497969"},"restApiId":{"Ref":"ChatbotApiF211B502"}}}}}},"DELETE":{"id":"DELETE","path":"ChatbotBackend/ChatbotApi/Default/prompts/{promptId}/DELETE","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.204.0","metadata":[]},"children":{"ApiPermission.ChatbotBackendChatbotApi34F97BD6.DELETE..prompts.{promptId}":{"id":"ApiPermission.ChatbotBackendChatbotApi34F97BD6.DELETE..prompts.{promptId}","path":"ChatbotBackend/ChatbotApi/Default/prompts/{promptId}/DELETE/ApiPermission.ChatbotBackendChatbotApi34F97BD6.DELETE..prompts.{promptId}","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["GenerateFunctionD11A7A28","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:ap-northeast-2:887078546492:",{"Ref":"ChatbotApiF211B502"},"/",{"Ref":"ChatbotApiDeploymentStageprod27096855"},"/DELETE/prompts/*"]]}}}},"ApiPermission.Test.ChatbotBackendChatbotApi34F97BD6.DELETE..prompts.{promptId}":{"id":"ApiPermission.Test.ChatbotBackendChatbotApi34F97BD6.DELETE..prompts.{promptId}","path":"ChatbotBackend/ChatbotApi/Default/prompts/{promptId}/DELETE/ApiPermission.Test.ChatbotBackendChatbotApi34F97BD6.DELETE..prompts.{promptId}","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["GenerateFunctionD11A7A28","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:ap-northeast-2:887078546492:",{"Ref":"ChatbotApiF211B502"},"/test-invoke-stage/DELETE/prompts/*"]]}}}},"Resource":{"id":"Resource","path":"ChatbotBackend/ChatbotApi/Default/prompts/{promptId}/DELETE/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"CUSTOM","authorizerId":{"Ref":"ChatbotApiAuthorizer801BDC78"},"httpMethod":"DELETE","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":apigateway:ap-northeast-2:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["GenerateFunctionD11A7A28","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"resourceId":{"Ref":"ChatbotApipromptspromptId68497969"},"restApiId":{"Ref":"ChatbotApiF211B502"}}}}}},"OPTIONS":{"id":"OPTIONS","path":"ChatbotBackend/ChatbotApi/Default/prompts/{promptId}/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotBackend/ChatbotApi/Default/prompts/{promptId}/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{\"statusCode\": 200}"},"integrationResponses":[{"statusCode":"200","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'GET,POST,PUT,DELETE,OPTIONS'"}}]},"methodResponses":[{"statusCode":"200","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true}}],"resourceId":{"Ref":"ChatbotApipromptspromptId68497969"},"restApiId":{"Ref":"ChatbotApiF211B502"}}}}}},"content":{"id":"content","path":"ChatbotBackend/ChatbotApi/Default/prompts/{promptId}/content","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotBackend/ChatbotApi/Default/prompts/{promptId}/content/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Ref":"ChatbotApipromptspromptId68497969"},"pathPart":"content","restApiId":{"Ref":"ChatbotApiF211B502"}}}},"GET":{"id":"GET","path":"ChatbotBackend/ChatbotApi/Default/prompts/{promptId}/content/GET","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.204.0","metadata":[]},"children":{"ApiPermission.ChatbotBackendChatbotApi34F97BD6.GET..prompts.{promptId}.content":{"id":"ApiPermission.ChatbotBackendChatbotApi34F97BD6.GET..prompts.{promptId}.content","path":"ChatbotBackend/ChatbotApi/Default/prompts/{promptId}/content/GET/ApiPermission.ChatbotBackendChatbotApi34F97BD6.GET..prompts.{promptId}.content","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["GenerateFunctionD11A7A28","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:ap-northeast-2:887078546492:",{"Ref":"ChatbotApiF211B502"},"/",{"Ref":"ChatbotApiDeploymentStageprod27096855"},"/GET/prompts/*/content"]]}}}},"ApiPermission.Test.ChatbotBackendChatbotApi34F97BD6.GET..prompts.{promptId}.content":{"id":"ApiPermission.Test.ChatbotBackendChatbotApi34F97BD6.GET..prompts.{promptId}.content","path":"ChatbotBackend/ChatbotApi/Default/prompts/{promptId}/content/GET/ApiPermission.Test.ChatbotBackendChatbotApi34F97BD6.GET..prompts.{promptId}.content","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["GenerateFunctionD11A7A28","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:ap-northeast-2:887078546492:",{"Ref":"ChatbotApiF211B502"},"/test-invoke-stage/GET/prompts/*/content"]]}}}},"Resource":{"id":"Resource","path":"ChatbotBackend/ChatbotApi/Default/prompts/{promptId}/content/GET/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"CUSTOM","authorizerId":{"Ref":"ChatbotApiAuthorizer801BDC78"},"httpMethod":"GET","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":apigateway:ap-northeast-2:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["GenerateFunctionD11A7A28","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"resourceId":{"Ref":"ChatbotApipromptspromptIdcontent206EE1A8"},"restApiId":{"Ref":"ChatbotApiF211B502"}}}}}},"OPTIONS":{"id":"OPTIONS","path":"ChatbotBackend/ChatbotApi/Default/prompts/{promptId}/content/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotBackend/ChatbotApi/Default/prompts/{promptId}/content/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{\"statusCode\": 200}"},"integrationResponses":[{"statusCode":"200","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'GET,OPTIONS'"}}]},"methodResponses":[{"statusCode":"200","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true}}],"resourceId":{"Ref":"ChatbotApipromptspromptIdcontent206EE1A8"},"restApiId":{"Ref":"ChatbotApiF211B502"}}}}}}}}}}}},"generate":{"id":"generate","path":"ChatbotBackend/ChatbotApi/Default/generate","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotBackend/ChatbotApi/Default/generate/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Fn::GetAtt":["ChatbotApiF211B502","RootResourceId"]},"pathPart":"generate","restApiId":{"Ref":"ChatbotApiF211B502"}}}},"POST":{"id":"POST","path":"ChatbotBackend/ChatbotApi/Default/generate/POST","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.204.0","metadata":[]},"children":{"ApiPermission.ChatbotBackendChatbotApi34F97BD6.POST..generate":{"id":"ApiPermission.ChatbotBackendChatbotApi34F97BD6.POST..generate","path":"ChatbotBackend/ChatbotApi/Default/generate/POST/ApiPermission.ChatbotBackendChatbotApi34F97BD6.POST..generate","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["GenerateFunctionD11A7A28","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:ap-northeast-2:887078546492:",{"Ref":"ChatbotApiF211B502"},"/",{"Ref":"ChatbotApiDeploymentStageprod27096855"},"/POST/generate"]]}}}},"ApiPermission.Test.ChatbotBackendChatbotApi34F97BD6.POST..generate":{"id":"ApiPermission.Test.ChatbotBackendChatbotApi34F97BD6.POST..generate","path":"ChatbotBackend/ChatbotApi/Default/generate/POST/ApiPermission.Test.ChatbotBackendChatbotApi34F97BD6.POST..generate","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["GenerateFunctionD11A7A28","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:ap-northeast-2:887078546492:",{"Ref":"ChatbotApiF211B502"},"/test-invoke-stage/POST/generate"]]}}}},"Resource":{"id":"Resource","path":"ChatbotBackend/ChatbotApi/Default/generate/POST/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"NONE","httpMethod":"POST","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":apigateway:ap-northeast-2:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["GenerateFunctionD11A7A28","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"resourceId":{"Ref":"ChatbotApigenerate2D00A9C0"},"restApiId":{"Ref":"ChatbotApiF211B502"}}}}}},"OPTIONS":{"id":"OPTIONS","path":"ChatbotBackend/ChatbotApi/Default/generate/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotBackend/ChatbotApi/Default/generate/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{\"statusCode\": 200}"},"integrationResponses":[{"statusCode":"200","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'POST,OPTIONS'"}}]},"methodResponses":[{"statusCode":"200","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true}}],"resourceId":{"Ref":"ChatbotApigenerate2D00A9C0"},"restApiId":{"Ref":"ChatbotApiF211B502"}}}}}},"stream":{"id":"stream","path":"ChatbotBackend/ChatbotApi/Default/generate/stream","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotBackend/ChatbotApi/Default/generate/stream/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Ref":"ChatbotApigenerate2D00A9C0"},"pathPart":"stream","restApiId":{"Ref":"ChatbotApiF211B502"}}}},"POST":{"id":"POST","path":"ChatbotBackend/ChatbotApi/Default/generate/stream/POST","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.204.0","metadata":[]},"children":{"ApiPermission.ChatbotBackendChatbotApi34F97BD6.POST..generate.stream":{"id":"ApiPermission.ChatbotBackendChatbotApi34F97BD6.POST..generate.stream","path":"ChatbotBackend/ChatbotApi/Default/generate/stream/POST/ApiPermission.ChatbotBackendChatbotApi34F97BD6.POST..generate.stream","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["GenerateFunctionD11A7A28","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:ap-northeast-2:887078546492:",{"Ref":"ChatbotApiF211B502"},"/",{"Ref":"ChatbotApiDeploymentStageprod27096855"},"/POST/generate/stream"]]}}}},"ApiPermission.Test.ChatbotBackendChatbotApi34F97BD6.POST..generate.stream":{"id":"ApiPermission.Test.ChatbotBackendChatbotApi34F97BD6.POST..generate.stream","path":"ChatbotBackend/ChatbotApi/Default/generate/stream/POST/ApiPermission.Test.ChatbotBackendChatbotApi34F97BD6.POST..generate.stream","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["GenerateFunctionD11A7A28","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:ap-northeast-2:887078546492:",{"Ref":"ChatbotApiF211B502"},"/test-invoke-stage/POST/generate/stream"]]}}}},"Resource":{"id":"Resource","path":"ChatbotBackend/ChatbotApi/Default/generate/stream/POST/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"NONE","httpMethod":"POST","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":apigateway:ap-northeast-2:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["GenerateFunctionD11A7A28","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"resourceId":{"Ref":"ChatbotApigeneratestream540C4A3C"},"restApiId":{"Ref":"ChatbotApiF211B502"}}}}}},"OPTIONS":{"id":"OPTIONS","path":"ChatbotBackend/ChatbotApi/Default/generate/stream/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotBackend/ChatbotApi/Default/generate/stream/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{\"statusCode\": 200}"},"integrationResponses":[{"statusCode":"200","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'OPTIONS,POST'"}}]},"methodResponses":[{"statusCode":"200","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true}}],"resourceId":{"Ref":"ChatbotApigeneratestream540C4A3C"},"restApiId":{"Ref":"ChatbotApiF211B502"}}}}}}}}}},"conversations":{"id":"conversations","path":"ChatbotBackend/ChatbotApi/Default/conversations","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotBackend/ChatbotApi/Default/conversations/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Fn::GetAtt":["ChatbotApiF211B502","RootResourceId"]},"pathPart":"conversations","restApiId":{"Ref":"ChatbotApiF211B502"}}}},"GET":{"id":"GET","path":"ChatbotBackend/ChatbotApi/Default/conversations/GET","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.204.0","metadata":[]},"children":{"ApiPermission.ChatbotBackendChatbotApi34F97BD6.GET..conversations":{"id":"ApiPermission.ChatbotBackendChatbotApi34F97BD6.GET..conversations","path":"ChatbotBackend/ChatbotApi/Default/conversations/GET/ApiPermission.ChatbotBackendChatbotApi34F97BD6.GET..conversations","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::ImportValue":"ChatbotConversationStack:ExportsOutputFnGetAttConversationFunction7337ABEAArnB4BCD543"},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:ap-northeast-2:887078546492:",{"Ref":"ChatbotApiF211B502"},"/",{"Ref":"ChatbotApiDeploymentStageprod27096855"},"/GET/conversations"]]}}}},"ApiPermission.Test.ChatbotBackendChatbotApi34F97BD6.GET..conversations":{"id":"ApiPermission.Test.ChatbotBackendChatbotApi34F97BD6.GET..conversations","path":"ChatbotBackend/ChatbotApi/Default/conversations/GET/ApiPermission.Test.ChatbotBackendChatbotApi34F97BD6.GET..conversations","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::ImportValue":"ChatbotConversationStack:ExportsOutputFnGetAttConversationFunction7337ABEAArnB4BCD543"},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:ap-northeast-2:887078546492:",{"Ref":"ChatbotApiF211B502"},"/test-invoke-stage/GET/conversations"]]}}}},"Resource":{"id":"Resource","path":"ChatbotBackend/ChatbotApi/Default/conversations/GET/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"CUSTOM","authorizerId":{"Ref":"ChatbotApiAuthorizer801BDC78"},"httpMethod":"GET","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":apigateway:ap-northeast-2:lambda:path/2015-03-31/functions/",{"Fn::ImportValue":"ChatbotConversationStack:ExportsOutputFnGetAttConversationFunction7337ABEAArnB4BCD543"},"/invocations"]]},"integrationHttpMethod":"POST"},"resourceId":{"Ref":"ChatbotApiconversationsBC964F06"},"restApiId":{"Ref":"ChatbotApiF211B502"}}}}}},"POST":{"id":"POST","path":"ChatbotBackend/ChatbotApi/Default/conversations/POST","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.204.0","metadata":[]},"children":{"ApiPermission.ChatbotBackendChatbotApi34F97BD6.POST..conversations":{"id":"ApiPermission.ChatbotBackendChatbotApi34F97BD6.POST..conversations","path":"ChatbotBackend/ChatbotApi/Default/conversations/POST/ApiPermission.ChatbotBackendChatbotApi34F97BD6.POST..conversations","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::ImportValue":"ChatbotConversationStack:ExportsOutputFnGetAttConversationFunction7337ABEAArnB4BCD543"},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:ap-northeast-2:887078546492:",{"Ref":"ChatbotApiF211B502"},"/",{"Ref":"ChatbotApiDeploymentStageprod27096855"},"/POST/conversations"]]}}}},"ApiPermission.Test.ChatbotBackendChatbotApi34F97BD6.POST..conversations":{"id":"ApiPermission.Test.ChatbotBackendChatbotApi34F97BD6.POST..conversations","path":"ChatbotBackend/ChatbotApi/Default/conversations/POST/ApiPermission.Test.ChatbotBackendChatbotApi34F97BD6.POST..conversations","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::ImportValue":"ChatbotConversationStack:ExportsOutputFnGetAttConversationFunction7337ABEAArnB4BCD543"},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:ap-northeast-2:887078546492:",{"Ref":"ChatbotApiF211B502"},"/test-invoke-stage/POST/conversations"]]}}}},"Resource":{"id":"Resource","path":"ChatbotBackend/ChatbotApi/Default/conversations/POST/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"CUSTOM","authorizerId":{"Ref":"ChatbotApiAuthorizer801BDC78"},"httpMethod":"POST","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":apigateway:ap-northeast-2:lambda:path/2015-03-31/functions/",{"Fn::ImportValue":"ChatbotConversationStack:ExportsOutputFnGetAttConversationFunction7337ABEAArnB4BCD543"},"/invocations"]]},"integrationHttpMethod":"POST"},"resourceId":{"Ref":"ChatbotApiconversationsBC964F06"},"restApiId":{"Ref":"ChatbotApiF211B502"}}}}}},"{id}":{"id":"{id}","path":"ChatbotBackend/ChatbotApi/Default/conversations/{id}","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotBackend/ChatbotApi/Default/conversations/{id}/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Ref":"ChatbotApiconversationsBC964F06"},"pathPart":"{id}","restApiId":{"Ref":"ChatbotApiF211B502"}}}},"DELETE":{"id":"DELETE","path":"ChatbotBackend/ChatbotApi/Default/conversations/{id}/DELETE","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.204.0","metadata":[]},"children":{"ApiPermission.ChatbotBackendChatbotApi34F97BD6.DELETE..conversations.{id}":{"id":"ApiPermission.ChatbotBackendChatbotApi34F97BD6.DELETE..conversations.{id}","path":"ChatbotBackend/ChatbotApi/Default/conversations/{id}/DELETE/ApiPermission.ChatbotBackendChatbotApi34F97BD6.DELETE..conversations.{id}","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::ImportValue":"ChatbotConversationStack:ExportsOutputFnGetAttConversationFunction7337ABEAArnB4BCD543"},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:ap-northeast-2:887078546492:",{"Ref":"ChatbotApiF211B502"},"/",{"Ref":"ChatbotApiDeploymentStageprod27096855"},"/DELETE/conversations/*"]]}}}},"ApiPermission.Test.ChatbotBackendChatbotApi34F97BD6.DELETE..conversations.{id}":{"id":"ApiPermission.Test.ChatbotBackendChatbotApi34F97BD6.DELETE..conversations.{id}","path":"ChatbotBackend/ChatbotApi/Default/conversations/{id}/DELETE/ApiPermission.Test.ChatbotBackendChatbotApi34F97BD6.DELETE..conversations.{id}","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::ImportValue":"ChatbotConversationStack:ExportsOutputFnGetAttConversationFunction7337ABEAArnB4BCD543"},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:ap-northeast-2:887078546492:",{"Ref":"ChatbotApiF211B502"},"/test-invoke-stage/DELETE/conversations/*"]]}}}},"Resource":{"id":"Resource","path":"ChatbotBackend/ChatbotApi/Default/conversations/{id}/DELETE/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"CUSTOM","authorizerId":{"Ref":"ChatbotApiAuthorizer801BDC78"},"httpMethod":"DELETE","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":apigateway:ap-northeast-2:lambda:path/2015-03-31/functions/",{"Fn::ImportValue":"ChatbotConversationStack:ExportsOutputFnGetAttConversationFunction7337ABEAArnB4BCD543"},"/invocations"]]},"integrationHttpMethod":"POST"},"resourceId":{"Ref":"ChatbotApiconversationsid4B5FBE13"},"restApiId":{"Ref":"ChatbotApiF211B502"}}}}}},"PUT":{"id":"PUT","path":"ChatbotBackend/ChatbotApi/Default/conversations/{id}/PUT","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.204.0","metadata":[]},"children":{"ApiPermission.ChatbotBackendChatbotApi34F97BD6.PUT..conversations.{id}":{"id":"ApiPermission.ChatbotBackendChatbotApi34F97BD6.PUT..conversations.{id}","path":"ChatbotBackend/ChatbotApi/Default/conversations/{id}/PUT/ApiPermission.ChatbotBackendChatbotApi34F97BD6.PUT..conversations.{id}","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::ImportValue":"ChatbotConversationStack:ExportsOutputFnGetAttConversationFunction7337ABEAArnB4BCD543"},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:ap-northeast-2:887078546492:",{"Ref":"ChatbotApiF211B502"},"/",{"Ref":"ChatbotApiDeploymentStageprod27096855"},"/PUT/conversations/*"]]}}}},"ApiPermission.Test.ChatbotBackendChatbotApi34F97BD6.PUT..conversations.{id}":{"id":"ApiPermission.Test.ChatbotBackendChatbotApi34F97BD6.PUT..conversations.{id}","path":"ChatbotBackend/ChatbotApi/Default/conversations/{id}/PUT/ApiPermission.Test.ChatbotBackendChatbotApi34F97BD6.PUT..conversations.{id}","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::ImportValue":"ChatbotConversationStack:ExportsOutputFnGetAttConversationFunction7337ABEAArnB4BCD543"},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:ap-northeast-2:887078546492:",{"Ref":"ChatbotApiF211B502"},"/test-invoke-stage/PUT/conversations/*"]]}}}},"Resource":{"id":"Resource","path":"ChatbotBackend/ChatbotApi/Default/conversations/{id}/PUT/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"CUSTOM","authorizerId":{"Ref":"ChatbotApiAuthorizer801BDC78"},"httpMethod":"PUT","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":apigateway:ap-northeast-2:lambda:path/2015-03-31/functions/",{"Fn::ImportValue":"ChatbotConversationStack:ExportsOutputFnGetAttConversationFunction7337ABEAArnB4BCD543"},"/invocations"]]},"integrationHttpMethod":"POST"},"resourceId":{"Ref":"ChatbotApiconversationsid4B5FBE13"},"restApiId":{"Ref":"ChatbotApiF211B502"}}}}}},"OPTIONS":{"id":"OPTIONS","path":"ChatbotBackend/ChatbotApi/Default/conversations/{id}/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotBackend/ChatbotApi/Default/conversations/{id}/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{\"statusCode\": 200}"},"integrationResponses":[{"statusCode":"200","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token'","method.response.header.Access-Control-Allow-Methods":"'DELETE,PUT,OPTIONS'","method.response.header.Access-Control-Allow-Origin":"'*'"}}]},"methodResponses":[{"statusCode":"200","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Methods":true,"method.response.header.Access-Control-Allow-Origin":true}}],"resourceId":{"Ref":"ChatbotApiconversationsid4B5FBE13"},"restApiId":{"Ref":"ChatbotApiF211B502"}}}}}}}},"OPTIONS":{"id":"OPTIONS","path":"ChatbotBackend/ChatbotApi/Default/conversations/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotBackend/ChatbotApi/Default/conversations/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{\"statusCode\": 200}"},"integrationResponses":[{"statusCode":"200","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token'","method.response.header.Access-Control-Allow-Methods":"'GET,POST,OPTIONS'","method.response.header.Access-Control-Allow-Origin":"'*'"}}]},"methodResponses":[{"statusCode":"200","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Methods":true,"method.response.header.Access-Control-Allow-Origin":true}}],"resourceId":{"Ref":"ChatbotApiconversationsBC964F06"},"restApiId":{"Ref":"ChatbotApiF211B502"}}}}}}}},"messages":{"id":"messages","path":"ChatbotBackend/ChatbotApi/Default/messages","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotBackend/ChatbotApi/Default/messages/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Fn::GetAtt":["ChatbotApiF211B502","RootResourceId"]},"pathPart":"messages","restApiId":{"Ref":"ChatbotApiF211B502"}}}},"GET":{"id":"GET","path":"ChatbotBackend/ChatbotApi/Default/messages/GET","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.204.0","metadata":[]},"children":{"ApiPermission.ChatbotBackendChatbotApi34F97BD6.GET..messages":{"id":"ApiPermission.ChatbotBackendChatbotApi34F97BD6.GET..messages","path":"ChatbotBackend/ChatbotApi/Default/messages/GET/ApiPermission.ChatbotBackendChatbotApi34F97BD6.GET..messages","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::ImportValue":"ChatbotConversationStack:ExportsOutputFnGetAttMessageFunction5E234045Arn6574E935"},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:ap-northeast-2:887078546492:",{"Ref":"ChatbotApiF211B502"},"/",{"Ref":"ChatbotApiDeploymentStageprod27096855"},"/GET/messages"]]}}}},"ApiPermission.Test.ChatbotBackendChatbotApi34F97BD6.GET..messages":{"id":"ApiPermission.Test.ChatbotBackendChatbotApi34F97BD6.GET..messages","path":"ChatbotBackend/ChatbotApi/Default/messages/GET/ApiPermission.Test.ChatbotBackendChatbotApi34F97BD6.GET..messages","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::ImportValue":"ChatbotConversationStack:ExportsOutputFnGetAttMessageFunction5E234045Arn6574E935"},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:ap-northeast-2:887078546492:",{"Ref":"ChatbotApiF211B502"},"/test-invoke-stage/GET/messages"]]}}}},"Resource":{"id":"Resource","path":"ChatbotBackend/ChatbotApi/Default/messages/GET/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"CUSTOM","authorizerId":{"Ref":"ChatbotApiAuthorizer801BDC78"},"httpMethod":"GET","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":apigateway:ap-northeast-2:lambda:path/2015-03-31/functions/",{"Fn::ImportValue":"ChatbotConversationStack:ExportsOutputFnGetAttMessageFunction5E234045Arn6574E935"},"/invocations"]]},"integrationHttpMethod":"POST"},"resourceId":{"Ref":"ChatbotApimessages59D3C7B0"},"restApiId":{"Ref":"ChatbotApiF211B502"}}}}}},"OPTIONS":{"id":"OPTIONS","path":"ChatbotBackend/ChatbotApi/Default/messages/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotBackend/ChatbotApi/Default/messages/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{\"statusCode\": 200}"},"integrationResponses":[{"statusCode":"200","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token'","method.response.header.Access-Control-Allow-Methods":"'GET,OPTIONS'","method.response.header.Access-Control-Allow-Origin":"'*'"}}]},"methodResponses":[{"statusCode":"200","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Methods":true,"method.response.header.Access-Control-Allow-Origin":true}}],"resourceId":{"Ref":"ChatbotApimessages59D3C7B0"},"restApiId":{"Ref":"ChatbotApiF211B502"}}}}}}}}}},"cors-4xx":{"id":"cors-4xx","path":"ChatbotBackend/ChatbotApi/cors-4xx","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.GatewayResponse","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotBackend/ChatbotApi/cors-4xx/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnGatewayResponse","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::GatewayResponse","aws:cdk:cloudformation:props":{"responseParameters":{"gatewayresponse.header.method.response.header.Access-Control-Allow-Origin":"'*'","gatewayresponse.header.method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token'","gatewayresponse.header.method.response.header.Access-Control-Allow-Methods":"'GET,POST,PUT,DELETE,OPTIONS'"},"responseType":"DEFAULT_4XX","restApiId":{"Ref":"ChatbotApiF211B502"}}}}}},"cors-5xx":{"id":"cors-5xx","path":"ChatbotBackend/ChatbotApi/cors-5xx","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.GatewayResponse","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotBackend/ChatbotApi/cors-5xx/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnGatewayResponse","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::GatewayResponse","aws:cdk:cloudformation:props":{"responseParameters":{"gatewayresponse.header.method.response.header.Access-Control-Allow-Origin":"'*'","gatewayresponse.header.method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token'","gatewayresponse.header.method.response.header.Access-Control-Allow-Methods":"'GET,POST,PUT,DELETE,OPTIONS'"},"responseType":"DEFAULT_5XX","restApiId":{"Ref":"ChatbotApiF211B502"}}}}}},"cors-unauthorized":{"id":"cors-unauthorized","path":"ChatbotBackend/ChatbotApi/cors-unauthorized","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.GatewayResponse","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotBackend/ChatbotApi/cors-unauthorized/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnGatewayResponse","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::GatewayResponse","aws:cdk:cloudformation:props":{"responseParameters":{"gatewayresponse.header.method.response.header.Access-Control-Allow-Origin":"'*'","gatewayresponse.header.method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token'","gatewayresponse.header.method.response.header.Access-Control-Allow-Methods":"'GET,POST,PUT,DELETE,OPTIONS'"},"responseType":"UNAUTHORIZED","restApiId":{"Ref":"ChatbotApiF211B502"}}}}}}}},"ChatbotApiAuthorizer":{"id":"ChatbotApiAuthorizer","path":"ChatbotBackend/ChatbotApiAuthorizer","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.RequestAuthorizer","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotBackend/ChatbotApiAuthorizer/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnAuthorizer","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Authorizer","aws:cdk:cloudformation:props":{"authorizerResultTtlInSeconds":300,"authorizerUri":{"Fn::Join":["",["arn:",{"Fn::Select":[1,{"Fn::Split":[":",{"Fn::GetAtt":["JWTAuthorizerFunction9F386173","Arn"]}]}]},":apigateway:",{"Fn::Select":[3,{"Fn::Split":[":",{"Fn::GetAtt":["JWTAuthorizerFunction9F386173","Arn"]}]}]},":lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["JWTAuthorizerFunction9F386173","Arn"]},"/invocations"]]},"identitySource":"method.request.header.Authorization","name":"chatbot-jwt-authorizer","restApiId":{"Ref":"ChatbotApiF211B502"},"type":"REQUEST"}}}}},"WebSocketConnectionsTable":{"id":"WebSocketConnectionsTable","path":"ChatbotBackend/WebSocketConnectionsTable","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.Table","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotBackend/WebSocketConnectionsTable/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.CfnTable","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::DynamoDB::Table","aws:cdk:cloudformation:props":{"attributeDefinitions":[{"attributeName":"connectionId","attributeType":"S"}],"billingMode":"PAY_PER_REQUEST","keySchema":[{"attributeName":"connectionId","keyType":"HASH"}],"tableName":"chatbot-websocket-connections","timeToLiveSpecification":{"attributeName":"ttl","enabled":true}}}},"ScalingRole":{"id":"ScalingRole","path":"ChatbotBackend/WebSocketConnectionsTable/ScalingRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.204.0","metadata":[]}}}},"WebSocketLambdaRole":{"id":"WebSocketLambdaRole","path":"ChatbotBackend/WebSocketLambdaRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.204.0","metadata":[]},"children":{"ImportWebSocketLambdaRole":{"id":"ImportWebSocketLambdaRole","path":"ChatbotBackend/WebSocketLambdaRole/ImportWebSocketLambdaRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.204.0","metadata":[]}},"Resource":{"id":"Resource","path":"ChatbotBackend/WebSocketLambdaRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]},{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/AmazonBedrockFullAccess"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"ChatbotBackend/WebSocketLambdaRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotBackend/WebSocketLambdaRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["execute-api:ManageConnections","dynamodb:PutItem","dynamodb:DeleteItem","dynamodb:GetItem","dynamodb:Query","dynamodb:Scan","dynamodb:BatchWriteItem","dynamodb:UpdateItem","s3:GetObject","bedrock:InvokeModel","bedrock:InvokeModelWithResponseStream","bedrock:Retrieve","bedrock-agent:Retrieve"],"Effect":"Allow","Resource":["arn:aws:execute-api:ap-northeast-2:887078546492:*/*/*",{"Fn::GetAtt":["WebSocketConnectionsTable7F0028CC","Arn"]},{"Fn::GetAtt":["PromptMetaTable0A0B3876","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["PromptBucket1668FD1C","Arn"]},"/*"]]},"arn:aws:dynamodb:ap-northeast-2:887078546492:table/Conversations","arn:aws:dynamodb:ap-northeast-2:887078546492:table/Messages","arn:aws:dynamodb:ap-northeast-2:887078546492:table/ChatbotConversations","arn:aws:dynamodb:ap-northeast-2:887078546492:table/ChatbotMessages","arn:aws:dynamodb:ap-northeast-2:887078546492:table/perplexity-search-cache","arn:aws:bedrock:ap-northeast-2::foundation-model/*"]}],"Version":"2012-10-17"},"policyName":"WebSocketLambdaRoleDefaultPolicyF19D90C5","roles":[{"Ref":"WebSocketLambdaRole0DF09B59"}]}}}}}}},"WebSocketConnectFunction":{"id":"WebSocketConnectFunction","path":"ChatbotBackend/WebSocketConnectFunction","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.204.0","metadata":[]},"children":{"Code":{"id":"Code","path":"ChatbotBackend/WebSocketConnectFunction/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.204.0"},"children":{"Stage":{"id":"Stage","path":"ChatbotBackend/WebSocketConnectFunction/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.204.0"}},"AssetBucket":{"id":"AssetBucket","path":"ChatbotBackend/WebSocketConnectFunction/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.204.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"ChatbotBackend/WebSocketConnectFunction/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-887078546492-ap-northeast-2","s3Key":"a14fee87914f69dd8d42c5493f9ba098c50b316785d36eab2fcb7e0c7dd3a297.zip"},"environment":{"variables":{"CONNECTIONS_TABLE":{"Ref":"WebSocketConnectionsTable7F0028CC"},"REGION":"ap-northeast-2"}},"handler":"connect.handler","memorySize":256,"role":{"Fn::GetAtt":["WebSocketLambdaRole0DF09B59","Arn"]},"runtime":"python3.11","timeout":60}}}}},"WebSocketDisconnectFunction":{"id":"WebSocketDisconnectFunction","path":"ChatbotBackend/WebSocketDisconnectFunction","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.204.0","metadata":[]},"children":{"Code":{"id":"Code","path":"ChatbotBackend/WebSocketDisconnectFunction/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.204.0"},"children":{"Stage":{"id":"Stage","path":"ChatbotBackend/WebSocketDisconnectFunction/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.204.0"}},"AssetBucket":{"id":"AssetBucket","path":"ChatbotBackend/WebSocketDisconnectFunction/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.204.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"ChatbotBackend/WebSocketDisconnectFunction/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-887078546492-ap-northeast-2","s3Key":"a14fee87914f69dd8d42c5493f9ba098c50b316785d36eab2fcb7e0c7dd3a297.zip"},"environment":{"variables":{"CONNECTIONS_TABLE":{"Ref":"WebSocketConnectionsTable7F0028CC"},"REGION":"ap-northeast-2"}},"handler":"disconnect.handler","memorySize":256,"role":{"Fn::GetAtt":["WebSocketLambdaRole0DF09B59","Arn"]},"runtime":"python3.11","timeout":60}}}}},"ChatbotWebSocketApi":{"id":"ChatbotWebSocketApi","path":"ChatbotBackend/ChatbotWebSocketApi","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.WebSocketApi","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotBackend/ChatbotWebSocketApi/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.CfnApi","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGatewayV2::Api","aws:cdk:cloudformation:props":{"description":"실시간 스트리밍을 위한 WebSocket API","name":"chatbot-websocket-api","protocolType":"WEBSOCKET","routeSelectionExpression":"$request.body.action"}}},"$connect-Route":{"id":"$connect-Route","path":"ChatbotBackend/ChatbotWebSocketApi/$connect-Route","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.WebSocketRoute","version":"2.204.0","metadata":[]},"children":{"ConnectIntegration-Permission":{"id":"ConnectIntegration-Permission","path":"ChatbotBackend/ChatbotWebSocketApi/$connect-Route/ConnectIntegration-Permission","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["WebSocketConnectFunction72183AC0","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:ap-northeast-2:887078546492:",{"Ref":"ChatbotWebSocketApi72B63158"},"/*$connect"]]}}}},"ConnectIntegration":{"id":"ConnectIntegration","path":"ChatbotBackend/ChatbotWebSocketApi/$connect-Route/ConnectIntegration","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.WebSocketIntegration","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotBackend/ChatbotWebSocketApi/$connect-Route/ConnectIntegration/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.CfnIntegration","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGatewayV2::Integration","aws:cdk:cloudformation:props":{"apiId":{"Ref":"ChatbotWebSocketApi72B63158"},"integrationType":"AWS_PROXY","integrationUri":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":apigateway:ap-northeast-2:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["WebSocketConnectFunction72183AC0","Arn"]},"/invocations"]]}}}}}},"Resource":{"id":"Resource","path":"ChatbotBackend/ChatbotWebSocketApi/$connect-Route/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.CfnRoute","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGatewayV2::Route","aws:cdk:cloudformation:props":{"apiId":{"Ref":"ChatbotWebSocketApi72B63158"},"authorizationType":"NONE","routeKey":"$connect","target":{"Fn::Join":["",["integrations/",{"Ref":"ChatbotWebSocketApiconnectRouteConnectIntegrationB3D8427B"}]]}}}}}},"$disconnect-Route":{"id":"$disconnect-Route","path":"ChatbotBackend/ChatbotWebSocketApi/$disconnect-Route","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.WebSocketRoute","version":"2.204.0","metadata":[]},"children":{"DisconnectIntegration-Permission":{"id":"DisconnectIntegration-Permission","path":"ChatbotBackend/ChatbotWebSocketApi/$disconnect-Route/DisconnectIntegration-Permission","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["WebSocketDisconnectFunction189772FC","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:ap-northeast-2:887078546492:",{"Ref":"ChatbotWebSocketApi72B63158"},"/*$disconnect"]]}}}},"DisconnectIntegration":{"id":"DisconnectIntegration","path":"ChatbotBackend/ChatbotWebSocketApi/$disconnect-Route/DisconnectIntegration","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.WebSocketIntegration","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotBackend/ChatbotWebSocketApi/$disconnect-Route/DisconnectIntegration/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.CfnIntegration","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGatewayV2::Integration","aws:cdk:cloudformation:props":{"apiId":{"Ref":"ChatbotWebSocketApi72B63158"},"integrationType":"AWS_PROXY","integrationUri":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":apigateway:ap-northeast-2:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["WebSocketDisconnectFunction189772FC","Arn"]},"/invocations"]]}}}}}},"Resource":{"id":"Resource","path":"ChatbotBackend/ChatbotWebSocketApi/$disconnect-Route/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.CfnRoute","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGatewayV2::Route","aws:cdk:cloudformation:props":{"apiId":{"Ref":"ChatbotWebSocketApi72B63158"},"authorizationType":"NONE","routeKey":"$disconnect","target":{"Fn::Join":["",["integrations/",{"Ref":"ChatbotWebSocketApidisconnectRouteDisconnectIntegrationC271F4AD"}]]}}}}}},"stream-Route":{"id":"stream-Route","path":"ChatbotBackend/ChatbotWebSocketApi/stream-Route","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.WebSocketRoute","version":"2.204.0","metadata":[]},"children":{"StreamIntegration-Permission":{"id":"StreamIntegration-Permission","path":"ChatbotBackend/ChatbotWebSocketApi/stream-Route/StreamIntegration-Permission","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["WebSocketStreamFunctionB192D3D1","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:ap-northeast-2:887078546492:",{"Ref":"ChatbotWebSocketApi72B63158"},"/*stream"]]}}}},"StreamIntegration":{"id":"StreamIntegration","path":"ChatbotBackend/ChatbotWebSocketApi/stream-Route/StreamIntegration","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.WebSocketIntegration","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotBackend/ChatbotWebSocketApi/stream-Route/StreamIntegration/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.CfnIntegration","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGatewayV2::Integration","aws:cdk:cloudformation:props":{"apiId":{"Ref":"ChatbotWebSocketApi72B63158"},"integrationType":"AWS_PROXY","integrationUri":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":apigateway:ap-northeast-2:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["WebSocketStreamFunctionB192D3D1","Arn"]},"/invocations"]]}}}}}},"Resource":{"id":"Resource","path":"ChatbotBackend/ChatbotWebSocketApi/stream-Route/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.CfnRoute","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGatewayV2::Route","aws:cdk:cloudformation:props":{"apiId":{"Ref":"ChatbotWebSocketApi72B63158"},"authorizationType":"NONE","routeKey":"stream","target":{"Fn::Join":["",["integrations/",{"Ref":"ChatbotWebSocketApistreamRouteStreamIntegrationD379831A"}]]}}}}}}}},"WebSocketStreamFunction":{"id":"WebSocketStreamFunction","path":"ChatbotBackend/WebSocketStreamFunction","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.204.0","metadata":[]},"children":{"Code":{"id":"Code","path":"ChatbotBackend/WebSocketStreamFunction/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.204.0"},"children":{"Stage":{"id":"Stage","path":"ChatbotBackend/WebSocketStreamFunction/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.204.0"}},"AssetBucket":{"id":"AssetBucket","path":"ChatbotBackend/WebSocketStreamFunction/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.204.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"ChatbotBackend/WebSocketStreamFunction/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-887078546492-ap-northeast-2","s3Key":"a14fee87914f69dd8d42c5493f9ba098c50b316785d36eab2fcb7e0c7dd3a297.zip"},"environment":{"variables":{"CONNECTIONS_TABLE":{"Ref":"WebSocketConnectionsTable7F0028CC"},"PROMPT_META_TABLE":{"Ref":"PromptMetaTable0A0B3876"},"PROMPT_BUCKET":{"Ref":"PromptBucket1668FD1C"},"REGION":"ap-northeast-2","CONVERSATIONS_TABLE":"ChatbotConversations","MESSAGES_TABLE":"ChatbotMessages","PERPLEXITY_API_KEY":"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","API_GATEWAY_DOMAIN":{"Fn::GetAtt":["ChatbotWebSocketApi72B63158","ApiEndpoint"]},"STAGE":"prod","KNOWLEDGE_BASE_ID":"PGQV3JXPET","S3_BUCKET_NAME":"seoul-economic-news-data-2025","NEWS_BUCKET":"seoul-economic-news-data-2025"}},"handler":"stream.handler","layers":[{"Ref":"NewsProcessingLayer63A6C836"}],"memorySize":3008,"role":{"Fn::GetAtt":["WebSocketLambdaRole0DF09B59","Arn"]},"runtime":"python3.11","timeout":900}}}}},"WebSocketStage":{"id":"WebSocketStage","path":"ChatbotBackend/WebSocketStage","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.WebSocketStage","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotBackend/WebSocketStage/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.CfnStage","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGatewayV2::Stage","aws:cdk:cloudformation:props":{"apiId":{"Ref":"ChatbotWebSocketApi72B63158"},"autoDeploy":true,"stageName":"prod"}}}}},"WebSocketApiUrl":{"id":"WebSocketApiUrl","path":"ChatbotBackend/WebSocketApiUrl","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.204.0"}},"GenerateErrorAlarm":{"id":"GenerateErrorAlarm","path":"ChatbotBackend/GenerateErrorAlarm","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.Alarm","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotBackend/GenerateErrorAlarm/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.CfnAlarm","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CloudWatch::Alarm","aws:cdk:cloudformation:props":{"alarmDescription":"Generate Lambda 함수 오류율이 높습니다","comparisonOperator":"GreaterThanOrEqualToThreshold","dimensions":[{"name":"FunctionName","value":{"Ref":"GenerateFunctionD11A7A28"}}],"evaluationPeriods":2,"metricName":"Errors","namespace":"AWS/Lambda","period":300,"statistic":"Sum","threshold":3}}}}},"AuthErrorAlarm":{"id":"AuthErrorAlarm","path":"ChatbotBackend/AuthErrorAlarm","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.Alarm","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotBackend/AuthErrorAlarm/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.CfnAlarm","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CloudWatch::Alarm","aws:cdk:cloudformation:props":{"alarmDescription":"Auth Lambda 함수 오류율이 높습니다","comparisonOperator":"GreaterThanOrEqualToThreshold","dimensions":[{"name":"FunctionName","value":{"Ref":"AuthFunctionA1CD5E0F"}}],"evaluationPeriods":2,"metricName":"Errors","namespace":"AWS/Lambda","period":300,"statistic":"Sum","threshold":3}}}}},"DLQMessageAlarm":{"id":"DLQMessageAlarm","path":"ChatbotBackend/DLQMessageAlarm","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.Alarm","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotBackend/DLQMessageAlarm/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.CfnAlarm","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CloudWatch::Alarm","aws:cdk:cloudformation:props":{"alarmDescription":"DLQ에 메시지가 있습니다","comparisonOperator":"GreaterThanOrEqualToThreshold","dimensions":[{"name":"QueueName","value":{"Fn::GetAtt":["IndexPromptDLQ5C143C72","QueueName"]}}],"evaluationPeriods":1,"metricName":"ApproximateNumberOfVisibleMessages","namespace":"AWS/SQS","period":300,"statistic":"Average","threshold":1}}}}},"ApiGatewayUrl":{"id":"ApiGatewayUrl","path":"ChatbotBackend/ApiGatewayUrl","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.204.0"}},"PromptBucketName":{"id":"PromptBucketName","path":"ChatbotBackend/PromptBucketName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.204.0"}},"UserPoolId":{"id":"UserPoolId","path":"ChatbotBackend/UserPoolId","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.204.0"}},"UserPoolClientId":{"id":"UserPoolClientId","path":"ChatbotBackend/UserPoolClientId","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.204.0"}},"CDKMetadata":{"id":"CDKMetadata","path":"ChatbotBackend/CDKMetadata","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"children":{"Default":{"id":"Default","path":"ChatbotBackend/CDKMetadata/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.204.0"}}}},"Exports":{"id":"Exports","path":"ChatbotBackend/Exports","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"children":{"Output{\"Ref\":\"ChatbotApiF211B502\"}":{"id":"Output{\"Ref\":\"ChatbotApiF211B502\"}","path":"ChatbotBackend/Exports/Output{\"Ref\":\"ChatbotApiF211B502\"}","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.204.0"}},"Output{\"Ref\":\"ChatbotApiDeploymentStageprod27096855\"}":{"id":"Output{\"Ref\":\"ChatbotApiDeploymentStageprod27096855\"}","path":"ChatbotBackend/Exports/Output{\"Ref\":\"ChatbotApiDeploymentStageprod27096855\"}","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.204.0"}}}},"BootstrapVersion":{"id":"BootstrapVersion","path":"ChatbotBackend/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.204.0"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"ChatbotBackend/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"2.204.0"}}}},"ChatbotConversationStack":{"id":"ChatbotConversationStack","path":"ChatbotConversationStack","constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"2.204.0"},"children":{"ConversationsTable":{"id":"ConversationsTable","path":"ChatbotConversationStack/ConversationsTable","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.Table","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotConversationStack/ConversationsTable/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.CfnTable","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::DynamoDB::Table","aws:cdk:cloudformation:props":{"attributeDefinitions":[{"attributeName":"PK","attributeType":"S"},{"attributeName":"SK","attributeType":"S"},{"attributeName":"userId","attributeType":"S"},{"attributeName":"createdAt","attributeType":"S"}],"billingMode":"PAY_PER_REQUEST","globalSecondaryIndexes":[{"indexName":"UserConversationsIndex","keySchema":[{"attributeName":"userId","keyType":"HASH"},{"attributeName":"createdAt","keyType":"RANGE"}],"projection":{"projectionType":"ALL"}}],"keySchema":[{"attributeName":"PK","keyType":"HASH"},{"attributeName":"SK","keyType":"RANGE"}],"pointInTimeRecoverySpecification":{"pointInTimeRecoveryEnabled":true},"tableName":"ChatbotConversations-local","timeToLiveSpecification":{"attributeName":"ttl","enabled":true}}}},"ScalingRole":{"id":"ScalingRole","path":"ChatbotConversationStack/ConversationsTable/ScalingRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.204.0","metadata":[]}}}},"MessagesTable":{"id":"MessagesTable","path":"ChatbotConversationStack/MessagesTable","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.Table","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotConversationStack/MessagesTable/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.CfnTable","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::DynamoDB::Table","aws:cdk:cloudformation:props":{"attributeDefinitions":[{"attributeName":"PK","attributeType":"S"},{"attributeName":"SK","attributeType":"S"}],"billingMode":"PAY_PER_REQUEST","keySchema":[{"attributeName":"PK","keyType":"HASH"},{"attributeName":"SK","keyType":"RANGE"}],"pointInTimeRecoverySpecification":{"pointInTimeRecoveryEnabled":true},"tableName":"ChatbotMessages-local","timeToLiveSpecification":{"attributeName":"ttl","enabled":true}}}},"ScalingRole":{"id":"ScalingRole","path":"ChatbotConversationStack/MessagesTable/ScalingRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.204.0","metadata":[]}}}},"ConversationFunction":{"id":"ConversationFunction","path":"ChatbotConversationStack/ConversationFunction","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.204.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"ChatbotConversationStack/ConversationFunction/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.204.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"ChatbotConversationStack/ConversationFunction/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.204.0","metadata":[]}},"Resource":{"id":"Resource","path":"ChatbotConversationStack/ConversationFunction/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"ChatbotConversationStack/ConversationFunction/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotConversationStack/ConversationFunction/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["dynamodb:BatchGetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:Query","dynamodb:GetItem","dynamodb:Scan","dynamodb:ConditionCheckItem","dynamodb:BatchWriteItem","dynamodb:PutItem","dynamodb:UpdateItem","dynamodb:DeleteItem","dynamodb:DescribeTable"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["ConversationsTableCD91EB96","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["ConversationsTableCD91EB96","Arn"]},"/index/*"]]}]},{"Action":["dynamodb:BatchGetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:Query","dynamodb:GetItem","dynamodb:Scan","dynamodb:ConditionCheckItem","dynamodb:BatchWriteItem","dynamodb:PutItem","dynamodb:UpdateItem","dynamodb:DeleteItem","dynamodb:DescribeTable"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["MessagesTable05B58A27","Arn"]},{"Ref":"AWS::NoValue"}]}],"Version":"2012-10-17"},"policyName":"ConversationFunctionServiceRoleDefaultPolicy3BD1781D","roles":[{"Ref":"ConversationFunctionServiceRoleBBAB46E1"}]}}}}}}},"Code":{"id":"Code","path":"ChatbotConversationStack/ConversationFunction/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.204.0"},"children":{"Stage":{"id":"Stage","path":"ChatbotConversationStack/ConversationFunction/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.204.0"}},"AssetBucket":{"id":"AssetBucket","path":"ChatbotConversationStack/ConversationFunction/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.204.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"ChatbotConversationStack/ConversationFunction/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-887078546492-ap-northeast-2","s3Key":"37decc8291f914a3fbce9674d21e1fd087374e7175c6fa065475f9949c590e6d.zip"},"environment":{"variables":{"CONVERSATIONS_TABLE":{"Ref":"ConversationsTableCD91EB96"},"MESSAGES_TABLE":{"Ref":"MessagesTable05B58A27"}}},"handler":"conversation_api.handler","memorySize":512,"role":{"Fn::GetAtt":["ConversationFunctionServiceRoleBBAB46E1","Arn"]},"runtime":"python3.11","timeout":30}}}}},"MessageFunction":{"id":"MessageFunction","path":"ChatbotConversationStack/MessageFunction","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.204.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"ChatbotConversationStack/MessageFunction/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.204.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"ChatbotConversationStack/MessageFunction/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.204.0","metadata":[]}},"Resource":{"id":"Resource","path":"ChatbotConversationStack/MessageFunction/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"ChatbotConversationStack/MessageFunction/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotConversationStack/MessageFunction/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["dynamodb:BatchGetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:Query","dynamodb:GetItem","dynamodb:Scan","dynamodb:ConditionCheckItem","dynamodb:BatchWriteItem","dynamodb:PutItem","dynamodb:UpdateItem","dynamodb:DeleteItem","dynamodb:DescribeTable"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["MessagesTable05B58A27","Arn"]},{"Ref":"AWS::NoValue"}]},{"Action":["dynamodb:BatchGetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:Query","dynamodb:GetItem","dynamodb:Scan","dynamodb:ConditionCheckItem","dynamodb:BatchWriteItem","dynamodb:PutItem","dynamodb:UpdateItem","dynamodb:DeleteItem","dynamodb:DescribeTable"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["ConversationsTableCD91EB96","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["ConversationsTableCD91EB96","Arn"]},"/index/*"]]}]}],"Version":"2012-10-17"},"policyName":"MessageFunctionServiceRoleDefaultPolicy3725DC08","roles":[{"Ref":"MessageFunctionServiceRole94EDDC6B"}]}}}}}}},"Code":{"id":"Code","path":"ChatbotConversationStack/MessageFunction/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.204.0"},"children":{"Stage":{"id":"Stage","path":"ChatbotConversationStack/MessageFunction/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.204.0"}},"AssetBucket":{"id":"AssetBucket","path":"ChatbotConversationStack/MessageFunction/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.204.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"ChatbotConversationStack/MessageFunction/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-887078546492-ap-northeast-2","s3Key":"1ffe6133cd1c2137d933ac2c8bc0723cbf7abc913505a4e8d28d990597f4e7a2.zip"},"environment":{"variables":{"MESSAGES_TABLE":{"Ref":"MessagesTable05B58A27"},"CONVERSATIONS_TABLE":{"Ref":"ConversationsTableCD91EB96"}}},"handler":"message_api.handler","memorySize":512,"role":{"Fn::GetAtt":["MessageFunctionServiceRole94EDDC6B","Arn"]},"runtime":"python3.11","timeout":30}}}}},"CDKMetadata":{"id":"CDKMetadata","path":"ChatbotConversationStack/CDKMetadata","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"children":{"Default":{"id":"Default","path":"ChatbotConversationStack/CDKMetadata/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.204.0"}}}},"Exports":{"id":"Exports","path":"ChatbotConversationStack/Exports","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"children":{"Output{\"Fn::GetAtt\":[\"ConversationFunction7337ABEA\",\"Arn\"]}":{"id":"Output{\"Fn::GetAtt\":[\"ConversationFunction7337ABEA\",\"Arn\"]}","path":"ChatbotConversationStack/Exports/Output{\"Fn::GetAtt\":[\"ConversationFunction7337ABEA\",\"Arn\"]}","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.204.0"}},"Output{\"Fn::GetAtt\":[\"MessageFunction5E234045\",\"Arn\"]}":{"id":"Output{\"Fn::GetAtt\":[\"MessageFunction5E234045\",\"Arn\"]}","path":"ChatbotConversationStack/Exports/Output{\"Fn::GetAtt\":[\"MessageFunction5E234045\",\"Arn\"]}","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.204.0"}}}},"BootstrapVersion":{"id":"BootstrapVersion","path":"ChatbotConversationStack/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.204.0"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"ChatbotConversationStack/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"2.204.0"}}}},"ChatbotFrontendStack":{"id":"ChatbotFrontendStack","path":"ChatbotFrontendStack","constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"2.204.0"},"children":{"WebsiteBucket":{"id":"WebsiteBucket","path":"ChatbotFrontendStack/WebsiteBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.Bucket","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotFrontendStack/WebsiteBucket/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.CfnBucket","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::S3::Bucket","aws:cdk:cloudformation:props":{"bucketName":"chatbot-frontend-local-887078546492-ap-northeast-2","lifecycleConfiguration":{"rules":[{"abortIncompleteMultipartUpload":{"daysAfterInitiation":7},"noncurrentVersionExpiration":{"noncurrentDays":7},"status":"Enabled"}]},"publicAccessBlockConfiguration":{"blockPublicAcls":true,"blockPublicPolicy":true,"ignorePublicAcls":true,"restrictPublicBuckets":true},"tags":[{"key":"aws-cdk:auto-delete-objects","value":"true"},{"key":"aws-cdk:cr-owned:a2ab40c3","value":"true"}]}}},"Policy":{"id":"Policy","path":"ChatbotFrontendStack/WebsiteBucket/Policy","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketPolicy","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotFrontendStack/WebsiteBucket/Policy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.CfnBucketPolicy","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::S3::BucketPolicy","aws:cdk:cloudformation:props":{"bucket":{"Ref":"WebsiteBucket75C24D94"},"policyDocument":{"Statement":[{"Action":["s3:PutBucketPolicy","s3:GetBucket*","s3:List*","s3:DeleteObject*"],"Effect":"Allow","Principal":{"AWS":{"Fn::GetAtt":["CustomS3AutoDeleteObjectsCustomResourceProviderRole3B1BD092","Arn"]}},"Resource":[{"Fn::GetAtt":["WebsiteBucket75C24D94","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["WebsiteBucket75C24D94","Arn"]},"/*"]]}]},{"Action":"s3:GetObject","Condition":{"StringEquals":{"AWS:SourceArn":"arn:aws:cloudfront::887078546492:distribution/*"}},"Effect":"Allow","Principal":{"Service":"cloudfront.amazonaws.com"},"Resource":{"Fn::Join":["",[{"Fn::GetAtt":["WebsiteBucket75C24D94","Arn"]},"/*"]]}},{"Action":"s3:GetObject","Condition":{"StringEquals":{"AWS:SourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":cloudfront::",{"Ref":"AWS::AccountId"},":distribution/",{"Ref":"Distribution830FAC52"}]]}}},"Effect":"Allow","Principal":{"Service":"cloudfront.amazonaws.com"},"Resource":{"Fn::Join":["",[{"Fn::GetAtt":["WebsiteBucket75C24D94","Arn"]},"/*"]]}}],"Version":"2012-10-17"}}}}}},"AutoDeleteObjectsCustomResource":{"id":"AutoDeleteObjectsCustomResource","path":"ChatbotFrontendStack/WebsiteBucket/AutoDeleteObjectsCustomResource","constructInfo":{"fqn":"aws-cdk-lib.CustomResource","version":"2.204.0","metadata":[]},"children":{"Default":{"id":"Default","path":"ChatbotFrontendStack/WebsiteBucket/AutoDeleteObjectsCustomResource/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.204.0"}}}}}},"Custom::S3AutoDeleteObjectsCustomResourceProvider":{"id":"Custom::S3AutoDeleteObjectsCustomResourceProvider","path":"ChatbotFrontendStack/Custom::S3AutoDeleteObjectsCustomResourceProvider","constructInfo":{"fqn":"aws-cdk-lib.CustomResourceProviderBase","version":"2.204.0"},"children":{"Staging":{"id":"Staging","path":"ChatbotFrontendStack/Custom::S3AutoDeleteObjectsCustomResourceProvider/Staging","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.204.0"}},"Role":{"id":"Role","path":"ChatbotFrontendStack/Custom::S3AutoDeleteObjectsCustomResourceProvider/Role","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.204.0"}},"Handler":{"id":"Handler","path":"ChatbotFrontendStack/Custom::S3AutoDeleteObjectsCustomResourceProvider/Handler","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.204.0"}}}},"OAC":{"id":"OAC","path":"ChatbotFrontendStack/OAC","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudfront.S3OriginAccessControl","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotFrontendStack/OAC/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudfront.CfnOriginAccessControl","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CloudFront::OriginAccessControl","aws:cdk:cloudformation:props":{"originAccessControlConfig":{"description":{"Fn::Join":["",["OAC for ",{"Ref":"WebsiteBucket75C24D94"}]]},"name":{"Fn::Join":["",["OAC-",{"Ref":"WebsiteBucket75C24D94"}]]},"signingBehavior":"always","signingProtocol":"sigv4","originAccessControlOriginType":"s3"}}}}}},"Distribution":{"id":"Distribution","path":"ChatbotFrontendStack/Distribution","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudfront.Distribution","version":"2.204.0","metadata":[]},"children":{"Origin1":{"id":"Origin1","path":"ChatbotFrontendStack/Distribution/Origin1","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"}},"Origin2":{"id":"Origin2","path":"ChatbotFrontendStack/Distribution/Origin2","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"}},"Origin3":{"id":"Origin3","path":"ChatbotFrontendStack/Distribution/Origin3","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"}},"Origin4":{"id":"Origin4","path":"ChatbotFrontendStack/Distribution/Origin4","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"}},"Resource":{"id":"Resource","path":"ChatbotFrontendStack/Distribution/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudfront.CfnDistribution","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CloudFront::Distribution","aws:cdk:cloudformation:props":{"distributionConfig":{"enabled":true,"origins":[{"domainName":{"Fn::GetAtt":["WebsiteBucket75C24D94","RegionalDomainName"]},"id":"ChatbotFrontendStackDistributionOrigin15C8AC5D3","s3OriginConfig":{"originAccessIdentity":""},"originAccessControlId":{"Fn::GetAtt":["OAC5B452445","Id"]}},{"domainName":{"Fn::GetAtt":["WebsiteBucket75C24D94","RegionalDomainName"]},"id":"ChatbotFrontendStackDistributionOrigin2CB0FE17F","s3OriginConfig":{"originAccessIdentity":""},"originAccessControlId":{"Fn::GetAtt":["OAC5B452445","Id"]}},{"domainName":{"Fn::GetAtt":["WebsiteBucket75C24D94","RegionalDomainName"]},"id":"ChatbotFrontendStackDistributionOrigin316247DAD","s3OriginConfig":{"originAccessIdentity":""},"originAccessControlId":{"Fn::GetAtt":["OAC5B452445","Id"]}},{"domainName":{"Fn::Select":[2,{"Fn::Split":["/",{"Fn::Join":["",["https://",{"Fn::ImportValue":"ChatbotBackend:ExportsOutputRefChatbotApiF211B50251B7B5E1"},".execute-api.ap-northeast-2.",{"Ref":"AWS::URLSuffix"},"/",{"Fn::ImportValue":"ChatbotBackend:ExportsOutputRefChatbotApiDeploymentStageprod27096855D64CF543"},"/"]]}]}]},"id":"ChatbotFrontendStackDistributionOrigin4809FFD15","originPath":{"Fn::Join":["",["/",{"Fn::ImportValue":"ChatbotBackend:ExportsOutputRefChatbotApiDeploymentStageprod27096855D64CF543"}]]},"customOriginConfig":{"originSslProtocols":["TLSv1.2"],"originProtocolPolicy":"https-only"}}],"defaultCacheBehavior":{"pathPattern":"*","targetOriginId":"ChatbotFrontendStackDistributionOrigin15C8AC5D3","cachePolicyId":"658327ea-f89d-4fab-a63d-7e88639e58f6","compress":true,"originRequestPolicyId":"88a5eaf4-2fd4-4709-b370-b4c650ea3fcf","responseHeadersPolicyId":"67f7725c-6f97-4210-82d7-5512b31e9d03","viewerProtocolPolicy":"redirect-to-https"},"cacheBehaviors":[{"pathPattern":"*.js","targetOriginId":"ChatbotFrontendStackDistributionOrigin2CB0FE17F","cachePolicyId":"658327ea-f89d-4fab-a63d-7e88639e58f6","compress":true,"viewerProtocolPolicy":"redirect-to-https"},{"pathPattern":"*.css","targetOriginId":"ChatbotFrontendStackDistributionOrigin316247DAD","cachePolicyId":"658327ea-f89d-4fab-a63d-7e88639e58f6","compress":true,"viewerProtocolPolicy":"redirect-to-https"},{"pathPattern":"/api/*","targetOriginId":"ChatbotFrontendStackDistributionOrigin4809FFD15","allowedMethods":["GET","HEAD","OPTIONS","PUT","PATCH","POST","DELETE"],"cachePolicyId":"4135ea2d-6df8-44a3-9df3-4b5a84be39ad","compress":true,"originRequestPolicyId":"216adef6-5c7f-47e4-b989-5492eafa07d3","viewerProtocolPolicy":"redirect-to-https"}],"comment":"Dynamic Prompt System Frontend Distribution","customErrorResponses":[{"errorCachingMinTtl":1800,"errorCode":403,"responseCode":200,"responsePagePath":"/index.html"},{"errorCachingMinTtl":1800,"errorCode":404,"responseCode":200,"responsePagePath":"/index.html"}],"defaultRootObject":"index.html","httpVersion":"http2","ipv6Enabled":true,"priceClass":"PriceClass_100"}}}}}},"DeployWebsite":{"id":"DeployWebsite","path":"ChatbotFrontendStack/DeployWebsite","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_deployment.BucketDeployment","version":"2.204.0"},"children":{"AwsCliLayer":{"id":"AwsCliLayer","path":"ChatbotFrontendStack/DeployWebsite/AwsCliLayer","constructInfo":{"fqn":"aws-cdk-lib.lambda_layer_awscli.AwsCliLayer","version":"2.204.0","metadata":[]},"children":{"Code":{"id":"Code","path":"ChatbotFrontendStack/DeployWebsite/AwsCliLayer/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.204.0"},"children":{"Stage":{"id":"Stage","path":"ChatbotFrontendStack/DeployWebsite/AwsCliLayer/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.204.0"}},"AssetBucket":{"id":"AssetBucket","path":"ChatbotFrontendStack/DeployWebsite/AwsCliLayer/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.204.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"ChatbotFrontendStack/DeployWebsite/AwsCliLayer/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnLayerVersion","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::LayerVersion","aws:cdk:cloudformation:props":{"content":{"s3Bucket":"cdk-hnb659fds-assets-887078546492-ap-northeast-2","s3Key":"c49d356cac773d491c5f7ac148995a1181498a8e289429f8612a7f7e3814f535.zip"},"description":"/opt/awscli/aws"}}}}},"CustomResourceHandler":{"id":"CustomResourceHandler","path":"ChatbotFrontendStack/DeployWebsite/CustomResourceHandler","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.SingletonFunction","version":"2.204.0","metadata":[]}},"Asset1":{"id":"Asset1","path":"ChatbotFrontendStack/DeployWebsite/Asset1","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.204.0"},"children":{"Stage":{"id":"Stage","path":"ChatbotFrontendStack/DeployWebsite/Asset1/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.204.0"}},"AssetBucket":{"id":"AssetBucket","path":"ChatbotFrontendStack/DeployWebsite/Asset1/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.204.0","metadata":[]}}}},"CustomResource-512MiB-512MiB":{"id":"CustomResource-512MiB-512MiB","path":"ChatbotFrontendStack/DeployWebsite/CustomResource-512MiB-512MiB","constructInfo":{"fqn":"aws-cdk-lib.CustomResource","version":"2.204.0","metadata":[]},"children":{"Default":{"id":"Default","path":"ChatbotFrontendStack/DeployWebsite/CustomResource-512MiB-512MiB/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.204.0"}}}}}},"Custom::CDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756C512MiB512MiB":{"id":"Custom::CDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756C512MiB512MiB","path":"ChatbotFrontendStack/Custom::CDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756C512MiB512MiB","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.204.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"ChatbotFrontendStack/Custom::CDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756C512MiB512MiB/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.204.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"ChatbotFrontendStack/Custom::CDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756C512MiB512MiB/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.204.0","metadata":[]}},"Resource":{"id":"Resource","path":"ChatbotFrontendStack/Custom::CDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756C512MiB512MiB/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"ChatbotFrontendStack/Custom::CDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756C512MiB512MiB/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotFrontendStack/Custom::CDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756C512MiB512MiB/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["s3:GetObject*","s3:GetBucket*","s3:List*"],"Effect":"Allow","Resource":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":s3:::cdk-hnb659fds-assets-887078546492-ap-northeast-2"]]},{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":s3:::cdk-hnb659fds-assets-887078546492-ap-northeast-2/*"]]}]},{"Action":["s3:GetObject*","s3:GetBucket*","s3:List*","s3:DeleteObject*","s3:PutObject","s3:PutObjectLegalHold","s3:PutObjectRetention","s3:PutObjectTagging","s3:PutObjectVersionTagging","s3:Abort*"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["WebsiteBucket75C24D94","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["WebsiteBucket75C24D94","Arn"]},"/*"]]}]},{"Action":["cloudfront:GetInvalidation","cloudfront:CreateInvalidation"],"Effect":"Allow","Resource":"*"}],"Version":"2012-10-17"},"policyName":"CustomCDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756C512MiB512MiBServiceRoleDefaultPolicyEA2DA91D","roles":[{"Ref":"CustomCDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756C512MiB512MiBServiceRoleCFA2F118"}]}}}}}}},"Code":{"id":"Code","path":"ChatbotFrontendStack/Custom::CDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756C512MiB512MiB/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.204.0"},"children":{"Stage":{"id":"Stage","path":"ChatbotFrontendStack/Custom::CDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756C512MiB512MiB/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.204.0"}},"AssetBucket":{"id":"AssetBucket","path":"ChatbotFrontendStack/Custom::CDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756C512MiB512MiB/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.204.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"ChatbotFrontendStack/Custom::CDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756C512MiB512MiB/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-887078546492-ap-northeast-2","s3Key":"9a1fcb4a7ecba81ad70e9d3fb241f6794497da945dae5f25924e4dd002b65f2d.zip"},"environment":{"variables":{"AWS_CA_BUNDLE":"/etc/pki/ca-trust/extracted/pem/tls-ca-bundle.pem"}},"ephemeralStorage":{"size":512},"handler":"index.handler","layers":[{"Ref":"DeployWebsiteAwsCliLayer17DBC421"}],"memorySize":512,"role":{"Fn::GetAtt":["CustomCDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756C512MiB512MiBServiceRoleCFA2F118","Arn"]},"runtime":"python3.11","timeout":900}}}}},"WebsiteURL":{"id":"WebsiteURL","path":"ChatbotFrontendStack/WebsiteURL","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.204.0"}},"BucketName":{"id":"BucketName","path":"ChatbotFrontendStack/BucketName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.204.0"}},"DistributionId":{"id":"DistributionId","path":"ChatbotFrontendStack/DistributionId","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.204.0"}},"DistributionDomainName":{"id":"DistributionDomainName","path":"ChatbotFrontendStack/DistributionDomainName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.204.0"}},"CDKMetadata":{"id":"CDKMetadata","path":"ChatbotFrontendStack/CDKMetadata","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"children":{"Default":{"id":"Default","path":"ChatbotFrontendStack/CDKMetadata/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.204.0"}}}},"BootstrapVersion":{"id":"BootstrapVersion","path":"ChatbotFrontendStack/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.204.0"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"ChatbotFrontendStack/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"2.204.0"}}}},"ChatbotBackendProd":{"id":"ChatbotBackendProd","path":"ChatbotBackendProd","constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"2.204.0"},"children":{"ChatbotUserPool":{"id":"ChatbotUserPool","path":"ChatbotBackendProd/ChatbotUserPool","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.UserPool","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotBackendProd/ChatbotUserPool/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.CfnUserPool","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Cognito::UserPool","aws:cdk:cloudformation:props":{"accountRecoverySetting":{"recoveryMechanisms":[{"name":"verified_email","priority":1}]},"adminCreateUserConfig":{"allowAdminCreateUserOnly":false},"autoVerifiedAttributes":["email"],"emailVerificationMessage":"The verification code to your new account is {####}","emailVerificationSubject":"Verify your new account","policies":{"passwordPolicy":{"minimumLength":8,"requireLowercase":false,"requireUppercase":false,"requireNumbers":true,"requireSymbols":true}},"schema":[{"name":"email","mutable":true,"required":true},{"name":"name","mutable":true,"required":false}],"smsVerificationMessage":"The verification code to your new account is {####}","usernameAttributes":["email"],"userPoolName":"chatbot-users","verificationMessageTemplate":{"defaultEmailOption":"CONFIRM_WITH_CODE","emailMessage":"The verification code to your new account is {####}","emailSubject":"Verify your new account","smsMessage":"The verification code to your new account is {####}"}}}},"ChatbotWebClient":{"id":"ChatbotWebClient","path":"ChatbotBackendProd/ChatbotUserPool/ChatbotWebClient","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.UserPoolClient","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotBackendProd/ChatbotUserPool/ChatbotWebClient/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.CfnUserPoolClient","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Cognito::UserPoolClient","aws:cdk:cloudformation:props":{"accessTokenValidity":60,"allowedOAuthFlows":["implicit","code"],"allowedOAuthFlowsUserPoolClient":true,"allowedOAuthScopes":["profile","phone","email","openid","aws.cognito.signin.user.admin"],"callbackUrLs":["https://example.com"],"clientName":"chatbot-web-client","enableTokenRevocation":true,"explicitAuthFlows":["ALLOW_USER_PASSWORD_AUTH","ALLOW_USER_SRP_AUTH","ALLOW_REFRESH_TOKEN_AUTH"],"generateSecret":false,"idTokenValidity":60,"preventUserExistenceErrors":"ENABLED","refreshTokenValidity":43200,"supportedIdentityProviders":["COGNITO"],"tokenValidityUnits":{"idToken":"minutes","accessToken":"minutes","refreshToken":"minutes"},"userPoolId":{"Ref":"ChatbotUserPool01970AAD"}}}}}},"ChatbotDomain":{"id":"ChatbotDomain","path":"ChatbotBackendProd/ChatbotUserPool/ChatbotDomain","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.UserPoolDomain","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotBackendProd/ChatbotUserPool/ChatbotDomain/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.CfnUserPoolDomain","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Cognito::UserPoolDomain","aws:cdk:cloudformation:props":{"domain":"chatbot-887078546492","userPoolId":{"Ref":"ChatbotUserPool01970AAD"}}}}}}}},"AdminGroup":{"id":"AdminGroup","path":"ChatbotBackendProd/AdminGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.CfnUserPoolGroup","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Cognito::UserPoolGroup","aws:cdk:cloudformation:props":{"description":"관리자 그룹","groupName":"admin","precedence":1,"userPoolId":{"Ref":"ChatbotUserPool01970AAD"}}}},"PromptBucket":{"id":"PromptBucket","path":"ChatbotBackendProd/PromptBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.Bucket","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotBackendProd/PromptBucket/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.CfnBucket","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::S3::Bucket","aws:cdk:cloudformation:props":{"bucketEncryption":{"serverSideEncryptionConfiguration":[{"serverSideEncryptionByDefault":{"sseAlgorithm":"AES256"}}]},"bucketName":"chatbot-prompts-887078546492-ap-northeast-2","corsConfiguration":{"corsRules":[{"maxAge":3600,"allowedHeaders":["*"],"allowedMethods":["GET","PUT","POST"],"allowedOrigins":["*"]}]},"tags":[{"key":"aws-cdk:auto-delete-objects","value":"true"}],"versioningConfiguration":{"status":"Enabled"}}}},"Policy":{"id":"Policy","path":"ChatbotBackendProd/PromptBucket/Policy","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketPolicy","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotBackendProd/PromptBucket/Policy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.CfnBucketPolicy","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::S3::BucketPolicy","aws:cdk:cloudformation:props":{"bucket":{"Ref":"PromptBucket1668FD1C"},"policyDocument":{"Statement":[{"Action":["s3:PutBucketPolicy","s3:GetBucket*","s3:List*","s3:DeleteObject*"],"Effect":"Allow","Principal":{"AWS":{"Fn::GetAtt":["CustomS3AutoDeleteObjectsCustomResourceProviderRole3B1BD092","Arn"]}},"Resource":[{"Fn::GetAtt":["PromptBucket1668FD1C","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["PromptBucket1668FD1C","Arn"]},"/*"]]}]}],"Version":"2012-10-17"}}}}}},"AutoDeleteObjectsCustomResource":{"id":"AutoDeleteObjectsCustomResource","path":"ChatbotBackendProd/PromptBucket/AutoDeleteObjectsCustomResource","constructInfo":{"fqn":"aws-cdk-lib.CustomResource","version":"2.204.0","metadata":[]},"children":{"Default":{"id":"Default","path":"ChatbotBackendProd/PromptBucket/AutoDeleteObjectsCustomResource/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.204.0"}}}}}},"Custom::S3AutoDeleteObjectsCustomResourceProvider":{"id":"Custom::S3AutoDeleteObjectsCustomResourceProvider","path":"ChatbotBackendProd/Custom::S3AutoDeleteObjectsCustomResourceProvider","constructInfo":{"fqn":"aws-cdk-lib.CustomResourceProviderBase","version":"2.204.0"},"children":{"Staging":{"id":"Staging","path":"ChatbotBackendProd/Custom::S3AutoDeleteObjectsCustomResourceProvider/Staging","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.204.0"}},"Role":{"id":"Role","path":"ChatbotBackendProd/Custom::S3AutoDeleteObjectsCustomResourceProvider/Role","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.204.0"}},"Handler":{"id":"Handler","path":"ChatbotBackendProd/Custom::S3AutoDeleteObjectsCustomResourceProvider/Handler","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.204.0"}}}},"ArticleBucket":{"id":"ArticleBucket","path":"ChatbotBackendProd/ArticleBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.Bucket","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotBackendProd/ArticleBucket/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.CfnBucket","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::S3::Bucket","aws:cdk:cloudformation:props":{"bucketEncryption":{"serverSideEncryptionConfiguration":[{"serverSideEncryptionByDefault":{"sseAlgorithm":"AES256"}}]},"bucketName":"chatbot-data-887078546492-ap-northeast-2","corsConfiguration":{"corsRules":[{"maxAge":3600,"allowedHeaders":["*"],"allowedMethods":["GET","PUT","POST"],"allowedOrigins":["*"]}]},"tags":[{"key":"aws-cdk:auto-delete-objects","value":"true"}],"versioningConfiguration":{"status":"Enabled"}}}},"Policy":{"id":"Policy","path":"ChatbotBackendProd/ArticleBucket/Policy","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketPolicy","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotBackendProd/ArticleBucket/Policy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.CfnBucketPolicy","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::S3::BucketPolicy","aws:cdk:cloudformation:props":{"bucket":{"Ref":"ArticleBucket38F6CD07"},"policyDocument":{"Statement":[{"Action":["s3:PutBucketPolicy","s3:GetBucket*","s3:List*","s3:DeleteObject*"],"Effect":"Allow","Principal":{"AWS":{"Fn::GetAtt":["CustomS3AutoDeleteObjectsCustomResourceProviderRole3B1BD092","Arn"]}},"Resource":[{"Fn::GetAtt":["ArticleBucket38F6CD07","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["ArticleBucket38F6CD07","Arn"]},"/*"]]}]}],"Version":"2012-10-17"}}}}}},"AutoDeleteObjectsCustomResource":{"id":"AutoDeleteObjectsCustomResource","path":"ChatbotBackendProd/ArticleBucket/AutoDeleteObjectsCustomResource","constructInfo":{"fqn":"aws-cdk-lib.CustomResource","version":"2.204.0","metadata":[]},"children":{"Default":{"id":"Default","path":"ChatbotBackendProd/ArticleBucket/AutoDeleteObjectsCustomResource/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.204.0"}}}}}},"UsersTable":{"id":"UsersTable","path":"ChatbotBackendProd/UsersTable","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.Table","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotBackendProd/UsersTable/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.CfnTable","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::DynamoDB::Table","aws:cdk:cloudformation:props":{"attributeDefinitions":[{"attributeName":"user_id","attributeType":"S"},{"attributeName":"email","attributeType":"S"}],"billingMode":"PAY_PER_REQUEST","globalSecondaryIndexes":[{"indexName":"email-index","keySchema":[{"attributeName":"email","keyType":"HASH"}],"projection":{"projectionType":"ALL"}}],"keySchema":[{"attributeName":"user_id","keyType":"HASH"}],"pointInTimeRecoverySpecification":{"pointInTimeRecoveryEnabled":true},"tableName":"chatbot-users"}}},"ScalingRole":{"id":"ScalingRole","path":"ChatbotBackendProd/UsersTable/ScalingRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.204.0","metadata":[]}}}},"UsageTable":{"id":"UsageTable","path":"ChatbotBackendProd/UsageTable","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.Table","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotBackendProd/UsageTable/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.CfnTable","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::DynamoDB::Table","aws:cdk:cloudformation:props":{"attributeDefinitions":[{"attributeName":"user_id","attributeType":"S"},{"attributeName":"date","attributeType":"S"},{"attributeName":"month","attributeType":"S"}],"billingMode":"PAY_PER_REQUEST","globalSecondaryIndexes":[{"indexName":"user_id-month-index","keySchema":[{"attributeName":"user_id","keyType":"HASH"},{"attributeName":"month","keyType":"RANGE"}],"projection":{"projectionType":"ALL"}}],"keySchema":[{"attributeName":"user_id","keyType":"HASH"},{"attributeName":"date","keyType":"RANGE"}],"tableName":"chatbot-usage","timeToLiveSpecification":{"attributeName":"ttl","enabled":true}}}},"ScalingRole":{"id":"ScalingRole","path":"ChatbotBackendProd/UsageTable/ScalingRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.204.0","metadata":[]}}}},"SubscriptionsTable":{"id":"SubscriptionsTable","path":"ChatbotBackendProd/SubscriptionsTable","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.Table","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotBackendProd/SubscriptionsTable/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.CfnTable","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::DynamoDB::Table","aws:cdk:cloudformation:props":{"attributeDefinitions":[{"attributeName":"user_id","attributeType":"S"},{"attributeName":"status","attributeType":"S"},{"attributeName":"expiry_date","attributeType":"S"}],"billingMode":"PAY_PER_REQUEST","globalSecondaryIndexes":[{"indexName":"status-expiry_date-index","keySchema":[{"attributeName":"status","keyType":"HASH"},{"attributeName":"expiry_date","keyType":"RANGE"}],"projection":{"projectionType":"ALL"}}],"keySchema":[{"attributeName":"user_id","keyType":"HASH"}],"pointInTimeRecoverySpecification":{"pointInTimeRecoveryEnabled":true},"tableName":"chatbot-subscriptions"}}},"ScalingRole":{"id":"ScalingRole","path":"ChatbotBackendProd/SubscriptionsTable/ScalingRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.204.0","metadata":[]}}}},"PromptMetaTable":{"id":"PromptMetaTable","path":"ChatbotBackendProd/PromptMetaTable","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.Table","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotBackendProd/PromptMetaTable/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.CfnTable","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::DynamoDB::Table","aws:cdk:cloudformation:props":{"attributeDefinitions":[{"attributeName":"user_id","attributeType":"S"},{"attributeName":"promptId","attributeType":"S"},{"attributeName":"stepOrder","attributeType":"N"}],"billingMode":"PAY_PER_REQUEST","globalSecondaryIndexes":[{"indexName":"user_id-stepOrder-index","keySchema":[{"attributeName":"user_id","keyType":"HASH"},{"attributeName":"stepOrder","keyType":"RANGE"}],"projection":{"projectionType":"ALL"}}],"keySchema":[{"attributeName":"user_id","keyType":"HASH"},{"attributeName":"promptId","keyType":"RANGE"}],"tableName":"chatbot-prompts"}}},"ScalingRole":{"id":"ScalingRole","path":"ChatbotBackendProd/PromptMetaTable/ScalingRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.204.0","metadata":[]}}}},"ConversationTable":{"id":"ConversationTable","path":"ChatbotBackendProd/ConversationTable","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.Table","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotBackendProd/ConversationTable/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.CfnTable","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::DynamoDB::Table","aws:cdk:cloudformation:props":{"attributeDefinitions":[{"attributeName":"user_id","attributeType":"S"},{"attributeName":"timestamp","attributeType":"N"}],"billingMode":"PAY_PER_REQUEST","keySchema":[{"attributeName":"user_id","keyType":"HASH"},{"attributeName":"timestamp","keyType":"RANGE"}],"tableName":"chatbot-conversations"}}},"ScalingRole":{"id":"ScalingRole","path":"ChatbotBackendProd/ConversationTable/ScalingRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.204.0","metadata":[]}}}},"ExecutionTable":{"id":"ExecutionTable","path":"ChatbotBackendProd/ExecutionTable","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.Table","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotBackendProd/ExecutionTable/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.CfnTable","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::DynamoDB::Table","aws:cdk:cloudformation:props":{"attributeDefinitions":[{"attributeName":"executionId","attributeType":"S"}],"billingMode":"PAY_PER_REQUEST","keySchema":[{"attributeName":"executionId","keyType":"HASH"}],"tableName":"chatbot-executions","timeToLiveSpecification":{"attributeName":"ttl","enabled":true}}}},"ScalingRole":{"id":"ScalingRole","path":"ChatbotBackendProd/ExecutionTable/ScalingRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.204.0","metadata":[]}}}},"PerplexityCacheTable":{"id":"PerplexityCacheTable","path":"ChatbotBackendProd/PerplexityCacheTable","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.Table","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotBackendProd/PerplexityCacheTable/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.CfnTable","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::DynamoDB::Table","aws:cdk:cloudformation:props":{"attributeDefinitions":[{"attributeName":"query_hash","attributeType":"S"}],"billingMode":"PAY_PER_REQUEST","keySchema":[{"attributeName":"query_hash","keyType":"HASH"}],"tableName":"perplexity-search-cache","timeToLiveSpecification":{"attributeName":"ttl","enabled":true}}}},"ScalingRole":{"id":"ScalingRole","path":"ChatbotBackendProd/PerplexityCacheTable/ScalingRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.204.0","metadata":[]}}}},"ExecutionMetricsTable":{"id":"ExecutionMetricsTable","path":"ChatbotBackendProd/ExecutionMetricsTable","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.Table","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotBackendProd/ExecutionMetricsTable/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.CfnTable","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::DynamoDB::Table","aws:cdk:cloudformation:props":{"attributeDefinitions":[{"attributeName":"execution_date","attributeType":"S"},{"attributeName":"execution_id","attributeType":"S"}],"billingMode":"PAY_PER_REQUEST","keySchema":[{"attributeName":"execution_date","keyType":"HASH"},{"attributeName":"execution_id","keyType":"RANGE"}],"tableName":"workflow-execution-metrics","timeToLiveSpecification":{"attributeName":"ttl","enabled":true}}}},"ScalingRole":{"id":"ScalingRole","path":"ChatbotBackendProd/ExecutionMetricsTable/ScalingRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.204.0","metadata":[]}}}},"IndexPromptDLQ":{"id":"IndexPromptDLQ","path":"ChatbotBackendProd/IndexPromptDLQ","constructInfo":{"fqn":"aws-cdk-lib.aws_sqs.Queue","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotBackendProd/IndexPromptDLQ/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_sqs.CfnQueue","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SQS::Queue","aws:cdk:cloudformation:props":{"messageRetentionPeriod":1209600,"queueName":"chatbot-index-prompt-dlq","visibilityTimeout":300}}}}},"IndexPromptQueue":{"id":"IndexPromptQueue","path":"ChatbotBackendProd/IndexPromptQueue","constructInfo":{"fqn":"aws-cdk-lib.aws_sqs.Queue","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotBackendProd/IndexPromptQueue/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_sqs.CfnQueue","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SQS::Queue","aws:cdk:cloudformation:props":{"queueName":"chatbot-index-prompt","redrivePolicy":{"deadLetterTargetArn":{"Fn::GetAtt":["IndexPromptDLQ5C143C72","Arn"]},"maxReceiveCount":3},"visibilityTimeout":300}}}}},"CompletionTopic":{"id":"CompletionTopic","path":"ChatbotBackendProd/CompletionTopic","constructInfo":{"fqn":"aws-cdk-lib.aws_sns.Topic","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotBackendProd/CompletionTopic/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_sns.CfnTopic","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SNS::Topic","aws:cdk:cloudformation:props":{"topicName":"chatbot-completion"}}}}},"ErrorTopic":{"id":"ErrorTopic","path":"ChatbotBackendProd/ErrorTopic","constructInfo":{"fqn":"aws-cdk-lib.aws_sns.Topic","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotBackendProd/ErrorTopic/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_sns.CfnTopic","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SNS::Topic","aws:cdk:cloudformation:props":{"topicName":"chatbot-errors"}}}}},"BedrockAgentRole":{"id":"BedrockAgentRole","path":"ChatbotBackendProd/BedrockAgentRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.204.0","metadata":[]},"children":{"ImportBedrockAgentRole":{"id":"ImportBedrockAgentRole","path":"ChatbotBackendProd/BedrockAgentRole/ImportBedrockAgentRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.204.0","metadata":[]}},"Resource":{"id":"Resource","path":"ChatbotBackendProd/BedrockAgentRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"bedrock.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/AmazonBedrockFullAccess"]]}]}}}}},"BedrockKnowledgeBaseRole":{"id":"BedrockKnowledgeBaseRole","path":"ChatbotBackendProd/BedrockKnowledgeBaseRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.204.0","metadata":[]},"children":{"ImportBedrockKnowledgeBaseRole":{"id":"ImportBedrockKnowledgeBaseRole","path":"ChatbotBackendProd/BedrockKnowledgeBaseRole/ImportBedrockKnowledgeBaseRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.204.0","metadata":[]}},"Resource":{"id":"Resource","path":"ChatbotBackendProd/BedrockKnowledgeBaseRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"bedrock.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/AmazonBedrockFullAccess"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"ChatbotBackendProd/BedrockKnowledgeBaseRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotBackendProd/BedrockKnowledgeBaseRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["s3:GetObject","s3:ListBucket"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["PromptBucket1668FD1C","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["PromptBucket1668FD1C","Arn"]},"/*"]]}]}],"Version":"2012-10-17"},"policyName":"BedrockKnowledgeBaseRoleDefaultPolicy3434A684","roles":[{"Ref":"BedrockKnowledgeBaseRole24C5E17B"}]}}}}}}},"DynamicPromptAgent":{"id":"DynamicPromptAgent","path":"ChatbotBackendProd/DynamicPromptAgent","constructInfo":{"fqn":"aws-cdk-lib.aws_bedrock.CfnAgent","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Bedrock::Agent","aws:cdk:cloudformation:props":{"agentName":"dynamic-prompt-agent-1753738014","agentResourceRoleArn":{"Fn::GetAtt":["BedrockAgentRole7C982E0C","Arn"]},"description":"동적 프롬프트 시스템 AI 어시스턴트","foundationModel":"apac.anthropic.claude-3-sonnet-20240229-v1:0","idleSessionTtlInSeconds":1800,"instruction":"당신은 동적 프롬프트 시스템의 AI 어시스턴트입니다. 사용자가 제공하는 프롬프트 카드의 내용에 따라 다양한 작업을 수행하며, 창의적이고 정확한 응답을 제공합니다. 항상 한국어로 응답하고, 사용자의 요청에 맞춰 유연하게 대응하세요."}}},"DynamicPromptAgentAlias":{"id":"DynamicPromptAgentAlias","path":"ChatbotBackendProd/DynamicPromptAgentAlias","constructInfo":{"fqn":"aws-cdk-lib.aws_bedrock.CfnAgentAlias","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Bedrock::AgentAlias","aws:cdk:cloudformation:props":{"agentAliasName":"production","agentId":{"Fn::GetAtt":["DynamicPromptAgent","AgentId"]},"description":"Production alias for Dynamic Prompt System agent"}}},"LambdaRole":{"id":"LambdaRole","path":"ChatbotBackendProd/LambdaRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.204.0","metadata":[]},"children":{"ImportLambdaRole":{"id":"ImportLambdaRole","path":"ChatbotBackendProd/LambdaRole/ImportLambdaRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.204.0","metadata":[]}},"Resource":{"id":"Resource","path":"ChatbotBackendProd/LambdaRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]},{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/AmazonBedrockFullAccess"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"ChatbotBackendProd/LambdaRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotBackendProd/LambdaRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["s3:GetObject","s3:PutObject","s3:DeleteObject","s3:ListBucket","dynamodb:Query","dynamodb:PutItem","dynamodb:UpdateItem","dynamodb:GetItem","dynamodb:DeleteItem","dynamodb:Scan","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:DescribeStream","dynamodb:ListStreams","sqs:SendMessage","sqs:ReceiveMessage","sns:Publish","bedrock:InvokeModel","bedrock:InvokeModelWithResponseStream","bedrock:Retrieve","bedrock:RetrieveAndGenerate","cognito-idp:AdminCreateUser","cognito-idp:AdminSetUserPassword","cognito-idp:AdminGetUser","cognito-idp:AdminDeleteUser","cognito-idp:AdminConfirmSignUp","cognito-idp:AdminInitiateAuth","cognito-idp:AdminRespondToAuthChallenge","cognito-idp:AdminListGroupsForUser","cognito-idp:AdminAddUserToGroup","cognito-idp:ConfirmForgotPassword","cognito-idp:ForgotPassword","cognito-idp:ConfirmSignUp","cognito-idp:ResendConfirmationCode"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["PromptBucket1668FD1C","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["PromptBucket1668FD1C","Arn"]},"/*"]]},{"Fn::GetAtt":["ArticleBucket38F6CD07","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["ArticleBucket38F6CD07","Arn"]},"/*"]]},"arn:aws:s3:::seoul-economic-news-data-2025","arn:aws:s3:::seoul-economic-news-data-2025/*",{"Fn::GetAtt":["PromptMetaTable0A0B3876","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["PromptMetaTable0A0B3876","Arn"]},"/index/user_id-stepOrder-index"]]},{"Fn::GetAtt":["ConversationTable75C14D21","Arn"]},{"Fn::GetAtt":["ExecutionTable914EA6E7","Arn"]},{"Fn::GetAtt":["UsersTable9725E9C8","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["UsersTable9725E9C8","Arn"]},"/index/email-index"]]},{"Fn::GetAtt":["UsageTable28300137","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["UsageTable28300137","Arn"]},"/index/user_id-month-index"]]},{"Fn::GetAtt":["SubscriptionsTable40965A9D","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["SubscriptionsTable40965A9D","Arn"]},"/index/status-expiry_date-index"]]},{"Fn::GetAtt":["PerplexityCacheTable47347F70","Arn"]},{"Fn::GetAtt":["ExecutionMetricsTable37348B2C","Arn"]},{"Fn::GetAtt":["IndexPromptDLQ5C143C72","Arn"]},{"Fn::GetAtt":["IndexPromptQueueC7C25CCE","Arn"]},{"Ref":"CompletionTopic50E1DF26"},{"Ref":"ErrorTopicA0904A23"},{"Fn::GetAtt":["ChatbotUserPool01970AAD","Arn"]},{"Fn::Join":["",["arn:aws:cognito-idp:ap-northeast-2:887078546492:userpool/",{"Ref":"ChatbotUserPool01970AAD"}]]}]},{"Action":"sqs:SendMessage","Effect":"Allow","Resource":{"Fn::GetAtt":["IndexPromptDLQ5C143C72","Arn"]}}],"Version":"2012-10-17"},"policyName":"LambdaRoleDefaultPolicy75625A82","roles":[{"Ref":"LambdaRole3A44B857"}]}}}}}}},"NewsProcessingLayer":{"id":"NewsProcessingLayer","path":"ChatbotBackendProd/NewsProcessingLayer","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.LayerVersion","version":"2.204.0","metadata":[]},"children":{"Code":{"id":"Code","path":"ChatbotBackendProd/NewsProcessingLayer/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.204.0"},"children":{"Stage":{"id":"Stage","path":"ChatbotBackendProd/NewsProcessingLayer/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.204.0"}},"AssetBucket":{"id":"AssetBucket","path":"ChatbotBackendProd/NewsProcessingLayer/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.204.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"ChatbotBackendProd/NewsProcessingLayer/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnLayerVersion","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::LayerVersion","aws:cdk:cloudformation:props":{"compatibleRuntimes":["python3.11"],"content":{"s3Bucket":"cdk-hnb659fds-assets-887078546492-ap-northeast-2","s3Key":"18a51c5acfed584a3f2087b20ba5b1612d2f023a4515ada44a9337d6c2af78c5.zip"},"description":"서울경제신문 AI 요약 시스템 - 간단화된 7단계 플로우 처리"}}}}},"GenerateFunction":{"id":"GenerateFunction","path":"ChatbotBackendProd/GenerateFunction","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.204.0","metadata":[]},"children":{"Code":{"id":"Code","path":"ChatbotBackendProd/GenerateFunction/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.204.0"},"children":{"Stage":{"id":"Stage","path":"ChatbotBackendProd/GenerateFunction/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.204.0"}},"AssetBucket":{"id":"AssetBucket","path":"ChatbotBackendProd/GenerateFunction/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.204.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"ChatbotBackendProd/GenerateFunction/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-887078546492-ap-northeast-2","s3Key":"5faef22f4206e472b85a192a2e6011689a90acfb998c1ea9c4d0b861a47fc723.zip"},"deadLetterConfig":{"targetArn":{"Fn::GetAtt":["IndexPromptDLQ5C143C72","Arn"]}},"environment":{"variables":{"PROMPT_META_TABLE":{"Ref":"PromptMetaTable0A0B3876"},"PROMPT_BUCKET":{"Ref":"PromptBucket1668FD1C"},"EXECUTION_TABLE":{"Ref":"ExecutionTable914EA6E7"},"KNOWLEDGE_BASE_ID":"PGQV3JXPET","OPENSEARCH_COLLECTION_ID":"i56h0ibud5e0sd0hz7ch","S3_BUCKET_NAME":"seoul-economic-news-data-2025","S3_DATA_PREFIX":"news-data-md/","NEWS_BUCKET":"seoul-economic-news-data-2025","PERPLEXITY_API_KEY":"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","PERPLEXITY_CACHE_TABLE":"perplexity-search-cache","EXECUTION_METRICS_TABLE":"workflow-execution-metrics","REGION":"ap-northeast-2"}},"handler":"generate.lambda_handler","layers":[{"Ref":"NewsProcessingLayer63A6C836"}],"memorySize":3008,"role":{"Fn::GetAtt":["LambdaRole3A44B857","Arn"]},"runtime":"python3.11","timeout":900}}}}},"AuthFunction":{"id":"AuthFunction","path":"ChatbotBackendProd/AuthFunction","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.204.0","metadata":[]},"children":{"Code":{"id":"Code","path":"ChatbotBackendProd/AuthFunction/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.204.0"},"children":{"Stage":{"id":"Stage","path":"ChatbotBackendProd/AuthFunction/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.204.0"}},"AssetBucket":{"id":"AssetBucket","path":"ChatbotBackendProd/AuthFunction/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.204.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"ChatbotBackendProd/AuthFunction/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-887078546492-ap-northeast-2","s3Key":"52acb937fba0c7e4b573368f21b4589784987c779f1f0cc3b6d82fb819cfed8e.zip"},"environment":{"variables":{"USER_POOL_ID":{"Ref":"ChatbotUserPool01970AAD"},"USER_POOL_CLIENT_ID":{"Ref":"ChatbotUserPoolChatbotWebClientF2B8B64F"},"REGION":"ap-northeast-2","LOG_LEVEL":"INFO"}},"handler":"auth.handler","memorySize":256,"role":{"Fn::GetAtt":["LambdaRole3A44B857","Arn"]},"runtime":"python3.11","timeout":60}}}}},"UserManagementFunction":{"id":"UserManagementFunction","path":"ChatbotBackendProd/UserManagementFunction","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.204.0","metadata":[]},"children":{"Code":{"id":"Code","path":"ChatbotBackendProd/UserManagementFunction/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.204.0"},"children":{"Stage":{"id":"Stage","path":"ChatbotBackendProd/UserManagementFunction/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.204.0"}},"AssetBucket":{"id":"AssetBucket","path":"ChatbotBackendProd/UserManagementFunction/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.204.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"ChatbotBackendProd/UserManagementFunction/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-887078546492-ap-northeast-2","s3Key":"6c461cbea9a9ecc89c6283688efbec024d4d6586f8bce6db701ceba0eef2d2fd.zip"},"environment":{"variables":{"USERS_TABLE_NAME":{"Ref":"UsersTable9725E9C8"},"USAGE_TABLE_NAME":{"Ref":"UsageTable28300137"},"SUBSCRIPTIONS_TABLE_NAME":{"Ref":"SubscriptionsTable40965A9D"},"USER_POOL_ID":{"Ref":"ChatbotUserPool01970AAD"},"LOG_LEVEL":"INFO"}},"handler":"user_management.lambda_handler","memorySize":512,"role":{"Fn::GetAtt":["LambdaRole3A44B857","Arn"]},"runtime":"python3.11","timeout":120}}}}},"JWTAuthorizerFunction":{"id":"JWTAuthorizerFunction","path":"ChatbotBackendProd/JWTAuthorizerFunction","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.204.0","metadata":[]},"children":{"Code":{"id":"Code","path":"ChatbotBackendProd/JWTAuthorizerFunction/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.204.0"},"children":{"Stage":{"id":"Stage","path":"ChatbotBackendProd/JWTAuthorizerFunction/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.204.0"}},"AssetBucket":{"id":"AssetBucket","path":"ChatbotBackendProd/JWTAuthorizerFunction/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.204.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"ChatbotBackendProd/JWTAuthorizerFunction/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-887078546492-ap-northeast-2","s3Key":"08656a1de06b13f088679093a003aab21621934f20175eb3a900f8c9b66936a1.zip"},"environment":{"variables":{"USER_POOL_ID":{"Ref":"ChatbotUserPool01970AAD"},"USER_POOL_CLIENT_ID":{"Ref":"ChatbotUserPoolChatbotWebClientF2B8B64F"},"REGION":"ap-northeast-2","LOG_LEVEL":"INFO"}},"handler":"authorizer.handler","memorySize":256,"role":{"Fn::GetAtt":["LambdaRole3A44B857","Arn"]},"runtime":"python3.11","timeout":60}}},"ChatbotBackendProdChatbotApiAuthorizer5FD2DAA0:Permissions":{"id":"ChatbotBackendProdChatbotApiAuthorizer5FD2DAA0:Permissions","path":"ChatbotBackendProd/JWTAuthorizerFunction/ChatbotBackendProdChatbotApiAuthorizer5FD2DAA0:Permissions","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["JWTAuthorizerFunction9F386173","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:ap-northeast-2:887078546492:",{"Ref":"ChatbotApiF211B502"},"/authorizers/",{"Ref":"ChatbotApiAuthorizer801BDC78"}]]}}}}}},"ChatbotApi":{"id":"ChatbotApi","path":"ChatbotBackendProd/ChatbotApi","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.RestApi","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotBackendProd/ChatbotApi/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnRestApi","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::RestApi","aws:cdk:cloudformation:props":{"description":"동적 프롬프트 시스템 - 완전한 빈깡통 AI","name":"chatbot-api"}}},"CloudWatchRole":{"id":"CloudWatchRole","path":"ChatbotBackendProd/ChatbotApi/CloudWatchRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.204.0","metadata":[]},"children":{"ImportCloudWatchRole":{"id":"ImportCloudWatchRole","path":"ChatbotBackendProd/ChatbotApi/CloudWatchRole/ImportCloudWatchRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.204.0","metadata":[]}},"Resource":{"id":"Resource","path":"ChatbotBackendProd/ChatbotApi/CloudWatchRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"apigateway.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AmazonAPIGatewayPushToCloudWatchLogs"]]}]}}}}},"Account":{"id":"Account","path":"ChatbotBackendProd/ChatbotApi/Account","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnAccount","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Account","aws:cdk:cloudformation:props":{"cloudWatchRoleArn":{"Fn::GetAtt":["ChatbotApiCloudWatchRoleD8E3EB91","Arn"]}}}},"Deployment":{"id":"Deployment","path":"ChatbotBackendProd/ChatbotApi/Deployment","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Deployment","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotBackendProd/ChatbotApi/Deployment/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnDeployment","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Deployment","aws:cdk:cloudformation:props":{"description":"동적 프롬프트 시스템 - 완전한 빈깡통 AI","restApiId":{"Ref":"ChatbotApiF211B502"}}}}}},"DeploymentStage.prod":{"id":"DeploymentStage.prod","path":"ChatbotBackendProd/ChatbotApi/DeploymentStage.prod","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Stage","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotBackendProd/ChatbotApi/DeploymentStage.prod/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnStage","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Stage","aws:cdk:cloudformation:props":{"deploymentId":{"Ref":"ChatbotApiDeploymentB789581584a6a91e5aa582526cc952a1b903d56d"},"restApiId":{"Ref":"ChatbotApiF211B502"},"stageName":"prod"}}}}},"Endpoint":{"id":"Endpoint","path":"ChatbotBackendProd/ChatbotApi/Endpoint","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.204.0"}},"Default":{"id":"Default","path":"ChatbotBackendProd/ChatbotApi/Default","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.ResourceBase","version":"2.204.0","metadata":[]},"children":{"auth":{"id":"auth","path":"ChatbotBackendProd/ChatbotApi/Default/auth","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotBackendProd/ChatbotApi/Default/auth/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Fn::GetAtt":["ChatbotApiF211B502","RootResourceId"]},"pathPart":"auth","restApiId":{"Ref":"ChatbotApiF211B502"}}}},"signup":{"id":"signup","path":"ChatbotBackendProd/ChatbotApi/Default/auth/signup","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotBackendProd/ChatbotApi/Default/auth/signup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Ref":"ChatbotApiauthD0EAC720"},"pathPart":"signup","restApiId":{"Ref":"ChatbotApiF211B502"}}}},"POST":{"id":"POST","path":"ChatbotBackendProd/ChatbotApi/Default/auth/signup/POST","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.204.0","metadata":[]},"children":{"ApiPermission.ChatbotBackendProdChatbotApiCB97AD5C.POST..auth.signup":{"id":"ApiPermission.ChatbotBackendProdChatbotApiCB97AD5C.POST..auth.signup","path":"ChatbotBackendProd/ChatbotApi/Default/auth/signup/POST/ApiPermission.ChatbotBackendProdChatbotApiCB97AD5C.POST..auth.signup","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["AuthFunctionA1CD5E0F","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:ap-northeast-2:887078546492:",{"Ref":"ChatbotApiF211B502"},"/",{"Ref":"ChatbotApiDeploymentStageprod27096855"},"/POST/auth/signup"]]}}}},"ApiPermission.Test.ChatbotBackendProdChatbotApiCB97AD5C.POST..auth.signup":{"id":"ApiPermission.Test.ChatbotBackendProdChatbotApiCB97AD5C.POST..auth.signup","path":"ChatbotBackendProd/ChatbotApi/Default/auth/signup/POST/ApiPermission.Test.ChatbotBackendProdChatbotApiCB97AD5C.POST..auth.signup","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["AuthFunctionA1CD5E0F","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:ap-northeast-2:887078546492:",{"Ref":"ChatbotApiF211B502"},"/test-invoke-stage/POST/auth/signup"]]}}}},"Resource":{"id":"Resource","path":"ChatbotBackendProd/ChatbotApi/Default/auth/signup/POST/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"NONE","httpMethod":"POST","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":apigateway:ap-northeast-2:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["AuthFunctionA1CD5E0F","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"resourceId":{"Ref":"ChatbotApiauthsignup28B15E0C"},"restApiId":{"Ref":"ChatbotApiF211B502"}}}}}},"OPTIONS":{"id":"OPTIONS","path":"ChatbotBackendProd/ChatbotApi/Default/auth/signup/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotBackendProd/ChatbotApi/Default/auth/signup/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{\"statusCode\": 200}"},"integrationResponses":[{"statusCode":"200","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'POST,OPTIONS'"}}]},"methodResponses":[{"statusCode":"200","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true}}],"resourceId":{"Ref":"ChatbotApiauthsignup28B15E0C"},"restApiId":{"Ref":"ChatbotApiF211B502"}}}}}}}},"signin":{"id":"signin","path":"ChatbotBackendProd/ChatbotApi/Default/auth/signin","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotBackendProd/ChatbotApi/Default/auth/signin/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Ref":"ChatbotApiauthD0EAC720"},"pathPart":"signin","restApiId":{"Ref":"ChatbotApiF211B502"}}}},"POST":{"id":"POST","path":"ChatbotBackendProd/ChatbotApi/Default/auth/signin/POST","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.204.0","metadata":[]},"children":{"ApiPermission.ChatbotBackendProdChatbotApiCB97AD5C.POST..auth.signin":{"id":"ApiPermission.ChatbotBackendProdChatbotApiCB97AD5C.POST..auth.signin","path":"ChatbotBackendProd/ChatbotApi/Default/auth/signin/POST/ApiPermission.ChatbotBackendProdChatbotApiCB97AD5C.POST..auth.signin","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["AuthFunctionA1CD5E0F","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:ap-northeast-2:887078546492:",{"Ref":"ChatbotApiF211B502"},"/",{"Ref":"ChatbotApiDeploymentStageprod27096855"},"/POST/auth/signin"]]}}}},"ApiPermission.Test.ChatbotBackendProdChatbotApiCB97AD5C.POST..auth.signin":{"id":"ApiPermission.Test.ChatbotBackendProdChatbotApiCB97AD5C.POST..auth.signin","path":"ChatbotBackendProd/ChatbotApi/Default/auth/signin/POST/ApiPermission.Test.ChatbotBackendProdChatbotApiCB97AD5C.POST..auth.signin","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["AuthFunctionA1CD5E0F","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:ap-northeast-2:887078546492:",{"Ref":"ChatbotApiF211B502"},"/test-invoke-stage/POST/auth/signin"]]}}}},"Resource":{"id":"Resource","path":"ChatbotBackendProd/ChatbotApi/Default/auth/signin/POST/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"NONE","httpMethod":"POST","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":apigateway:ap-northeast-2:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["AuthFunctionA1CD5E0F","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"resourceId":{"Ref":"ChatbotApiauthsigninFEBE7F7E"},"restApiId":{"Ref":"ChatbotApiF211B502"}}}}}},"OPTIONS":{"id":"OPTIONS","path":"ChatbotBackendProd/ChatbotApi/Default/auth/signin/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotBackendProd/ChatbotApi/Default/auth/signin/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{\"statusCode\": 200}"},"integrationResponses":[{"statusCode":"200","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'POST,OPTIONS'"}}]},"methodResponses":[{"statusCode":"200","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true}}],"resourceId":{"Ref":"ChatbotApiauthsigninFEBE7F7E"},"restApiId":{"Ref":"ChatbotApiF211B502"}}}}}}}},"refresh":{"id":"refresh","path":"ChatbotBackendProd/ChatbotApi/Default/auth/refresh","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotBackendProd/ChatbotApi/Default/auth/refresh/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Ref":"ChatbotApiauthD0EAC720"},"pathPart":"refresh","restApiId":{"Ref":"ChatbotApiF211B502"}}}},"POST":{"id":"POST","path":"ChatbotBackendProd/ChatbotApi/Default/auth/refresh/POST","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.204.0","metadata":[]},"children":{"ApiPermission.ChatbotBackendProdChatbotApiCB97AD5C.POST..auth.refresh":{"id":"ApiPermission.ChatbotBackendProdChatbotApiCB97AD5C.POST..auth.refresh","path":"ChatbotBackendProd/ChatbotApi/Default/auth/refresh/POST/ApiPermission.ChatbotBackendProdChatbotApiCB97AD5C.POST..auth.refresh","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["AuthFunctionA1CD5E0F","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:ap-northeast-2:887078546492:",{"Ref":"ChatbotApiF211B502"},"/",{"Ref":"ChatbotApiDeploymentStageprod27096855"},"/POST/auth/refresh"]]}}}},"ApiPermission.Test.ChatbotBackendProdChatbotApiCB97AD5C.POST..auth.refresh":{"id":"ApiPermission.Test.ChatbotBackendProdChatbotApiCB97AD5C.POST..auth.refresh","path":"ChatbotBackendProd/ChatbotApi/Default/auth/refresh/POST/ApiPermission.Test.ChatbotBackendProdChatbotApiCB97AD5C.POST..auth.refresh","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["AuthFunctionA1CD5E0F","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:ap-northeast-2:887078546492:",{"Ref":"ChatbotApiF211B502"},"/test-invoke-stage/POST/auth/refresh"]]}}}},"Resource":{"id":"Resource","path":"ChatbotBackendProd/ChatbotApi/Default/auth/refresh/POST/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"NONE","httpMethod":"POST","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":apigateway:ap-northeast-2:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["AuthFunctionA1CD5E0F","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"resourceId":{"Ref":"ChatbotApiauthrefreshF6C87EBE"},"restApiId":{"Ref":"ChatbotApiF211B502"}}}}}},"OPTIONS":{"id":"OPTIONS","path":"ChatbotBackendProd/ChatbotApi/Default/auth/refresh/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotBackendProd/ChatbotApi/Default/auth/refresh/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{\"statusCode\": 200}"},"integrationResponses":[{"statusCode":"200","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'POST,OPTIONS'"}}]},"methodResponses":[{"statusCode":"200","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true}}],"resourceId":{"Ref":"ChatbotApiauthrefreshF6C87EBE"},"restApiId":{"Ref":"ChatbotApiF211B502"}}}}}}}},"signout":{"id":"signout","path":"ChatbotBackendProd/ChatbotApi/Default/auth/signout","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotBackendProd/ChatbotApi/Default/auth/signout/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Ref":"ChatbotApiauthD0EAC720"},"pathPart":"signout","restApiId":{"Ref":"ChatbotApiF211B502"}}}},"POST":{"id":"POST","path":"ChatbotBackendProd/ChatbotApi/Default/auth/signout/POST","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.204.0","metadata":[]},"children":{"ApiPermission.ChatbotBackendProdChatbotApiCB97AD5C.POST..auth.signout":{"id":"ApiPermission.ChatbotBackendProdChatbotApiCB97AD5C.POST..auth.signout","path":"ChatbotBackendProd/ChatbotApi/Default/auth/signout/POST/ApiPermission.ChatbotBackendProdChatbotApiCB97AD5C.POST..auth.signout","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["AuthFunctionA1CD5E0F","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:ap-northeast-2:887078546492:",{"Ref":"ChatbotApiF211B502"},"/",{"Ref":"ChatbotApiDeploymentStageprod27096855"},"/POST/auth/signout"]]}}}},"ApiPermission.Test.ChatbotBackendProdChatbotApiCB97AD5C.POST..auth.signout":{"id":"ApiPermission.Test.ChatbotBackendProdChatbotApiCB97AD5C.POST..auth.signout","path":"ChatbotBackendProd/ChatbotApi/Default/auth/signout/POST/ApiPermission.Test.ChatbotBackendProdChatbotApiCB97AD5C.POST..auth.signout","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["AuthFunctionA1CD5E0F","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:ap-northeast-2:887078546492:",{"Ref":"ChatbotApiF211B502"},"/test-invoke-stage/POST/auth/signout"]]}}}},"Resource":{"id":"Resource","path":"ChatbotBackendProd/ChatbotApi/Default/auth/signout/POST/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"NONE","httpMethod":"POST","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":apigateway:ap-northeast-2:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["AuthFunctionA1CD5E0F","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"resourceId":{"Ref":"ChatbotApiauthsignoutCD0FB0B3"},"restApiId":{"Ref":"ChatbotApiF211B502"}}}}}},"OPTIONS":{"id":"OPTIONS","path":"ChatbotBackendProd/ChatbotApi/Default/auth/signout/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotBackendProd/ChatbotApi/Default/auth/signout/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{\"statusCode\": 200}"},"integrationResponses":[{"statusCode":"200","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'POST,OPTIONS'"}}]},"methodResponses":[{"statusCode":"200","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true}}],"resourceId":{"Ref":"ChatbotApiauthsignoutCD0FB0B3"},"restApiId":{"Ref":"ChatbotApiF211B502"}}}}}}}},"verify":{"id":"verify","path":"ChatbotBackendProd/ChatbotApi/Default/auth/verify","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotBackendProd/ChatbotApi/Default/auth/verify/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Ref":"ChatbotApiauthD0EAC720"},"pathPart":"verify","restApiId":{"Ref":"ChatbotApiF211B502"}}}},"POST":{"id":"POST","path":"ChatbotBackendProd/ChatbotApi/Default/auth/verify/POST","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.204.0","metadata":[]},"children":{"ApiPermission.ChatbotBackendProdChatbotApiCB97AD5C.POST..auth.verify":{"id":"ApiPermission.ChatbotBackendProdChatbotApiCB97AD5C.POST..auth.verify","path":"ChatbotBackendProd/ChatbotApi/Default/auth/verify/POST/ApiPermission.ChatbotBackendProdChatbotApiCB97AD5C.POST..auth.verify","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["AuthFunctionA1CD5E0F","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:ap-northeast-2:887078546492:",{"Ref":"ChatbotApiF211B502"},"/",{"Ref":"ChatbotApiDeploymentStageprod27096855"},"/POST/auth/verify"]]}}}},"ApiPermission.Test.ChatbotBackendProdChatbotApiCB97AD5C.POST..auth.verify":{"id":"ApiPermission.Test.ChatbotBackendProdChatbotApiCB97AD5C.POST..auth.verify","path":"ChatbotBackendProd/ChatbotApi/Default/auth/verify/POST/ApiPermission.Test.ChatbotBackendProdChatbotApiCB97AD5C.POST..auth.verify","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["AuthFunctionA1CD5E0F","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:ap-northeast-2:887078546492:",{"Ref":"ChatbotApiF211B502"},"/test-invoke-stage/POST/auth/verify"]]}}}},"Resource":{"id":"Resource","path":"ChatbotBackendProd/ChatbotApi/Default/auth/verify/POST/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"NONE","httpMethod":"POST","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":apigateway:ap-northeast-2:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["AuthFunctionA1CD5E0F","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"resourceId":{"Ref":"ChatbotApiauthverifyCDA8800C"},"restApiId":{"Ref":"ChatbotApiF211B502"}}}}}},"OPTIONS":{"id":"OPTIONS","path":"ChatbotBackendProd/ChatbotApi/Default/auth/verify/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotBackendProd/ChatbotApi/Default/auth/verify/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{\"statusCode\": 200}"},"integrationResponses":[{"statusCode":"200","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'POST,OPTIONS'"}}]},"methodResponses":[{"statusCode":"200","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true}}],"resourceId":{"Ref":"ChatbotApiauthverifyCDA8800C"},"restApiId":{"Ref":"ChatbotApiF211B502"}}}}}}}},"forgot-password":{"id":"forgot-password","path":"ChatbotBackendProd/ChatbotApi/Default/auth/forgot-password","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotBackendProd/ChatbotApi/Default/auth/forgot-password/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Ref":"ChatbotApiauthD0EAC720"},"pathPart":"forgot-password","restApiId":{"Ref":"ChatbotApiF211B502"}}}},"POST":{"id":"POST","path":"ChatbotBackendProd/ChatbotApi/Default/auth/forgot-password/POST","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.204.0","metadata":[]},"children":{"ApiPermission.ChatbotBackendProdChatbotApiCB97AD5C.POST..auth.forgot-password":{"id":"ApiPermission.ChatbotBackendProdChatbotApiCB97AD5C.POST..auth.forgot-password","path":"ChatbotBackendProd/ChatbotApi/Default/auth/forgot-password/POST/ApiPermission.ChatbotBackendProdChatbotApiCB97AD5C.POST..auth.forgot-password","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["AuthFunctionA1CD5E0F","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:ap-northeast-2:887078546492:",{"Ref":"ChatbotApiF211B502"},"/",{"Ref":"ChatbotApiDeploymentStageprod27096855"},"/POST/auth/forgot-password"]]}}}},"ApiPermission.Test.ChatbotBackendProdChatbotApiCB97AD5C.POST..auth.forgot-password":{"id":"ApiPermission.Test.ChatbotBackendProdChatbotApiCB97AD5C.POST..auth.forgot-password","path":"ChatbotBackendProd/ChatbotApi/Default/auth/forgot-password/POST/ApiPermission.Test.ChatbotBackendProdChatbotApiCB97AD5C.POST..auth.forgot-password","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["AuthFunctionA1CD5E0F","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:ap-northeast-2:887078546492:",{"Ref":"ChatbotApiF211B502"},"/test-invoke-stage/POST/auth/forgot-password"]]}}}},"Resource":{"id":"Resource","path":"ChatbotBackendProd/ChatbotApi/Default/auth/forgot-password/POST/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"NONE","httpMethod":"POST","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":apigateway:ap-northeast-2:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["AuthFunctionA1CD5E0F","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"resourceId":{"Ref":"ChatbotApiauthforgotpasswordEC47AED7"},"restApiId":{"Ref":"ChatbotApiF211B502"}}}}}},"OPTIONS":{"id":"OPTIONS","path":"ChatbotBackendProd/ChatbotApi/Default/auth/forgot-password/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotBackendProd/ChatbotApi/Default/auth/forgot-password/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{\"statusCode\": 200}"},"integrationResponses":[{"statusCode":"200","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'POST,OPTIONS'"}}]},"methodResponses":[{"statusCode":"200","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true}}],"resourceId":{"Ref":"ChatbotApiauthforgotpasswordEC47AED7"},"restApiId":{"Ref":"ChatbotApiF211B502"}}}}}}}},"confirm-password":{"id":"confirm-password","path":"ChatbotBackendProd/ChatbotApi/Default/auth/confirm-password","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotBackendProd/ChatbotApi/Default/auth/confirm-password/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Ref":"ChatbotApiauthD0EAC720"},"pathPart":"confirm-password","restApiId":{"Ref":"ChatbotApiF211B502"}}}},"POST":{"id":"POST","path":"ChatbotBackendProd/ChatbotApi/Default/auth/confirm-password/POST","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.204.0","metadata":[]},"children":{"ApiPermission.ChatbotBackendProdChatbotApiCB97AD5C.POST..auth.confirm-password":{"id":"ApiPermission.ChatbotBackendProdChatbotApiCB97AD5C.POST..auth.confirm-password","path":"ChatbotBackendProd/ChatbotApi/Default/auth/confirm-password/POST/ApiPermission.ChatbotBackendProdChatbotApiCB97AD5C.POST..auth.confirm-password","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["AuthFunctionA1CD5E0F","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:ap-northeast-2:887078546492:",{"Ref":"ChatbotApiF211B502"},"/",{"Ref":"ChatbotApiDeploymentStageprod27096855"},"/POST/auth/confirm-password"]]}}}},"ApiPermission.Test.ChatbotBackendProdChatbotApiCB97AD5C.POST..auth.confirm-password":{"id":"ApiPermission.Test.ChatbotBackendProdChatbotApiCB97AD5C.POST..auth.confirm-password","path":"ChatbotBackendProd/ChatbotApi/Default/auth/confirm-password/POST/ApiPermission.Test.ChatbotBackendProdChatbotApiCB97AD5C.POST..auth.confirm-password","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["AuthFunctionA1CD5E0F","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:ap-northeast-2:887078546492:",{"Ref":"ChatbotApiF211B502"},"/test-invoke-stage/POST/auth/confirm-password"]]}}}},"Resource":{"id":"Resource","path":"ChatbotBackendProd/ChatbotApi/Default/auth/confirm-password/POST/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"NONE","httpMethod":"POST","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":apigateway:ap-northeast-2:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["AuthFunctionA1CD5E0F","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"resourceId":{"Ref":"ChatbotApiauthconfirmpassword75F58B7B"},"restApiId":{"Ref":"ChatbotApiF211B502"}}}}}},"OPTIONS":{"id":"OPTIONS","path":"ChatbotBackendProd/ChatbotApi/Default/auth/confirm-password/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotBackendProd/ChatbotApi/Default/auth/confirm-password/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{\"statusCode\": 200}"},"integrationResponses":[{"statusCode":"200","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'POST,OPTIONS'"}}]},"methodResponses":[{"statusCode":"200","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true}}],"resourceId":{"Ref":"ChatbotApiauthconfirmpassword75F58B7B"},"restApiId":{"Ref":"ChatbotApiF211B502"}}}}}}}},"init-admin":{"id":"init-admin","path":"ChatbotBackendProd/ChatbotApi/Default/auth/init-admin","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotBackendProd/ChatbotApi/Default/auth/init-admin/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Ref":"ChatbotApiauthD0EAC720"},"pathPart":"init-admin","restApiId":{"Ref":"ChatbotApiF211B502"}}}},"POST":{"id":"POST","path":"ChatbotBackendProd/ChatbotApi/Default/auth/init-admin/POST","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.204.0","metadata":[]},"children":{"ApiPermission.ChatbotBackendProdChatbotApiCB97AD5C.POST..auth.init-admin":{"id":"ApiPermission.ChatbotBackendProdChatbotApiCB97AD5C.POST..auth.init-admin","path":"ChatbotBackendProd/ChatbotApi/Default/auth/init-admin/POST/ApiPermission.ChatbotBackendProdChatbotApiCB97AD5C.POST..auth.init-admin","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["AuthFunctionA1CD5E0F","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:ap-northeast-2:887078546492:",{"Ref":"ChatbotApiF211B502"},"/",{"Ref":"ChatbotApiDeploymentStageprod27096855"},"/POST/auth/init-admin"]]}}}},"ApiPermission.Test.ChatbotBackendProdChatbotApiCB97AD5C.POST..auth.init-admin":{"id":"ApiPermission.Test.ChatbotBackendProdChatbotApiCB97AD5C.POST..auth.init-admin","path":"ChatbotBackendProd/ChatbotApi/Default/auth/init-admin/POST/ApiPermission.Test.ChatbotBackendProdChatbotApiCB97AD5C.POST..auth.init-admin","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["AuthFunctionA1CD5E0F","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:ap-northeast-2:887078546492:",{"Ref":"ChatbotApiF211B502"},"/test-invoke-stage/POST/auth/init-admin"]]}}}},"Resource":{"id":"Resource","path":"ChatbotBackendProd/ChatbotApi/Default/auth/init-admin/POST/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"NONE","httpMethod":"POST","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":apigateway:ap-northeast-2:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["AuthFunctionA1CD5E0F","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"resourceId":{"Ref":"ChatbotApiauthinitadmin839B9BFD"},"restApiId":{"Ref":"ChatbotApiF211B502"}}}}}},"OPTIONS":{"id":"OPTIONS","path":"ChatbotBackendProd/ChatbotApi/Default/auth/init-admin/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotBackendProd/ChatbotApi/Default/auth/init-admin/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{\"statusCode\": 200}"},"integrationResponses":[{"statusCode":"200","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'POST,OPTIONS'"}}]},"methodResponses":[{"statusCode":"200","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true}}],"resourceId":{"Ref":"ChatbotApiauthinitadmin839B9BFD"},"restApiId":{"Ref":"ChatbotApiF211B502"}}}}}}}}}},"user":{"id":"user","path":"ChatbotBackendProd/ChatbotApi/Default/user","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotBackendProd/ChatbotApi/Default/user/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Fn::GetAtt":["ChatbotApiF211B502","RootResourceId"]},"pathPart":"user","restApiId":{"Ref":"ChatbotApiF211B502"}}}},"profile":{"id":"profile","path":"ChatbotBackendProd/ChatbotApi/Default/user/profile","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotBackendProd/ChatbotApi/Default/user/profile/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Ref":"ChatbotApiuser787F7D3D"},"pathPart":"profile","restApiId":{"Ref":"ChatbotApiF211B502"}}}},"GET":{"id":"GET","path":"ChatbotBackendProd/ChatbotApi/Default/user/profile/GET","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.204.0","metadata":[]},"children":{"ApiPermission.ChatbotBackendProdChatbotApiCB97AD5C.GET..user.profile":{"id":"ApiPermission.ChatbotBackendProdChatbotApiCB97AD5C.GET..user.profile","path":"ChatbotBackendProd/ChatbotApi/Default/user/profile/GET/ApiPermission.ChatbotBackendProdChatbotApiCB97AD5C.GET..user.profile","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["UserManagementFunction2338B082","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:ap-northeast-2:887078546492:",{"Ref":"ChatbotApiF211B502"},"/",{"Ref":"ChatbotApiDeploymentStageprod27096855"},"/GET/user/profile"]]}}}},"ApiPermission.Test.ChatbotBackendProdChatbotApiCB97AD5C.GET..user.profile":{"id":"ApiPermission.Test.ChatbotBackendProdChatbotApiCB97AD5C.GET..user.profile","path":"ChatbotBackendProd/ChatbotApi/Default/user/profile/GET/ApiPermission.Test.ChatbotBackendProdChatbotApiCB97AD5C.GET..user.profile","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["UserManagementFunction2338B082","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:ap-northeast-2:887078546492:",{"Ref":"ChatbotApiF211B502"},"/test-invoke-stage/GET/user/profile"]]}}}},"Resource":{"id":"Resource","path":"ChatbotBackendProd/ChatbotApi/Default/user/profile/GET/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"CUSTOM","authorizerId":{"Ref":"ChatbotApiAuthorizer801BDC78"},"httpMethod":"GET","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":apigateway:ap-northeast-2:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["UserManagementFunction2338B082","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"resourceId":{"Ref":"ChatbotApiuserprofile39527181"},"restApiId":{"Ref":"ChatbotApiF211B502"}}}}}},"PUT":{"id":"PUT","path":"ChatbotBackendProd/ChatbotApi/Default/user/profile/PUT","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.204.0","metadata":[]},"children":{"ApiPermission.ChatbotBackendProdChatbotApiCB97AD5C.PUT..user.profile":{"id":"ApiPermission.ChatbotBackendProdChatbotApiCB97AD5C.PUT..user.profile","path":"ChatbotBackendProd/ChatbotApi/Default/user/profile/PUT/ApiPermission.ChatbotBackendProdChatbotApiCB97AD5C.PUT..user.profile","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["UserManagementFunction2338B082","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:ap-northeast-2:887078546492:",{"Ref":"ChatbotApiF211B502"},"/",{"Ref":"ChatbotApiDeploymentStageprod27096855"},"/PUT/user/profile"]]}}}},"ApiPermission.Test.ChatbotBackendProdChatbotApiCB97AD5C.PUT..user.profile":{"id":"ApiPermission.Test.ChatbotBackendProdChatbotApiCB97AD5C.PUT..user.profile","path":"ChatbotBackendProd/ChatbotApi/Default/user/profile/PUT/ApiPermission.Test.ChatbotBackendProdChatbotApiCB97AD5C.PUT..user.profile","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["UserManagementFunction2338B082","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:ap-northeast-2:887078546492:",{"Ref":"ChatbotApiF211B502"},"/test-invoke-stage/PUT/user/profile"]]}}}},"Resource":{"id":"Resource","path":"ChatbotBackendProd/ChatbotApi/Default/user/profile/PUT/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"CUSTOM","authorizerId":{"Ref":"ChatbotApiAuthorizer801BDC78"},"httpMethod":"PUT","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":apigateway:ap-northeast-2:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["UserManagementFunction2338B082","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"resourceId":{"Ref":"ChatbotApiuserprofile39527181"},"restApiId":{"Ref":"ChatbotApiF211B502"}}}}}},"OPTIONS":{"id":"OPTIONS","path":"ChatbotBackendProd/ChatbotApi/Default/user/profile/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotBackendProd/ChatbotApi/Default/user/profile/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{\"statusCode\": 200}"},"integrationResponses":[{"statusCode":"200","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'GET,PUT,OPTIONS'"}}]},"methodResponses":[{"statusCode":"200","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true}}],"resourceId":{"Ref":"ChatbotApiuserprofile39527181"},"restApiId":{"Ref":"ChatbotApiF211B502"}}}}}}}},"usage":{"id":"usage","path":"ChatbotBackendProd/ChatbotApi/Default/user/usage","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotBackendProd/ChatbotApi/Default/user/usage/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Ref":"ChatbotApiuser787F7D3D"},"pathPart":"usage","restApiId":{"Ref":"ChatbotApiF211B502"}}}},"GET":{"id":"GET","path":"ChatbotBackendProd/ChatbotApi/Default/user/usage/GET","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.204.0","metadata":[]},"children":{"ApiPermission.ChatbotBackendProdChatbotApiCB97AD5C.GET..user.usage":{"id":"ApiPermission.ChatbotBackendProdChatbotApiCB97AD5C.GET..user.usage","path":"ChatbotBackendProd/ChatbotApi/Default/user/usage/GET/ApiPermission.ChatbotBackendProdChatbotApiCB97AD5C.GET..user.usage","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["UserManagementFunction2338B082","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:ap-northeast-2:887078546492:",{"Ref":"ChatbotApiF211B502"},"/",{"Ref":"ChatbotApiDeploymentStageprod27096855"},"/GET/user/usage"]]}}}},"ApiPermission.Test.ChatbotBackendProdChatbotApiCB97AD5C.GET..user.usage":{"id":"ApiPermission.Test.ChatbotBackendProdChatbotApiCB97AD5C.GET..user.usage","path":"ChatbotBackendProd/ChatbotApi/Default/user/usage/GET/ApiPermission.Test.ChatbotBackendProdChatbotApiCB97AD5C.GET..user.usage","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["UserManagementFunction2338B082","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:ap-northeast-2:887078546492:",{"Ref":"ChatbotApiF211B502"},"/test-invoke-stage/GET/user/usage"]]}}}},"Resource":{"id":"Resource","path":"ChatbotBackendProd/ChatbotApi/Default/user/usage/GET/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"CUSTOM","authorizerId":{"Ref":"ChatbotApiAuthorizer801BDC78"},"httpMethod":"GET","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":apigateway:ap-northeast-2:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["UserManagementFunction2338B082","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"resourceId":{"Ref":"ChatbotApiuserusageD0840B97"},"restApiId":{"Ref":"ChatbotApiF211B502"}}}}}},"OPTIONS":{"id":"OPTIONS","path":"ChatbotBackendProd/ChatbotApi/Default/user/usage/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotBackendProd/ChatbotApi/Default/user/usage/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{\"statusCode\": 200}"},"integrationResponses":[{"statusCode":"200","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'GET,OPTIONS'"}}]},"methodResponses":[{"statusCode":"200","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true}}],"resourceId":{"Ref":"ChatbotApiuserusageD0840B97"},"restApiId":{"Ref":"ChatbotApiF211B502"}}}}}}}},"subscription":{"id":"subscription","path":"ChatbotBackendProd/ChatbotApi/Default/user/subscription","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotBackendProd/ChatbotApi/Default/user/subscription/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Ref":"ChatbotApiuser787F7D3D"},"pathPart":"subscription","restApiId":{"Ref":"ChatbotApiF211B502"}}}},"GET":{"id":"GET","path":"ChatbotBackendProd/ChatbotApi/Default/user/subscription/GET","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.204.0","metadata":[]},"children":{"ApiPermission.ChatbotBackendProdChatbotApiCB97AD5C.GET..user.subscription":{"id":"ApiPermission.ChatbotBackendProdChatbotApiCB97AD5C.GET..user.subscription","path":"ChatbotBackendProd/ChatbotApi/Default/user/subscription/GET/ApiPermission.ChatbotBackendProdChatbotApiCB97AD5C.GET..user.subscription","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["UserManagementFunction2338B082","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:ap-northeast-2:887078546492:",{"Ref":"ChatbotApiF211B502"},"/",{"Ref":"ChatbotApiDeploymentStageprod27096855"},"/GET/user/subscription"]]}}}},"ApiPermission.Test.ChatbotBackendProdChatbotApiCB97AD5C.GET..user.subscription":{"id":"ApiPermission.Test.ChatbotBackendProdChatbotApiCB97AD5C.GET..user.subscription","path":"ChatbotBackendProd/ChatbotApi/Default/user/subscription/GET/ApiPermission.Test.ChatbotBackendProdChatbotApiCB97AD5C.GET..user.subscription","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["UserManagementFunction2338B082","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:ap-northeast-2:887078546492:",{"Ref":"ChatbotApiF211B502"},"/test-invoke-stage/GET/user/subscription"]]}}}},"Resource":{"id":"Resource","path":"ChatbotBackendProd/ChatbotApi/Default/user/subscription/GET/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"CUSTOM","authorizerId":{"Ref":"ChatbotApiAuthorizer801BDC78"},"httpMethod":"GET","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":apigateway:ap-northeast-2:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["UserManagementFunction2338B082","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"resourceId":{"Ref":"ChatbotApiusersubscriptionD8DD4043"},"restApiId":{"Ref":"ChatbotApiF211B502"}}}}}},"PUT":{"id":"PUT","path":"ChatbotBackendProd/ChatbotApi/Default/user/subscription/PUT","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.204.0","metadata":[]},"children":{"ApiPermission.ChatbotBackendProdChatbotApiCB97AD5C.PUT..user.subscription":{"id":"ApiPermission.ChatbotBackendProdChatbotApiCB97AD5C.PUT..user.subscription","path":"ChatbotBackendProd/ChatbotApi/Default/user/subscription/PUT/ApiPermission.ChatbotBackendProdChatbotApiCB97AD5C.PUT..user.subscription","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["UserManagementFunction2338B082","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:ap-northeast-2:887078546492:",{"Ref":"ChatbotApiF211B502"},"/",{"Ref":"ChatbotApiDeploymentStageprod27096855"},"/PUT/user/subscription"]]}}}},"ApiPermission.Test.ChatbotBackendProdChatbotApiCB97AD5C.PUT..user.subscription":{"id":"ApiPermission.Test.ChatbotBackendProdChatbotApiCB97AD5C.PUT..user.subscription","path":"ChatbotBackendProd/ChatbotApi/Default/user/subscription/PUT/ApiPermission.Test.ChatbotBackendProdChatbotApiCB97AD5C.PUT..user.subscription","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["UserManagementFunction2338B082","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:ap-northeast-2:887078546492:",{"Ref":"ChatbotApiF211B502"},"/test-invoke-stage/PUT/user/subscription"]]}}}},"Resource":{"id":"Resource","path":"ChatbotBackendProd/ChatbotApi/Default/user/subscription/PUT/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"CUSTOM","authorizerId":{"Ref":"ChatbotApiAuthorizer801BDC78"},"httpMethod":"PUT","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":apigateway:ap-northeast-2:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["UserManagementFunction2338B082","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"resourceId":{"Ref":"ChatbotApiusersubscriptionD8DD4043"},"restApiId":{"Ref":"ChatbotApiF211B502"}}}}}},"OPTIONS":{"id":"OPTIONS","path":"ChatbotBackendProd/ChatbotApi/Default/user/subscription/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotBackendProd/ChatbotApi/Default/user/subscription/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{\"statusCode\": 200}"},"integrationResponses":[{"statusCode":"200","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'GET,PUT,OPTIONS'"}}]},"methodResponses":[{"statusCode":"200","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true}}],"resourceId":{"Ref":"ChatbotApiusersubscriptionD8DD4043"},"restApiId":{"Ref":"ChatbotApiF211B502"}}}}}}}}}},"prompts":{"id":"prompts","path":"ChatbotBackendProd/ChatbotApi/Default/prompts","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotBackendProd/ChatbotApi/Default/prompts/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Fn::GetAtt":["ChatbotApiF211B502","RootResourceId"]},"pathPart":"prompts","restApiId":{"Ref":"ChatbotApiF211B502"}}}},"POST":{"id":"POST","path":"ChatbotBackendProd/ChatbotApi/Default/prompts/POST","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.204.0","metadata":[]},"children":{"ApiPermission.ChatbotBackendProdChatbotApiCB97AD5C.POST..prompts":{"id":"ApiPermission.ChatbotBackendProdChatbotApiCB97AD5C.POST..prompts","path":"ChatbotBackendProd/ChatbotApi/Default/prompts/POST/ApiPermission.ChatbotBackendProdChatbotApiCB97AD5C.POST..prompts","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["GenerateFunctionD11A7A28","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:ap-northeast-2:887078546492:",{"Ref":"ChatbotApiF211B502"},"/",{"Ref":"ChatbotApiDeploymentStageprod27096855"},"/POST/prompts"]]}}}},"ApiPermission.Test.ChatbotBackendProdChatbotApiCB97AD5C.POST..prompts":{"id":"ApiPermission.Test.ChatbotBackendProdChatbotApiCB97AD5C.POST..prompts","path":"ChatbotBackendProd/ChatbotApi/Default/prompts/POST/ApiPermission.Test.ChatbotBackendProdChatbotApiCB97AD5C.POST..prompts","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["GenerateFunctionD11A7A28","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:ap-northeast-2:887078546492:",{"Ref":"ChatbotApiF211B502"},"/test-invoke-stage/POST/prompts"]]}}}},"Resource":{"id":"Resource","path":"ChatbotBackendProd/ChatbotApi/Default/prompts/POST/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"CUSTOM","authorizerId":{"Ref":"ChatbotApiAuthorizer801BDC78"},"httpMethod":"POST","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":apigateway:ap-northeast-2:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["GenerateFunctionD11A7A28","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"resourceId":{"Ref":"ChatbotApiprompts03168F80"},"restApiId":{"Ref":"ChatbotApiF211B502"}}}}}},"GET":{"id":"GET","path":"ChatbotBackendProd/ChatbotApi/Default/prompts/GET","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.204.0","metadata":[]},"children":{"ApiPermission.ChatbotBackendProdChatbotApiCB97AD5C.GET..prompts":{"id":"ApiPermission.ChatbotBackendProdChatbotApiCB97AD5C.GET..prompts","path":"ChatbotBackendProd/ChatbotApi/Default/prompts/GET/ApiPermission.ChatbotBackendProdChatbotApiCB97AD5C.GET..prompts","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["GenerateFunctionD11A7A28","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:ap-northeast-2:887078546492:",{"Ref":"ChatbotApiF211B502"},"/",{"Ref":"ChatbotApiDeploymentStageprod27096855"},"/GET/prompts"]]}}}},"ApiPermission.Test.ChatbotBackendProdChatbotApiCB97AD5C.GET..prompts":{"id":"ApiPermission.Test.ChatbotBackendProdChatbotApiCB97AD5C.GET..prompts","path":"ChatbotBackendProd/ChatbotApi/Default/prompts/GET/ApiPermission.Test.ChatbotBackendProdChatbotApiCB97AD5C.GET..prompts","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["GenerateFunctionD11A7A28","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:ap-northeast-2:887078546492:",{"Ref":"ChatbotApiF211B502"},"/test-invoke-stage/GET/prompts"]]}}}},"Resource":{"id":"Resource","path":"ChatbotBackendProd/ChatbotApi/Default/prompts/GET/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"CUSTOM","authorizerId":{"Ref":"ChatbotApiAuthorizer801BDC78"},"httpMethod":"GET","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":apigateway:ap-northeast-2:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["GenerateFunctionD11A7A28","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"resourceId":{"Ref":"ChatbotApiprompts03168F80"},"restApiId":{"Ref":"ChatbotApiF211B502"}}}}}},"OPTIONS":{"id":"OPTIONS","path":"ChatbotBackendProd/ChatbotApi/Default/prompts/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotBackendProd/ChatbotApi/Default/prompts/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{\"statusCode\": 200}"},"integrationResponses":[{"statusCode":"200","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'GET,POST,PUT,DELETE,OPTIONS'"}}]},"methodResponses":[{"statusCode":"200","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true}}],"resourceId":{"Ref":"ChatbotApiprompts03168F80"},"restApiId":{"Ref":"ChatbotApiF211B502"}}}}}},"{promptId}":{"id":"{promptId}","path":"ChatbotBackendProd/ChatbotApi/Default/prompts/{promptId}","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotBackendProd/ChatbotApi/Default/prompts/{promptId}/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Ref":"ChatbotApiprompts03168F80"},"pathPart":"{promptId}","restApiId":{"Ref":"ChatbotApiF211B502"}}}},"PUT":{"id":"PUT","path":"ChatbotBackendProd/ChatbotApi/Default/prompts/{promptId}/PUT","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.204.0","metadata":[]},"children":{"ApiPermission.ChatbotBackendProdChatbotApiCB97AD5C.PUT..prompts.{promptId}":{"id":"ApiPermission.ChatbotBackendProdChatbotApiCB97AD5C.PUT..prompts.{promptId}","path":"ChatbotBackendProd/ChatbotApi/Default/prompts/{promptId}/PUT/ApiPermission.ChatbotBackendProdChatbotApiCB97AD5C.PUT..prompts.{promptId}","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["GenerateFunctionD11A7A28","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:ap-northeast-2:887078546492:",{"Ref":"ChatbotApiF211B502"},"/",{"Ref":"ChatbotApiDeploymentStageprod27096855"},"/PUT/prompts/*"]]}}}},"ApiPermission.Test.ChatbotBackendProdChatbotApiCB97AD5C.PUT..prompts.{promptId}":{"id":"ApiPermission.Test.ChatbotBackendProdChatbotApiCB97AD5C.PUT..prompts.{promptId}","path":"ChatbotBackendProd/ChatbotApi/Default/prompts/{promptId}/PUT/ApiPermission.Test.ChatbotBackendProdChatbotApiCB97AD5C.PUT..prompts.{promptId}","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["GenerateFunctionD11A7A28","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:ap-northeast-2:887078546492:",{"Ref":"ChatbotApiF211B502"},"/test-invoke-stage/PUT/prompts/*"]]}}}},"Resource":{"id":"Resource","path":"ChatbotBackendProd/ChatbotApi/Default/prompts/{promptId}/PUT/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"CUSTOM","authorizerId":{"Ref":"ChatbotApiAuthorizer801BDC78"},"httpMethod":"PUT","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":apigateway:ap-northeast-2:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["GenerateFunctionD11A7A28","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"resourceId":{"Ref":"ChatbotApipromptspromptId68497969"},"restApiId":{"Ref":"ChatbotApiF211B502"}}}}}},"DELETE":{"id":"DELETE","path":"ChatbotBackendProd/ChatbotApi/Default/prompts/{promptId}/DELETE","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.204.0","metadata":[]},"children":{"ApiPermission.ChatbotBackendProdChatbotApiCB97AD5C.DELETE..prompts.{promptId}":{"id":"ApiPermission.ChatbotBackendProdChatbotApiCB97AD5C.DELETE..prompts.{promptId}","path":"ChatbotBackendProd/ChatbotApi/Default/prompts/{promptId}/DELETE/ApiPermission.ChatbotBackendProdChatbotApiCB97AD5C.DELETE..prompts.{promptId}","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["GenerateFunctionD11A7A28","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:ap-northeast-2:887078546492:",{"Ref":"ChatbotApiF211B502"},"/",{"Ref":"ChatbotApiDeploymentStageprod27096855"},"/DELETE/prompts/*"]]}}}},"ApiPermission.Test.ChatbotBackendProdChatbotApiCB97AD5C.DELETE..prompts.{promptId}":{"id":"ApiPermission.Test.ChatbotBackendProdChatbotApiCB97AD5C.DELETE..prompts.{promptId}","path":"ChatbotBackendProd/ChatbotApi/Default/prompts/{promptId}/DELETE/ApiPermission.Test.ChatbotBackendProdChatbotApiCB97AD5C.DELETE..prompts.{promptId}","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["GenerateFunctionD11A7A28","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:ap-northeast-2:887078546492:",{"Ref":"ChatbotApiF211B502"},"/test-invoke-stage/DELETE/prompts/*"]]}}}},"Resource":{"id":"Resource","path":"ChatbotBackendProd/ChatbotApi/Default/prompts/{promptId}/DELETE/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"CUSTOM","authorizerId":{"Ref":"ChatbotApiAuthorizer801BDC78"},"httpMethod":"DELETE","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":apigateway:ap-northeast-2:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["GenerateFunctionD11A7A28","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"resourceId":{"Ref":"ChatbotApipromptspromptId68497969"},"restApiId":{"Ref":"ChatbotApiF211B502"}}}}}},"OPTIONS":{"id":"OPTIONS","path":"ChatbotBackendProd/ChatbotApi/Default/prompts/{promptId}/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotBackendProd/ChatbotApi/Default/prompts/{promptId}/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{\"statusCode\": 200}"},"integrationResponses":[{"statusCode":"200","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'GET,POST,PUT,DELETE,OPTIONS'"}}]},"methodResponses":[{"statusCode":"200","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true}}],"resourceId":{"Ref":"ChatbotApipromptspromptId68497969"},"restApiId":{"Ref":"ChatbotApiF211B502"}}}}}},"content":{"id":"content","path":"ChatbotBackendProd/ChatbotApi/Default/prompts/{promptId}/content","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotBackendProd/ChatbotApi/Default/prompts/{promptId}/content/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Ref":"ChatbotApipromptspromptId68497969"},"pathPart":"content","restApiId":{"Ref":"ChatbotApiF211B502"}}}},"GET":{"id":"GET","path":"ChatbotBackendProd/ChatbotApi/Default/prompts/{promptId}/content/GET","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.204.0","metadata":[]},"children":{"ApiPermission.ChatbotBackendProdChatbotApiCB97AD5C.GET..prompts.{promptId}.content":{"id":"ApiPermission.ChatbotBackendProdChatbotApiCB97AD5C.GET..prompts.{promptId}.content","path":"ChatbotBackendProd/ChatbotApi/Default/prompts/{promptId}/content/GET/ApiPermission.ChatbotBackendProdChatbotApiCB97AD5C.GET..prompts.{promptId}.content","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["GenerateFunctionD11A7A28","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:ap-northeast-2:887078546492:",{"Ref":"ChatbotApiF211B502"},"/",{"Ref":"ChatbotApiDeploymentStageprod27096855"},"/GET/prompts/*/content"]]}}}},"ApiPermission.Test.ChatbotBackendProdChatbotApiCB97AD5C.GET..prompts.{promptId}.content":{"id":"ApiPermission.Test.ChatbotBackendProdChatbotApiCB97AD5C.GET..prompts.{promptId}.content","path":"ChatbotBackendProd/ChatbotApi/Default/prompts/{promptId}/content/GET/ApiPermission.Test.ChatbotBackendProdChatbotApiCB97AD5C.GET..prompts.{promptId}.content","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["GenerateFunctionD11A7A28","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:ap-northeast-2:887078546492:",{"Ref":"ChatbotApiF211B502"},"/test-invoke-stage/GET/prompts/*/content"]]}}}},"Resource":{"id":"Resource","path":"ChatbotBackendProd/ChatbotApi/Default/prompts/{promptId}/content/GET/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"CUSTOM","authorizerId":{"Ref":"ChatbotApiAuthorizer801BDC78"},"httpMethod":"GET","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":apigateway:ap-northeast-2:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["GenerateFunctionD11A7A28","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"resourceId":{"Ref":"ChatbotApipromptspromptIdcontent206EE1A8"},"restApiId":{"Ref":"ChatbotApiF211B502"}}}}}},"OPTIONS":{"id":"OPTIONS","path":"ChatbotBackendProd/ChatbotApi/Default/prompts/{promptId}/content/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotBackendProd/ChatbotApi/Default/prompts/{promptId}/content/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{\"statusCode\": 200}"},"integrationResponses":[{"statusCode":"200","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'GET,OPTIONS'"}}]},"methodResponses":[{"statusCode":"200","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true}}],"resourceId":{"Ref":"ChatbotApipromptspromptIdcontent206EE1A8"},"restApiId":{"Ref":"ChatbotApiF211B502"}}}}}}}}}}}},"generate":{"id":"generate","path":"ChatbotBackendProd/ChatbotApi/Default/generate","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotBackendProd/ChatbotApi/Default/generate/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Fn::GetAtt":["ChatbotApiF211B502","RootResourceId"]},"pathPart":"generate","restApiId":{"Ref":"ChatbotApiF211B502"}}}},"POST":{"id":"POST","path":"ChatbotBackendProd/ChatbotApi/Default/generate/POST","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.204.0","metadata":[]},"children":{"ApiPermission.ChatbotBackendProdChatbotApiCB97AD5C.POST..generate":{"id":"ApiPermission.ChatbotBackendProdChatbotApiCB97AD5C.POST..generate","path":"ChatbotBackendProd/ChatbotApi/Default/generate/POST/ApiPermission.ChatbotBackendProdChatbotApiCB97AD5C.POST..generate","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["GenerateFunctionD11A7A28","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:ap-northeast-2:887078546492:",{"Ref":"ChatbotApiF211B502"},"/",{"Ref":"ChatbotApiDeploymentStageprod27096855"},"/POST/generate"]]}}}},"ApiPermission.Test.ChatbotBackendProdChatbotApiCB97AD5C.POST..generate":{"id":"ApiPermission.Test.ChatbotBackendProdChatbotApiCB97AD5C.POST..generate","path":"ChatbotBackendProd/ChatbotApi/Default/generate/POST/ApiPermission.Test.ChatbotBackendProdChatbotApiCB97AD5C.POST..generate","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["GenerateFunctionD11A7A28","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:ap-northeast-2:887078546492:",{"Ref":"ChatbotApiF211B502"},"/test-invoke-stage/POST/generate"]]}}}},"Resource":{"id":"Resource","path":"ChatbotBackendProd/ChatbotApi/Default/generate/POST/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"NONE","httpMethod":"POST","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":apigateway:ap-northeast-2:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["GenerateFunctionD11A7A28","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"resourceId":{"Ref":"ChatbotApigenerate2D00A9C0"},"restApiId":{"Ref":"ChatbotApiF211B502"}}}}}},"OPTIONS":{"id":"OPTIONS","path":"ChatbotBackendProd/ChatbotApi/Default/generate/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotBackendProd/ChatbotApi/Default/generate/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{\"statusCode\": 200}"},"integrationResponses":[{"statusCode":"200","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'POST,OPTIONS'"}}]},"methodResponses":[{"statusCode":"200","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true}}],"resourceId":{"Ref":"ChatbotApigenerate2D00A9C0"},"restApiId":{"Ref":"ChatbotApiF211B502"}}}}}},"stream":{"id":"stream","path":"ChatbotBackendProd/ChatbotApi/Default/generate/stream","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotBackendProd/ChatbotApi/Default/generate/stream/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Ref":"ChatbotApigenerate2D00A9C0"},"pathPart":"stream","restApiId":{"Ref":"ChatbotApiF211B502"}}}},"POST":{"id":"POST","path":"ChatbotBackendProd/ChatbotApi/Default/generate/stream/POST","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.204.0","metadata":[]},"children":{"ApiPermission.ChatbotBackendProdChatbotApiCB97AD5C.POST..generate.stream":{"id":"ApiPermission.ChatbotBackendProdChatbotApiCB97AD5C.POST..generate.stream","path":"ChatbotBackendProd/ChatbotApi/Default/generate/stream/POST/ApiPermission.ChatbotBackendProdChatbotApiCB97AD5C.POST..generate.stream","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["GenerateFunctionD11A7A28","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:ap-northeast-2:887078546492:",{"Ref":"ChatbotApiF211B502"},"/",{"Ref":"ChatbotApiDeploymentStageprod27096855"},"/POST/generate/stream"]]}}}},"ApiPermission.Test.ChatbotBackendProdChatbotApiCB97AD5C.POST..generate.stream":{"id":"ApiPermission.Test.ChatbotBackendProdChatbotApiCB97AD5C.POST..generate.stream","path":"ChatbotBackendProd/ChatbotApi/Default/generate/stream/POST/ApiPermission.Test.ChatbotBackendProdChatbotApiCB97AD5C.POST..generate.stream","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["GenerateFunctionD11A7A28","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:ap-northeast-2:887078546492:",{"Ref":"ChatbotApiF211B502"},"/test-invoke-stage/POST/generate/stream"]]}}}},"Resource":{"id":"Resource","path":"ChatbotBackendProd/ChatbotApi/Default/generate/stream/POST/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"NONE","httpMethod":"POST","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":apigateway:ap-northeast-2:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["GenerateFunctionD11A7A28","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"resourceId":{"Ref":"ChatbotApigeneratestream540C4A3C"},"restApiId":{"Ref":"ChatbotApiF211B502"}}}}}},"OPTIONS":{"id":"OPTIONS","path":"ChatbotBackendProd/ChatbotApi/Default/generate/stream/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotBackendProd/ChatbotApi/Default/generate/stream/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{\"statusCode\": 200}"},"integrationResponses":[{"statusCode":"200","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'OPTIONS,POST'"}}]},"methodResponses":[{"statusCode":"200","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true}}],"resourceId":{"Ref":"ChatbotApigeneratestream540C4A3C"},"restApiId":{"Ref":"ChatbotApiF211B502"}}}}}}}}}},"conversations":{"id":"conversations","path":"ChatbotBackendProd/ChatbotApi/Default/conversations","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotBackendProd/ChatbotApi/Default/conversations/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Fn::GetAtt":["ChatbotApiF211B502","RootResourceId"]},"pathPart":"conversations","restApiId":{"Ref":"ChatbotApiF211B502"}}}},"GET":{"id":"GET","path":"ChatbotBackendProd/ChatbotApi/Default/conversations/GET","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.204.0","metadata":[]},"children":{"ApiPermission.ChatbotBackendProdChatbotApiCB97AD5C.GET..conversations":{"id":"ApiPermission.ChatbotBackendProdChatbotApiCB97AD5C.GET..conversations","path":"ChatbotBackendProd/ChatbotApi/Default/conversations/GET/ApiPermission.ChatbotBackendProdChatbotApiCB97AD5C.GET..conversations","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::ImportValue":"ChatbotConversationStackProd:ExportsOutputFnGetAttConversationFunction7337ABEAArnB4BCD543"},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:ap-northeast-2:887078546492:",{"Ref":"ChatbotApiF211B502"},"/",{"Ref":"ChatbotApiDeploymentStageprod27096855"},"/GET/conversations"]]}}}},"ApiPermission.Test.ChatbotBackendProdChatbotApiCB97AD5C.GET..conversations":{"id":"ApiPermission.Test.ChatbotBackendProdChatbotApiCB97AD5C.GET..conversations","path":"ChatbotBackendProd/ChatbotApi/Default/conversations/GET/ApiPermission.Test.ChatbotBackendProdChatbotApiCB97AD5C.GET..conversations","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::ImportValue":"ChatbotConversationStackProd:ExportsOutputFnGetAttConversationFunction7337ABEAArnB4BCD543"},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:ap-northeast-2:887078546492:",{"Ref":"ChatbotApiF211B502"},"/test-invoke-stage/GET/conversations"]]}}}},"Resource":{"id":"Resource","path":"ChatbotBackendProd/ChatbotApi/Default/conversations/GET/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"CUSTOM","authorizerId":{"Ref":"ChatbotApiAuthorizer801BDC78"},"httpMethod":"GET","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":apigateway:ap-northeast-2:lambda:path/2015-03-31/functions/",{"Fn::ImportValue":"ChatbotConversationStackProd:ExportsOutputFnGetAttConversationFunction7337ABEAArnB4BCD543"},"/invocations"]]},"integrationHttpMethod":"POST"},"resourceId":{"Ref":"ChatbotApiconversationsBC964F06"},"restApiId":{"Ref":"ChatbotApiF211B502"}}}}}},"POST":{"id":"POST","path":"ChatbotBackendProd/ChatbotApi/Default/conversations/POST","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.204.0","metadata":[]},"children":{"ApiPermission.ChatbotBackendProdChatbotApiCB97AD5C.POST..conversations":{"id":"ApiPermission.ChatbotBackendProdChatbotApiCB97AD5C.POST..conversations","path":"ChatbotBackendProd/ChatbotApi/Default/conversations/POST/ApiPermission.ChatbotBackendProdChatbotApiCB97AD5C.POST..conversations","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::ImportValue":"ChatbotConversationStackProd:ExportsOutputFnGetAttConversationFunction7337ABEAArnB4BCD543"},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:ap-northeast-2:887078546492:",{"Ref":"ChatbotApiF211B502"},"/",{"Ref":"ChatbotApiDeploymentStageprod27096855"},"/POST/conversations"]]}}}},"ApiPermission.Test.ChatbotBackendProdChatbotApiCB97AD5C.POST..conversations":{"id":"ApiPermission.Test.ChatbotBackendProdChatbotApiCB97AD5C.POST..conversations","path":"ChatbotBackendProd/ChatbotApi/Default/conversations/POST/ApiPermission.Test.ChatbotBackendProdChatbotApiCB97AD5C.POST..conversations","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::ImportValue":"ChatbotConversationStackProd:ExportsOutputFnGetAttConversationFunction7337ABEAArnB4BCD543"},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:ap-northeast-2:887078546492:",{"Ref":"ChatbotApiF211B502"},"/test-invoke-stage/POST/conversations"]]}}}},"Resource":{"id":"Resource","path":"ChatbotBackendProd/ChatbotApi/Default/conversations/POST/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"CUSTOM","authorizerId":{"Ref":"ChatbotApiAuthorizer801BDC78"},"httpMethod":"POST","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":apigateway:ap-northeast-2:lambda:path/2015-03-31/functions/",{"Fn::ImportValue":"ChatbotConversationStackProd:ExportsOutputFnGetAttConversationFunction7337ABEAArnB4BCD543"},"/invocations"]]},"integrationHttpMethod":"POST"},"resourceId":{"Ref":"ChatbotApiconversationsBC964F06"},"restApiId":{"Ref":"ChatbotApiF211B502"}}}}}},"{id}":{"id":"{id}","path":"ChatbotBackendProd/ChatbotApi/Default/conversations/{id}","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotBackendProd/ChatbotApi/Default/conversations/{id}/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Ref":"ChatbotApiconversationsBC964F06"},"pathPart":"{id}","restApiId":{"Ref":"ChatbotApiF211B502"}}}},"DELETE":{"id":"DELETE","path":"ChatbotBackendProd/ChatbotApi/Default/conversations/{id}/DELETE","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.204.0","metadata":[]},"children":{"ApiPermission.ChatbotBackendProdChatbotApiCB97AD5C.DELETE..conversations.{id}":{"id":"ApiPermission.ChatbotBackendProdChatbotApiCB97AD5C.DELETE..conversations.{id}","path":"ChatbotBackendProd/ChatbotApi/Default/conversations/{id}/DELETE/ApiPermission.ChatbotBackendProdChatbotApiCB97AD5C.DELETE..conversations.{id}","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::ImportValue":"ChatbotConversationStackProd:ExportsOutputFnGetAttConversationFunction7337ABEAArnB4BCD543"},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:ap-northeast-2:887078546492:",{"Ref":"ChatbotApiF211B502"},"/",{"Ref":"ChatbotApiDeploymentStageprod27096855"},"/DELETE/conversations/*"]]}}}},"ApiPermission.Test.ChatbotBackendProdChatbotApiCB97AD5C.DELETE..conversations.{id}":{"id":"ApiPermission.Test.ChatbotBackendProdChatbotApiCB97AD5C.DELETE..conversations.{id}","path":"ChatbotBackendProd/ChatbotApi/Default/conversations/{id}/DELETE/ApiPermission.Test.ChatbotBackendProdChatbotApiCB97AD5C.DELETE..conversations.{id}","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::ImportValue":"ChatbotConversationStackProd:ExportsOutputFnGetAttConversationFunction7337ABEAArnB4BCD543"},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:ap-northeast-2:887078546492:",{"Ref":"ChatbotApiF211B502"},"/test-invoke-stage/DELETE/conversations/*"]]}}}},"Resource":{"id":"Resource","path":"ChatbotBackendProd/ChatbotApi/Default/conversations/{id}/DELETE/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"CUSTOM","authorizerId":{"Ref":"ChatbotApiAuthorizer801BDC78"},"httpMethod":"DELETE","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":apigateway:ap-northeast-2:lambda:path/2015-03-31/functions/",{"Fn::ImportValue":"ChatbotConversationStackProd:ExportsOutputFnGetAttConversationFunction7337ABEAArnB4BCD543"},"/invocations"]]},"integrationHttpMethod":"POST"},"resourceId":{"Ref":"ChatbotApiconversationsid4B5FBE13"},"restApiId":{"Ref":"ChatbotApiF211B502"}}}}}},"PUT":{"id":"PUT","path":"ChatbotBackendProd/ChatbotApi/Default/conversations/{id}/PUT","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.204.0","metadata":[]},"children":{"ApiPermission.ChatbotBackendProdChatbotApiCB97AD5C.PUT..conversations.{id}":{"id":"ApiPermission.ChatbotBackendProdChatbotApiCB97AD5C.PUT..conversations.{id}","path":"ChatbotBackendProd/ChatbotApi/Default/conversations/{id}/PUT/ApiPermission.ChatbotBackendProdChatbotApiCB97AD5C.PUT..conversations.{id}","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::ImportValue":"ChatbotConversationStackProd:ExportsOutputFnGetAttConversationFunction7337ABEAArnB4BCD543"},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:ap-northeast-2:887078546492:",{"Ref":"ChatbotApiF211B502"},"/",{"Ref":"ChatbotApiDeploymentStageprod27096855"},"/PUT/conversations/*"]]}}}},"ApiPermission.Test.ChatbotBackendProdChatbotApiCB97AD5C.PUT..conversations.{id}":{"id":"ApiPermission.Test.ChatbotBackendProdChatbotApiCB97AD5C.PUT..conversations.{id}","path":"ChatbotBackendProd/ChatbotApi/Default/conversations/{id}/PUT/ApiPermission.Test.ChatbotBackendProdChatbotApiCB97AD5C.PUT..conversations.{id}","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::ImportValue":"ChatbotConversationStackProd:ExportsOutputFnGetAttConversationFunction7337ABEAArnB4BCD543"},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:ap-northeast-2:887078546492:",{"Ref":"ChatbotApiF211B502"},"/test-invoke-stage/PUT/conversations/*"]]}}}},"Resource":{"id":"Resource","path":"ChatbotBackendProd/ChatbotApi/Default/conversations/{id}/PUT/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"CUSTOM","authorizerId":{"Ref":"ChatbotApiAuthorizer801BDC78"},"httpMethod":"PUT","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":apigateway:ap-northeast-2:lambda:path/2015-03-31/functions/",{"Fn::ImportValue":"ChatbotConversationStackProd:ExportsOutputFnGetAttConversationFunction7337ABEAArnB4BCD543"},"/invocations"]]},"integrationHttpMethod":"POST"},"resourceId":{"Ref":"ChatbotApiconversationsid4B5FBE13"},"restApiId":{"Ref":"ChatbotApiF211B502"}}}}}},"OPTIONS":{"id":"OPTIONS","path":"ChatbotBackendProd/ChatbotApi/Default/conversations/{id}/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotBackendProd/ChatbotApi/Default/conversations/{id}/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{\"statusCode\": 200}"},"integrationResponses":[{"statusCode":"200","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token'","method.response.header.Access-Control-Allow-Methods":"'DELETE,PUT,OPTIONS'","method.response.header.Access-Control-Allow-Origin":"'*'"}}]},"methodResponses":[{"statusCode":"200","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Methods":true,"method.response.header.Access-Control-Allow-Origin":true}}],"resourceId":{"Ref":"ChatbotApiconversationsid4B5FBE13"},"restApiId":{"Ref":"ChatbotApiF211B502"}}}}}}}},"OPTIONS":{"id":"OPTIONS","path":"ChatbotBackendProd/ChatbotApi/Default/conversations/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotBackendProd/ChatbotApi/Default/conversations/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{\"statusCode\": 200}"},"integrationResponses":[{"statusCode":"200","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token'","method.response.header.Access-Control-Allow-Methods":"'GET,POST,OPTIONS'","method.response.header.Access-Control-Allow-Origin":"'*'"}}]},"methodResponses":[{"statusCode":"200","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Methods":true,"method.response.header.Access-Control-Allow-Origin":true}}],"resourceId":{"Ref":"ChatbotApiconversationsBC964F06"},"restApiId":{"Ref":"ChatbotApiF211B502"}}}}}}}},"messages":{"id":"messages","path":"ChatbotBackendProd/ChatbotApi/Default/messages","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotBackendProd/ChatbotApi/Default/messages/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Fn::GetAtt":["ChatbotApiF211B502","RootResourceId"]},"pathPart":"messages","restApiId":{"Ref":"ChatbotApiF211B502"}}}},"GET":{"id":"GET","path":"ChatbotBackendProd/ChatbotApi/Default/messages/GET","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.204.0","metadata":[]},"children":{"ApiPermission.ChatbotBackendProdChatbotApiCB97AD5C.GET..messages":{"id":"ApiPermission.ChatbotBackendProdChatbotApiCB97AD5C.GET..messages","path":"ChatbotBackendProd/ChatbotApi/Default/messages/GET/ApiPermission.ChatbotBackendProdChatbotApiCB97AD5C.GET..messages","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::ImportValue":"ChatbotConversationStackProd:ExportsOutputFnGetAttMessageFunction5E234045Arn6574E935"},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:ap-northeast-2:887078546492:",{"Ref":"ChatbotApiF211B502"},"/",{"Ref":"ChatbotApiDeploymentStageprod27096855"},"/GET/messages"]]}}}},"ApiPermission.Test.ChatbotBackendProdChatbotApiCB97AD5C.GET..messages":{"id":"ApiPermission.Test.ChatbotBackendProdChatbotApiCB97AD5C.GET..messages","path":"ChatbotBackendProd/ChatbotApi/Default/messages/GET/ApiPermission.Test.ChatbotBackendProdChatbotApiCB97AD5C.GET..messages","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::ImportValue":"ChatbotConversationStackProd:ExportsOutputFnGetAttMessageFunction5E234045Arn6574E935"},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:ap-northeast-2:887078546492:",{"Ref":"ChatbotApiF211B502"},"/test-invoke-stage/GET/messages"]]}}}},"Resource":{"id":"Resource","path":"ChatbotBackendProd/ChatbotApi/Default/messages/GET/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"CUSTOM","authorizerId":{"Ref":"ChatbotApiAuthorizer801BDC78"},"httpMethod":"GET","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":apigateway:ap-northeast-2:lambda:path/2015-03-31/functions/",{"Fn::ImportValue":"ChatbotConversationStackProd:ExportsOutputFnGetAttMessageFunction5E234045Arn6574E935"},"/invocations"]]},"integrationHttpMethod":"POST"},"resourceId":{"Ref":"ChatbotApimessages59D3C7B0"},"restApiId":{"Ref":"ChatbotApiF211B502"}}}}}},"OPTIONS":{"id":"OPTIONS","path":"ChatbotBackendProd/ChatbotApi/Default/messages/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotBackendProd/ChatbotApi/Default/messages/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{\"statusCode\": 200}"},"integrationResponses":[{"statusCode":"200","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token'","method.response.header.Access-Control-Allow-Methods":"'GET,OPTIONS'","method.response.header.Access-Control-Allow-Origin":"'*'"}}]},"methodResponses":[{"statusCode":"200","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Methods":true,"method.response.header.Access-Control-Allow-Origin":true}}],"resourceId":{"Ref":"ChatbotApimessages59D3C7B0"},"restApiId":{"Ref":"ChatbotApiF211B502"}}}}}}}}}},"cors-4xx":{"id":"cors-4xx","path":"ChatbotBackendProd/ChatbotApi/cors-4xx","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.GatewayResponse","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotBackendProd/ChatbotApi/cors-4xx/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnGatewayResponse","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::GatewayResponse","aws:cdk:cloudformation:props":{"responseParameters":{"gatewayresponse.header.method.response.header.Access-Control-Allow-Origin":"'*'","gatewayresponse.header.method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token'","gatewayresponse.header.method.response.header.Access-Control-Allow-Methods":"'GET,POST,PUT,DELETE,OPTIONS'"},"responseType":"DEFAULT_4XX","restApiId":{"Ref":"ChatbotApiF211B502"}}}}}},"cors-5xx":{"id":"cors-5xx","path":"ChatbotBackendProd/ChatbotApi/cors-5xx","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.GatewayResponse","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotBackendProd/ChatbotApi/cors-5xx/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnGatewayResponse","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::GatewayResponse","aws:cdk:cloudformation:props":{"responseParameters":{"gatewayresponse.header.method.response.header.Access-Control-Allow-Origin":"'*'","gatewayresponse.header.method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token'","gatewayresponse.header.method.response.header.Access-Control-Allow-Methods":"'GET,POST,PUT,DELETE,OPTIONS'"},"responseType":"DEFAULT_5XX","restApiId":{"Ref":"ChatbotApiF211B502"}}}}}},"cors-unauthorized":{"id":"cors-unauthorized","path":"ChatbotBackendProd/ChatbotApi/cors-unauthorized","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.GatewayResponse","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotBackendProd/ChatbotApi/cors-unauthorized/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnGatewayResponse","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::GatewayResponse","aws:cdk:cloudformation:props":{"responseParameters":{"gatewayresponse.header.method.response.header.Access-Control-Allow-Origin":"'*'","gatewayresponse.header.method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token'","gatewayresponse.header.method.response.header.Access-Control-Allow-Methods":"'GET,POST,PUT,DELETE,OPTIONS'"},"responseType":"UNAUTHORIZED","restApiId":{"Ref":"ChatbotApiF211B502"}}}}}}}},"ChatbotApiAuthorizer":{"id":"ChatbotApiAuthorizer","path":"ChatbotBackendProd/ChatbotApiAuthorizer","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.RequestAuthorizer","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotBackendProd/ChatbotApiAuthorizer/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnAuthorizer","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Authorizer","aws:cdk:cloudformation:props":{"authorizerResultTtlInSeconds":300,"authorizerUri":{"Fn::Join":["",["arn:",{"Fn::Select":[1,{"Fn::Split":[":",{"Fn::GetAtt":["JWTAuthorizerFunction9F386173","Arn"]}]}]},":apigateway:",{"Fn::Select":[3,{"Fn::Split":[":",{"Fn::GetAtt":["JWTAuthorizerFunction9F386173","Arn"]}]}]},":lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["JWTAuthorizerFunction9F386173","Arn"]},"/invocations"]]},"identitySource":"method.request.header.Authorization","name":"chatbot-jwt-authorizer","restApiId":{"Ref":"ChatbotApiF211B502"},"type":"REQUEST"}}}}},"WebSocketConnectionsTable":{"id":"WebSocketConnectionsTable","path":"ChatbotBackendProd/WebSocketConnectionsTable","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.Table","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotBackendProd/WebSocketConnectionsTable/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.CfnTable","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::DynamoDB::Table","aws:cdk:cloudformation:props":{"attributeDefinitions":[{"attributeName":"connectionId","attributeType":"S"}],"billingMode":"PAY_PER_REQUEST","keySchema":[{"attributeName":"connectionId","keyType":"HASH"}],"tableName":"chatbot-websocket-connections","timeToLiveSpecification":{"attributeName":"ttl","enabled":true}}}},"ScalingRole":{"id":"ScalingRole","path":"ChatbotBackendProd/WebSocketConnectionsTable/ScalingRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.204.0","metadata":[]}}}},"WebSocketLambdaRole":{"id":"WebSocketLambdaRole","path":"ChatbotBackendProd/WebSocketLambdaRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.204.0","metadata":[]},"children":{"ImportWebSocketLambdaRole":{"id":"ImportWebSocketLambdaRole","path":"ChatbotBackendProd/WebSocketLambdaRole/ImportWebSocketLambdaRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.204.0","metadata":[]}},"Resource":{"id":"Resource","path":"ChatbotBackendProd/WebSocketLambdaRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]},{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/AmazonBedrockFullAccess"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"ChatbotBackendProd/WebSocketLambdaRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotBackendProd/WebSocketLambdaRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["execute-api:ManageConnections","dynamodb:PutItem","dynamodb:DeleteItem","dynamodb:GetItem","dynamodb:Query","dynamodb:Scan","dynamodb:BatchWriteItem","dynamodb:UpdateItem","s3:GetObject","bedrock:InvokeModel","bedrock:InvokeModelWithResponseStream","bedrock:Retrieve","bedrock-agent:Retrieve"],"Effect":"Allow","Resource":["arn:aws:execute-api:ap-northeast-2:887078546492:*/*/*",{"Fn::GetAtt":["WebSocketConnectionsTable7F0028CC","Arn"]},{"Fn::GetAtt":["PromptMetaTable0A0B3876","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["PromptBucket1668FD1C","Arn"]},"/*"]]},"arn:aws:dynamodb:ap-northeast-2:887078546492:table/Conversations","arn:aws:dynamodb:ap-northeast-2:887078546492:table/Messages","arn:aws:dynamodb:ap-northeast-2:887078546492:table/ChatbotConversations","arn:aws:dynamodb:ap-northeast-2:887078546492:table/ChatbotMessages","arn:aws:dynamodb:ap-northeast-2:887078546492:table/perplexity-search-cache","arn:aws:bedrock:ap-northeast-2::foundation-model/*"]}],"Version":"2012-10-17"},"policyName":"WebSocketLambdaRoleDefaultPolicyF19D90C5","roles":[{"Ref":"WebSocketLambdaRole0DF09B59"}]}}}}}}},"WebSocketConnectFunction":{"id":"WebSocketConnectFunction","path":"ChatbotBackendProd/WebSocketConnectFunction","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.204.0","metadata":[]},"children":{"Code":{"id":"Code","path":"ChatbotBackendProd/WebSocketConnectFunction/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.204.0"},"children":{"Stage":{"id":"Stage","path":"ChatbotBackendProd/WebSocketConnectFunction/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.204.0"}},"AssetBucket":{"id":"AssetBucket","path":"ChatbotBackendProd/WebSocketConnectFunction/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.204.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"ChatbotBackendProd/WebSocketConnectFunction/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-887078546492-ap-northeast-2","s3Key":"a14fee87914f69dd8d42c5493f9ba098c50b316785d36eab2fcb7e0c7dd3a297.zip"},"environment":{"variables":{"CONNECTIONS_TABLE":{"Ref":"WebSocketConnectionsTable7F0028CC"},"REGION":"ap-northeast-2"}},"handler":"connect.handler","memorySize":256,"role":{"Fn::GetAtt":["WebSocketLambdaRole0DF09B59","Arn"]},"runtime":"python3.11","timeout":60}}}}},"WebSocketDisconnectFunction":{"id":"WebSocketDisconnectFunction","path":"ChatbotBackendProd/WebSocketDisconnectFunction","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.204.0","metadata":[]},"children":{"Code":{"id":"Code","path":"ChatbotBackendProd/WebSocketDisconnectFunction/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.204.0"},"children":{"Stage":{"id":"Stage","path":"ChatbotBackendProd/WebSocketDisconnectFunction/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.204.0"}},"AssetBucket":{"id":"AssetBucket","path":"ChatbotBackendProd/WebSocketDisconnectFunction/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.204.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"ChatbotBackendProd/WebSocketDisconnectFunction/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-887078546492-ap-northeast-2","s3Key":"a14fee87914f69dd8d42c5493f9ba098c50b316785d36eab2fcb7e0c7dd3a297.zip"},"environment":{"variables":{"CONNECTIONS_TABLE":{"Ref":"WebSocketConnectionsTable7F0028CC"},"REGION":"ap-northeast-2"}},"handler":"disconnect.handler","memorySize":256,"role":{"Fn::GetAtt":["WebSocketLambdaRole0DF09B59","Arn"]},"runtime":"python3.11","timeout":60}}}}},"ChatbotWebSocketApi":{"id":"ChatbotWebSocketApi","path":"ChatbotBackendProd/ChatbotWebSocketApi","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.WebSocketApi","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotBackendProd/ChatbotWebSocketApi/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.CfnApi","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGatewayV2::Api","aws:cdk:cloudformation:props":{"description":"실시간 스트리밍을 위한 WebSocket API","name":"chatbot-websocket-api","protocolType":"WEBSOCKET","routeSelectionExpression":"$request.body.action"}}},"$connect-Route":{"id":"$connect-Route","path":"ChatbotBackendProd/ChatbotWebSocketApi/$connect-Route","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.WebSocketRoute","version":"2.204.0","metadata":[]},"children":{"ConnectIntegration-Permission":{"id":"ConnectIntegration-Permission","path":"ChatbotBackendProd/ChatbotWebSocketApi/$connect-Route/ConnectIntegration-Permission","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["WebSocketConnectFunction72183AC0","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:ap-northeast-2:887078546492:",{"Ref":"ChatbotWebSocketApi72B63158"},"/*$connect"]]}}}},"ConnectIntegration":{"id":"ConnectIntegration","path":"ChatbotBackendProd/ChatbotWebSocketApi/$connect-Route/ConnectIntegration","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.WebSocketIntegration","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotBackendProd/ChatbotWebSocketApi/$connect-Route/ConnectIntegration/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.CfnIntegration","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGatewayV2::Integration","aws:cdk:cloudformation:props":{"apiId":{"Ref":"ChatbotWebSocketApi72B63158"},"integrationType":"AWS_PROXY","integrationUri":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":apigateway:ap-northeast-2:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["WebSocketConnectFunction72183AC0","Arn"]},"/invocations"]]}}}}}},"Resource":{"id":"Resource","path":"ChatbotBackendProd/ChatbotWebSocketApi/$connect-Route/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.CfnRoute","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGatewayV2::Route","aws:cdk:cloudformation:props":{"apiId":{"Ref":"ChatbotWebSocketApi72B63158"},"authorizationType":"NONE","routeKey":"$connect","target":{"Fn::Join":["",["integrations/",{"Ref":"ChatbotWebSocketApiconnectRouteConnectIntegrationB3D8427B"}]]}}}}}},"$disconnect-Route":{"id":"$disconnect-Route","path":"ChatbotBackendProd/ChatbotWebSocketApi/$disconnect-Route","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.WebSocketRoute","version":"2.204.0","metadata":[]},"children":{"DisconnectIntegration-Permission":{"id":"DisconnectIntegration-Permission","path":"ChatbotBackendProd/ChatbotWebSocketApi/$disconnect-Route/DisconnectIntegration-Permission","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["WebSocketDisconnectFunction189772FC","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:ap-northeast-2:887078546492:",{"Ref":"ChatbotWebSocketApi72B63158"},"/*$disconnect"]]}}}},"DisconnectIntegration":{"id":"DisconnectIntegration","path":"ChatbotBackendProd/ChatbotWebSocketApi/$disconnect-Route/DisconnectIntegration","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.WebSocketIntegration","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotBackendProd/ChatbotWebSocketApi/$disconnect-Route/DisconnectIntegration/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.CfnIntegration","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGatewayV2::Integration","aws:cdk:cloudformation:props":{"apiId":{"Ref":"ChatbotWebSocketApi72B63158"},"integrationType":"AWS_PROXY","integrationUri":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":apigateway:ap-northeast-2:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["WebSocketDisconnectFunction189772FC","Arn"]},"/invocations"]]}}}}}},"Resource":{"id":"Resource","path":"ChatbotBackendProd/ChatbotWebSocketApi/$disconnect-Route/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.CfnRoute","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGatewayV2::Route","aws:cdk:cloudformation:props":{"apiId":{"Ref":"ChatbotWebSocketApi72B63158"},"authorizationType":"NONE","routeKey":"$disconnect","target":{"Fn::Join":["",["integrations/",{"Ref":"ChatbotWebSocketApidisconnectRouteDisconnectIntegrationC271F4AD"}]]}}}}}},"stream-Route":{"id":"stream-Route","path":"ChatbotBackendProd/ChatbotWebSocketApi/stream-Route","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.WebSocketRoute","version":"2.204.0","metadata":[]},"children":{"StreamIntegration-Permission":{"id":"StreamIntegration-Permission","path":"ChatbotBackendProd/ChatbotWebSocketApi/stream-Route/StreamIntegration-Permission","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["WebSocketStreamFunctionB192D3D1","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:ap-northeast-2:887078546492:",{"Ref":"ChatbotWebSocketApi72B63158"},"/*stream"]]}}}},"StreamIntegration":{"id":"StreamIntegration","path":"ChatbotBackendProd/ChatbotWebSocketApi/stream-Route/StreamIntegration","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.WebSocketIntegration","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotBackendProd/ChatbotWebSocketApi/stream-Route/StreamIntegration/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.CfnIntegration","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGatewayV2::Integration","aws:cdk:cloudformation:props":{"apiId":{"Ref":"ChatbotWebSocketApi72B63158"},"integrationType":"AWS_PROXY","integrationUri":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":apigateway:ap-northeast-2:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["WebSocketStreamFunctionB192D3D1","Arn"]},"/invocations"]]}}}}}},"Resource":{"id":"Resource","path":"ChatbotBackendProd/ChatbotWebSocketApi/stream-Route/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.CfnRoute","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGatewayV2::Route","aws:cdk:cloudformation:props":{"apiId":{"Ref":"ChatbotWebSocketApi72B63158"},"authorizationType":"NONE","routeKey":"stream","target":{"Fn::Join":["",["integrations/",{"Ref":"ChatbotWebSocketApistreamRouteStreamIntegrationD379831A"}]]}}}}}}}},"WebSocketStreamFunction":{"id":"WebSocketStreamFunction","path":"ChatbotBackendProd/WebSocketStreamFunction","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.204.0","metadata":[]},"children":{"Code":{"id":"Code","path":"ChatbotBackendProd/WebSocketStreamFunction/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.204.0"},"children":{"Stage":{"id":"Stage","path":"ChatbotBackendProd/WebSocketStreamFunction/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.204.0"}},"AssetBucket":{"id":"AssetBucket","path":"ChatbotBackendProd/WebSocketStreamFunction/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.204.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"ChatbotBackendProd/WebSocketStreamFunction/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-887078546492-ap-northeast-2","s3Key":"a14fee87914f69dd8d42c5493f9ba098c50b316785d36eab2fcb7e0c7dd3a297.zip"},"environment":{"variables":{"CONNECTIONS_TABLE":{"Ref":"WebSocketConnectionsTable7F0028CC"},"PROMPT_META_TABLE":{"Ref":"PromptMetaTable0A0B3876"},"PROMPT_BUCKET":{"Ref":"PromptBucket1668FD1C"},"REGION":"ap-northeast-2","CONVERSATIONS_TABLE":"ChatbotConversations","MESSAGES_TABLE":"ChatbotMessages","PERPLEXITY_API_KEY":"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","API_GATEWAY_DOMAIN":{"Fn::GetAtt":["ChatbotWebSocketApi72B63158","ApiEndpoint"]},"STAGE":"prod","KNOWLEDGE_BASE_ID":"PGQV3JXPET","S3_BUCKET_NAME":"seoul-economic-news-data-2025","NEWS_BUCKET":"seoul-economic-news-data-2025"}},"handler":"stream.handler","layers":[{"Ref":"NewsProcessingLayer63A6C836"}],"memorySize":3008,"role":{"Fn::GetAtt":["WebSocketLambdaRole0DF09B59","Arn"]},"runtime":"python3.11","timeout":900}}}}},"WebSocketStage":{"id":"WebSocketStage","path":"ChatbotBackendProd/WebSocketStage","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.WebSocketStage","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotBackendProd/WebSocketStage/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.CfnStage","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGatewayV2::Stage","aws:cdk:cloudformation:props":{"apiId":{"Ref":"ChatbotWebSocketApi72B63158"},"autoDeploy":true,"stageName":"prod"}}}}},"WebSocketApiUrl":{"id":"WebSocketApiUrl","path":"ChatbotBackendProd/WebSocketApiUrl","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.204.0"}},"GenerateErrorAlarm":{"id":"GenerateErrorAlarm","path":"ChatbotBackendProd/GenerateErrorAlarm","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.Alarm","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotBackendProd/GenerateErrorAlarm/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.CfnAlarm","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CloudWatch::Alarm","aws:cdk:cloudformation:props":{"alarmDescription":"Generate Lambda 함수 오류율이 높습니다","comparisonOperator":"GreaterThanOrEqualToThreshold","dimensions":[{"name":"FunctionName","value":{"Ref":"GenerateFunctionD11A7A28"}}],"evaluationPeriods":2,"metricName":"Errors","namespace":"AWS/Lambda","period":300,"statistic":"Sum","threshold":3}}}}},"AuthErrorAlarm":{"id":"AuthErrorAlarm","path":"ChatbotBackendProd/AuthErrorAlarm","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.Alarm","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotBackendProd/AuthErrorAlarm/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.CfnAlarm","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CloudWatch::Alarm","aws:cdk:cloudformation:props":{"alarmDescription":"Auth Lambda 함수 오류율이 높습니다","comparisonOperator":"GreaterThanOrEqualToThreshold","dimensions":[{"name":"FunctionName","value":{"Ref":"AuthFunctionA1CD5E0F"}}],"evaluationPeriods":2,"metricName":"Errors","namespace":"AWS/Lambda","period":300,"statistic":"Sum","threshold":3}}}}},"DLQMessageAlarm":{"id":"DLQMessageAlarm","path":"ChatbotBackendProd/DLQMessageAlarm","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.Alarm","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotBackendProd/DLQMessageAlarm/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.CfnAlarm","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CloudWatch::Alarm","aws:cdk:cloudformation:props":{"alarmDescription":"DLQ에 메시지가 있습니다","comparisonOperator":"GreaterThanOrEqualToThreshold","dimensions":[{"name":"QueueName","value":{"Fn::GetAtt":["IndexPromptDLQ5C143C72","QueueName"]}}],"evaluationPeriods":1,"metricName":"ApproximateNumberOfVisibleMessages","namespace":"AWS/SQS","period":300,"statistic":"Average","threshold":1}}}}},"ApiGatewayUrl":{"id":"ApiGatewayUrl","path":"ChatbotBackendProd/ApiGatewayUrl","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.204.0"}},"PromptBucketName":{"id":"PromptBucketName","path":"ChatbotBackendProd/PromptBucketName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.204.0"}},"UserPoolId":{"id":"UserPoolId","path":"ChatbotBackendProd/UserPoolId","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.204.0"}},"UserPoolClientId":{"id":"UserPoolClientId","path":"ChatbotBackendProd/UserPoolClientId","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.204.0"}},"CDKMetadata":{"id":"CDKMetadata","path":"ChatbotBackendProd/CDKMetadata","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"children":{"Default":{"id":"Default","path":"ChatbotBackendProd/CDKMetadata/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.204.0"}}}},"Exports":{"id":"Exports","path":"ChatbotBackendProd/Exports","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"children":{"Output{\"Ref\":\"ChatbotApiF211B502\"}":{"id":"Output{\"Ref\":\"ChatbotApiF211B502\"}","path":"ChatbotBackendProd/Exports/Output{\"Ref\":\"ChatbotApiF211B502\"}","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.204.0"}},"Output{\"Ref\":\"ChatbotApiDeploymentStageprod27096855\"}":{"id":"Output{\"Ref\":\"ChatbotApiDeploymentStageprod27096855\"}","path":"ChatbotBackendProd/Exports/Output{\"Ref\":\"ChatbotApiDeploymentStageprod27096855\"}","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.204.0"}}}},"BootstrapVersion":{"id":"BootstrapVersion","path":"ChatbotBackendProd/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.204.0"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"ChatbotBackendProd/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"2.204.0"}}}},"ChatbotConversationStackProd":{"id":"ChatbotConversationStackProd","path":"ChatbotConversationStackProd","constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"2.204.0"},"children":{"ConversationsTable":{"id":"ConversationsTable","path":"ChatbotConversationStackProd/ConversationsTable","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.Table","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotConversationStackProd/ConversationsTable/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.CfnTable","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::DynamoDB::Table","aws:cdk:cloudformation:props":{"attributeDefinitions":[{"attributeName":"PK","attributeType":"S"},{"attributeName":"SK","attributeType":"S"},{"attributeName":"userId","attributeType":"S"},{"attributeName":"createdAt","attributeType":"S"}],"billingMode":"PAY_PER_REQUEST","globalSecondaryIndexes":[{"indexName":"UserConversationsIndex","keySchema":[{"attributeName":"userId","keyType":"HASH"},{"attributeName":"createdAt","keyType":"RANGE"}],"projection":{"projectionType":"ALL"}}],"keySchema":[{"attributeName":"PK","keyType":"HASH"},{"attributeName":"SK","keyType":"RANGE"}],"pointInTimeRecoverySpecification":{"pointInTimeRecoveryEnabled":true},"tableName":"ChatbotConversations-prod","timeToLiveSpecification":{"attributeName":"ttl","enabled":true}}}},"ScalingRole":{"id":"ScalingRole","path":"ChatbotConversationStackProd/ConversationsTable/ScalingRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.204.0","metadata":[]}}}},"MessagesTable":{"id":"MessagesTable","path":"ChatbotConversationStackProd/MessagesTable","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.Table","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotConversationStackProd/MessagesTable/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.CfnTable","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::DynamoDB::Table","aws:cdk:cloudformation:props":{"attributeDefinitions":[{"attributeName":"PK","attributeType":"S"},{"attributeName":"SK","attributeType":"S"}],"billingMode":"PAY_PER_REQUEST","keySchema":[{"attributeName":"PK","keyType":"HASH"},{"attributeName":"SK","keyType":"RANGE"}],"pointInTimeRecoverySpecification":{"pointInTimeRecoveryEnabled":true},"tableName":"ChatbotMessages-prod","timeToLiveSpecification":{"attributeName":"ttl","enabled":true}}}},"ScalingRole":{"id":"ScalingRole","path":"ChatbotConversationStackProd/MessagesTable/ScalingRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.204.0","metadata":[]}}}},"ConversationFunction":{"id":"ConversationFunction","path":"ChatbotConversationStackProd/ConversationFunction","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.204.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"ChatbotConversationStackProd/ConversationFunction/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.204.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"ChatbotConversationStackProd/ConversationFunction/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.204.0","metadata":[]}},"Resource":{"id":"Resource","path":"ChatbotConversationStackProd/ConversationFunction/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"ChatbotConversationStackProd/ConversationFunction/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotConversationStackProd/ConversationFunction/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["dynamodb:BatchGetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:Query","dynamodb:GetItem","dynamodb:Scan","dynamodb:ConditionCheckItem","dynamodb:BatchWriteItem","dynamodb:PutItem","dynamodb:UpdateItem","dynamodb:DeleteItem","dynamodb:DescribeTable"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["ConversationsTableCD91EB96","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["ConversationsTableCD91EB96","Arn"]},"/index/*"]]}]},{"Action":["dynamodb:BatchGetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:Query","dynamodb:GetItem","dynamodb:Scan","dynamodb:ConditionCheckItem","dynamodb:BatchWriteItem","dynamodb:PutItem","dynamodb:UpdateItem","dynamodb:DeleteItem","dynamodb:DescribeTable"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["MessagesTable05B58A27","Arn"]},{"Ref":"AWS::NoValue"}]}],"Version":"2012-10-17"},"policyName":"ConversationFunctionServiceRoleDefaultPolicy3BD1781D","roles":[{"Ref":"ConversationFunctionServiceRoleBBAB46E1"}]}}}}}}},"Code":{"id":"Code","path":"ChatbotConversationStackProd/ConversationFunction/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.204.0"},"children":{"Stage":{"id":"Stage","path":"ChatbotConversationStackProd/ConversationFunction/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.204.0"}},"AssetBucket":{"id":"AssetBucket","path":"ChatbotConversationStackProd/ConversationFunction/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.204.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"ChatbotConversationStackProd/ConversationFunction/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-887078546492-ap-northeast-2","s3Key":"37decc8291f914a3fbce9674d21e1fd087374e7175c6fa065475f9949c590e6d.zip"},"environment":{"variables":{"CONVERSATIONS_TABLE":{"Ref":"ConversationsTableCD91EB96"},"MESSAGES_TABLE":{"Ref":"MessagesTable05B58A27"}}},"handler":"conversation_api.handler","memorySize":512,"role":{"Fn::GetAtt":["ConversationFunctionServiceRoleBBAB46E1","Arn"]},"runtime":"python3.11","timeout":30}}}}},"MessageFunction":{"id":"MessageFunction","path":"ChatbotConversationStackProd/MessageFunction","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.204.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"ChatbotConversationStackProd/MessageFunction/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.204.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"ChatbotConversationStackProd/MessageFunction/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.204.0","metadata":[]}},"Resource":{"id":"Resource","path":"ChatbotConversationStackProd/MessageFunction/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"ChatbotConversationStackProd/MessageFunction/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotConversationStackProd/MessageFunction/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["dynamodb:BatchGetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:Query","dynamodb:GetItem","dynamodb:Scan","dynamodb:ConditionCheckItem","dynamodb:BatchWriteItem","dynamodb:PutItem","dynamodb:UpdateItem","dynamodb:DeleteItem","dynamodb:DescribeTable"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["MessagesTable05B58A27","Arn"]},{"Ref":"AWS::NoValue"}]},{"Action":["dynamodb:BatchGetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:Query","dynamodb:GetItem","dynamodb:Scan","dynamodb:ConditionCheckItem","dynamodb:BatchWriteItem","dynamodb:PutItem","dynamodb:UpdateItem","dynamodb:DeleteItem","dynamodb:DescribeTable"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["ConversationsTableCD91EB96","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["ConversationsTableCD91EB96","Arn"]},"/index/*"]]}]}],"Version":"2012-10-17"},"policyName":"MessageFunctionServiceRoleDefaultPolicy3725DC08","roles":[{"Ref":"MessageFunctionServiceRole94EDDC6B"}]}}}}}}},"Code":{"id":"Code","path":"ChatbotConversationStackProd/MessageFunction/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.204.0"},"children":{"Stage":{"id":"Stage","path":"ChatbotConversationStackProd/MessageFunction/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.204.0"}},"AssetBucket":{"id":"AssetBucket","path":"ChatbotConversationStackProd/MessageFunction/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.204.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"ChatbotConversationStackProd/MessageFunction/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-887078546492-ap-northeast-2","s3Key":"1ffe6133cd1c2137d933ac2c8bc0723cbf7abc913505a4e8d28d990597f4e7a2.zip"},"environment":{"variables":{"MESSAGES_TABLE":{"Ref":"MessagesTable05B58A27"},"CONVERSATIONS_TABLE":{"Ref":"ConversationsTableCD91EB96"}}},"handler":"message_api.handler","memorySize":512,"role":{"Fn::GetAtt":["MessageFunctionServiceRole94EDDC6B","Arn"]},"runtime":"python3.11","timeout":30}}}}},"CDKMetadata":{"id":"CDKMetadata","path":"ChatbotConversationStackProd/CDKMetadata","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"children":{"Default":{"id":"Default","path":"ChatbotConversationStackProd/CDKMetadata/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.204.0"}}}},"Exports":{"id":"Exports","path":"ChatbotConversationStackProd/Exports","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"children":{"Output{\"Fn::GetAtt\":[\"ConversationFunction7337ABEA\",\"Arn\"]}":{"id":"Output{\"Fn::GetAtt\":[\"ConversationFunction7337ABEA\",\"Arn\"]}","path":"ChatbotConversationStackProd/Exports/Output{\"Fn::GetAtt\":[\"ConversationFunction7337ABEA\",\"Arn\"]}","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.204.0"}},"Output{\"Fn::GetAtt\":[\"MessageFunction5E234045\",\"Arn\"]}":{"id":"Output{\"Fn::GetAtt\":[\"MessageFunction5E234045\",\"Arn\"]}","path":"ChatbotConversationStackProd/Exports/Output{\"Fn::GetAtt\":[\"MessageFunction5E234045\",\"Arn\"]}","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.204.0"}}}},"BootstrapVersion":{"id":"BootstrapVersion","path":"ChatbotConversationStackProd/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.204.0"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"ChatbotConversationStackProd/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"2.204.0"}}}},"ChatbotFrontendStackProd":{"id":"ChatbotFrontendStackProd","path":"ChatbotFrontendStackProd","constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"2.204.0"},"children":{"WebsiteBucket":{"id":"WebsiteBucket","path":"ChatbotFrontendStackProd/WebsiteBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.Bucket","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotFrontendStackProd/WebsiteBucket/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.CfnBucket","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::S3::Bucket","aws:cdk:cloudformation:props":{"bucketName":"chatbot-frontend-prod","lifecycleConfiguration":{"rules":[{"abortIncompleteMultipartUpload":{"daysAfterInitiation":7},"noncurrentVersionExpiration":{"noncurrentDays":30},"status":"Enabled"}]},"publicAccessBlockConfiguration":{"blockPublicAcls":true,"blockPublicPolicy":true,"ignorePublicAcls":true,"restrictPublicBuckets":true},"tags":[{"key":"aws-cdk:cr-owned:f01abfad","value":"true"}],"versioningConfiguration":{"status":"Enabled"}}}},"Policy":{"id":"Policy","path":"ChatbotFrontendStackProd/WebsiteBucket/Policy","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketPolicy","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotFrontendStackProd/WebsiteBucket/Policy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.CfnBucketPolicy","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::S3::BucketPolicy","aws:cdk:cloudformation:props":{"bucket":{"Ref":"WebsiteBucket75C24D94"},"policyDocument":{"Statement":[{"Action":"s3:GetObject","Condition":{"StringEquals":{"AWS:SourceArn":"arn:aws:cloudfront::887078546492:distribution/*"}},"Effect":"Allow","Principal":{"Service":"cloudfront.amazonaws.com"},"Resource":{"Fn::Join":["",[{"Fn::GetAtt":["WebsiteBucket75C24D94","Arn"]},"/*"]]}},{"Action":"s3:GetObject","Condition":{"StringEquals":{"AWS:SourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":cloudfront::",{"Ref":"AWS::AccountId"},":distribution/",{"Ref":"Distribution830FAC52"}]]}}},"Effect":"Allow","Principal":{"Service":"cloudfront.amazonaws.com"},"Resource":{"Fn::Join":["",[{"Fn::GetAtt":["WebsiteBucket75C24D94","Arn"]},"/*"]]}}],"Version":"2012-10-17"}}}}}}}},"OAC":{"id":"OAC","path":"ChatbotFrontendStackProd/OAC","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudfront.S3OriginAccessControl","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotFrontendStackProd/OAC/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudfront.CfnOriginAccessControl","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CloudFront::OriginAccessControl","aws:cdk:cloudformation:props":{"originAccessControlConfig":{"description":{"Fn::Join":["",["OAC for ",{"Ref":"WebsiteBucket75C24D94"}]]},"name":{"Fn::Join":["",["OAC-",{"Ref":"WebsiteBucket75C24D94"}]]},"signingBehavior":"always","signingProtocol":"sigv4","originAccessControlOriginType":"s3"}}}}}},"Distribution":{"id":"Distribution","path":"ChatbotFrontendStackProd/Distribution","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudfront.Distribution","version":"2.204.0","metadata":[]},"children":{"Origin1":{"id":"Origin1","path":"ChatbotFrontendStackProd/Distribution/Origin1","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"}},"Origin2":{"id":"Origin2","path":"ChatbotFrontendStackProd/Distribution/Origin2","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"}},"Origin3":{"id":"Origin3","path":"ChatbotFrontendStackProd/Distribution/Origin3","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"}},"Origin4":{"id":"Origin4","path":"ChatbotFrontendStackProd/Distribution/Origin4","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"}},"Resource":{"id":"Resource","path":"ChatbotFrontendStackProd/Distribution/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudfront.CfnDistribution","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CloudFront::Distribution","aws:cdk:cloudformation:props":{"distributionConfig":{"enabled":true,"origins":[{"domainName":{"Fn::GetAtt":["WebsiteBucket75C24D94","RegionalDomainName"]},"id":"ChatbotFrontendStackProdDistributionOrigin17627C4FF","s3OriginConfig":{"originAccessIdentity":""},"originAccessControlId":{"Fn::GetAtt":["OAC5B452445","Id"]}},{"domainName":{"Fn::GetAtt":["WebsiteBucket75C24D94","RegionalDomainName"]},"id":"ChatbotFrontendStackProdDistributionOrigin270D24AEE","s3OriginConfig":{"originAccessIdentity":""},"originAccessControlId":{"Fn::GetAtt":["OAC5B452445","Id"]}},{"domainName":{"Fn::GetAtt":["WebsiteBucket75C24D94","RegionalDomainName"]},"id":"ChatbotFrontendStackProdDistributionOrigin38D211037","s3OriginConfig":{"originAccessIdentity":""},"originAccessControlId":{"Fn::GetAtt":["OAC5B452445","Id"]}},{"domainName":{"Fn::Select":[2,{"Fn::Split":["/",{"Fn::Join":["",["https://",{"Fn::ImportValue":"ChatbotBackendProd:ExportsOutputRefChatbotApiF211B50251B7B5E1"},".execute-api.ap-northeast-2.",{"Ref":"AWS::URLSuffix"},"/",{"Fn::ImportValue":"ChatbotBackendProd:ExportsOutputRefChatbotApiDeploymentStageprod27096855D64CF543"},"/"]]}]}]},"id":"ChatbotFrontendStackProdDistributionOrigin416C19645","originPath":{"Fn::Join":["",["/",{"Fn::ImportValue":"ChatbotBackendProd:ExportsOutputRefChatbotApiDeploymentStageprod27096855D64CF543"}]]},"customOriginConfig":{"originSslProtocols":["TLSv1.2"],"originProtocolPolicy":"https-only"}}],"defaultCacheBehavior":{"pathPattern":"*","targetOriginId":"ChatbotFrontendStackProdDistributionOrigin17627C4FF","cachePolicyId":"658327ea-f89d-4fab-a63d-7e88639e58f6","compress":true,"originRequestPolicyId":"88a5eaf4-2fd4-4709-b370-b4c650ea3fcf","responseHeadersPolicyId":"67f7725c-6f97-4210-82d7-5512b31e9d03","viewerProtocolPolicy":"redirect-to-https"},"cacheBehaviors":[{"pathPattern":"*.js","targetOriginId":"ChatbotFrontendStackProdDistributionOrigin270D24AEE","cachePolicyId":"658327ea-f89d-4fab-a63d-7e88639e58f6","compress":true,"viewerProtocolPolicy":"redirect-to-https"},{"pathPattern":"*.css","targetOriginId":"ChatbotFrontendStackProdDistributionOrigin38D211037","cachePolicyId":"658327ea-f89d-4fab-a63d-7e88639e58f6","compress":true,"viewerProtocolPolicy":"redirect-to-https"},{"pathPattern":"/api/*","targetOriginId":"ChatbotFrontendStackProdDistributionOrigin416C19645","allowedMethods":["GET","HEAD","OPTIONS","PUT","PATCH","POST","DELETE"],"cachePolicyId":"4135ea2d-6df8-44a3-9df3-4b5a84be39ad","compress":true,"originRequestPolicyId":"216adef6-5c7f-47e4-b989-5492eafa07d3","viewerProtocolPolicy":"redirect-to-https"}],"comment":"Dynamic Prompt System Frontend Distribution","customErrorResponses":[{"errorCachingMinTtl":1800,"errorCode":403,"responseCode":200,"responsePagePath":"/index.html"},{"errorCachingMinTtl":1800,"errorCode":404,"responseCode":200,"responsePagePath":"/index.html"}],"defaultRootObject":"index.html","httpVersion":"http2","ipv6Enabled":true,"priceClass":"PriceClass_100"}}}}}},"DeployWebsite":{"id":"DeployWebsite","path":"ChatbotFrontendStackProd/DeployWebsite","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_deployment.BucketDeployment","version":"2.204.0"},"children":{"AwsCliLayer":{"id":"AwsCliLayer","path":"ChatbotFrontendStackProd/DeployWebsite/AwsCliLayer","constructInfo":{"fqn":"aws-cdk-lib.lambda_layer_awscli.AwsCliLayer","version":"2.204.0","metadata":[]},"children":{"Code":{"id":"Code","path":"ChatbotFrontendStackProd/DeployWebsite/AwsCliLayer/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.204.0"},"children":{"Stage":{"id":"Stage","path":"ChatbotFrontendStackProd/DeployWebsite/AwsCliLayer/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.204.0"}},"AssetBucket":{"id":"AssetBucket","path":"ChatbotFrontendStackProd/DeployWebsite/AwsCliLayer/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.204.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"ChatbotFrontendStackProd/DeployWebsite/AwsCliLayer/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnLayerVersion","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::LayerVersion","aws:cdk:cloudformation:props":{"content":{"s3Bucket":"cdk-hnb659fds-assets-887078546492-ap-northeast-2","s3Key":"c49d356cac773d491c5f7ac148995a1181498a8e289429f8612a7f7e3814f535.zip"},"description":"/opt/awscli/aws"}}}}},"CustomResourceHandler":{"id":"CustomResourceHandler","path":"ChatbotFrontendStackProd/DeployWebsite/CustomResourceHandler","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.SingletonFunction","version":"2.204.0","metadata":[]}},"Asset1":{"id":"Asset1","path":"ChatbotFrontendStackProd/DeployWebsite/Asset1","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.204.0"},"children":{"Stage":{"id":"Stage","path":"ChatbotFrontendStackProd/DeployWebsite/Asset1/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.204.0"}},"AssetBucket":{"id":"AssetBucket","path":"ChatbotFrontendStackProd/DeployWebsite/Asset1/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.204.0","metadata":[]}}}},"CustomResource-512MiB-512MiB":{"id":"CustomResource-512MiB-512MiB","path":"ChatbotFrontendStackProd/DeployWebsite/CustomResource-512MiB-512MiB","constructInfo":{"fqn":"aws-cdk-lib.CustomResource","version":"2.204.0","metadata":[]},"children":{"Default":{"id":"Default","path":"ChatbotFrontendStackProd/DeployWebsite/CustomResource-512MiB-512MiB/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.204.0"}}}}}},"Custom::CDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756C512MiB512MiB":{"id":"Custom::CDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756C512MiB512MiB","path":"ChatbotFrontendStackProd/Custom::CDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756C512MiB512MiB","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.204.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"ChatbotFrontendStackProd/Custom::CDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756C512MiB512MiB/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.204.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"ChatbotFrontendStackProd/Custom::CDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756C512MiB512MiB/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.204.0","metadata":[]}},"Resource":{"id":"Resource","path":"ChatbotFrontendStackProd/Custom::CDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756C512MiB512MiB/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"ChatbotFrontendStackProd/Custom::CDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756C512MiB512MiB/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotFrontendStackProd/Custom::CDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756C512MiB512MiB/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["s3:GetObject*","s3:GetBucket*","s3:List*"],"Effect":"Allow","Resource":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":s3:::cdk-hnb659fds-assets-887078546492-ap-northeast-2"]]},{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":s3:::cdk-hnb659fds-assets-887078546492-ap-northeast-2/*"]]}]},{"Action":["s3:GetObject*","s3:GetBucket*","s3:List*","s3:DeleteObject*","s3:PutObject","s3:PutObjectLegalHold","s3:PutObjectRetention","s3:PutObjectTagging","s3:PutObjectVersionTagging","s3:Abort*"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["WebsiteBucket75C24D94","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["WebsiteBucket75C24D94","Arn"]},"/*"]]}]},{"Action":["cloudfront:GetInvalidation","cloudfront:CreateInvalidation"],"Effect":"Allow","Resource":"*"}],"Version":"2012-10-17"},"policyName":"CustomCDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756C512MiB512MiBServiceRoleDefaultPolicyEA2DA91D","roles":[{"Ref":"CustomCDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756C512MiB512MiBServiceRoleCFA2F118"}]}}}}}}},"Code":{"id":"Code","path":"ChatbotFrontendStackProd/Custom::CDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756C512MiB512MiB/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.204.0"},"children":{"Stage":{"id":"Stage","path":"ChatbotFrontendStackProd/Custom::CDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756C512MiB512MiB/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.204.0"}},"AssetBucket":{"id":"AssetBucket","path":"ChatbotFrontendStackProd/Custom::CDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756C512MiB512MiB/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.204.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"ChatbotFrontendStackProd/Custom::CDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756C512MiB512MiB/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-887078546492-ap-northeast-2","s3Key":"9a1fcb4a7ecba81ad70e9d3fb241f6794497da945dae5f25924e4dd002b65f2d.zip"},"environment":{"variables":{"AWS_CA_BUNDLE":"/etc/pki/ca-trust/extracted/pem/tls-ca-bundle.pem"}},"ephemeralStorage":{"size":512},"handler":"index.handler","layers":[{"Ref":"DeployWebsiteAwsCliLayer17DBC421"}],"memorySize":512,"role":{"Fn::GetAtt":["CustomCDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756C512MiB512MiBServiceRoleCFA2F118","Arn"]},"runtime":"python3.11","timeout":900}}}}},"WebsiteURL":{"id":"WebsiteURL","path":"ChatbotFrontendStackProd/WebsiteURL","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.204.0"}},"BucketName":{"id":"BucketName","path":"ChatbotFrontendStackProd/BucketName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.204.0"}},"DistributionId":{"id":"DistributionId","path":"ChatbotFrontendStackProd/DistributionId","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.204.0"}},"DistributionDomainName":{"id":"DistributionDomainName","path":"ChatbotFrontendStackProd/DistributionDomainName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.204.0"}},"CDKMetadata":{"id":"CDKMetadata","path":"ChatbotFrontendStackProd/CDKMetadata","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"children":{"Default":{"id":"Default","path":"ChatbotFrontendStackProd/CDKMetadata/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.204.0"}}}},"BootstrapVersion":{"id":"BootstrapVersion","path":"ChatbotFrontendStackProd/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.204.0"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"ChatbotFrontendStackProd/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"2.204.0"}}}},"ChatbotBackendDev":{"id":"ChatbotBackendDev","path":"ChatbotBackendDev","constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"2.204.0"},"children":{"ChatbotUserPool":{"id":"ChatbotUserPool","path":"ChatbotBackendDev/ChatbotUserPool","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.UserPool","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotBackendDev/ChatbotUserPool/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.CfnUserPool","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Cognito::UserPool","aws:cdk:cloudformation:props":{"accountRecoverySetting":{"recoveryMechanisms":[{"name":"verified_email","priority":1}]},"adminCreateUserConfig":{"allowAdminCreateUserOnly":false},"autoVerifiedAttributes":["email"],"emailVerificationMessage":"The verification code to your new account is {####}","emailVerificationSubject":"Verify your new account","policies":{"passwordPolicy":{"minimumLength":8,"requireLowercase":false,"requireUppercase":false,"requireNumbers":true,"requireSymbols":true}},"schema":[{"name":"email","mutable":true,"required":true},{"name":"name","mutable":true,"required":false}],"smsVerificationMessage":"The verification code to your new account is {####}","usernameAttributes":["email"],"userPoolName":"chatbot-users","verificationMessageTemplate":{"defaultEmailOption":"CONFIRM_WITH_CODE","emailMessage":"The verification code to your new account is {####}","emailSubject":"Verify your new account","smsMessage":"The verification code to your new account is {####}"}}}},"ChatbotWebClient":{"id":"ChatbotWebClient","path":"ChatbotBackendDev/ChatbotUserPool/ChatbotWebClient","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.UserPoolClient","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotBackendDev/ChatbotUserPool/ChatbotWebClient/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.CfnUserPoolClient","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Cognito::UserPoolClient","aws:cdk:cloudformation:props":{"accessTokenValidity":60,"allowedOAuthFlows":["implicit","code"],"allowedOAuthFlowsUserPoolClient":true,"allowedOAuthScopes":["profile","phone","email","openid","aws.cognito.signin.user.admin"],"callbackUrLs":["https://example.com"],"clientName":"chatbot-web-client","enableTokenRevocation":true,"explicitAuthFlows":["ALLOW_USER_PASSWORD_AUTH","ALLOW_USER_SRP_AUTH","ALLOW_REFRESH_TOKEN_AUTH"],"generateSecret":false,"idTokenValidity":60,"preventUserExistenceErrors":"ENABLED","refreshTokenValidity":43200,"supportedIdentityProviders":["COGNITO"],"tokenValidityUnits":{"idToken":"minutes","accessToken":"minutes","refreshToken":"minutes"},"userPoolId":{"Ref":"ChatbotUserPool01970AAD"}}}}}},"ChatbotDomain":{"id":"ChatbotDomain","path":"ChatbotBackendDev/ChatbotUserPool/ChatbotDomain","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.UserPoolDomain","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotBackendDev/ChatbotUserPool/ChatbotDomain/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.CfnUserPoolDomain","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Cognito::UserPoolDomain","aws:cdk:cloudformation:props":{"domain":"chatbot-887078546492","userPoolId":{"Ref":"ChatbotUserPool01970AAD"}}}}}}}},"AdminGroup":{"id":"AdminGroup","path":"ChatbotBackendDev/AdminGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.CfnUserPoolGroup","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Cognito::UserPoolGroup","aws:cdk:cloudformation:props":{"description":"관리자 그룹","groupName":"admin","precedence":1,"userPoolId":{"Ref":"ChatbotUserPool01970AAD"}}}},"PromptBucket":{"id":"PromptBucket","path":"ChatbotBackendDev/PromptBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.Bucket","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotBackendDev/PromptBucket/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.CfnBucket","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::S3::Bucket","aws:cdk:cloudformation:props":{"bucketEncryption":{"serverSideEncryptionConfiguration":[{"serverSideEncryptionByDefault":{"sseAlgorithm":"AES256"}}]},"bucketName":"chatbot-prompts-887078546492-ap-northeast-2","corsConfiguration":{"corsRules":[{"maxAge":3600,"allowedHeaders":["*"],"allowedMethods":["GET","PUT","POST"],"allowedOrigins":["*"]}]},"tags":[{"key":"aws-cdk:auto-delete-objects","value":"true"}],"versioningConfiguration":{"status":"Enabled"}}}},"Policy":{"id":"Policy","path":"ChatbotBackendDev/PromptBucket/Policy","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketPolicy","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotBackendDev/PromptBucket/Policy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.CfnBucketPolicy","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::S3::BucketPolicy","aws:cdk:cloudformation:props":{"bucket":{"Ref":"PromptBucket1668FD1C"},"policyDocument":{"Statement":[{"Action":["s3:PutBucketPolicy","s3:GetBucket*","s3:List*","s3:DeleteObject*"],"Effect":"Allow","Principal":{"AWS":{"Fn::GetAtt":["CustomS3AutoDeleteObjectsCustomResourceProviderRole3B1BD092","Arn"]}},"Resource":[{"Fn::GetAtt":["PromptBucket1668FD1C","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["PromptBucket1668FD1C","Arn"]},"/*"]]}]}],"Version":"2012-10-17"}}}}}},"AutoDeleteObjectsCustomResource":{"id":"AutoDeleteObjectsCustomResource","path":"ChatbotBackendDev/PromptBucket/AutoDeleteObjectsCustomResource","constructInfo":{"fqn":"aws-cdk-lib.CustomResource","version":"2.204.0","metadata":[]},"children":{"Default":{"id":"Default","path":"ChatbotBackendDev/PromptBucket/AutoDeleteObjectsCustomResource/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.204.0"}}}}}},"Custom::S3AutoDeleteObjectsCustomResourceProvider":{"id":"Custom::S3AutoDeleteObjectsCustomResourceProvider","path":"ChatbotBackendDev/Custom::S3AutoDeleteObjectsCustomResourceProvider","constructInfo":{"fqn":"aws-cdk-lib.CustomResourceProviderBase","version":"2.204.0"},"children":{"Staging":{"id":"Staging","path":"ChatbotBackendDev/Custom::S3AutoDeleteObjectsCustomResourceProvider/Staging","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.204.0"}},"Role":{"id":"Role","path":"ChatbotBackendDev/Custom::S3AutoDeleteObjectsCustomResourceProvider/Role","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.204.0"}},"Handler":{"id":"Handler","path":"ChatbotBackendDev/Custom::S3AutoDeleteObjectsCustomResourceProvider/Handler","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.204.0"}}}},"ArticleBucket":{"id":"ArticleBucket","path":"ChatbotBackendDev/ArticleBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.Bucket","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotBackendDev/ArticleBucket/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.CfnBucket","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::S3::Bucket","aws:cdk:cloudformation:props":{"bucketEncryption":{"serverSideEncryptionConfiguration":[{"serverSideEncryptionByDefault":{"sseAlgorithm":"AES256"}}]},"bucketName":"chatbot-data-887078546492-ap-northeast-2","corsConfiguration":{"corsRules":[{"maxAge":3600,"allowedHeaders":["*"],"allowedMethods":["GET","PUT","POST"],"allowedOrigins":["*"]}]},"tags":[{"key":"aws-cdk:auto-delete-objects","value":"true"}],"versioningConfiguration":{"status":"Enabled"}}}},"Policy":{"id":"Policy","path":"ChatbotBackendDev/ArticleBucket/Policy","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketPolicy","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotBackendDev/ArticleBucket/Policy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.CfnBucketPolicy","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::S3::BucketPolicy","aws:cdk:cloudformation:props":{"bucket":{"Ref":"ArticleBucket38F6CD07"},"policyDocument":{"Statement":[{"Action":["s3:PutBucketPolicy","s3:GetBucket*","s3:List*","s3:DeleteObject*"],"Effect":"Allow","Principal":{"AWS":{"Fn::GetAtt":["CustomS3AutoDeleteObjectsCustomResourceProviderRole3B1BD092","Arn"]}},"Resource":[{"Fn::GetAtt":["ArticleBucket38F6CD07","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["ArticleBucket38F6CD07","Arn"]},"/*"]]}]}],"Version":"2012-10-17"}}}}}},"AutoDeleteObjectsCustomResource":{"id":"AutoDeleteObjectsCustomResource","path":"ChatbotBackendDev/ArticleBucket/AutoDeleteObjectsCustomResource","constructInfo":{"fqn":"aws-cdk-lib.CustomResource","version":"2.204.0","metadata":[]},"children":{"Default":{"id":"Default","path":"ChatbotBackendDev/ArticleBucket/AutoDeleteObjectsCustomResource/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.204.0"}}}}}},"UsersTable":{"id":"UsersTable","path":"ChatbotBackendDev/UsersTable","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.Table","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotBackendDev/UsersTable/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.CfnTable","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::DynamoDB::Table","aws:cdk:cloudformation:props":{"attributeDefinitions":[{"attributeName":"user_id","attributeType":"S"},{"attributeName":"email","attributeType":"S"}],"billingMode":"PAY_PER_REQUEST","globalSecondaryIndexes":[{"indexName":"email-index","keySchema":[{"attributeName":"email","keyType":"HASH"}],"projection":{"projectionType":"ALL"}}],"keySchema":[{"attributeName":"user_id","keyType":"HASH"}],"pointInTimeRecoverySpecification":{"pointInTimeRecoveryEnabled":true},"tableName":"chatbot-users"}}},"ScalingRole":{"id":"ScalingRole","path":"ChatbotBackendDev/UsersTable/ScalingRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.204.0","metadata":[]}}}},"UsageTable":{"id":"UsageTable","path":"ChatbotBackendDev/UsageTable","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.Table","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotBackendDev/UsageTable/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.CfnTable","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::DynamoDB::Table","aws:cdk:cloudformation:props":{"attributeDefinitions":[{"attributeName":"user_id","attributeType":"S"},{"attributeName":"date","attributeType":"S"},{"attributeName":"month","attributeType":"S"}],"billingMode":"PAY_PER_REQUEST","globalSecondaryIndexes":[{"indexName":"user_id-month-index","keySchema":[{"attributeName":"user_id","keyType":"HASH"},{"attributeName":"month","keyType":"RANGE"}],"projection":{"projectionType":"ALL"}}],"keySchema":[{"attributeName":"user_id","keyType":"HASH"},{"attributeName":"date","keyType":"RANGE"}],"tableName":"chatbot-usage","timeToLiveSpecification":{"attributeName":"ttl","enabled":true}}}},"ScalingRole":{"id":"ScalingRole","path":"ChatbotBackendDev/UsageTable/ScalingRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.204.0","metadata":[]}}}},"SubscriptionsTable":{"id":"SubscriptionsTable","path":"ChatbotBackendDev/SubscriptionsTable","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.Table","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotBackendDev/SubscriptionsTable/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.CfnTable","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::DynamoDB::Table","aws:cdk:cloudformation:props":{"attributeDefinitions":[{"attributeName":"user_id","attributeType":"S"},{"attributeName":"status","attributeType":"S"},{"attributeName":"expiry_date","attributeType":"S"}],"billingMode":"PAY_PER_REQUEST","globalSecondaryIndexes":[{"indexName":"status-expiry_date-index","keySchema":[{"attributeName":"status","keyType":"HASH"},{"attributeName":"expiry_date","keyType":"RANGE"}],"projection":{"projectionType":"ALL"}}],"keySchema":[{"attributeName":"user_id","keyType":"HASH"}],"pointInTimeRecoverySpecification":{"pointInTimeRecoveryEnabled":true},"tableName":"chatbot-subscriptions"}}},"ScalingRole":{"id":"ScalingRole","path":"ChatbotBackendDev/SubscriptionsTable/ScalingRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.204.0","metadata":[]}}}},"PromptMetaTable":{"id":"PromptMetaTable","path":"ChatbotBackendDev/PromptMetaTable","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.Table","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotBackendDev/PromptMetaTable/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.CfnTable","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::DynamoDB::Table","aws:cdk:cloudformation:props":{"attributeDefinitions":[{"attributeName":"user_id","attributeType":"S"},{"attributeName":"promptId","attributeType":"S"},{"attributeName":"stepOrder","attributeType":"N"}],"billingMode":"PAY_PER_REQUEST","globalSecondaryIndexes":[{"indexName":"user_id-stepOrder-index","keySchema":[{"attributeName":"user_id","keyType":"HASH"},{"attributeName":"stepOrder","keyType":"RANGE"}],"projection":{"projectionType":"ALL"}}],"keySchema":[{"attributeName":"user_id","keyType":"HASH"},{"attributeName":"promptId","keyType":"RANGE"}],"tableName":"chatbot-prompts"}}},"ScalingRole":{"id":"ScalingRole","path":"ChatbotBackendDev/PromptMetaTable/ScalingRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.204.0","metadata":[]}}}},"ConversationTable":{"id":"ConversationTable","path":"ChatbotBackendDev/ConversationTable","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.Table","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotBackendDev/ConversationTable/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.CfnTable","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::DynamoDB::Table","aws:cdk:cloudformation:props":{"attributeDefinitions":[{"attributeName":"user_id","attributeType":"S"},{"attributeName":"timestamp","attributeType":"N"}],"billingMode":"PAY_PER_REQUEST","keySchema":[{"attributeName":"user_id","keyType":"HASH"},{"attributeName":"timestamp","keyType":"RANGE"}],"tableName":"chatbot-conversations"}}},"ScalingRole":{"id":"ScalingRole","path":"ChatbotBackendDev/ConversationTable/ScalingRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.204.0","metadata":[]}}}},"ExecutionTable":{"id":"ExecutionTable","path":"ChatbotBackendDev/ExecutionTable","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.Table","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotBackendDev/ExecutionTable/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.CfnTable","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::DynamoDB::Table","aws:cdk:cloudformation:props":{"attributeDefinitions":[{"attributeName":"executionId","attributeType":"S"}],"billingMode":"PAY_PER_REQUEST","keySchema":[{"attributeName":"executionId","keyType":"HASH"}],"tableName":"chatbot-executions","timeToLiveSpecification":{"attributeName":"ttl","enabled":true}}}},"ScalingRole":{"id":"ScalingRole","path":"ChatbotBackendDev/ExecutionTable/ScalingRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.204.0","metadata":[]}}}},"PerplexityCacheTable":{"id":"PerplexityCacheTable","path":"ChatbotBackendDev/PerplexityCacheTable","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.Table","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotBackendDev/PerplexityCacheTable/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.CfnTable","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::DynamoDB::Table","aws:cdk:cloudformation:props":{"attributeDefinitions":[{"attributeName":"query_hash","attributeType":"S"}],"billingMode":"PAY_PER_REQUEST","keySchema":[{"attributeName":"query_hash","keyType":"HASH"}],"tableName":"perplexity-search-cache","timeToLiveSpecification":{"attributeName":"ttl","enabled":true}}}},"ScalingRole":{"id":"ScalingRole","path":"ChatbotBackendDev/PerplexityCacheTable/ScalingRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.204.0","metadata":[]}}}},"ExecutionMetricsTable":{"id":"ExecutionMetricsTable","path":"ChatbotBackendDev/ExecutionMetricsTable","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.Table","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotBackendDev/ExecutionMetricsTable/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.CfnTable","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::DynamoDB::Table","aws:cdk:cloudformation:props":{"attributeDefinitions":[{"attributeName":"execution_date","attributeType":"S"},{"attributeName":"execution_id","attributeType":"S"}],"billingMode":"PAY_PER_REQUEST","keySchema":[{"attributeName":"execution_date","keyType":"HASH"},{"attributeName":"execution_id","keyType":"RANGE"}],"tableName":"workflow-execution-metrics","timeToLiveSpecification":{"attributeName":"ttl","enabled":true}}}},"ScalingRole":{"id":"ScalingRole","path":"ChatbotBackendDev/ExecutionMetricsTable/ScalingRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.204.0","metadata":[]}}}},"IndexPromptDLQ":{"id":"IndexPromptDLQ","path":"ChatbotBackendDev/IndexPromptDLQ","constructInfo":{"fqn":"aws-cdk-lib.aws_sqs.Queue","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotBackendDev/IndexPromptDLQ/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_sqs.CfnQueue","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SQS::Queue","aws:cdk:cloudformation:props":{"messageRetentionPeriod":1209600,"queueName":"chatbot-index-prompt-dlq","visibilityTimeout":300}}}}},"IndexPromptQueue":{"id":"IndexPromptQueue","path":"ChatbotBackendDev/IndexPromptQueue","constructInfo":{"fqn":"aws-cdk-lib.aws_sqs.Queue","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotBackendDev/IndexPromptQueue/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_sqs.CfnQueue","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SQS::Queue","aws:cdk:cloudformation:props":{"queueName":"chatbot-index-prompt","redrivePolicy":{"deadLetterTargetArn":{"Fn::GetAtt":["IndexPromptDLQ5C143C72","Arn"]},"maxReceiveCount":3},"visibilityTimeout":300}}}}},"CompletionTopic":{"id":"CompletionTopic","path":"ChatbotBackendDev/CompletionTopic","constructInfo":{"fqn":"aws-cdk-lib.aws_sns.Topic","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotBackendDev/CompletionTopic/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_sns.CfnTopic","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SNS::Topic","aws:cdk:cloudformation:props":{"topicName":"chatbot-completion"}}}}},"ErrorTopic":{"id":"ErrorTopic","path":"ChatbotBackendDev/ErrorTopic","constructInfo":{"fqn":"aws-cdk-lib.aws_sns.Topic","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotBackendDev/ErrorTopic/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_sns.CfnTopic","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SNS::Topic","aws:cdk:cloudformation:props":{"topicName":"chatbot-errors"}}}}},"BedrockAgentRole":{"id":"BedrockAgentRole","path":"ChatbotBackendDev/BedrockAgentRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.204.0","metadata":[]},"children":{"ImportBedrockAgentRole":{"id":"ImportBedrockAgentRole","path":"ChatbotBackendDev/BedrockAgentRole/ImportBedrockAgentRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.204.0","metadata":[]}},"Resource":{"id":"Resource","path":"ChatbotBackendDev/BedrockAgentRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"bedrock.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/AmazonBedrockFullAccess"]]}]}}}}},"BedrockKnowledgeBaseRole":{"id":"BedrockKnowledgeBaseRole","path":"ChatbotBackendDev/BedrockKnowledgeBaseRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.204.0","metadata":[]},"children":{"ImportBedrockKnowledgeBaseRole":{"id":"ImportBedrockKnowledgeBaseRole","path":"ChatbotBackendDev/BedrockKnowledgeBaseRole/ImportBedrockKnowledgeBaseRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.204.0","metadata":[]}},"Resource":{"id":"Resource","path":"ChatbotBackendDev/BedrockKnowledgeBaseRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"bedrock.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/AmazonBedrockFullAccess"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"ChatbotBackendDev/BedrockKnowledgeBaseRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotBackendDev/BedrockKnowledgeBaseRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["s3:GetObject","s3:ListBucket"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["PromptBucket1668FD1C","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["PromptBucket1668FD1C","Arn"]},"/*"]]}]}],"Version":"2012-10-17"},"policyName":"BedrockKnowledgeBaseRoleDefaultPolicy3434A684","roles":[{"Ref":"BedrockKnowledgeBaseRole24C5E17B"}]}}}}}}},"DynamicPromptAgent":{"id":"DynamicPromptAgent","path":"ChatbotBackendDev/DynamicPromptAgent","constructInfo":{"fqn":"aws-cdk-lib.aws_bedrock.CfnAgent","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Bedrock::Agent","aws:cdk:cloudformation:props":{"agentName":"dynamic-prompt-agent-1753738014","agentResourceRoleArn":{"Fn::GetAtt":["BedrockAgentRole7C982E0C","Arn"]},"description":"동적 프롬프트 시스템 AI 어시스턴트","foundationModel":"apac.anthropic.claude-3-sonnet-20240229-v1:0","idleSessionTtlInSeconds":1800,"instruction":"당신은 동적 프롬프트 시스템의 AI 어시스턴트입니다. 사용자가 제공하는 프롬프트 카드의 내용에 따라 다양한 작업을 수행하며, 창의적이고 정확한 응답을 제공합니다. 항상 한국어로 응답하고, 사용자의 요청에 맞춰 유연하게 대응하세요."}}},"DynamicPromptAgentAlias":{"id":"DynamicPromptAgentAlias","path":"ChatbotBackendDev/DynamicPromptAgentAlias","constructInfo":{"fqn":"aws-cdk-lib.aws_bedrock.CfnAgentAlias","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Bedrock::AgentAlias","aws:cdk:cloudformation:props":{"agentAliasName":"production","agentId":{"Fn::GetAtt":["DynamicPromptAgent","AgentId"]},"description":"Production alias for Dynamic Prompt System agent"}}},"LambdaRole":{"id":"LambdaRole","path":"ChatbotBackendDev/LambdaRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.204.0","metadata":[]},"children":{"ImportLambdaRole":{"id":"ImportLambdaRole","path":"ChatbotBackendDev/LambdaRole/ImportLambdaRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.204.0","metadata":[]}},"Resource":{"id":"Resource","path":"ChatbotBackendDev/LambdaRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]},{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/AmazonBedrockFullAccess"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"ChatbotBackendDev/LambdaRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotBackendDev/LambdaRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["s3:GetObject","s3:PutObject","s3:DeleteObject","s3:ListBucket","dynamodb:Query","dynamodb:PutItem","dynamodb:UpdateItem","dynamodb:GetItem","dynamodb:DeleteItem","dynamodb:Scan","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:DescribeStream","dynamodb:ListStreams","sqs:SendMessage","sqs:ReceiveMessage","sns:Publish","bedrock:InvokeModel","bedrock:InvokeModelWithResponseStream","bedrock:Retrieve","bedrock:RetrieveAndGenerate","cognito-idp:AdminCreateUser","cognito-idp:AdminSetUserPassword","cognito-idp:AdminGetUser","cognito-idp:AdminDeleteUser","cognito-idp:AdminConfirmSignUp","cognito-idp:AdminInitiateAuth","cognito-idp:AdminRespondToAuthChallenge","cognito-idp:AdminListGroupsForUser","cognito-idp:AdminAddUserToGroup","cognito-idp:ConfirmForgotPassword","cognito-idp:ForgotPassword","cognito-idp:ConfirmSignUp","cognito-idp:ResendConfirmationCode"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["PromptBucket1668FD1C","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["PromptBucket1668FD1C","Arn"]},"/*"]]},{"Fn::GetAtt":["ArticleBucket38F6CD07","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["ArticleBucket38F6CD07","Arn"]},"/*"]]},"arn:aws:s3:::seoul-economic-news-data-2025","arn:aws:s3:::seoul-economic-news-data-2025/*",{"Fn::GetAtt":["PromptMetaTable0A0B3876","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["PromptMetaTable0A0B3876","Arn"]},"/index/user_id-stepOrder-index"]]},{"Fn::GetAtt":["ConversationTable75C14D21","Arn"]},{"Fn::GetAtt":["ExecutionTable914EA6E7","Arn"]},{"Fn::GetAtt":["UsersTable9725E9C8","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["UsersTable9725E9C8","Arn"]},"/index/email-index"]]},{"Fn::GetAtt":["UsageTable28300137","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["UsageTable28300137","Arn"]},"/index/user_id-month-index"]]},{"Fn::GetAtt":["SubscriptionsTable40965A9D","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["SubscriptionsTable40965A9D","Arn"]},"/index/status-expiry_date-index"]]},{"Fn::GetAtt":["PerplexityCacheTable47347F70","Arn"]},{"Fn::GetAtt":["ExecutionMetricsTable37348B2C","Arn"]},{"Fn::GetAtt":["IndexPromptDLQ5C143C72","Arn"]},{"Fn::GetAtt":["IndexPromptQueueC7C25CCE","Arn"]},{"Ref":"CompletionTopic50E1DF26"},{"Ref":"ErrorTopicA0904A23"},{"Fn::GetAtt":["ChatbotUserPool01970AAD","Arn"]},{"Fn::Join":["",["arn:aws:cognito-idp:ap-northeast-2:887078546492:userpool/",{"Ref":"ChatbotUserPool01970AAD"}]]}]},{"Action":"sqs:SendMessage","Effect":"Allow","Resource":{"Fn::GetAtt":["IndexPromptDLQ5C143C72","Arn"]}}],"Version":"2012-10-17"},"policyName":"LambdaRoleDefaultPolicy75625A82","roles":[{"Ref":"LambdaRole3A44B857"}]}}}}}}},"NewsProcessingLayer":{"id":"NewsProcessingLayer","path":"ChatbotBackendDev/NewsProcessingLayer","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.LayerVersion","version":"2.204.0","metadata":[]},"children":{"Code":{"id":"Code","path":"ChatbotBackendDev/NewsProcessingLayer/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.204.0"},"children":{"Stage":{"id":"Stage","path":"ChatbotBackendDev/NewsProcessingLayer/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.204.0"}},"AssetBucket":{"id":"AssetBucket","path":"ChatbotBackendDev/NewsProcessingLayer/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.204.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"ChatbotBackendDev/NewsProcessingLayer/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnLayerVersion","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::LayerVersion","aws:cdk:cloudformation:props":{"compatibleRuntimes":["python3.11"],"content":{"s3Bucket":"cdk-hnb659fds-assets-887078546492-ap-northeast-2","s3Key":"18a51c5acfed584a3f2087b20ba5b1612d2f023a4515ada44a9337d6c2af78c5.zip"},"description":"서울경제신문 AI 요약 시스템 - 간단화된 7단계 플로우 처리"}}}}},"GenerateFunction":{"id":"GenerateFunction","path":"ChatbotBackendDev/GenerateFunction","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.204.0","metadata":[]},"children":{"Code":{"id":"Code","path":"ChatbotBackendDev/GenerateFunction/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.204.0"},"children":{"Stage":{"id":"Stage","path":"ChatbotBackendDev/GenerateFunction/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.204.0"}},"AssetBucket":{"id":"AssetBucket","path":"ChatbotBackendDev/GenerateFunction/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.204.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"ChatbotBackendDev/GenerateFunction/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-887078546492-ap-northeast-2","s3Key":"5faef22f4206e472b85a192a2e6011689a90acfb998c1ea9c4d0b861a47fc723.zip"},"deadLetterConfig":{"targetArn":{"Fn::GetAtt":["IndexPromptDLQ5C143C72","Arn"]}},"environment":{"variables":{"PROMPT_META_TABLE":{"Ref":"PromptMetaTable0A0B3876"},"PROMPT_BUCKET":{"Ref":"PromptBucket1668FD1C"},"EXECUTION_TABLE":{"Ref":"ExecutionTable914EA6E7"},"KNOWLEDGE_BASE_ID":"PGQV3JXPET","OPENSEARCH_COLLECTION_ID":"i56h0ibud5e0sd0hz7ch","S3_BUCKET_NAME":"seoul-economic-news-data-2025","S3_DATA_PREFIX":"news-data-md/","NEWS_BUCKET":"seoul-economic-news-data-2025","PERPLEXITY_API_KEY":"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","PERPLEXITY_CACHE_TABLE":"perplexity-search-cache","EXECUTION_METRICS_TABLE":"workflow-execution-metrics","REGION":"ap-northeast-2"}},"handler":"generate.lambda_handler","layers":[{"Ref":"NewsProcessingLayer63A6C836"}],"memorySize":3008,"role":{"Fn::GetAtt":["LambdaRole3A44B857","Arn"]},"runtime":"python3.11","timeout":900}}}}},"AuthFunction":{"id":"AuthFunction","path":"ChatbotBackendDev/AuthFunction","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.204.0","metadata":[]},"children":{"Code":{"id":"Code","path":"ChatbotBackendDev/AuthFunction/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.204.0"},"children":{"Stage":{"id":"Stage","path":"ChatbotBackendDev/AuthFunction/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.204.0"}},"AssetBucket":{"id":"AssetBucket","path":"ChatbotBackendDev/AuthFunction/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.204.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"ChatbotBackendDev/AuthFunction/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-887078546492-ap-northeast-2","s3Key":"52acb937fba0c7e4b573368f21b4589784987c779f1f0cc3b6d82fb819cfed8e.zip"},"environment":{"variables":{"USER_POOL_ID":{"Ref":"ChatbotUserPool01970AAD"},"USER_POOL_CLIENT_ID":{"Ref":"ChatbotUserPoolChatbotWebClientF2B8B64F"},"REGION":"ap-northeast-2","LOG_LEVEL":"INFO"}},"handler":"auth.handler","memorySize":256,"role":{"Fn::GetAtt":["LambdaRole3A44B857","Arn"]},"runtime":"python3.11","timeout":60}}}}},"UserManagementFunction":{"id":"UserManagementFunction","path":"ChatbotBackendDev/UserManagementFunction","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.204.0","metadata":[]},"children":{"Code":{"id":"Code","path":"ChatbotBackendDev/UserManagementFunction/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.204.0"},"children":{"Stage":{"id":"Stage","path":"ChatbotBackendDev/UserManagementFunction/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.204.0"}},"AssetBucket":{"id":"AssetBucket","path":"ChatbotBackendDev/UserManagementFunction/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.204.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"ChatbotBackendDev/UserManagementFunction/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-887078546492-ap-northeast-2","s3Key":"6c461cbea9a9ecc89c6283688efbec024d4d6586f8bce6db701ceba0eef2d2fd.zip"},"environment":{"variables":{"USERS_TABLE_NAME":{"Ref":"UsersTable9725E9C8"},"USAGE_TABLE_NAME":{"Ref":"UsageTable28300137"},"SUBSCRIPTIONS_TABLE_NAME":{"Ref":"SubscriptionsTable40965A9D"},"USER_POOL_ID":{"Ref":"ChatbotUserPool01970AAD"},"LOG_LEVEL":"INFO"}},"handler":"user_management.lambda_handler","memorySize":512,"role":{"Fn::GetAtt":["LambdaRole3A44B857","Arn"]},"runtime":"python3.11","timeout":120}}}}},"JWTAuthorizerFunction":{"id":"JWTAuthorizerFunction","path":"ChatbotBackendDev/JWTAuthorizerFunction","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.204.0","metadata":[]},"children":{"Code":{"id":"Code","path":"ChatbotBackendDev/JWTAuthorizerFunction/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.204.0"},"children":{"Stage":{"id":"Stage","path":"ChatbotBackendDev/JWTAuthorizerFunction/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.204.0"}},"AssetBucket":{"id":"AssetBucket","path":"ChatbotBackendDev/JWTAuthorizerFunction/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.204.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"ChatbotBackendDev/JWTAuthorizerFunction/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-887078546492-ap-northeast-2","s3Key":"08656a1de06b13f088679093a003aab21621934f20175eb3a900f8c9b66936a1.zip"},"environment":{"variables":{"USER_POOL_ID":{"Ref":"ChatbotUserPool01970AAD"},"USER_POOL_CLIENT_ID":{"Ref":"ChatbotUserPoolChatbotWebClientF2B8B64F"},"REGION":"ap-northeast-2","LOG_LEVEL":"INFO"}},"handler":"authorizer.handler","memorySize":256,"role":{"Fn::GetAtt":["LambdaRole3A44B857","Arn"]},"runtime":"python3.11","timeout":60}}},"ChatbotBackendDevChatbotApiAuthorizerF4AF2F31:Permissions":{"id":"ChatbotBackendDevChatbotApiAuthorizerF4AF2F31:Permissions","path":"ChatbotBackendDev/JWTAuthorizerFunction/ChatbotBackendDevChatbotApiAuthorizerF4AF2F31:Permissions","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["JWTAuthorizerFunction9F386173","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:ap-northeast-2:887078546492:",{"Ref":"ChatbotApiF211B502"},"/authorizers/",{"Ref":"ChatbotApiAuthorizer801BDC78"}]]}}}}}},"ChatbotApi":{"id":"ChatbotApi","path":"ChatbotBackendDev/ChatbotApi","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.RestApi","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotBackendDev/ChatbotApi/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnRestApi","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::RestApi","aws:cdk:cloudformation:props":{"description":"동적 프롬프트 시스템 - 완전한 빈깡통 AI","name":"chatbot-api"}}},"CloudWatchRole":{"id":"CloudWatchRole","path":"ChatbotBackendDev/ChatbotApi/CloudWatchRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.204.0","metadata":[]},"children":{"ImportCloudWatchRole":{"id":"ImportCloudWatchRole","path":"ChatbotBackendDev/ChatbotApi/CloudWatchRole/ImportCloudWatchRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.204.0","metadata":[]}},"Resource":{"id":"Resource","path":"ChatbotBackendDev/ChatbotApi/CloudWatchRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"apigateway.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AmazonAPIGatewayPushToCloudWatchLogs"]]}]}}}}},"Account":{"id":"Account","path":"ChatbotBackendDev/ChatbotApi/Account","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnAccount","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Account","aws:cdk:cloudformation:props":{"cloudWatchRoleArn":{"Fn::GetAtt":["ChatbotApiCloudWatchRoleD8E3EB91","Arn"]}}}},"Deployment":{"id":"Deployment","path":"ChatbotBackendDev/ChatbotApi/Deployment","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Deployment","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotBackendDev/ChatbotApi/Deployment/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnDeployment","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Deployment","aws:cdk:cloudformation:props":{"description":"동적 프롬프트 시스템 - 완전한 빈깡통 AI","restApiId":{"Ref":"ChatbotApiF211B502"}}}}}},"DeploymentStage.prod":{"id":"DeploymentStage.prod","path":"ChatbotBackendDev/ChatbotApi/DeploymentStage.prod","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Stage","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotBackendDev/ChatbotApi/DeploymentStage.prod/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnStage","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Stage","aws:cdk:cloudformation:props":{"deploymentId":{"Ref":"ChatbotApiDeploymentB7895815515e9446ef98342aa913322456fdc1a0"},"restApiId":{"Ref":"ChatbotApiF211B502"},"stageName":"prod"}}}}},"Endpoint":{"id":"Endpoint","path":"ChatbotBackendDev/ChatbotApi/Endpoint","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.204.0"}},"Default":{"id":"Default","path":"ChatbotBackendDev/ChatbotApi/Default","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.ResourceBase","version":"2.204.0","metadata":[]},"children":{"auth":{"id":"auth","path":"ChatbotBackendDev/ChatbotApi/Default/auth","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotBackendDev/ChatbotApi/Default/auth/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Fn::GetAtt":["ChatbotApiF211B502","RootResourceId"]},"pathPart":"auth","restApiId":{"Ref":"ChatbotApiF211B502"}}}},"signup":{"id":"signup","path":"ChatbotBackendDev/ChatbotApi/Default/auth/signup","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotBackendDev/ChatbotApi/Default/auth/signup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Ref":"ChatbotApiauthD0EAC720"},"pathPart":"signup","restApiId":{"Ref":"ChatbotApiF211B502"}}}},"POST":{"id":"POST","path":"ChatbotBackendDev/ChatbotApi/Default/auth/signup/POST","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.204.0","metadata":[]},"children":{"ApiPermission.ChatbotBackendDevChatbotApi322FF874.POST..auth.signup":{"id":"ApiPermission.ChatbotBackendDevChatbotApi322FF874.POST..auth.signup","path":"ChatbotBackendDev/ChatbotApi/Default/auth/signup/POST/ApiPermission.ChatbotBackendDevChatbotApi322FF874.POST..auth.signup","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["AuthFunctionA1CD5E0F","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:ap-northeast-2:887078546492:",{"Ref":"ChatbotApiF211B502"},"/",{"Ref":"ChatbotApiDeploymentStageprod27096855"},"/POST/auth/signup"]]}}}},"ApiPermission.Test.ChatbotBackendDevChatbotApi322FF874.POST..auth.signup":{"id":"ApiPermission.Test.ChatbotBackendDevChatbotApi322FF874.POST..auth.signup","path":"ChatbotBackendDev/ChatbotApi/Default/auth/signup/POST/ApiPermission.Test.ChatbotBackendDevChatbotApi322FF874.POST..auth.signup","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["AuthFunctionA1CD5E0F","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:ap-northeast-2:887078546492:",{"Ref":"ChatbotApiF211B502"},"/test-invoke-stage/POST/auth/signup"]]}}}},"Resource":{"id":"Resource","path":"ChatbotBackendDev/ChatbotApi/Default/auth/signup/POST/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"NONE","httpMethod":"POST","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":apigateway:ap-northeast-2:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["AuthFunctionA1CD5E0F","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"resourceId":{"Ref":"ChatbotApiauthsignup28B15E0C"},"restApiId":{"Ref":"ChatbotApiF211B502"}}}}}},"OPTIONS":{"id":"OPTIONS","path":"ChatbotBackendDev/ChatbotApi/Default/auth/signup/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotBackendDev/ChatbotApi/Default/auth/signup/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{\"statusCode\": 200}"},"integrationResponses":[{"statusCode":"200","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'POST,OPTIONS'"}}]},"methodResponses":[{"statusCode":"200","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true}}],"resourceId":{"Ref":"ChatbotApiauthsignup28B15E0C"},"restApiId":{"Ref":"ChatbotApiF211B502"}}}}}}}},"signin":{"id":"signin","path":"ChatbotBackendDev/ChatbotApi/Default/auth/signin","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotBackendDev/ChatbotApi/Default/auth/signin/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Ref":"ChatbotApiauthD0EAC720"},"pathPart":"signin","restApiId":{"Ref":"ChatbotApiF211B502"}}}},"POST":{"id":"POST","path":"ChatbotBackendDev/ChatbotApi/Default/auth/signin/POST","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.204.0","metadata":[]},"children":{"ApiPermission.ChatbotBackendDevChatbotApi322FF874.POST..auth.signin":{"id":"ApiPermission.ChatbotBackendDevChatbotApi322FF874.POST..auth.signin","path":"ChatbotBackendDev/ChatbotApi/Default/auth/signin/POST/ApiPermission.ChatbotBackendDevChatbotApi322FF874.POST..auth.signin","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["AuthFunctionA1CD5E0F","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:ap-northeast-2:887078546492:",{"Ref":"ChatbotApiF211B502"},"/",{"Ref":"ChatbotApiDeploymentStageprod27096855"},"/POST/auth/signin"]]}}}},"ApiPermission.Test.ChatbotBackendDevChatbotApi322FF874.POST..auth.signin":{"id":"ApiPermission.Test.ChatbotBackendDevChatbotApi322FF874.POST..auth.signin","path":"ChatbotBackendDev/ChatbotApi/Default/auth/signin/POST/ApiPermission.Test.ChatbotBackendDevChatbotApi322FF874.POST..auth.signin","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["AuthFunctionA1CD5E0F","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:ap-northeast-2:887078546492:",{"Ref":"ChatbotApiF211B502"},"/test-invoke-stage/POST/auth/signin"]]}}}},"Resource":{"id":"Resource","path":"ChatbotBackendDev/ChatbotApi/Default/auth/signin/POST/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"NONE","httpMethod":"POST","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":apigateway:ap-northeast-2:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["AuthFunctionA1CD5E0F","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"resourceId":{"Ref":"ChatbotApiauthsigninFEBE7F7E"},"restApiId":{"Ref":"ChatbotApiF211B502"}}}}}},"OPTIONS":{"id":"OPTIONS","path":"ChatbotBackendDev/ChatbotApi/Default/auth/signin/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotBackendDev/ChatbotApi/Default/auth/signin/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{\"statusCode\": 200}"},"integrationResponses":[{"statusCode":"200","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'POST,OPTIONS'"}}]},"methodResponses":[{"statusCode":"200","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true}}],"resourceId":{"Ref":"ChatbotApiauthsigninFEBE7F7E"},"restApiId":{"Ref":"ChatbotApiF211B502"}}}}}}}},"refresh":{"id":"refresh","path":"ChatbotBackendDev/ChatbotApi/Default/auth/refresh","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotBackendDev/ChatbotApi/Default/auth/refresh/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Ref":"ChatbotApiauthD0EAC720"},"pathPart":"refresh","restApiId":{"Ref":"ChatbotApiF211B502"}}}},"POST":{"id":"POST","path":"ChatbotBackendDev/ChatbotApi/Default/auth/refresh/POST","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.204.0","metadata":[]},"children":{"ApiPermission.ChatbotBackendDevChatbotApi322FF874.POST..auth.refresh":{"id":"ApiPermission.ChatbotBackendDevChatbotApi322FF874.POST..auth.refresh","path":"ChatbotBackendDev/ChatbotApi/Default/auth/refresh/POST/ApiPermission.ChatbotBackendDevChatbotApi322FF874.POST..auth.refresh","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["AuthFunctionA1CD5E0F","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:ap-northeast-2:887078546492:",{"Ref":"ChatbotApiF211B502"},"/",{"Ref":"ChatbotApiDeploymentStageprod27096855"},"/POST/auth/refresh"]]}}}},"ApiPermission.Test.ChatbotBackendDevChatbotApi322FF874.POST..auth.refresh":{"id":"ApiPermission.Test.ChatbotBackendDevChatbotApi322FF874.POST..auth.refresh","path":"ChatbotBackendDev/ChatbotApi/Default/auth/refresh/POST/ApiPermission.Test.ChatbotBackendDevChatbotApi322FF874.POST..auth.refresh","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["AuthFunctionA1CD5E0F","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:ap-northeast-2:887078546492:",{"Ref":"ChatbotApiF211B502"},"/test-invoke-stage/POST/auth/refresh"]]}}}},"Resource":{"id":"Resource","path":"ChatbotBackendDev/ChatbotApi/Default/auth/refresh/POST/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"NONE","httpMethod":"POST","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":apigateway:ap-northeast-2:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["AuthFunctionA1CD5E0F","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"resourceId":{"Ref":"ChatbotApiauthrefreshF6C87EBE"},"restApiId":{"Ref":"ChatbotApiF211B502"}}}}}},"OPTIONS":{"id":"OPTIONS","path":"ChatbotBackendDev/ChatbotApi/Default/auth/refresh/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotBackendDev/ChatbotApi/Default/auth/refresh/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{\"statusCode\": 200}"},"integrationResponses":[{"statusCode":"200","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'POST,OPTIONS'"}}]},"methodResponses":[{"statusCode":"200","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true}}],"resourceId":{"Ref":"ChatbotApiauthrefreshF6C87EBE"},"restApiId":{"Ref":"ChatbotApiF211B502"}}}}}}}},"signout":{"id":"signout","path":"ChatbotBackendDev/ChatbotApi/Default/auth/signout","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotBackendDev/ChatbotApi/Default/auth/signout/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Ref":"ChatbotApiauthD0EAC720"},"pathPart":"signout","restApiId":{"Ref":"ChatbotApiF211B502"}}}},"POST":{"id":"POST","path":"ChatbotBackendDev/ChatbotApi/Default/auth/signout/POST","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.204.0","metadata":[]},"children":{"ApiPermission.ChatbotBackendDevChatbotApi322FF874.POST..auth.signout":{"id":"ApiPermission.ChatbotBackendDevChatbotApi322FF874.POST..auth.signout","path":"ChatbotBackendDev/ChatbotApi/Default/auth/signout/POST/ApiPermission.ChatbotBackendDevChatbotApi322FF874.POST..auth.signout","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["AuthFunctionA1CD5E0F","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:ap-northeast-2:887078546492:",{"Ref":"ChatbotApiF211B502"},"/",{"Ref":"ChatbotApiDeploymentStageprod27096855"},"/POST/auth/signout"]]}}}},"ApiPermission.Test.ChatbotBackendDevChatbotApi322FF874.POST..auth.signout":{"id":"ApiPermission.Test.ChatbotBackendDevChatbotApi322FF874.POST..auth.signout","path":"ChatbotBackendDev/ChatbotApi/Default/auth/signout/POST/ApiPermission.Test.ChatbotBackendDevChatbotApi322FF874.POST..auth.signout","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["AuthFunctionA1CD5E0F","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:ap-northeast-2:887078546492:",{"Ref":"ChatbotApiF211B502"},"/test-invoke-stage/POST/auth/signout"]]}}}},"Resource":{"id":"Resource","path":"ChatbotBackendDev/ChatbotApi/Default/auth/signout/POST/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"NONE","httpMethod":"POST","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":apigateway:ap-northeast-2:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["AuthFunctionA1CD5E0F","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"resourceId":{"Ref":"ChatbotApiauthsignoutCD0FB0B3"},"restApiId":{"Ref":"ChatbotApiF211B502"}}}}}},"OPTIONS":{"id":"OPTIONS","path":"ChatbotBackendDev/ChatbotApi/Default/auth/signout/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotBackendDev/ChatbotApi/Default/auth/signout/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{\"statusCode\": 200}"},"integrationResponses":[{"statusCode":"200","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'POST,OPTIONS'"}}]},"methodResponses":[{"statusCode":"200","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true}}],"resourceId":{"Ref":"ChatbotApiauthsignoutCD0FB0B3"},"restApiId":{"Ref":"ChatbotApiF211B502"}}}}}}}},"verify":{"id":"verify","path":"ChatbotBackendDev/ChatbotApi/Default/auth/verify","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotBackendDev/ChatbotApi/Default/auth/verify/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Ref":"ChatbotApiauthD0EAC720"},"pathPart":"verify","restApiId":{"Ref":"ChatbotApiF211B502"}}}},"POST":{"id":"POST","path":"ChatbotBackendDev/ChatbotApi/Default/auth/verify/POST","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.204.0","metadata":[]},"children":{"ApiPermission.ChatbotBackendDevChatbotApi322FF874.POST..auth.verify":{"id":"ApiPermission.ChatbotBackendDevChatbotApi322FF874.POST..auth.verify","path":"ChatbotBackendDev/ChatbotApi/Default/auth/verify/POST/ApiPermission.ChatbotBackendDevChatbotApi322FF874.POST..auth.verify","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["AuthFunctionA1CD5E0F","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:ap-northeast-2:887078546492:",{"Ref":"ChatbotApiF211B502"},"/",{"Ref":"ChatbotApiDeploymentStageprod27096855"},"/POST/auth/verify"]]}}}},"ApiPermission.Test.ChatbotBackendDevChatbotApi322FF874.POST..auth.verify":{"id":"ApiPermission.Test.ChatbotBackendDevChatbotApi322FF874.POST..auth.verify","path":"ChatbotBackendDev/ChatbotApi/Default/auth/verify/POST/ApiPermission.Test.ChatbotBackendDevChatbotApi322FF874.POST..auth.verify","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["AuthFunctionA1CD5E0F","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:ap-northeast-2:887078546492:",{"Ref":"ChatbotApiF211B502"},"/test-invoke-stage/POST/auth/verify"]]}}}},"Resource":{"id":"Resource","path":"ChatbotBackendDev/ChatbotApi/Default/auth/verify/POST/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"NONE","httpMethod":"POST","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":apigateway:ap-northeast-2:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["AuthFunctionA1CD5E0F","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"resourceId":{"Ref":"ChatbotApiauthverifyCDA8800C"},"restApiId":{"Ref":"ChatbotApiF211B502"}}}}}},"OPTIONS":{"id":"OPTIONS","path":"ChatbotBackendDev/ChatbotApi/Default/auth/verify/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotBackendDev/ChatbotApi/Default/auth/verify/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{\"statusCode\": 200}"},"integrationResponses":[{"statusCode":"200","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'POST,OPTIONS'"}}]},"methodResponses":[{"statusCode":"200","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true}}],"resourceId":{"Ref":"ChatbotApiauthverifyCDA8800C"},"restApiId":{"Ref":"ChatbotApiF211B502"}}}}}}}},"forgot-password":{"id":"forgot-password","path":"ChatbotBackendDev/ChatbotApi/Default/auth/forgot-password","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotBackendDev/ChatbotApi/Default/auth/forgot-password/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Ref":"ChatbotApiauthD0EAC720"},"pathPart":"forgot-password","restApiId":{"Ref":"ChatbotApiF211B502"}}}},"POST":{"id":"POST","path":"ChatbotBackendDev/ChatbotApi/Default/auth/forgot-password/POST","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.204.0","metadata":[]},"children":{"ApiPermission.ChatbotBackendDevChatbotApi322FF874.POST..auth.forgot-password":{"id":"ApiPermission.ChatbotBackendDevChatbotApi322FF874.POST..auth.forgot-password","path":"ChatbotBackendDev/ChatbotApi/Default/auth/forgot-password/POST/ApiPermission.ChatbotBackendDevChatbotApi322FF874.POST..auth.forgot-password","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["AuthFunctionA1CD5E0F","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:ap-northeast-2:887078546492:",{"Ref":"ChatbotApiF211B502"},"/",{"Ref":"ChatbotApiDeploymentStageprod27096855"},"/POST/auth/forgot-password"]]}}}},"ApiPermission.Test.ChatbotBackendDevChatbotApi322FF874.POST..auth.forgot-password":{"id":"ApiPermission.Test.ChatbotBackendDevChatbotApi322FF874.POST..auth.forgot-password","path":"ChatbotBackendDev/ChatbotApi/Default/auth/forgot-password/POST/ApiPermission.Test.ChatbotBackendDevChatbotApi322FF874.POST..auth.forgot-password","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["AuthFunctionA1CD5E0F","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:ap-northeast-2:887078546492:",{"Ref":"ChatbotApiF211B502"},"/test-invoke-stage/POST/auth/forgot-password"]]}}}},"Resource":{"id":"Resource","path":"ChatbotBackendDev/ChatbotApi/Default/auth/forgot-password/POST/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"NONE","httpMethod":"POST","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":apigateway:ap-northeast-2:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["AuthFunctionA1CD5E0F","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"resourceId":{"Ref":"ChatbotApiauthforgotpasswordEC47AED7"},"restApiId":{"Ref":"ChatbotApiF211B502"}}}}}},"OPTIONS":{"id":"OPTIONS","path":"ChatbotBackendDev/ChatbotApi/Default/auth/forgot-password/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotBackendDev/ChatbotApi/Default/auth/forgot-password/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{\"statusCode\": 200}"},"integrationResponses":[{"statusCode":"200","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'POST,OPTIONS'"}}]},"methodResponses":[{"statusCode":"200","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true}}],"resourceId":{"Ref":"ChatbotApiauthforgotpasswordEC47AED7"},"restApiId":{"Ref":"ChatbotApiF211B502"}}}}}}}},"confirm-password":{"id":"confirm-password","path":"ChatbotBackendDev/ChatbotApi/Default/auth/confirm-password","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotBackendDev/ChatbotApi/Default/auth/confirm-password/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Ref":"ChatbotApiauthD0EAC720"},"pathPart":"confirm-password","restApiId":{"Ref":"ChatbotApiF211B502"}}}},"POST":{"id":"POST","path":"ChatbotBackendDev/ChatbotApi/Default/auth/confirm-password/POST","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.204.0","metadata":[]},"children":{"ApiPermission.ChatbotBackendDevChatbotApi322FF874.POST..auth.confirm-password":{"id":"ApiPermission.ChatbotBackendDevChatbotApi322FF874.POST..auth.confirm-password","path":"ChatbotBackendDev/ChatbotApi/Default/auth/confirm-password/POST/ApiPermission.ChatbotBackendDevChatbotApi322FF874.POST..auth.confirm-password","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["AuthFunctionA1CD5E0F","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:ap-northeast-2:887078546492:",{"Ref":"ChatbotApiF211B502"},"/",{"Ref":"ChatbotApiDeploymentStageprod27096855"},"/POST/auth/confirm-password"]]}}}},"ApiPermission.Test.ChatbotBackendDevChatbotApi322FF874.POST..auth.confirm-password":{"id":"ApiPermission.Test.ChatbotBackendDevChatbotApi322FF874.POST..auth.confirm-password","path":"ChatbotBackendDev/ChatbotApi/Default/auth/confirm-password/POST/ApiPermission.Test.ChatbotBackendDevChatbotApi322FF874.POST..auth.confirm-password","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["AuthFunctionA1CD5E0F","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:ap-northeast-2:887078546492:",{"Ref":"ChatbotApiF211B502"},"/test-invoke-stage/POST/auth/confirm-password"]]}}}},"Resource":{"id":"Resource","path":"ChatbotBackendDev/ChatbotApi/Default/auth/confirm-password/POST/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"NONE","httpMethod":"POST","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":apigateway:ap-northeast-2:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["AuthFunctionA1CD5E0F","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"resourceId":{"Ref":"ChatbotApiauthconfirmpassword75F58B7B"},"restApiId":{"Ref":"ChatbotApiF211B502"}}}}}},"OPTIONS":{"id":"OPTIONS","path":"ChatbotBackendDev/ChatbotApi/Default/auth/confirm-password/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotBackendDev/ChatbotApi/Default/auth/confirm-password/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{\"statusCode\": 200}"},"integrationResponses":[{"statusCode":"200","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'POST,OPTIONS'"}}]},"methodResponses":[{"statusCode":"200","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true}}],"resourceId":{"Ref":"ChatbotApiauthconfirmpassword75F58B7B"},"restApiId":{"Ref":"ChatbotApiF211B502"}}}}}}}},"init-admin":{"id":"init-admin","path":"ChatbotBackendDev/ChatbotApi/Default/auth/init-admin","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotBackendDev/ChatbotApi/Default/auth/init-admin/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Ref":"ChatbotApiauthD0EAC720"},"pathPart":"init-admin","restApiId":{"Ref":"ChatbotApiF211B502"}}}},"POST":{"id":"POST","path":"ChatbotBackendDev/ChatbotApi/Default/auth/init-admin/POST","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.204.0","metadata":[]},"children":{"ApiPermission.ChatbotBackendDevChatbotApi322FF874.POST..auth.init-admin":{"id":"ApiPermission.ChatbotBackendDevChatbotApi322FF874.POST..auth.init-admin","path":"ChatbotBackendDev/ChatbotApi/Default/auth/init-admin/POST/ApiPermission.ChatbotBackendDevChatbotApi322FF874.POST..auth.init-admin","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["AuthFunctionA1CD5E0F","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:ap-northeast-2:887078546492:",{"Ref":"ChatbotApiF211B502"},"/",{"Ref":"ChatbotApiDeploymentStageprod27096855"},"/POST/auth/init-admin"]]}}}},"ApiPermission.Test.ChatbotBackendDevChatbotApi322FF874.POST..auth.init-admin":{"id":"ApiPermission.Test.ChatbotBackendDevChatbotApi322FF874.POST..auth.init-admin","path":"ChatbotBackendDev/ChatbotApi/Default/auth/init-admin/POST/ApiPermission.Test.ChatbotBackendDevChatbotApi322FF874.POST..auth.init-admin","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["AuthFunctionA1CD5E0F","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:ap-northeast-2:887078546492:",{"Ref":"ChatbotApiF211B502"},"/test-invoke-stage/POST/auth/init-admin"]]}}}},"Resource":{"id":"Resource","path":"ChatbotBackendDev/ChatbotApi/Default/auth/init-admin/POST/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"NONE","httpMethod":"POST","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":apigateway:ap-northeast-2:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["AuthFunctionA1CD5E0F","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"resourceId":{"Ref":"ChatbotApiauthinitadmin839B9BFD"},"restApiId":{"Ref":"ChatbotApiF211B502"}}}}}},"OPTIONS":{"id":"OPTIONS","path":"ChatbotBackendDev/ChatbotApi/Default/auth/init-admin/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotBackendDev/ChatbotApi/Default/auth/init-admin/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{\"statusCode\": 200}"},"integrationResponses":[{"statusCode":"200","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'POST,OPTIONS'"}}]},"methodResponses":[{"statusCode":"200","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true}}],"resourceId":{"Ref":"ChatbotApiauthinitadmin839B9BFD"},"restApiId":{"Ref":"ChatbotApiF211B502"}}}}}}}}}},"user":{"id":"user","path":"ChatbotBackendDev/ChatbotApi/Default/user","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotBackendDev/ChatbotApi/Default/user/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Fn::GetAtt":["ChatbotApiF211B502","RootResourceId"]},"pathPart":"user","restApiId":{"Ref":"ChatbotApiF211B502"}}}},"profile":{"id":"profile","path":"ChatbotBackendDev/ChatbotApi/Default/user/profile","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotBackendDev/ChatbotApi/Default/user/profile/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Ref":"ChatbotApiuser787F7D3D"},"pathPart":"profile","restApiId":{"Ref":"ChatbotApiF211B502"}}}},"GET":{"id":"GET","path":"ChatbotBackendDev/ChatbotApi/Default/user/profile/GET","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.204.0","metadata":[]},"children":{"ApiPermission.ChatbotBackendDevChatbotApi322FF874.GET..user.profile":{"id":"ApiPermission.ChatbotBackendDevChatbotApi322FF874.GET..user.profile","path":"ChatbotBackendDev/ChatbotApi/Default/user/profile/GET/ApiPermission.ChatbotBackendDevChatbotApi322FF874.GET..user.profile","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["UserManagementFunction2338B082","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:ap-northeast-2:887078546492:",{"Ref":"ChatbotApiF211B502"},"/",{"Ref":"ChatbotApiDeploymentStageprod27096855"},"/GET/user/profile"]]}}}},"ApiPermission.Test.ChatbotBackendDevChatbotApi322FF874.GET..user.profile":{"id":"ApiPermission.Test.ChatbotBackendDevChatbotApi322FF874.GET..user.profile","path":"ChatbotBackendDev/ChatbotApi/Default/user/profile/GET/ApiPermission.Test.ChatbotBackendDevChatbotApi322FF874.GET..user.profile","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["UserManagementFunction2338B082","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:ap-northeast-2:887078546492:",{"Ref":"ChatbotApiF211B502"},"/test-invoke-stage/GET/user/profile"]]}}}},"Resource":{"id":"Resource","path":"ChatbotBackendDev/ChatbotApi/Default/user/profile/GET/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"CUSTOM","authorizerId":{"Ref":"ChatbotApiAuthorizer801BDC78"},"httpMethod":"GET","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":apigateway:ap-northeast-2:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["UserManagementFunction2338B082","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"resourceId":{"Ref":"ChatbotApiuserprofile39527181"},"restApiId":{"Ref":"ChatbotApiF211B502"}}}}}},"PUT":{"id":"PUT","path":"ChatbotBackendDev/ChatbotApi/Default/user/profile/PUT","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.204.0","metadata":[]},"children":{"ApiPermission.ChatbotBackendDevChatbotApi322FF874.PUT..user.profile":{"id":"ApiPermission.ChatbotBackendDevChatbotApi322FF874.PUT..user.profile","path":"ChatbotBackendDev/ChatbotApi/Default/user/profile/PUT/ApiPermission.ChatbotBackendDevChatbotApi322FF874.PUT..user.profile","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["UserManagementFunction2338B082","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:ap-northeast-2:887078546492:",{"Ref":"ChatbotApiF211B502"},"/",{"Ref":"ChatbotApiDeploymentStageprod27096855"},"/PUT/user/profile"]]}}}},"ApiPermission.Test.ChatbotBackendDevChatbotApi322FF874.PUT..user.profile":{"id":"ApiPermission.Test.ChatbotBackendDevChatbotApi322FF874.PUT..user.profile","path":"ChatbotBackendDev/ChatbotApi/Default/user/profile/PUT/ApiPermission.Test.ChatbotBackendDevChatbotApi322FF874.PUT..user.profile","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["UserManagementFunction2338B082","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:ap-northeast-2:887078546492:",{"Ref":"ChatbotApiF211B502"},"/test-invoke-stage/PUT/user/profile"]]}}}},"Resource":{"id":"Resource","path":"ChatbotBackendDev/ChatbotApi/Default/user/profile/PUT/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"CUSTOM","authorizerId":{"Ref":"ChatbotApiAuthorizer801BDC78"},"httpMethod":"PUT","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":apigateway:ap-northeast-2:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["UserManagementFunction2338B082","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"resourceId":{"Ref":"ChatbotApiuserprofile39527181"},"restApiId":{"Ref":"ChatbotApiF211B502"}}}}}},"OPTIONS":{"id":"OPTIONS","path":"ChatbotBackendDev/ChatbotApi/Default/user/profile/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotBackendDev/ChatbotApi/Default/user/profile/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{\"statusCode\": 200}"},"integrationResponses":[{"statusCode":"200","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'GET,PUT,OPTIONS'"}}]},"methodResponses":[{"statusCode":"200","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true}}],"resourceId":{"Ref":"ChatbotApiuserprofile39527181"},"restApiId":{"Ref":"ChatbotApiF211B502"}}}}}}}},"usage":{"id":"usage","path":"ChatbotBackendDev/ChatbotApi/Default/user/usage","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotBackendDev/ChatbotApi/Default/user/usage/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Ref":"ChatbotApiuser787F7D3D"},"pathPart":"usage","restApiId":{"Ref":"ChatbotApiF211B502"}}}},"GET":{"id":"GET","path":"ChatbotBackendDev/ChatbotApi/Default/user/usage/GET","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.204.0","metadata":[]},"children":{"ApiPermission.ChatbotBackendDevChatbotApi322FF874.GET..user.usage":{"id":"ApiPermission.ChatbotBackendDevChatbotApi322FF874.GET..user.usage","path":"ChatbotBackendDev/ChatbotApi/Default/user/usage/GET/ApiPermission.ChatbotBackendDevChatbotApi322FF874.GET..user.usage","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["UserManagementFunction2338B082","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:ap-northeast-2:887078546492:",{"Ref":"ChatbotApiF211B502"},"/",{"Ref":"ChatbotApiDeploymentStageprod27096855"},"/GET/user/usage"]]}}}},"ApiPermission.Test.ChatbotBackendDevChatbotApi322FF874.GET..user.usage":{"id":"ApiPermission.Test.ChatbotBackendDevChatbotApi322FF874.GET..user.usage","path":"ChatbotBackendDev/ChatbotApi/Default/user/usage/GET/ApiPermission.Test.ChatbotBackendDevChatbotApi322FF874.GET..user.usage","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["UserManagementFunction2338B082","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:ap-northeast-2:887078546492:",{"Ref":"ChatbotApiF211B502"},"/test-invoke-stage/GET/user/usage"]]}}}},"Resource":{"id":"Resource","path":"ChatbotBackendDev/ChatbotApi/Default/user/usage/GET/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"CUSTOM","authorizerId":{"Ref":"ChatbotApiAuthorizer801BDC78"},"httpMethod":"GET","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":apigateway:ap-northeast-2:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["UserManagementFunction2338B082","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"resourceId":{"Ref":"ChatbotApiuserusageD0840B97"},"restApiId":{"Ref":"ChatbotApiF211B502"}}}}}},"OPTIONS":{"id":"OPTIONS","path":"ChatbotBackendDev/ChatbotApi/Default/user/usage/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotBackendDev/ChatbotApi/Default/user/usage/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{\"statusCode\": 200}"},"integrationResponses":[{"statusCode":"200","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'GET,OPTIONS'"}}]},"methodResponses":[{"statusCode":"200","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true}}],"resourceId":{"Ref":"ChatbotApiuserusageD0840B97"},"restApiId":{"Ref":"ChatbotApiF211B502"}}}}}}}},"subscription":{"id":"subscription","path":"ChatbotBackendDev/ChatbotApi/Default/user/subscription","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotBackendDev/ChatbotApi/Default/user/subscription/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Ref":"ChatbotApiuser787F7D3D"},"pathPart":"subscription","restApiId":{"Ref":"ChatbotApiF211B502"}}}},"GET":{"id":"GET","path":"ChatbotBackendDev/ChatbotApi/Default/user/subscription/GET","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.204.0","metadata":[]},"children":{"ApiPermission.ChatbotBackendDevChatbotApi322FF874.GET..user.subscription":{"id":"ApiPermission.ChatbotBackendDevChatbotApi322FF874.GET..user.subscription","path":"ChatbotBackendDev/ChatbotApi/Default/user/subscription/GET/ApiPermission.ChatbotBackendDevChatbotApi322FF874.GET..user.subscription","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["UserManagementFunction2338B082","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:ap-northeast-2:887078546492:",{"Ref":"ChatbotApiF211B502"},"/",{"Ref":"ChatbotApiDeploymentStageprod27096855"},"/GET/user/subscription"]]}}}},"ApiPermission.Test.ChatbotBackendDevChatbotApi322FF874.GET..user.subscription":{"id":"ApiPermission.Test.ChatbotBackendDevChatbotApi322FF874.GET..user.subscription","path":"ChatbotBackendDev/ChatbotApi/Default/user/subscription/GET/ApiPermission.Test.ChatbotBackendDevChatbotApi322FF874.GET..user.subscription","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["UserManagementFunction2338B082","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:ap-northeast-2:887078546492:",{"Ref":"ChatbotApiF211B502"},"/test-invoke-stage/GET/user/subscription"]]}}}},"Resource":{"id":"Resource","path":"ChatbotBackendDev/ChatbotApi/Default/user/subscription/GET/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"CUSTOM","authorizerId":{"Ref":"ChatbotApiAuthorizer801BDC78"},"httpMethod":"GET","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":apigateway:ap-northeast-2:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["UserManagementFunction2338B082","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"resourceId":{"Ref":"ChatbotApiusersubscriptionD8DD4043"},"restApiId":{"Ref":"ChatbotApiF211B502"}}}}}},"PUT":{"id":"PUT","path":"ChatbotBackendDev/ChatbotApi/Default/user/subscription/PUT","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.204.0","metadata":[]},"children":{"ApiPermission.ChatbotBackendDevChatbotApi322FF874.PUT..user.subscription":{"id":"ApiPermission.ChatbotBackendDevChatbotApi322FF874.PUT..user.subscription","path":"ChatbotBackendDev/ChatbotApi/Default/user/subscription/PUT/ApiPermission.ChatbotBackendDevChatbotApi322FF874.PUT..user.subscription","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["UserManagementFunction2338B082","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:ap-northeast-2:887078546492:",{"Ref":"ChatbotApiF211B502"},"/",{"Ref":"ChatbotApiDeploymentStageprod27096855"},"/PUT/user/subscription"]]}}}},"ApiPermission.Test.ChatbotBackendDevChatbotApi322FF874.PUT..user.subscription":{"id":"ApiPermission.Test.ChatbotBackendDevChatbotApi322FF874.PUT..user.subscription","path":"ChatbotBackendDev/ChatbotApi/Default/user/subscription/PUT/ApiPermission.Test.ChatbotBackendDevChatbotApi322FF874.PUT..user.subscription","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["UserManagementFunction2338B082","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:ap-northeast-2:887078546492:",{"Ref":"ChatbotApiF211B502"},"/test-invoke-stage/PUT/user/subscription"]]}}}},"Resource":{"id":"Resource","path":"ChatbotBackendDev/ChatbotApi/Default/user/subscription/PUT/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"CUSTOM","authorizerId":{"Ref":"ChatbotApiAuthorizer801BDC78"},"httpMethod":"PUT","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":apigateway:ap-northeast-2:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["UserManagementFunction2338B082","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"resourceId":{"Ref":"ChatbotApiusersubscriptionD8DD4043"},"restApiId":{"Ref":"ChatbotApiF211B502"}}}}}},"OPTIONS":{"id":"OPTIONS","path":"ChatbotBackendDev/ChatbotApi/Default/user/subscription/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotBackendDev/ChatbotApi/Default/user/subscription/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{\"statusCode\": 200}"},"integrationResponses":[{"statusCode":"200","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'GET,PUT,OPTIONS'"}}]},"methodResponses":[{"statusCode":"200","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true}}],"resourceId":{"Ref":"ChatbotApiusersubscriptionD8DD4043"},"restApiId":{"Ref":"ChatbotApiF211B502"}}}}}}}}}},"prompts":{"id":"prompts","path":"ChatbotBackendDev/ChatbotApi/Default/prompts","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotBackendDev/ChatbotApi/Default/prompts/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Fn::GetAtt":["ChatbotApiF211B502","RootResourceId"]},"pathPart":"prompts","restApiId":{"Ref":"ChatbotApiF211B502"}}}},"POST":{"id":"POST","path":"ChatbotBackendDev/ChatbotApi/Default/prompts/POST","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.204.0","metadata":[]},"children":{"ApiPermission.ChatbotBackendDevChatbotApi322FF874.POST..prompts":{"id":"ApiPermission.ChatbotBackendDevChatbotApi322FF874.POST..prompts","path":"ChatbotBackendDev/ChatbotApi/Default/prompts/POST/ApiPermission.ChatbotBackendDevChatbotApi322FF874.POST..prompts","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["GenerateFunctionD11A7A28","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:ap-northeast-2:887078546492:",{"Ref":"ChatbotApiF211B502"},"/",{"Ref":"ChatbotApiDeploymentStageprod27096855"},"/POST/prompts"]]}}}},"ApiPermission.Test.ChatbotBackendDevChatbotApi322FF874.POST..prompts":{"id":"ApiPermission.Test.ChatbotBackendDevChatbotApi322FF874.POST..prompts","path":"ChatbotBackendDev/ChatbotApi/Default/prompts/POST/ApiPermission.Test.ChatbotBackendDevChatbotApi322FF874.POST..prompts","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["GenerateFunctionD11A7A28","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:ap-northeast-2:887078546492:",{"Ref":"ChatbotApiF211B502"},"/test-invoke-stage/POST/prompts"]]}}}},"Resource":{"id":"Resource","path":"ChatbotBackendDev/ChatbotApi/Default/prompts/POST/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"CUSTOM","authorizerId":{"Ref":"ChatbotApiAuthorizer801BDC78"},"httpMethod":"POST","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":apigateway:ap-northeast-2:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["GenerateFunctionD11A7A28","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"resourceId":{"Ref":"ChatbotApiprompts03168F80"},"restApiId":{"Ref":"ChatbotApiF211B502"}}}}}},"GET":{"id":"GET","path":"ChatbotBackendDev/ChatbotApi/Default/prompts/GET","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.204.0","metadata":[]},"children":{"ApiPermission.ChatbotBackendDevChatbotApi322FF874.GET..prompts":{"id":"ApiPermission.ChatbotBackendDevChatbotApi322FF874.GET..prompts","path":"ChatbotBackendDev/ChatbotApi/Default/prompts/GET/ApiPermission.ChatbotBackendDevChatbotApi322FF874.GET..prompts","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["GenerateFunctionD11A7A28","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:ap-northeast-2:887078546492:",{"Ref":"ChatbotApiF211B502"},"/",{"Ref":"ChatbotApiDeploymentStageprod27096855"},"/GET/prompts"]]}}}},"ApiPermission.Test.ChatbotBackendDevChatbotApi322FF874.GET..prompts":{"id":"ApiPermission.Test.ChatbotBackendDevChatbotApi322FF874.GET..prompts","path":"ChatbotBackendDev/ChatbotApi/Default/prompts/GET/ApiPermission.Test.ChatbotBackendDevChatbotApi322FF874.GET..prompts","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["GenerateFunctionD11A7A28","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:ap-northeast-2:887078546492:",{"Ref":"ChatbotApiF211B502"},"/test-invoke-stage/GET/prompts"]]}}}},"Resource":{"id":"Resource","path":"ChatbotBackendDev/ChatbotApi/Default/prompts/GET/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"CUSTOM","authorizerId":{"Ref":"ChatbotApiAuthorizer801BDC78"},"httpMethod":"GET","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":apigateway:ap-northeast-2:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["GenerateFunctionD11A7A28","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"resourceId":{"Ref":"ChatbotApiprompts03168F80"},"restApiId":{"Ref":"ChatbotApiF211B502"}}}}}},"OPTIONS":{"id":"OPTIONS","path":"ChatbotBackendDev/ChatbotApi/Default/prompts/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotBackendDev/ChatbotApi/Default/prompts/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{\"statusCode\": 200}"},"integrationResponses":[{"statusCode":"200","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'GET,POST,PUT,DELETE,OPTIONS'"}}]},"methodResponses":[{"statusCode":"200","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true}}],"resourceId":{"Ref":"ChatbotApiprompts03168F80"},"restApiId":{"Ref":"ChatbotApiF211B502"}}}}}},"{promptId}":{"id":"{promptId}","path":"ChatbotBackendDev/ChatbotApi/Default/prompts/{promptId}","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotBackendDev/ChatbotApi/Default/prompts/{promptId}/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Ref":"ChatbotApiprompts03168F80"},"pathPart":"{promptId}","restApiId":{"Ref":"ChatbotApiF211B502"}}}},"PUT":{"id":"PUT","path":"ChatbotBackendDev/ChatbotApi/Default/prompts/{promptId}/PUT","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.204.0","metadata":[]},"children":{"ApiPermission.ChatbotBackendDevChatbotApi322FF874.PUT..prompts.{promptId}":{"id":"ApiPermission.ChatbotBackendDevChatbotApi322FF874.PUT..prompts.{promptId}","path":"ChatbotBackendDev/ChatbotApi/Default/prompts/{promptId}/PUT/ApiPermission.ChatbotBackendDevChatbotApi322FF874.PUT..prompts.{promptId}","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["GenerateFunctionD11A7A28","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:ap-northeast-2:887078546492:",{"Ref":"ChatbotApiF211B502"},"/",{"Ref":"ChatbotApiDeploymentStageprod27096855"},"/PUT/prompts/*"]]}}}},"ApiPermission.Test.ChatbotBackendDevChatbotApi322FF874.PUT..prompts.{promptId}":{"id":"ApiPermission.Test.ChatbotBackendDevChatbotApi322FF874.PUT..prompts.{promptId}","path":"ChatbotBackendDev/ChatbotApi/Default/prompts/{promptId}/PUT/ApiPermission.Test.ChatbotBackendDevChatbotApi322FF874.PUT..prompts.{promptId}","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["GenerateFunctionD11A7A28","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:ap-northeast-2:887078546492:",{"Ref":"ChatbotApiF211B502"},"/test-invoke-stage/PUT/prompts/*"]]}}}},"Resource":{"id":"Resource","path":"ChatbotBackendDev/ChatbotApi/Default/prompts/{promptId}/PUT/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"CUSTOM","authorizerId":{"Ref":"ChatbotApiAuthorizer801BDC78"},"httpMethod":"PUT","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":apigateway:ap-northeast-2:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["GenerateFunctionD11A7A28","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"resourceId":{"Ref":"ChatbotApipromptspromptId68497969"},"restApiId":{"Ref":"ChatbotApiF211B502"}}}}}},"DELETE":{"id":"DELETE","path":"ChatbotBackendDev/ChatbotApi/Default/prompts/{promptId}/DELETE","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.204.0","metadata":[]},"children":{"ApiPermission.ChatbotBackendDevChatbotApi322FF874.DELETE..prompts.{promptId}":{"id":"ApiPermission.ChatbotBackendDevChatbotApi322FF874.DELETE..prompts.{promptId}","path":"ChatbotBackendDev/ChatbotApi/Default/prompts/{promptId}/DELETE/ApiPermission.ChatbotBackendDevChatbotApi322FF874.DELETE..prompts.{promptId}","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["GenerateFunctionD11A7A28","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:ap-northeast-2:887078546492:",{"Ref":"ChatbotApiF211B502"},"/",{"Ref":"ChatbotApiDeploymentStageprod27096855"},"/DELETE/prompts/*"]]}}}},"ApiPermission.Test.ChatbotBackendDevChatbotApi322FF874.DELETE..prompts.{promptId}":{"id":"ApiPermission.Test.ChatbotBackendDevChatbotApi322FF874.DELETE..prompts.{promptId}","path":"ChatbotBackendDev/ChatbotApi/Default/prompts/{promptId}/DELETE/ApiPermission.Test.ChatbotBackendDevChatbotApi322FF874.DELETE..prompts.{promptId}","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["GenerateFunctionD11A7A28","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:ap-northeast-2:887078546492:",{"Ref":"ChatbotApiF211B502"},"/test-invoke-stage/DELETE/prompts/*"]]}}}},"Resource":{"id":"Resource","path":"ChatbotBackendDev/ChatbotApi/Default/prompts/{promptId}/DELETE/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"CUSTOM","authorizerId":{"Ref":"ChatbotApiAuthorizer801BDC78"},"httpMethod":"DELETE","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":apigateway:ap-northeast-2:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["GenerateFunctionD11A7A28","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"resourceId":{"Ref":"ChatbotApipromptspromptId68497969"},"restApiId":{"Ref":"ChatbotApiF211B502"}}}}}},"OPTIONS":{"id":"OPTIONS","path":"ChatbotBackendDev/ChatbotApi/Default/prompts/{promptId}/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotBackendDev/ChatbotApi/Default/prompts/{promptId}/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{\"statusCode\": 200}"},"integrationResponses":[{"statusCode":"200","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'GET,POST,PUT,DELETE,OPTIONS'"}}]},"methodResponses":[{"statusCode":"200","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true}}],"resourceId":{"Ref":"ChatbotApipromptspromptId68497969"},"restApiId":{"Ref":"ChatbotApiF211B502"}}}}}},"content":{"id":"content","path":"ChatbotBackendDev/ChatbotApi/Default/prompts/{promptId}/content","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotBackendDev/ChatbotApi/Default/prompts/{promptId}/content/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Ref":"ChatbotApipromptspromptId68497969"},"pathPart":"content","restApiId":{"Ref":"ChatbotApiF211B502"}}}},"GET":{"id":"GET","path":"ChatbotBackendDev/ChatbotApi/Default/prompts/{promptId}/content/GET","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.204.0","metadata":[]},"children":{"ApiPermission.ChatbotBackendDevChatbotApi322FF874.GET..prompts.{promptId}.content":{"id":"ApiPermission.ChatbotBackendDevChatbotApi322FF874.GET..prompts.{promptId}.content","path":"ChatbotBackendDev/ChatbotApi/Default/prompts/{promptId}/content/GET/ApiPermission.ChatbotBackendDevChatbotApi322FF874.GET..prompts.{promptId}.content","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["GenerateFunctionD11A7A28","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:ap-northeast-2:887078546492:",{"Ref":"ChatbotApiF211B502"},"/",{"Ref":"ChatbotApiDeploymentStageprod27096855"},"/GET/prompts/*/content"]]}}}},"ApiPermission.Test.ChatbotBackendDevChatbotApi322FF874.GET..prompts.{promptId}.content":{"id":"ApiPermission.Test.ChatbotBackendDevChatbotApi322FF874.GET..prompts.{promptId}.content","path":"ChatbotBackendDev/ChatbotApi/Default/prompts/{promptId}/content/GET/ApiPermission.Test.ChatbotBackendDevChatbotApi322FF874.GET..prompts.{promptId}.content","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["GenerateFunctionD11A7A28","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:ap-northeast-2:887078546492:",{"Ref":"ChatbotApiF211B502"},"/test-invoke-stage/GET/prompts/*/content"]]}}}},"Resource":{"id":"Resource","path":"ChatbotBackendDev/ChatbotApi/Default/prompts/{promptId}/content/GET/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"CUSTOM","authorizerId":{"Ref":"ChatbotApiAuthorizer801BDC78"},"httpMethod":"GET","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":apigateway:ap-northeast-2:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["GenerateFunctionD11A7A28","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"resourceId":{"Ref":"ChatbotApipromptspromptIdcontent206EE1A8"},"restApiId":{"Ref":"ChatbotApiF211B502"}}}}}},"OPTIONS":{"id":"OPTIONS","path":"ChatbotBackendDev/ChatbotApi/Default/prompts/{promptId}/content/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotBackendDev/ChatbotApi/Default/prompts/{promptId}/content/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{\"statusCode\": 200}"},"integrationResponses":[{"statusCode":"200","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'GET,OPTIONS'"}}]},"methodResponses":[{"statusCode":"200","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true}}],"resourceId":{"Ref":"ChatbotApipromptspromptIdcontent206EE1A8"},"restApiId":{"Ref":"ChatbotApiF211B502"}}}}}}}}}}}},"generate":{"id":"generate","path":"ChatbotBackendDev/ChatbotApi/Default/generate","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotBackendDev/ChatbotApi/Default/generate/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Fn::GetAtt":["ChatbotApiF211B502","RootResourceId"]},"pathPart":"generate","restApiId":{"Ref":"ChatbotApiF211B502"}}}},"POST":{"id":"POST","path":"ChatbotBackendDev/ChatbotApi/Default/generate/POST","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.204.0","metadata":[]},"children":{"ApiPermission.ChatbotBackendDevChatbotApi322FF874.POST..generate":{"id":"ApiPermission.ChatbotBackendDevChatbotApi322FF874.POST..generate","path":"ChatbotBackendDev/ChatbotApi/Default/generate/POST/ApiPermission.ChatbotBackendDevChatbotApi322FF874.POST..generate","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["GenerateFunctionD11A7A28","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:ap-northeast-2:887078546492:",{"Ref":"ChatbotApiF211B502"},"/",{"Ref":"ChatbotApiDeploymentStageprod27096855"},"/POST/generate"]]}}}},"ApiPermission.Test.ChatbotBackendDevChatbotApi322FF874.POST..generate":{"id":"ApiPermission.Test.ChatbotBackendDevChatbotApi322FF874.POST..generate","path":"ChatbotBackendDev/ChatbotApi/Default/generate/POST/ApiPermission.Test.ChatbotBackendDevChatbotApi322FF874.POST..generate","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["GenerateFunctionD11A7A28","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:ap-northeast-2:887078546492:",{"Ref":"ChatbotApiF211B502"},"/test-invoke-stage/POST/generate"]]}}}},"Resource":{"id":"Resource","path":"ChatbotBackendDev/ChatbotApi/Default/generate/POST/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"NONE","httpMethod":"POST","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":apigateway:ap-northeast-2:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["GenerateFunctionD11A7A28","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"resourceId":{"Ref":"ChatbotApigenerate2D00A9C0"},"restApiId":{"Ref":"ChatbotApiF211B502"}}}}}},"OPTIONS":{"id":"OPTIONS","path":"ChatbotBackendDev/ChatbotApi/Default/generate/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotBackendDev/ChatbotApi/Default/generate/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{\"statusCode\": 200}"},"integrationResponses":[{"statusCode":"200","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'POST,OPTIONS'"}}]},"methodResponses":[{"statusCode":"200","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true}}],"resourceId":{"Ref":"ChatbotApigenerate2D00A9C0"},"restApiId":{"Ref":"ChatbotApiF211B502"}}}}}},"stream":{"id":"stream","path":"ChatbotBackendDev/ChatbotApi/Default/generate/stream","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotBackendDev/ChatbotApi/Default/generate/stream/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Ref":"ChatbotApigenerate2D00A9C0"},"pathPart":"stream","restApiId":{"Ref":"ChatbotApiF211B502"}}}},"POST":{"id":"POST","path":"ChatbotBackendDev/ChatbotApi/Default/generate/stream/POST","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.204.0","metadata":[]},"children":{"ApiPermission.ChatbotBackendDevChatbotApi322FF874.POST..generate.stream":{"id":"ApiPermission.ChatbotBackendDevChatbotApi322FF874.POST..generate.stream","path":"ChatbotBackendDev/ChatbotApi/Default/generate/stream/POST/ApiPermission.ChatbotBackendDevChatbotApi322FF874.POST..generate.stream","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["GenerateFunctionD11A7A28","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:ap-northeast-2:887078546492:",{"Ref":"ChatbotApiF211B502"},"/",{"Ref":"ChatbotApiDeploymentStageprod27096855"},"/POST/generate/stream"]]}}}},"ApiPermission.Test.ChatbotBackendDevChatbotApi322FF874.POST..generate.stream":{"id":"ApiPermission.Test.ChatbotBackendDevChatbotApi322FF874.POST..generate.stream","path":"ChatbotBackendDev/ChatbotApi/Default/generate/stream/POST/ApiPermission.Test.ChatbotBackendDevChatbotApi322FF874.POST..generate.stream","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["GenerateFunctionD11A7A28","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:ap-northeast-2:887078546492:",{"Ref":"ChatbotApiF211B502"},"/test-invoke-stage/POST/generate/stream"]]}}}},"Resource":{"id":"Resource","path":"ChatbotBackendDev/ChatbotApi/Default/generate/stream/POST/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"NONE","httpMethod":"POST","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":apigateway:ap-northeast-2:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["GenerateFunctionD11A7A28","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"resourceId":{"Ref":"ChatbotApigeneratestream540C4A3C"},"restApiId":{"Ref":"ChatbotApiF211B502"}}}}}},"OPTIONS":{"id":"OPTIONS","path":"ChatbotBackendDev/ChatbotApi/Default/generate/stream/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotBackendDev/ChatbotApi/Default/generate/stream/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{\"statusCode\": 200}"},"integrationResponses":[{"statusCode":"200","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'OPTIONS,POST'"}}]},"methodResponses":[{"statusCode":"200","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true}}],"resourceId":{"Ref":"ChatbotApigeneratestream540C4A3C"},"restApiId":{"Ref":"ChatbotApiF211B502"}}}}}}}}}},"conversations":{"id":"conversations","path":"ChatbotBackendDev/ChatbotApi/Default/conversations","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotBackendDev/ChatbotApi/Default/conversations/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Fn::GetAtt":["ChatbotApiF211B502","RootResourceId"]},"pathPart":"conversations","restApiId":{"Ref":"ChatbotApiF211B502"}}}},"GET":{"id":"GET","path":"ChatbotBackendDev/ChatbotApi/Default/conversations/GET","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.204.0","metadata":[]},"children":{"ApiPermission.ChatbotBackendDevChatbotApi322FF874.GET..conversations":{"id":"ApiPermission.ChatbotBackendDevChatbotApi322FF874.GET..conversations","path":"ChatbotBackendDev/ChatbotApi/Default/conversations/GET/ApiPermission.ChatbotBackendDevChatbotApi322FF874.GET..conversations","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::ImportValue":"ChatbotConversationStackDev:ExportsOutputFnGetAttConversationFunction7337ABEAArnB4BCD543"},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:ap-northeast-2:887078546492:",{"Ref":"ChatbotApiF211B502"},"/",{"Ref":"ChatbotApiDeploymentStageprod27096855"},"/GET/conversations"]]}}}},"ApiPermission.Test.ChatbotBackendDevChatbotApi322FF874.GET..conversations":{"id":"ApiPermission.Test.ChatbotBackendDevChatbotApi322FF874.GET..conversations","path":"ChatbotBackendDev/ChatbotApi/Default/conversations/GET/ApiPermission.Test.ChatbotBackendDevChatbotApi322FF874.GET..conversations","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::ImportValue":"ChatbotConversationStackDev:ExportsOutputFnGetAttConversationFunction7337ABEAArnB4BCD543"},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:ap-northeast-2:887078546492:",{"Ref":"ChatbotApiF211B502"},"/test-invoke-stage/GET/conversations"]]}}}},"Resource":{"id":"Resource","path":"ChatbotBackendDev/ChatbotApi/Default/conversations/GET/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"CUSTOM","authorizerId":{"Ref":"ChatbotApiAuthorizer801BDC78"},"httpMethod":"GET","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":apigateway:ap-northeast-2:lambda:path/2015-03-31/functions/",{"Fn::ImportValue":"ChatbotConversationStackDev:ExportsOutputFnGetAttConversationFunction7337ABEAArnB4BCD543"},"/invocations"]]},"integrationHttpMethod":"POST"},"resourceId":{"Ref":"ChatbotApiconversationsBC964F06"},"restApiId":{"Ref":"ChatbotApiF211B502"}}}}}},"POST":{"id":"POST","path":"ChatbotBackendDev/ChatbotApi/Default/conversations/POST","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.204.0","metadata":[]},"children":{"ApiPermission.ChatbotBackendDevChatbotApi322FF874.POST..conversations":{"id":"ApiPermission.ChatbotBackendDevChatbotApi322FF874.POST..conversations","path":"ChatbotBackendDev/ChatbotApi/Default/conversations/POST/ApiPermission.ChatbotBackendDevChatbotApi322FF874.POST..conversations","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::ImportValue":"ChatbotConversationStackDev:ExportsOutputFnGetAttConversationFunction7337ABEAArnB4BCD543"},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:ap-northeast-2:887078546492:",{"Ref":"ChatbotApiF211B502"},"/",{"Ref":"ChatbotApiDeploymentStageprod27096855"},"/POST/conversations"]]}}}},"ApiPermission.Test.ChatbotBackendDevChatbotApi322FF874.POST..conversations":{"id":"ApiPermission.Test.ChatbotBackendDevChatbotApi322FF874.POST..conversations","path":"ChatbotBackendDev/ChatbotApi/Default/conversations/POST/ApiPermission.Test.ChatbotBackendDevChatbotApi322FF874.POST..conversations","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::ImportValue":"ChatbotConversationStackDev:ExportsOutputFnGetAttConversationFunction7337ABEAArnB4BCD543"},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:ap-northeast-2:887078546492:",{"Ref":"ChatbotApiF211B502"},"/test-invoke-stage/POST/conversations"]]}}}},"Resource":{"id":"Resource","path":"ChatbotBackendDev/ChatbotApi/Default/conversations/POST/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"CUSTOM","authorizerId":{"Ref":"ChatbotApiAuthorizer801BDC78"},"httpMethod":"POST","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":apigateway:ap-northeast-2:lambda:path/2015-03-31/functions/",{"Fn::ImportValue":"ChatbotConversationStackDev:ExportsOutputFnGetAttConversationFunction7337ABEAArnB4BCD543"},"/invocations"]]},"integrationHttpMethod":"POST"},"resourceId":{"Ref":"ChatbotApiconversationsBC964F06"},"restApiId":{"Ref":"ChatbotApiF211B502"}}}}}},"{id}":{"id":"{id}","path":"ChatbotBackendDev/ChatbotApi/Default/conversations/{id}","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotBackendDev/ChatbotApi/Default/conversations/{id}/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Ref":"ChatbotApiconversationsBC964F06"},"pathPart":"{id}","restApiId":{"Ref":"ChatbotApiF211B502"}}}},"DELETE":{"id":"DELETE","path":"ChatbotBackendDev/ChatbotApi/Default/conversations/{id}/DELETE","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.204.0","metadata":[]},"children":{"ApiPermission.ChatbotBackendDevChatbotApi322FF874.DELETE..conversations.{id}":{"id":"ApiPermission.ChatbotBackendDevChatbotApi322FF874.DELETE..conversations.{id}","path":"ChatbotBackendDev/ChatbotApi/Default/conversations/{id}/DELETE/ApiPermission.ChatbotBackendDevChatbotApi322FF874.DELETE..conversations.{id}","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::ImportValue":"ChatbotConversationStackDev:ExportsOutputFnGetAttConversationFunction7337ABEAArnB4BCD543"},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:ap-northeast-2:887078546492:",{"Ref":"ChatbotApiF211B502"},"/",{"Ref":"ChatbotApiDeploymentStageprod27096855"},"/DELETE/conversations/*"]]}}}},"ApiPermission.Test.ChatbotBackendDevChatbotApi322FF874.DELETE..conversations.{id}":{"id":"ApiPermission.Test.ChatbotBackendDevChatbotApi322FF874.DELETE..conversations.{id}","path":"ChatbotBackendDev/ChatbotApi/Default/conversations/{id}/DELETE/ApiPermission.Test.ChatbotBackendDevChatbotApi322FF874.DELETE..conversations.{id}","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::ImportValue":"ChatbotConversationStackDev:ExportsOutputFnGetAttConversationFunction7337ABEAArnB4BCD543"},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:ap-northeast-2:887078546492:",{"Ref":"ChatbotApiF211B502"},"/test-invoke-stage/DELETE/conversations/*"]]}}}},"Resource":{"id":"Resource","path":"ChatbotBackendDev/ChatbotApi/Default/conversations/{id}/DELETE/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"CUSTOM","authorizerId":{"Ref":"ChatbotApiAuthorizer801BDC78"},"httpMethod":"DELETE","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":apigateway:ap-northeast-2:lambda:path/2015-03-31/functions/",{"Fn::ImportValue":"ChatbotConversationStackDev:ExportsOutputFnGetAttConversationFunction7337ABEAArnB4BCD543"},"/invocations"]]},"integrationHttpMethod":"POST"},"resourceId":{"Ref":"ChatbotApiconversationsid4B5FBE13"},"restApiId":{"Ref":"ChatbotApiF211B502"}}}}}},"PUT":{"id":"PUT","path":"ChatbotBackendDev/ChatbotApi/Default/conversations/{id}/PUT","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.204.0","metadata":[]},"children":{"ApiPermission.ChatbotBackendDevChatbotApi322FF874.PUT..conversations.{id}":{"id":"ApiPermission.ChatbotBackendDevChatbotApi322FF874.PUT..conversations.{id}","path":"ChatbotBackendDev/ChatbotApi/Default/conversations/{id}/PUT/ApiPermission.ChatbotBackendDevChatbotApi322FF874.PUT..conversations.{id}","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::ImportValue":"ChatbotConversationStackDev:ExportsOutputFnGetAttConversationFunction7337ABEAArnB4BCD543"},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:ap-northeast-2:887078546492:",{"Ref":"ChatbotApiF211B502"},"/",{"Ref":"ChatbotApiDeploymentStageprod27096855"},"/PUT/conversations/*"]]}}}},"ApiPermission.Test.ChatbotBackendDevChatbotApi322FF874.PUT..conversations.{id}":{"id":"ApiPermission.Test.ChatbotBackendDevChatbotApi322FF874.PUT..conversations.{id}","path":"ChatbotBackendDev/ChatbotApi/Default/conversations/{id}/PUT/ApiPermission.Test.ChatbotBackendDevChatbotApi322FF874.PUT..conversations.{id}","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::ImportValue":"ChatbotConversationStackDev:ExportsOutputFnGetAttConversationFunction7337ABEAArnB4BCD543"},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:ap-northeast-2:887078546492:",{"Ref":"ChatbotApiF211B502"},"/test-invoke-stage/PUT/conversations/*"]]}}}},"Resource":{"id":"Resource","path":"ChatbotBackendDev/ChatbotApi/Default/conversations/{id}/PUT/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"CUSTOM","authorizerId":{"Ref":"ChatbotApiAuthorizer801BDC78"},"httpMethod":"PUT","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":apigateway:ap-northeast-2:lambda:path/2015-03-31/functions/",{"Fn::ImportValue":"ChatbotConversationStackDev:ExportsOutputFnGetAttConversationFunction7337ABEAArnB4BCD543"},"/invocations"]]},"integrationHttpMethod":"POST"},"resourceId":{"Ref":"ChatbotApiconversationsid4B5FBE13"},"restApiId":{"Ref":"ChatbotApiF211B502"}}}}}},"OPTIONS":{"id":"OPTIONS","path":"ChatbotBackendDev/ChatbotApi/Default/conversations/{id}/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotBackendDev/ChatbotApi/Default/conversations/{id}/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{\"statusCode\": 200}"},"integrationResponses":[{"statusCode":"200","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token'","method.response.header.Access-Control-Allow-Methods":"'DELETE,PUT,OPTIONS'","method.response.header.Access-Control-Allow-Origin":"'*'"}}]},"methodResponses":[{"statusCode":"200","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Methods":true,"method.response.header.Access-Control-Allow-Origin":true}}],"resourceId":{"Ref":"ChatbotApiconversationsid4B5FBE13"},"restApiId":{"Ref":"ChatbotApiF211B502"}}}}}}}},"OPTIONS":{"id":"OPTIONS","path":"ChatbotBackendDev/ChatbotApi/Default/conversations/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotBackendDev/ChatbotApi/Default/conversations/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{\"statusCode\": 200}"},"integrationResponses":[{"statusCode":"200","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token'","method.response.header.Access-Control-Allow-Methods":"'GET,POST,OPTIONS'","method.response.header.Access-Control-Allow-Origin":"'*'"}}]},"methodResponses":[{"statusCode":"200","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Methods":true,"method.response.header.Access-Control-Allow-Origin":true}}],"resourceId":{"Ref":"ChatbotApiconversationsBC964F06"},"restApiId":{"Ref":"ChatbotApiF211B502"}}}}}}}},"messages":{"id":"messages","path":"ChatbotBackendDev/ChatbotApi/Default/messages","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotBackendDev/ChatbotApi/Default/messages/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Fn::GetAtt":["ChatbotApiF211B502","RootResourceId"]},"pathPart":"messages","restApiId":{"Ref":"ChatbotApiF211B502"}}}},"GET":{"id":"GET","path":"ChatbotBackendDev/ChatbotApi/Default/messages/GET","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.204.0","metadata":[]},"children":{"ApiPermission.ChatbotBackendDevChatbotApi322FF874.GET..messages":{"id":"ApiPermission.ChatbotBackendDevChatbotApi322FF874.GET..messages","path":"ChatbotBackendDev/ChatbotApi/Default/messages/GET/ApiPermission.ChatbotBackendDevChatbotApi322FF874.GET..messages","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::ImportValue":"ChatbotConversationStackDev:ExportsOutputFnGetAttMessageFunction5E234045Arn6574E935"},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:ap-northeast-2:887078546492:",{"Ref":"ChatbotApiF211B502"},"/",{"Ref":"ChatbotApiDeploymentStageprod27096855"},"/GET/messages"]]}}}},"ApiPermission.Test.ChatbotBackendDevChatbotApi322FF874.GET..messages":{"id":"ApiPermission.Test.ChatbotBackendDevChatbotApi322FF874.GET..messages","path":"ChatbotBackendDev/ChatbotApi/Default/messages/GET/ApiPermission.Test.ChatbotBackendDevChatbotApi322FF874.GET..messages","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::ImportValue":"ChatbotConversationStackDev:ExportsOutputFnGetAttMessageFunction5E234045Arn6574E935"},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:ap-northeast-2:887078546492:",{"Ref":"ChatbotApiF211B502"},"/test-invoke-stage/GET/messages"]]}}}},"Resource":{"id":"Resource","path":"ChatbotBackendDev/ChatbotApi/Default/messages/GET/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"CUSTOM","authorizerId":{"Ref":"ChatbotApiAuthorizer801BDC78"},"httpMethod":"GET","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":apigateway:ap-northeast-2:lambda:path/2015-03-31/functions/",{"Fn::ImportValue":"ChatbotConversationStackDev:ExportsOutputFnGetAttMessageFunction5E234045Arn6574E935"},"/invocations"]]},"integrationHttpMethod":"POST"},"resourceId":{"Ref":"ChatbotApimessages59D3C7B0"},"restApiId":{"Ref":"ChatbotApiF211B502"}}}}}},"OPTIONS":{"id":"OPTIONS","path":"ChatbotBackendDev/ChatbotApi/Default/messages/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotBackendDev/ChatbotApi/Default/messages/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{\"statusCode\": 200}"},"integrationResponses":[{"statusCode":"200","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token'","method.response.header.Access-Control-Allow-Methods":"'GET,OPTIONS'","method.response.header.Access-Control-Allow-Origin":"'*'"}}]},"methodResponses":[{"statusCode":"200","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Methods":true,"method.response.header.Access-Control-Allow-Origin":true}}],"resourceId":{"Ref":"ChatbotApimessages59D3C7B0"},"restApiId":{"Ref":"ChatbotApiF211B502"}}}}}}}}}},"cors-4xx":{"id":"cors-4xx","path":"ChatbotBackendDev/ChatbotApi/cors-4xx","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.GatewayResponse","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotBackendDev/ChatbotApi/cors-4xx/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnGatewayResponse","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::GatewayResponse","aws:cdk:cloudformation:props":{"responseParameters":{"gatewayresponse.header.method.response.header.Access-Control-Allow-Origin":"'*'","gatewayresponse.header.method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token'","gatewayresponse.header.method.response.header.Access-Control-Allow-Methods":"'GET,POST,PUT,DELETE,OPTIONS'"},"responseType":"DEFAULT_4XX","restApiId":{"Ref":"ChatbotApiF211B502"}}}}}},"cors-5xx":{"id":"cors-5xx","path":"ChatbotBackendDev/ChatbotApi/cors-5xx","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.GatewayResponse","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotBackendDev/ChatbotApi/cors-5xx/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnGatewayResponse","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::GatewayResponse","aws:cdk:cloudformation:props":{"responseParameters":{"gatewayresponse.header.method.response.header.Access-Control-Allow-Origin":"'*'","gatewayresponse.header.method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token'","gatewayresponse.header.method.response.header.Access-Control-Allow-Methods":"'GET,POST,PUT,DELETE,OPTIONS'"},"responseType":"DEFAULT_5XX","restApiId":{"Ref":"ChatbotApiF211B502"}}}}}},"cors-unauthorized":{"id":"cors-unauthorized","path":"ChatbotBackendDev/ChatbotApi/cors-unauthorized","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.GatewayResponse","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotBackendDev/ChatbotApi/cors-unauthorized/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnGatewayResponse","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::GatewayResponse","aws:cdk:cloudformation:props":{"responseParameters":{"gatewayresponse.header.method.response.header.Access-Control-Allow-Origin":"'*'","gatewayresponse.header.method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token'","gatewayresponse.header.method.response.header.Access-Control-Allow-Methods":"'GET,POST,PUT,DELETE,OPTIONS'"},"responseType":"UNAUTHORIZED","restApiId":{"Ref":"ChatbotApiF211B502"}}}}}}}},"ChatbotApiAuthorizer":{"id":"ChatbotApiAuthorizer","path":"ChatbotBackendDev/ChatbotApiAuthorizer","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.RequestAuthorizer","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotBackendDev/ChatbotApiAuthorizer/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnAuthorizer","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Authorizer","aws:cdk:cloudformation:props":{"authorizerResultTtlInSeconds":300,"authorizerUri":{"Fn::Join":["",["arn:",{"Fn::Select":[1,{"Fn::Split":[":",{"Fn::GetAtt":["JWTAuthorizerFunction9F386173","Arn"]}]}]},":apigateway:",{"Fn::Select":[3,{"Fn::Split":[":",{"Fn::GetAtt":["JWTAuthorizerFunction9F386173","Arn"]}]}]},":lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["JWTAuthorizerFunction9F386173","Arn"]},"/invocations"]]},"identitySource":"method.request.header.Authorization","name":"chatbot-jwt-authorizer","restApiId":{"Ref":"ChatbotApiF211B502"},"type":"REQUEST"}}}}},"WebSocketConnectionsTable":{"id":"WebSocketConnectionsTable","path":"ChatbotBackendDev/WebSocketConnectionsTable","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.Table","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotBackendDev/WebSocketConnectionsTable/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.CfnTable","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::DynamoDB::Table","aws:cdk:cloudformation:props":{"attributeDefinitions":[{"attributeName":"connectionId","attributeType":"S"}],"billingMode":"PAY_PER_REQUEST","keySchema":[{"attributeName":"connectionId","keyType":"HASH"}],"tableName":"chatbot-websocket-connections","timeToLiveSpecification":{"attributeName":"ttl","enabled":true}}}},"ScalingRole":{"id":"ScalingRole","path":"ChatbotBackendDev/WebSocketConnectionsTable/ScalingRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.204.0","metadata":[]}}}},"WebSocketLambdaRole":{"id":"WebSocketLambdaRole","path":"ChatbotBackendDev/WebSocketLambdaRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.204.0","metadata":[]},"children":{"ImportWebSocketLambdaRole":{"id":"ImportWebSocketLambdaRole","path":"ChatbotBackendDev/WebSocketLambdaRole/ImportWebSocketLambdaRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.204.0","metadata":[]}},"Resource":{"id":"Resource","path":"ChatbotBackendDev/WebSocketLambdaRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]},{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/AmazonBedrockFullAccess"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"ChatbotBackendDev/WebSocketLambdaRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotBackendDev/WebSocketLambdaRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["execute-api:ManageConnections","dynamodb:PutItem","dynamodb:DeleteItem","dynamodb:GetItem","dynamodb:Query","dynamodb:Scan","dynamodb:BatchWriteItem","dynamodb:UpdateItem","s3:GetObject","bedrock:InvokeModel","bedrock:InvokeModelWithResponseStream","bedrock:Retrieve","bedrock-agent:Retrieve"],"Effect":"Allow","Resource":["arn:aws:execute-api:ap-northeast-2:887078546492:*/*/*",{"Fn::GetAtt":["WebSocketConnectionsTable7F0028CC","Arn"]},{"Fn::GetAtt":["PromptMetaTable0A0B3876","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["PromptBucket1668FD1C","Arn"]},"/*"]]},"arn:aws:dynamodb:ap-northeast-2:887078546492:table/Conversations","arn:aws:dynamodb:ap-northeast-2:887078546492:table/Messages","arn:aws:dynamodb:ap-northeast-2:887078546492:table/ChatbotConversations","arn:aws:dynamodb:ap-northeast-2:887078546492:table/ChatbotMessages","arn:aws:dynamodb:ap-northeast-2:887078546492:table/perplexity-search-cache","arn:aws:bedrock:ap-northeast-2::foundation-model/*"]}],"Version":"2012-10-17"},"policyName":"WebSocketLambdaRoleDefaultPolicyF19D90C5","roles":[{"Ref":"WebSocketLambdaRole0DF09B59"}]}}}}}}},"WebSocketConnectFunction":{"id":"WebSocketConnectFunction","path":"ChatbotBackendDev/WebSocketConnectFunction","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.204.0","metadata":[]},"children":{"Code":{"id":"Code","path":"ChatbotBackendDev/WebSocketConnectFunction/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.204.0"},"children":{"Stage":{"id":"Stage","path":"ChatbotBackendDev/WebSocketConnectFunction/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.204.0"}},"AssetBucket":{"id":"AssetBucket","path":"ChatbotBackendDev/WebSocketConnectFunction/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.204.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"ChatbotBackendDev/WebSocketConnectFunction/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-887078546492-ap-northeast-2","s3Key":"a14fee87914f69dd8d42c5493f9ba098c50b316785d36eab2fcb7e0c7dd3a297.zip"},"environment":{"variables":{"CONNECTIONS_TABLE":{"Ref":"WebSocketConnectionsTable7F0028CC"},"REGION":"ap-northeast-2"}},"handler":"connect.handler","memorySize":256,"role":{"Fn::GetAtt":["WebSocketLambdaRole0DF09B59","Arn"]},"runtime":"python3.11","timeout":60}}}}},"WebSocketDisconnectFunction":{"id":"WebSocketDisconnectFunction","path":"ChatbotBackendDev/WebSocketDisconnectFunction","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.204.0","metadata":[]},"children":{"Code":{"id":"Code","path":"ChatbotBackendDev/WebSocketDisconnectFunction/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.204.0"},"children":{"Stage":{"id":"Stage","path":"ChatbotBackendDev/WebSocketDisconnectFunction/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.204.0"}},"AssetBucket":{"id":"AssetBucket","path":"ChatbotBackendDev/WebSocketDisconnectFunction/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.204.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"ChatbotBackendDev/WebSocketDisconnectFunction/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-887078546492-ap-northeast-2","s3Key":"a14fee87914f69dd8d42c5493f9ba098c50b316785d36eab2fcb7e0c7dd3a297.zip"},"environment":{"variables":{"CONNECTIONS_TABLE":{"Ref":"WebSocketConnectionsTable7F0028CC"},"REGION":"ap-northeast-2"}},"handler":"disconnect.handler","memorySize":256,"role":{"Fn::GetAtt":["WebSocketLambdaRole0DF09B59","Arn"]},"runtime":"python3.11","timeout":60}}}}},"ChatbotWebSocketApi":{"id":"ChatbotWebSocketApi","path":"ChatbotBackendDev/ChatbotWebSocketApi","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.WebSocketApi","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotBackendDev/ChatbotWebSocketApi/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.CfnApi","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGatewayV2::Api","aws:cdk:cloudformation:props":{"description":"실시간 스트리밍을 위한 WebSocket API","name":"chatbot-websocket-api","protocolType":"WEBSOCKET","routeSelectionExpression":"$request.body.action"}}},"$connect-Route":{"id":"$connect-Route","path":"ChatbotBackendDev/ChatbotWebSocketApi/$connect-Route","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.WebSocketRoute","version":"2.204.0","metadata":[]},"children":{"ConnectIntegration-Permission":{"id":"ConnectIntegration-Permission","path":"ChatbotBackendDev/ChatbotWebSocketApi/$connect-Route/ConnectIntegration-Permission","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["WebSocketConnectFunction72183AC0","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:ap-northeast-2:887078546492:",{"Ref":"ChatbotWebSocketApi72B63158"},"/*$connect"]]}}}},"ConnectIntegration":{"id":"ConnectIntegration","path":"ChatbotBackendDev/ChatbotWebSocketApi/$connect-Route/ConnectIntegration","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.WebSocketIntegration","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotBackendDev/ChatbotWebSocketApi/$connect-Route/ConnectIntegration/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.CfnIntegration","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGatewayV2::Integration","aws:cdk:cloudformation:props":{"apiId":{"Ref":"ChatbotWebSocketApi72B63158"},"integrationType":"AWS_PROXY","integrationUri":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":apigateway:ap-northeast-2:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["WebSocketConnectFunction72183AC0","Arn"]},"/invocations"]]}}}}}},"Resource":{"id":"Resource","path":"ChatbotBackendDev/ChatbotWebSocketApi/$connect-Route/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.CfnRoute","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGatewayV2::Route","aws:cdk:cloudformation:props":{"apiId":{"Ref":"ChatbotWebSocketApi72B63158"},"authorizationType":"NONE","routeKey":"$connect","target":{"Fn::Join":["",["integrations/",{"Ref":"ChatbotWebSocketApiconnectRouteConnectIntegrationB3D8427B"}]]}}}}}},"$disconnect-Route":{"id":"$disconnect-Route","path":"ChatbotBackendDev/ChatbotWebSocketApi/$disconnect-Route","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.WebSocketRoute","version":"2.204.0","metadata":[]},"children":{"DisconnectIntegration-Permission":{"id":"DisconnectIntegration-Permission","path":"ChatbotBackendDev/ChatbotWebSocketApi/$disconnect-Route/DisconnectIntegration-Permission","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["WebSocketDisconnectFunction189772FC","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:ap-northeast-2:887078546492:",{"Ref":"ChatbotWebSocketApi72B63158"},"/*$disconnect"]]}}}},"DisconnectIntegration":{"id":"DisconnectIntegration","path":"ChatbotBackendDev/ChatbotWebSocketApi/$disconnect-Route/DisconnectIntegration","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.WebSocketIntegration","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotBackendDev/ChatbotWebSocketApi/$disconnect-Route/DisconnectIntegration/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.CfnIntegration","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGatewayV2::Integration","aws:cdk:cloudformation:props":{"apiId":{"Ref":"ChatbotWebSocketApi72B63158"},"integrationType":"AWS_PROXY","integrationUri":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":apigateway:ap-northeast-2:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["WebSocketDisconnectFunction189772FC","Arn"]},"/invocations"]]}}}}}},"Resource":{"id":"Resource","path":"ChatbotBackendDev/ChatbotWebSocketApi/$disconnect-Route/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.CfnRoute","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGatewayV2::Route","aws:cdk:cloudformation:props":{"apiId":{"Ref":"ChatbotWebSocketApi72B63158"},"authorizationType":"NONE","routeKey":"$disconnect","target":{"Fn::Join":["",["integrations/",{"Ref":"ChatbotWebSocketApidisconnectRouteDisconnectIntegrationC271F4AD"}]]}}}}}},"stream-Route":{"id":"stream-Route","path":"ChatbotBackendDev/ChatbotWebSocketApi/stream-Route","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.WebSocketRoute","version":"2.204.0","metadata":[]},"children":{"StreamIntegration-Permission":{"id":"StreamIntegration-Permission","path":"ChatbotBackendDev/ChatbotWebSocketApi/stream-Route/StreamIntegration-Permission","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["WebSocketStreamFunctionB192D3D1","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:ap-northeast-2:887078546492:",{"Ref":"ChatbotWebSocketApi72B63158"},"/*stream"]]}}}},"StreamIntegration":{"id":"StreamIntegration","path":"ChatbotBackendDev/ChatbotWebSocketApi/stream-Route/StreamIntegration","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.WebSocketIntegration","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotBackendDev/ChatbotWebSocketApi/stream-Route/StreamIntegration/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.CfnIntegration","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGatewayV2::Integration","aws:cdk:cloudformation:props":{"apiId":{"Ref":"ChatbotWebSocketApi72B63158"},"integrationType":"AWS_PROXY","integrationUri":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":apigateway:ap-northeast-2:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["WebSocketStreamFunctionB192D3D1","Arn"]},"/invocations"]]}}}}}},"Resource":{"id":"Resource","path":"ChatbotBackendDev/ChatbotWebSocketApi/stream-Route/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.CfnRoute","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGatewayV2::Route","aws:cdk:cloudformation:props":{"apiId":{"Ref":"ChatbotWebSocketApi72B63158"},"authorizationType":"NONE","routeKey":"stream","target":{"Fn::Join":["",["integrations/",{"Ref":"ChatbotWebSocketApistreamRouteStreamIntegrationD379831A"}]]}}}}}}}},"WebSocketStreamFunction":{"id":"WebSocketStreamFunction","path":"ChatbotBackendDev/WebSocketStreamFunction","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.204.0","metadata":[]},"children":{"Code":{"id":"Code","path":"ChatbotBackendDev/WebSocketStreamFunction/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.204.0"},"children":{"Stage":{"id":"Stage","path":"ChatbotBackendDev/WebSocketStreamFunction/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.204.0"}},"AssetBucket":{"id":"AssetBucket","path":"ChatbotBackendDev/WebSocketStreamFunction/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.204.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"ChatbotBackendDev/WebSocketStreamFunction/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-887078546492-ap-northeast-2","s3Key":"a14fee87914f69dd8d42c5493f9ba098c50b316785d36eab2fcb7e0c7dd3a297.zip"},"environment":{"variables":{"CONNECTIONS_TABLE":{"Ref":"WebSocketConnectionsTable7F0028CC"},"PROMPT_META_TABLE":{"Ref":"PromptMetaTable0A0B3876"},"PROMPT_BUCKET":{"Ref":"PromptBucket1668FD1C"},"REGION":"ap-northeast-2","CONVERSATIONS_TABLE":"ChatbotConversations","MESSAGES_TABLE":"ChatbotMessages","PERPLEXITY_API_KEY":"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","API_GATEWAY_DOMAIN":{"Fn::GetAtt":["ChatbotWebSocketApi72B63158","ApiEndpoint"]},"STAGE":"prod","KNOWLEDGE_BASE_ID":"PGQV3JXPET","S3_BUCKET_NAME":"seoul-economic-news-data-2025","NEWS_BUCKET":"seoul-economic-news-data-2025"}},"handler":"stream.handler","layers":[{"Ref":"NewsProcessingLayer63A6C836"}],"memorySize":3008,"role":{"Fn::GetAtt":["WebSocketLambdaRole0DF09B59","Arn"]},"runtime":"python3.11","timeout":900}}}}},"WebSocketStage":{"id":"WebSocketStage","path":"ChatbotBackendDev/WebSocketStage","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.WebSocketStage","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotBackendDev/WebSocketStage/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.CfnStage","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGatewayV2::Stage","aws:cdk:cloudformation:props":{"apiId":{"Ref":"ChatbotWebSocketApi72B63158"},"autoDeploy":true,"stageName":"prod"}}}}},"WebSocketApiUrl":{"id":"WebSocketApiUrl","path":"ChatbotBackendDev/WebSocketApiUrl","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.204.0"}},"GenerateErrorAlarm":{"id":"GenerateErrorAlarm","path":"ChatbotBackendDev/GenerateErrorAlarm","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.Alarm","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotBackendDev/GenerateErrorAlarm/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.CfnAlarm","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CloudWatch::Alarm","aws:cdk:cloudformation:props":{"alarmDescription":"Generate Lambda 함수 오류율이 높습니다","comparisonOperator":"GreaterThanOrEqualToThreshold","dimensions":[{"name":"FunctionName","value":{"Ref":"GenerateFunctionD11A7A28"}}],"evaluationPeriods":2,"metricName":"Errors","namespace":"AWS/Lambda","period":300,"statistic":"Sum","threshold":3}}}}},"AuthErrorAlarm":{"id":"AuthErrorAlarm","path":"ChatbotBackendDev/AuthErrorAlarm","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.Alarm","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotBackendDev/AuthErrorAlarm/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.CfnAlarm","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CloudWatch::Alarm","aws:cdk:cloudformation:props":{"alarmDescription":"Auth Lambda 함수 오류율이 높습니다","comparisonOperator":"GreaterThanOrEqualToThreshold","dimensions":[{"name":"FunctionName","value":{"Ref":"AuthFunctionA1CD5E0F"}}],"evaluationPeriods":2,"metricName":"Errors","namespace":"AWS/Lambda","period":300,"statistic":"Sum","threshold":3}}}}},"DLQMessageAlarm":{"id":"DLQMessageAlarm","path":"ChatbotBackendDev/DLQMessageAlarm","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.Alarm","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotBackendDev/DLQMessageAlarm/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.CfnAlarm","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CloudWatch::Alarm","aws:cdk:cloudformation:props":{"alarmDescription":"DLQ에 메시지가 있습니다","comparisonOperator":"GreaterThanOrEqualToThreshold","dimensions":[{"name":"QueueName","value":{"Fn::GetAtt":["IndexPromptDLQ5C143C72","QueueName"]}}],"evaluationPeriods":1,"metricName":"ApproximateNumberOfVisibleMessages","namespace":"AWS/SQS","period":300,"statistic":"Average","threshold":1}}}}},"ApiGatewayUrl":{"id":"ApiGatewayUrl","path":"ChatbotBackendDev/ApiGatewayUrl","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.204.0"}},"PromptBucketName":{"id":"PromptBucketName","path":"ChatbotBackendDev/PromptBucketName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.204.0"}},"UserPoolId":{"id":"UserPoolId","path":"ChatbotBackendDev/UserPoolId","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.204.0"}},"UserPoolClientId":{"id":"UserPoolClientId","path":"ChatbotBackendDev/UserPoolClientId","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.204.0"}},"CDKMetadata":{"id":"CDKMetadata","path":"ChatbotBackendDev/CDKMetadata","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"children":{"Default":{"id":"Default","path":"ChatbotBackendDev/CDKMetadata/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.204.0"}}}},"Exports":{"id":"Exports","path":"ChatbotBackendDev/Exports","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"children":{"Output{\"Ref\":\"ChatbotApiF211B502\"}":{"id":"Output{\"Ref\":\"ChatbotApiF211B502\"}","path":"ChatbotBackendDev/Exports/Output{\"Ref\":\"ChatbotApiF211B502\"}","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.204.0"}},"Output{\"Ref\":\"ChatbotApiDeploymentStageprod27096855\"}":{"id":"Output{\"Ref\":\"ChatbotApiDeploymentStageprod27096855\"}","path":"ChatbotBackendDev/Exports/Output{\"Ref\":\"ChatbotApiDeploymentStageprod27096855\"}","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.204.0"}}}},"BootstrapVersion":{"id":"BootstrapVersion","path":"ChatbotBackendDev/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.204.0"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"ChatbotBackendDev/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"2.204.0"}}}},"ChatbotConversationStackDev":{"id":"ChatbotConversationStackDev","path":"ChatbotConversationStackDev","constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"2.204.0"},"children":{"ConversationsTable":{"id":"ConversationsTable","path":"ChatbotConversationStackDev/ConversationsTable","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.Table","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotConversationStackDev/ConversationsTable/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.CfnTable","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::DynamoDB::Table","aws:cdk:cloudformation:props":{"attributeDefinitions":[{"attributeName":"PK","attributeType":"S"},{"attributeName":"SK","attributeType":"S"},{"attributeName":"userId","attributeType":"S"},{"attributeName":"createdAt","attributeType":"S"}],"billingMode":"PAY_PER_REQUEST","globalSecondaryIndexes":[{"indexName":"UserConversationsIndex","keySchema":[{"attributeName":"userId","keyType":"HASH"},{"attributeName":"createdAt","keyType":"RANGE"}],"projection":{"projectionType":"ALL"}}],"keySchema":[{"attributeName":"PK","keyType":"HASH"},{"attributeName":"SK","keyType":"RANGE"}],"pointInTimeRecoverySpecification":{"pointInTimeRecoveryEnabled":true},"tableName":"ChatbotConversations-dev","timeToLiveSpecification":{"attributeName":"ttl","enabled":true}}}},"ScalingRole":{"id":"ScalingRole","path":"ChatbotConversationStackDev/ConversationsTable/ScalingRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.204.0","metadata":[]}}}},"MessagesTable":{"id":"MessagesTable","path":"ChatbotConversationStackDev/MessagesTable","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.Table","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotConversationStackDev/MessagesTable/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.CfnTable","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::DynamoDB::Table","aws:cdk:cloudformation:props":{"attributeDefinitions":[{"attributeName":"PK","attributeType":"S"},{"attributeName":"SK","attributeType":"S"}],"billingMode":"PAY_PER_REQUEST","keySchema":[{"attributeName":"PK","keyType":"HASH"},{"attributeName":"SK","keyType":"RANGE"}],"pointInTimeRecoverySpecification":{"pointInTimeRecoveryEnabled":true},"tableName":"ChatbotMessages-dev","timeToLiveSpecification":{"attributeName":"ttl","enabled":true}}}},"ScalingRole":{"id":"ScalingRole","path":"ChatbotConversationStackDev/MessagesTable/ScalingRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.204.0","metadata":[]}}}},"ConversationFunction":{"id":"ConversationFunction","path":"ChatbotConversationStackDev/ConversationFunction","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.204.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"ChatbotConversationStackDev/ConversationFunction/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.204.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"ChatbotConversationStackDev/ConversationFunction/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.204.0","metadata":[]}},"Resource":{"id":"Resource","path":"ChatbotConversationStackDev/ConversationFunction/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"ChatbotConversationStackDev/ConversationFunction/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotConversationStackDev/ConversationFunction/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["dynamodb:BatchGetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:Query","dynamodb:GetItem","dynamodb:Scan","dynamodb:ConditionCheckItem","dynamodb:BatchWriteItem","dynamodb:PutItem","dynamodb:UpdateItem","dynamodb:DeleteItem","dynamodb:DescribeTable"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["ConversationsTableCD91EB96","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["ConversationsTableCD91EB96","Arn"]},"/index/*"]]}]},{"Action":["dynamodb:BatchGetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:Query","dynamodb:GetItem","dynamodb:Scan","dynamodb:ConditionCheckItem","dynamodb:BatchWriteItem","dynamodb:PutItem","dynamodb:UpdateItem","dynamodb:DeleteItem","dynamodb:DescribeTable"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["MessagesTable05B58A27","Arn"]},{"Ref":"AWS::NoValue"}]}],"Version":"2012-10-17"},"policyName":"ConversationFunctionServiceRoleDefaultPolicy3BD1781D","roles":[{"Ref":"ConversationFunctionServiceRoleBBAB46E1"}]}}}}}}},"Code":{"id":"Code","path":"ChatbotConversationStackDev/ConversationFunction/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.204.0"},"children":{"Stage":{"id":"Stage","path":"ChatbotConversationStackDev/ConversationFunction/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.204.0"}},"AssetBucket":{"id":"AssetBucket","path":"ChatbotConversationStackDev/ConversationFunction/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.204.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"ChatbotConversationStackDev/ConversationFunction/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-887078546492-ap-northeast-2","s3Key":"37decc8291f914a3fbce9674d21e1fd087374e7175c6fa065475f9949c590e6d.zip"},"environment":{"variables":{"CONVERSATIONS_TABLE":{"Ref":"ConversationsTableCD91EB96"},"MESSAGES_TABLE":{"Ref":"MessagesTable05B58A27"}}},"handler":"conversation_api.handler","memorySize":512,"role":{"Fn::GetAtt":["ConversationFunctionServiceRoleBBAB46E1","Arn"]},"runtime":"python3.11","timeout":30}}}}},"MessageFunction":{"id":"MessageFunction","path":"ChatbotConversationStackDev/MessageFunction","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.204.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"ChatbotConversationStackDev/MessageFunction/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.204.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"ChatbotConversationStackDev/MessageFunction/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.204.0","metadata":[]}},"Resource":{"id":"Resource","path":"ChatbotConversationStackDev/MessageFunction/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"ChatbotConversationStackDev/MessageFunction/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotConversationStackDev/MessageFunction/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["dynamodb:BatchGetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:Query","dynamodb:GetItem","dynamodb:Scan","dynamodb:ConditionCheckItem","dynamodb:BatchWriteItem","dynamodb:PutItem","dynamodb:UpdateItem","dynamodb:DeleteItem","dynamodb:DescribeTable"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["MessagesTable05B58A27","Arn"]},{"Ref":"AWS::NoValue"}]},{"Action":["dynamodb:BatchGetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:Query","dynamodb:GetItem","dynamodb:Scan","dynamodb:ConditionCheckItem","dynamodb:BatchWriteItem","dynamodb:PutItem","dynamodb:UpdateItem","dynamodb:DeleteItem","dynamodb:DescribeTable"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["ConversationsTableCD91EB96","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["ConversationsTableCD91EB96","Arn"]},"/index/*"]]}]}],"Version":"2012-10-17"},"policyName":"MessageFunctionServiceRoleDefaultPolicy3725DC08","roles":[{"Ref":"MessageFunctionServiceRole94EDDC6B"}]}}}}}}},"Code":{"id":"Code","path":"ChatbotConversationStackDev/MessageFunction/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.204.0"},"children":{"Stage":{"id":"Stage","path":"ChatbotConversationStackDev/MessageFunction/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.204.0"}},"AssetBucket":{"id":"AssetBucket","path":"ChatbotConversationStackDev/MessageFunction/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.204.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"ChatbotConversationStackDev/MessageFunction/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-887078546492-ap-northeast-2","s3Key":"1ffe6133cd1c2137d933ac2c8bc0723cbf7abc913505a4e8d28d990597f4e7a2.zip"},"environment":{"variables":{"MESSAGES_TABLE":{"Ref":"MessagesTable05B58A27"},"CONVERSATIONS_TABLE":{"Ref":"ConversationsTableCD91EB96"}}},"handler":"message_api.handler","memorySize":512,"role":{"Fn::GetAtt":["MessageFunctionServiceRole94EDDC6B","Arn"]},"runtime":"python3.11","timeout":30}}}}},"CDKMetadata":{"id":"CDKMetadata","path":"ChatbotConversationStackDev/CDKMetadata","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"children":{"Default":{"id":"Default","path":"ChatbotConversationStackDev/CDKMetadata/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.204.0"}}}},"Exports":{"id":"Exports","path":"ChatbotConversationStackDev/Exports","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"children":{"Output{\"Fn::GetAtt\":[\"ConversationFunction7337ABEA\",\"Arn\"]}":{"id":"Output{\"Fn::GetAtt\":[\"ConversationFunction7337ABEA\",\"Arn\"]}","path":"ChatbotConversationStackDev/Exports/Output{\"Fn::GetAtt\":[\"ConversationFunction7337ABEA\",\"Arn\"]}","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.204.0"}},"Output{\"Fn::GetAtt\":[\"MessageFunction5E234045\",\"Arn\"]}":{"id":"Output{\"Fn::GetAtt\":[\"MessageFunction5E234045\",\"Arn\"]}","path":"ChatbotConversationStackDev/Exports/Output{\"Fn::GetAtt\":[\"MessageFunction5E234045\",\"Arn\"]}","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.204.0"}}}},"BootstrapVersion":{"id":"BootstrapVersion","path":"ChatbotConversationStackDev/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.204.0"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"ChatbotConversationStackDev/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"2.204.0"}}}},"ChatbotFrontendStackDev":{"id":"ChatbotFrontendStackDev","path":"ChatbotFrontendStackDev","constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"2.204.0"},"children":{"WebsiteBucket":{"id":"WebsiteBucket","path":"ChatbotFrontendStackDev/WebsiteBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.Bucket","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotFrontendStackDev/WebsiteBucket/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.CfnBucket","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::S3::Bucket","aws:cdk:cloudformation:props":{"bucketName":"chatbot-frontend-dev","lifecycleConfiguration":{"rules":[{"abortIncompleteMultipartUpload":{"daysAfterInitiation":7},"noncurrentVersionExpiration":{"noncurrentDays":7},"status":"Enabled"}]},"publicAccessBlockConfiguration":{"blockPublicAcls":true,"blockPublicPolicy":true,"ignorePublicAcls":true,"restrictPublicBuckets":true},"tags":[{"key":"aws-cdk:auto-delete-objects","value":"true"},{"key":"aws-cdk:cr-owned:9bcb3544","value":"true"}]}}},"Policy":{"id":"Policy","path":"ChatbotFrontendStackDev/WebsiteBucket/Policy","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketPolicy","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotFrontendStackDev/WebsiteBucket/Policy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.CfnBucketPolicy","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::S3::BucketPolicy","aws:cdk:cloudformation:props":{"bucket":{"Ref":"WebsiteBucket75C24D94"},"policyDocument":{"Statement":[{"Action":["s3:PutBucketPolicy","s3:GetBucket*","s3:List*","s3:DeleteObject*"],"Effect":"Allow","Principal":{"AWS":{"Fn::GetAtt":["CustomS3AutoDeleteObjectsCustomResourceProviderRole3B1BD092","Arn"]}},"Resource":[{"Fn::GetAtt":["WebsiteBucket75C24D94","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["WebsiteBucket75C24D94","Arn"]},"/*"]]}]},{"Action":"s3:GetObject","Condition":{"StringEquals":{"AWS:SourceArn":"arn:aws:cloudfront::887078546492:distribution/*"}},"Effect":"Allow","Principal":{"Service":"cloudfront.amazonaws.com"},"Resource":{"Fn::Join":["",[{"Fn::GetAtt":["WebsiteBucket75C24D94","Arn"]},"/*"]]}},{"Action":"s3:GetObject","Condition":{"StringEquals":{"AWS:SourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":cloudfront::",{"Ref":"AWS::AccountId"},":distribution/",{"Ref":"Distribution830FAC52"}]]}}},"Effect":"Allow","Principal":{"Service":"cloudfront.amazonaws.com"},"Resource":{"Fn::Join":["",[{"Fn::GetAtt":["WebsiteBucket75C24D94","Arn"]},"/*"]]}}],"Version":"2012-10-17"}}}}}},"AutoDeleteObjectsCustomResource":{"id":"AutoDeleteObjectsCustomResource","path":"ChatbotFrontendStackDev/WebsiteBucket/AutoDeleteObjectsCustomResource","constructInfo":{"fqn":"aws-cdk-lib.CustomResource","version":"2.204.0","metadata":[]},"children":{"Default":{"id":"Default","path":"ChatbotFrontendStackDev/WebsiteBucket/AutoDeleteObjectsCustomResource/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.204.0"}}}}}},"Custom::S3AutoDeleteObjectsCustomResourceProvider":{"id":"Custom::S3AutoDeleteObjectsCustomResourceProvider","path":"ChatbotFrontendStackDev/Custom::S3AutoDeleteObjectsCustomResourceProvider","constructInfo":{"fqn":"aws-cdk-lib.CustomResourceProviderBase","version":"2.204.0"},"children":{"Staging":{"id":"Staging","path":"ChatbotFrontendStackDev/Custom::S3AutoDeleteObjectsCustomResourceProvider/Staging","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.204.0"}},"Role":{"id":"Role","path":"ChatbotFrontendStackDev/Custom::S3AutoDeleteObjectsCustomResourceProvider/Role","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.204.0"}},"Handler":{"id":"Handler","path":"ChatbotFrontendStackDev/Custom::S3AutoDeleteObjectsCustomResourceProvider/Handler","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.204.0"}}}},"OAC":{"id":"OAC","path":"ChatbotFrontendStackDev/OAC","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudfront.S3OriginAccessControl","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotFrontendStackDev/OAC/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudfront.CfnOriginAccessControl","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CloudFront::OriginAccessControl","aws:cdk:cloudformation:props":{"originAccessControlConfig":{"description":{"Fn::Join":["",["OAC for ",{"Ref":"WebsiteBucket75C24D94"}]]},"name":{"Fn::Join":["",["OAC-",{"Ref":"WebsiteBucket75C24D94"}]]},"signingBehavior":"always","signingProtocol":"sigv4","originAccessControlOriginType":"s3"}}}}}},"Distribution":{"id":"Distribution","path":"ChatbotFrontendStackDev/Distribution","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudfront.Distribution","version":"2.204.0","metadata":[]},"children":{"Origin1":{"id":"Origin1","path":"ChatbotFrontendStackDev/Distribution/Origin1","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"}},"Origin2":{"id":"Origin2","path":"ChatbotFrontendStackDev/Distribution/Origin2","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"}},"Origin3":{"id":"Origin3","path":"ChatbotFrontendStackDev/Distribution/Origin3","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"}},"Origin4":{"id":"Origin4","path":"ChatbotFrontendStackDev/Distribution/Origin4","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"}},"Resource":{"id":"Resource","path":"ChatbotFrontendStackDev/Distribution/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudfront.CfnDistribution","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CloudFront::Distribution","aws:cdk:cloudformation:props":{"distributionConfig":{"enabled":true,"origins":[{"domainName":{"Fn::GetAtt":["WebsiteBucket75C24D94","RegionalDomainName"]},"id":"ChatbotFrontendStackDevDistributionOrigin18C20690F","s3OriginConfig":{"originAccessIdentity":""},"originAccessControlId":{"Fn::GetAtt":["OAC5B452445","Id"]}},{"domainName":{"Fn::GetAtt":["WebsiteBucket75C24D94","RegionalDomainName"]},"id":"ChatbotFrontendStackDevDistributionOrigin282DC3F93","s3OriginConfig":{"originAccessIdentity":""},"originAccessControlId":{"Fn::GetAtt":["OAC5B452445","Id"]}},{"domainName":{"Fn::GetAtt":["WebsiteBucket75C24D94","RegionalDomainName"]},"id":"ChatbotFrontendStackDevDistributionOrigin325BD7E1B","s3OriginConfig":{"originAccessIdentity":""},"originAccessControlId":{"Fn::GetAtt":["OAC5B452445","Id"]}},{"domainName":{"Fn::Select":[2,{"Fn::Split":["/",{"Fn::Join":["",["https://",{"Fn::ImportValue":"ChatbotBackendDev:ExportsOutputRefChatbotApiF211B50251B7B5E1"},".execute-api.ap-northeast-2.",{"Ref":"AWS::URLSuffix"},"/",{"Fn::ImportValue":"ChatbotBackendDev:ExportsOutputRefChatbotApiDeploymentStageprod27096855D64CF543"},"/"]]}]}]},"id":"ChatbotFrontendStackDevDistributionOrigin43EF5F0A2","originPath":{"Fn::Join":["",["/",{"Fn::ImportValue":"ChatbotBackendDev:ExportsOutputRefChatbotApiDeploymentStageprod27096855D64CF543"}]]},"customOriginConfig":{"originSslProtocols":["TLSv1.2"],"originProtocolPolicy":"https-only"}}],"defaultCacheBehavior":{"pathPattern":"*","targetOriginId":"ChatbotFrontendStackDevDistributionOrigin18C20690F","cachePolicyId":"658327ea-f89d-4fab-a63d-7e88639e58f6","compress":true,"originRequestPolicyId":"88a5eaf4-2fd4-4709-b370-b4c650ea3fcf","responseHeadersPolicyId":"67f7725c-6f97-4210-82d7-5512b31e9d03","viewerProtocolPolicy":"redirect-to-https"},"cacheBehaviors":[{"pathPattern":"*.js","targetOriginId":"ChatbotFrontendStackDevDistributionOrigin282DC3F93","cachePolicyId":"658327ea-f89d-4fab-a63d-7e88639e58f6","compress":true,"viewerProtocolPolicy":"redirect-to-https"},{"pathPattern":"*.css","targetOriginId":"ChatbotFrontendStackDevDistributionOrigin325BD7E1B","cachePolicyId":"658327ea-f89d-4fab-a63d-7e88639e58f6","compress":true,"viewerProtocolPolicy":"redirect-to-https"},{"pathPattern":"/api/*","targetOriginId":"ChatbotFrontendStackDevDistributionOrigin43EF5F0A2","allowedMethods":["GET","HEAD","OPTIONS","PUT","PATCH","POST","DELETE"],"cachePolicyId":"4135ea2d-6df8-44a3-9df3-4b5a84be39ad","compress":true,"originRequestPolicyId":"216adef6-5c7f-47e4-b989-5492eafa07d3","viewerProtocolPolicy":"redirect-to-https"}],"comment":"Dynamic Prompt System Frontend Distribution","customErrorResponses":[{"errorCachingMinTtl":1800,"errorCode":403,"responseCode":200,"responsePagePath":"/index.html"},{"errorCachingMinTtl":1800,"errorCode":404,"responseCode":200,"responsePagePath":"/index.html"}],"defaultRootObject":"index.html","httpVersion":"http2","ipv6Enabled":true,"priceClass":"PriceClass_100"}}}}}},"DeployWebsite":{"id":"DeployWebsite","path":"ChatbotFrontendStackDev/DeployWebsite","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_deployment.BucketDeployment","version":"2.204.0"},"children":{"AwsCliLayer":{"id":"AwsCliLayer","path":"ChatbotFrontendStackDev/DeployWebsite/AwsCliLayer","constructInfo":{"fqn":"aws-cdk-lib.lambda_layer_awscli.AwsCliLayer","version":"2.204.0","metadata":[]},"children":{"Code":{"id":"Code","path":"ChatbotFrontendStackDev/DeployWebsite/AwsCliLayer/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.204.0"},"children":{"Stage":{"id":"Stage","path":"ChatbotFrontendStackDev/DeployWebsite/AwsCliLayer/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.204.0"}},"AssetBucket":{"id":"AssetBucket","path":"ChatbotFrontendStackDev/DeployWebsite/AwsCliLayer/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.204.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"ChatbotFrontendStackDev/DeployWebsite/AwsCliLayer/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnLayerVersion","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::LayerVersion","aws:cdk:cloudformation:props":{"content":{"s3Bucket":"cdk-hnb659fds-assets-887078546492-ap-northeast-2","s3Key":"c49d356cac773d491c5f7ac148995a1181498a8e289429f8612a7f7e3814f535.zip"},"description":"/opt/awscli/aws"}}}}},"CustomResourceHandler":{"id":"CustomResourceHandler","path":"ChatbotFrontendStackDev/DeployWebsite/CustomResourceHandler","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.SingletonFunction","version":"2.204.0","metadata":[]}},"Asset1":{"id":"Asset1","path":"ChatbotFrontendStackDev/DeployWebsite/Asset1","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.204.0"},"children":{"Stage":{"id":"Stage","path":"ChatbotFrontendStackDev/DeployWebsite/Asset1/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.204.0"}},"AssetBucket":{"id":"AssetBucket","path":"ChatbotFrontendStackDev/DeployWebsite/Asset1/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.204.0","metadata":[]}}}},"CustomResource-512MiB-512MiB":{"id":"CustomResource-512MiB-512MiB","path":"ChatbotFrontendStackDev/DeployWebsite/CustomResource-512MiB-512MiB","constructInfo":{"fqn":"aws-cdk-lib.CustomResource","version":"2.204.0","metadata":[]},"children":{"Default":{"id":"Default","path":"ChatbotFrontendStackDev/DeployWebsite/CustomResource-512MiB-512MiB/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.204.0"}}}}}},"Custom::CDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756C512MiB512MiB":{"id":"Custom::CDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756C512MiB512MiB","path":"ChatbotFrontendStackDev/Custom::CDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756C512MiB512MiB","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.204.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"ChatbotFrontendStackDev/Custom::CDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756C512MiB512MiB/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.204.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"ChatbotFrontendStackDev/Custom::CDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756C512MiB512MiB/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.204.0","metadata":[]}},"Resource":{"id":"Resource","path":"ChatbotFrontendStackDev/Custom::CDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756C512MiB512MiB/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"ChatbotFrontendStackDev/Custom::CDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756C512MiB512MiB/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.204.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatbotFrontendStackDev/Custom::CDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756C512MiB512MiB/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["s3:GetObject*","s3:GetBucket*","s3:List*"],"Effect":"Allow","Resource":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":s3:::cdk-hnb659fds-assets-887078546492-ap-northeast-2"]]},{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":s3:::cdk-hnb659fds-assets-887078546492-ap-northeast-2/*"]]}]},{"Action":["s3:GetObject*","s3:GetBucket*","s3:List*","s3:DeleteObject*","s3:PutObject","s3:PutObjectLegalHold","s3:PutObjectRetention","s3:PutObjectTagging","s3:PutObjectVersionTagging","s3:Abort*"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["WebsiteBucket75C24D94","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["WebsiteBucket75C24D94","Arn"]},"/*"]]}]},{"Action":["cloudfront:GetInvalidation","cloudfront:CreateInvalidation"],"Effect":"Allow","Resource":"*"}],"Version":"2012-10-17"},"policyName":"CustomCDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756C512MiB512MiBServiceRoleDefaultPolicyEA2DA91D","roles":[{"Ref":"CustomCDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756C512MiB512MiBServiceRoleCFA2F118"}]}}}}}}},"Code":{"id":"Code","path":"ChatbotFrontendStackDev/Custom::CDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756C512MiB512MiB/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.204.0"},"children":{"Stage":{"id":"Stage","path":"ChatbotFrontendStackDev/Custom::CDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756C512MiB512MiB/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.204.0"}},"AssetBucket":{"id":"AssetBucket","path":"ChatbotFrontendStackDev/Custom::CDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756C512MiB512MiB/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.204.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"ChatbotFrontendStackDev/Custom::CDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756C512MiB512MiB/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.204.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-887078546492-ap-northeast-2","s3Key":"9a1fcb4a7ecba81ad70e9d3fb241f6794497da945dae5f25924e4dd002b65f2d.zip"},"environment":{"variables":{"AWS_CA_BUNDLE":"/etc/pki/ca-trust/extracted/pem/tls-ca-bundle.pem"}},"ephemeralStorage":{"size":512},"handler":"index.handler","layers":[{"Ref":"DeployWebsiteAwsCliLayer17DBC421"}],"memorySize":512,"role":{"Fn::GetAtt":["CustomCDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756C512MiB512MiBServiceRoleCFA2F118","Arn"]},"runtime":"python3.11","timeout":900}}}}},"WebsiteURL":{"id":"WebsiteURL","path":"ChatbotFrontendStackDev/WebsiteURL","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.204.0"}},"BucketName":{"id":"BucketName","path":"ChatbotFrontendStackDev/BucketName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.204.0"}},"DistributionId":{"id":"DistributionId","path":"ChatbotFrontendStackDev/DistributionId","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.204.0"}},"DistributionDomainName":{"id":"DistributionDomainName","path":"ChatbotFrontendStackDev/DistributionDomainName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.204.0"}},"CDKMetadata":{"id":"CDKMetadata","path":"ChatbotFrontendStackDev/CDKMetadata","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"children":{"Default":{"id":"Default","path":"ChatbotFrontendStackDev/CDKMetadata/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.204.0"}}}},"BootstrapVersion":{"id":"BootstrapVersion","path":"ChatbotFrontendStackDev/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.204.0"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"ChatbotFrontendStackDev/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"2.204.0"}}}},"Tree":{"id":"Tree","path":"Tree","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"}}}}}