{"ast":null,"code":"import React,{useState}from\"react\";import{useNavigate}from\"react-router-dom\";import{handleAPIError}from\"../services/api\";import{useAuth}from\"../contexts/AuthContext\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Login=_ref=>{let{onLoginSuccess,onSwitchToSignup}=_ref;const navigate=useNavigate();const{login}=useAuth();const[formData,setFormData]=useState({email:\"\",password:\"\"});const[loading,setLoading]=useState(false);const[error,setError]=useState(\"\");const handleInputChange=e=>{const{name,value}=e.target;setFormData(prev=>({...prev,[name]:value}));};const handleSubmit=async e=>{console.log(\"🚀 handleSubmit 함수 호출됨!\");e.preventDefault();console.log(\"📝 폼 데이터 확인:\",formData);console.log(\"⚡ login 함수 존재 여부:\",typeof login);setLoading(true);setError(\"\");try{console.log(\"🔄 로그인 함수 호출 시작...\");const response=await login(formData);console.log(\"✅ 로그인 성공:\",response);if(onLoginSuccess){onLoginSuccess(response);}}catch(error){console.error(\"❌ 로그인 오류:\",error);console.error(\"❌ 오류 상세:\",{name:error.name,message:error.message,stack:error.stack});const apiError=await handleAPIError(error);console.log(\"🔍 처리된 API 오류:\",apiError);// 리다이렉트가 필요한 경우 (401 오류 등)\nif(apiError.shouldRedirect){return;}// 이메일 인증이 필요한 경우 인증 페이지로 리다이렉트\nif(error.name===\"UserNotConfirmedException\"||apiError.userMessage&&apiError.userMessage.includes(\"이메일 인증\")){console.log(\"📧 이메일 인증 페이지로 리다이렉트\");navigate(`/verify?email=${encodeURIComponent(formData.email)}`);return;}setError(apiError.userMessage||error.message||\"로그인에 실패했습니다.\");}finally{console.log(\"🏁 로그인 처리 완료, loading 해제\");setLoading(false);}};return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-md w-full space-y-8\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{className:\"mt-6 text-center text-3xl font-extrabold text-gray-900 dark:text-white\",children:\"\\uB85C\\uADF8\\uC778\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-2 text-center text-sm text-gray-600 dark:text-gray-300\",children:\"TITLE-NOMICS AI \\uC81C\\uBAA9 \\uC0DD\\uC131 \\uC2DC\\uC2A4\\uD15C\"})]}),/*#__PURE__*/_jsxs(\"form\",{className:\"mt-8 space-y-6\",onSubmit:e=>{console.log(\"📋 폼 제출 이벤트 발생!\");handleSubmit(e);},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"email\",className:\"block text-sm font-medium text-gray-700 dark:text-gray-300\",children:\"\\uC774\\uBA54\\uC77C\"}),/*#__PURE__*/_jsx(\"input\",{id:\"email\",name:\"email\",type:\"email\",required:true,value:formData.email,onChange:handleInputChange,className:\"mt-1 appearance-none relative block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 placeholder-gray-500 dark:placeholder-gray-400 text-gray-900 dark:text-white bg-white dark:bg-gray-700 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm transition-colors duration-200\",placeholder:\"\\uC774\\uBA54\\uC77C \\uC8FC\\uC18C\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"password\",className:\"block text-sm font-medium text-gray-700 dark:text-gray-300\",children:\"\\uBE44\\uBC00\\uBC88\\uD638\"}),/*#__PURE__*/_jsx(\"input\",{id:\"password\",name:\"password\",type:\"password\",required:true,value:formData.password,onChange:handleInputChange,className:\"mt-1 appearance-none relative block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 placeholder-gray-500 dark:placeholder-gray-400 text-gray-900 dark:text-white bg-white dark:bg-gray-700 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm transition-colors duration-200\",placeholder:\"\\uBE44\\uBC00\\uBC88\\uD638\"})]})]}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"bg-red-50 dark:bg-red-900 border border-red-200 dark:border-red-700 text-red-700 dark:text-red-300 px-4 py-3 rounded relative\",children:error}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:loading,onClick:()=>console.log(\"🖱️ 로그인 버튼 클릭됨!\"),className:\"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed\",children:loading?\"로그인 중...\":\"로그인\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-center space-y-2\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>navigate('/forgot-password'),className:\"text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 text-sm transition-colors duration-200 block\",children:\"\\uBE44\\uBC00\\uBC88\\uD638\\uB97C \\uC78A\\uC73C\\uC168\\uB098\\uC694?\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:onSwitchToSignup||(()=>navigate('/signup')),className:\"text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 text-sm transition-colors duration-200 block\",children:\"\\uACC4\\uC815\\uC774 \\uC5C6\\uC73C\\uC2E0\\uAC00\\uC694? \\uD68C\\uC6D0\\uAC00\\uC785\"})]})]})]})});};export default Login;","map":{"version":3,"names":["React","useState","useNavigate","handleAPIError","useAuth","jsx","_jsx","jsxs","_jsxs","Login","_ref","onLoginSuccess","onSwitchToSignup","navigate","login","formData","setFormData","email","password","loading","setLoading","error","setError","handleInputChange","e","name","value","target","prev","handleSubmit","console","log","preventDefault","response","message","stack","apiError","shouldRedirect","userMessage","includes","encodeURIComponent","className","children","onSubmit","htmlFor","id","type","required","onChange","placeholder","disabled","onClick"],"sources":["/Users/yeong-gwang/Documents/work/서울경제신문/dev/nexus/title_generator_ver1/frontend/src/components/Login.js"],"sourcesContent":["import React, { useState } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport { handleAPIError } from \"../services/api\";\nimport { useAuth } from \"../contexts/AuthContext\";\n\nconst Login = ({ onLoginSuccess, onSwitchToSignup }) => {\n  const navigate = useNavigate();\n  const { login } = useAuth();\n  const [formData, setFormData] = useState({\n    email: \"\",\n    password: \"\",\n  });\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(\"\");\n\n  const handleInputChange = (e) => {\n    const { name, value } = e.target;\n    setFormData((prev) => ({\n      ...prev,\n      [name]: value,\n    }));\n  };\n\n  const handleSubmit = async (e) => {\n    console.log(\"🚀 handleSubmit 함수 호출됨!\");\n    e.preventDefault();\n    \n    console.log(\"📝 폼 데이터 확인:\", formData);\n    console.log(\"⚡ login 함수 존재 여부:\", typeof login);\n    \n    setLoading(true);\n    setError(\"\");\n\n    try {\n      console.log(\"🔄 로그인 함수 호출 시작...\");\n      const response = await login(formData);\n      console.log(\"✅ 로그인 성공:\", response);\n\n      if (onLoginSuccess) {\n        onLoginSuccess(response);\n      }\n    } catch (error) {\n      console.error(\"❌ 로그인 오류:\", error);\n      console.error(\"❌ 오류 상세:\", {\n        name: error.name,\n        message: error.message,\n        stack: error.stack\n      });\n      \n      const apiError = await handleAPIError(error);\n      console.log(\"🔍 처리된 API 오류:\", apiError);\n      \n      // 리다이렉트가 필요한 경우 (401 오류 등)\n      if (apiError.shouldRedirect) {\n        return;\n      }\n      \n      // 이메일 인증이 필요한 경우 인증 페이지로 리다이렉트\n      if (error.name === \"UserNotConfirmedException\" || (apiError.userMessage && apiError.userMessage.includes(\"이메일 인증\"))) {\n        console.log(\"📧 이메일 인증 페이지로 리다이렉트\");\n        navigate(`/verify?email=${encodeURIComponent(formData.email)}`);\n        return;\n      }\n      \n      setError(apiError.userMessage || error.message || \"로그인에 실패했습니다.\");\n    } finally {\n      console.log(\"🏁 로그인 처리 완료, loading 해제\");\n      setLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8\">\n      <div className=\"max-w-md w-full space-y-8\">\n        <div>\n          <h2 className=\"mt-6 text-center text-3xl font-extrabold text-gray-900 dark:text-white\">\n            로그인\n          </h2>\n          <p className=\"mt-2 text-center text-sm text-gray-600 dark:text-gray-300\">\n            TITLE-NOMICS AI 제목 생성 시스템\n          </p>\n        </div>\n\n        <form \n          className=\"mt-8 space-y-6\" \n          onSubmit={(e) => {\n            console.log(\"📋 폼 제출 이벤트 발생!\");\n            handleSubmit(e);\n          }}\n        >\n          <div className=\"space-y-4\">\n            <div>\n              <label\n                htmlFor=\"email\"\n                className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\"\n              >\n                이메일\n              </label>\n              <input\n                id=\"email\"\n                name=\"email\"\n                type=\"email\"\n                required\n                value={formData.email}\n                onChange={handleInputChange}\n                className=\"mt-1 appearance-none relative block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 placeholder-gray-500 dark:placeholder-gray-400 text-gray-900 dark:text-white bg-white dark:bg-gray-700 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm transition-colors duration-200\"\n                placeholder=\"이메일 주소\"\n              />\n            </div>\n\n            <div>\n              <label\n                htmlFor=\"password\"\n                className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\"\n              >\n                비밀번호\n              </label>\n              <input\n                id=\"password\"\n                name=\"password\"\n                type=\"password\"\n                required\n                value={formData.password}\n                onChange={handleInputChange}\n                className=\"mt-1 appearance-none relative block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 placeholder-gray-500 dark:placeholder-gray-400 text-gray-900 dark:text-white bg-white dark:bg-gray-700 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm transition-colors duration-200\"\n                placeholder=\"비밀번호\"\n              />\n            </div>\n          </div>\n\n          {error && (\n            <div className=\"bg-red-50 dark:bg-red-900 border border-red-200 dark:border-red-700 text-red-700 dark:text-red-300 px-4 py-3 rounded relative\">\n              {error}\n            </div>\n          )}\n\n          <div>\n            <button\n              type=\"submit\"\n              disabled={loading}\n              onClick={() => console.log(\"🖱️ 로그인 버튼 클릭됨!\")}\n              className=\"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed\"\n            >\n              {loading ? \"로그인 중...\" : \"로그인\"}\n            </button>\n          </div>\n\n          <div className=\"text-center space-y-2\">\n            <button\n              type=\"button\"\n              onClick={() => navigate('/forgot-password')}\n              className=\"text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 text-sm transition-colors duration-200 block\"\n            >\n              비밀번호를 잊으셨나요?\n            </button>\n            <button\n              type=\"button\"\n              onClick={onSwitchToSignup || (() => navigate('/signup'))}\n              className=\"text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 text-sm transition-colors duration-200 block\"\n            >\n              계정이 없으신가요? 회원가입\n            </button>\n          </div>\n        </form>\n      </div>\n    </div>\n  );\n};\n\nexport default Login;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}