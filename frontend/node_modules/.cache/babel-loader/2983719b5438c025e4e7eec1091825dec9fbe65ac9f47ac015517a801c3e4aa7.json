{"ast":null,"code":"import React,{useState,useEffect,useRef,useCallback}from\"react\";import{toast}from\"react-hot-toast\";import{ChatBubbleLeftRightIcon,PaperAirplaneIcon,TrashIcon,PlusIcon,ClockIcon,CpuChipIcon,DocumentTextIcon,UserIcon,SparklesIcon,InformationCircleIcon}from\"@heroicons/react/24/outline\";import{chatAPI,handleAPIError}from\"../services/api\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const ChatInterface=_ref=>{let{projectId,projectName}=_ref;const[sessions,setSessions]=useState([]);const[currentSessionId,setCurrentSessionId]=useState(null);const[messages,setMessages]=useState([]);const[inputMessage,setInputMessage]=useState(\"\");const[isLoading,setIsLoading]=useState(false);const[sessionLoading,setSessionLoading]=useState(false);const messagesEndRef=useRef(null);const scrollToBottom=()=>{var _messagesEndRef$curre;(_messagesEndRef$curre=messagesEndRef.current)===null||_messagesEndRef$curre===void 0?void 0:_messagesEndRef$curre.scrollIntoView({behavior:\"smooth\"});};const loadChatHistory=useCallback(async sessionId=>{try{const response=await chatAPI.getChatHistory(projectId,sessionId);// 메시지 포매팅\nconst formattedMessages=response.messages.map(msg=>{var _msg$data;return{id:msg.sk,role:msg.role||\"user\",content:msg.content||((_msg$data=msg.data)===null||_msg$data===void 0?void 0:_msg$data.content)||\"\",timestamp:new Date(msg.timestamp||Date.now()).toISOString(),metadata:msg.metadata||{}};});setMessages(formattedMessages);}catch(error){const errorInfo=handleAPIError(error);toast.error(`채팅 히스토리 로드 실패: ${errorInfo.message}`);setMessages([]);}},[projectId]);const loadChatSessions=useCallback(async()=>{try{setSessionLoading(true);const response=await chatAPI.getChatSessions(projectId);setSessions(response.sessions||[]);// 가장 최근 세션을 자동 선택\nif(response.sessions&&response.sessions.length>0){const latestSession=response.sessions.sort((a,b)=>new Date(b.lastActivity)-new Date(a.lastActivity))[0];setCurrentSessionId(latestSession.sessionId);loadChatHistory(latestSession.sessionId);}}catch(error){const errorInfo=handleAPIError(error);toast.error(`세션 목록 로드 실패: ${errorInfo.message}`);}finally{setSessionLoading(false);}},[projectId,loadChatHistory]);useEffect(()=>{loadChatSessions();},[loadChatSessions]);useEffect(()=>{scrollToBottom();},[messages]);const startNewSession=()=>{const newSessionId=generateSessionId();setCurrentSessionId(newSessionId);setMessages([]);// 새 세션을 세션 목록에 추가\nconst newSession={sessionId:newSessionId,userId:\"default\",lastActivity:new Date().toISOString(),createdAt:new Date().toISOString(),messageCount:0};setSessions(prev=>[newSession,...prev]);};const generateSessionId=()=>{return`session_${Date.now()}_${Math.random().toString(36).substr(2,9)}`;};const handleSendMessage=async e=>{e.preventDefault();if(!inputMessage.trim()||isLoading)return;if(!currentSessionId){startNewSession();return;}const userMessage=inputMessage.trim();setInputMessage(\"\");setIsLoading(true);// 사용자 메시지를 즉시 UI에 추가\nconst userMsgObj={id:`user_${Date.now()}`,role:\"user\",content:userMessage,timestamp:new Date().toISOString(),metadata:{}};setMessages(prev=>[...prev,userMsgObj]);try{// 채팅 API 호출\nconst response=await chatAPI.sendMessage(projectId,userMessage,currentSessionId);// AI 응답을 UI에 추가\nconst aiMsgObj={id:`ai_${Date.now()}`,role:\"assistant\",content:response.message,timestamp:response.timestamp,metadata:response.metadata||{}};setMessages(prev=>[...prev,aiMsgObj]);// 세션 정보 업데이트\nsetSessions(prev=>prev.map(session=>session.sessionId===currentSessionId?{...session,lastActivity:response.timestamp,messageCount:(session.messageCount||0)+2}:session));}catch(error){const errorInfo=handleAPIError(error);toast.error(`메시지 전송 실패: ${errorInfo.message}`);// 오류 메시지 추가\nconst errorMsgObj={id:`error_${Date.now()}`,role:\"system\",content:`오류: ${errorInfo.message}`,timestamp:new Date().toISOString(),metadata:{error:true}};setMessages(prev=>[...prev,errorMsgObj]);}finally{setIsLoading(false);}};const handleDeleteSession=async sessionId=>{if(!window.confirm(\"이 채팅 세션을 삭제하시겠습니까?\"))return;try{await chatAPI.deleteChatSession(projectId,sessionId);setSessions(prev=>prev.filter(s=>s.sessionId!==sessionId));if(currentSessionId===sessionId){setCurrentSessionId(null);setMessages([]);}toast.success(\"채팅 세션이 삭제되었습니다\");}catch(error){const errorInfo=handleAPIError(error);toast.error(`세션 삭제 실패: ${errorInfo.message}`);}};const formatTimestamp=timestamp=>{return new Date(timestamp).toLocaleString(\"ko-KR\",{month:\"short\",day:\"numeric\",hour:\"2-digit\",minute:\"2-digit\"});};const getMessageIcon=role=>{switch(role){case\"user\":return/*#__PURE__*/_jsx(UserIcon,{className:\"h-4 w-4\"});case\"assistant\":return/*#__PURE__*/_jsx(SparklesIcon,{className:\"h-4 w-4\"});case\"system\":return/*#__PURE__*/_jsx(InformationCircleIcon,{className:\"h-4 w-4\"});default:return/*#__PURE__*/_jsx(ChatBubbleLeftRightIcon,{className:\"h-4 w-4\"});}};return/*#__PURE__*/_jsxs(\"div\",{className:\"h-full flex bg-gray-50\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"w-80 bg-white border-r border-gray-200 flex flex-col\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"p-4 border-b border-gray-200\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-4\",children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"text-lg font-semibold text-gray-900 flex items-center\",children:[/*#__PURE__*/_jsx(ChatBubbleLeftRightIcon,{className:\"h-5 w-5 mr-2\"}),\"\\uCC44\\uD305 \\uC138\\uC158\"]}),/*#__PURE__*/_jsx(\"button\",{onClick:startNewSession,className:\"p-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors\",title:\"\\uC0C8 \\uCC44\\uD305 \\uC2DC\\uC791\",children:/*#__PURE__*/_jsx(PlusIcon,{className:\"h-4 w-4\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm text-gray-600\",children:[\"\\uD504\\uB85C\\uC81D\\uD2B8: \",/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:projectName})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex-1 overflow-y-auto\",children:sessionLoading?/*#__PURE__*/_jsxs(\"div\",{className:\"p-4 text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600 mt-2\",children:\"\\uC138\\uC158 \\uB85C\\uB529 \\uC911...\"})]}):sessions.length===0?/*#__PURE__*/_jsxs(\"div\",{className:\"p-4 text-center text-gray-500\",children:[/*#__PURE__*/_jsx(ChatBubbleLeftRightIcon,{className:\"h-12 w-12 mx-auto mb-2 text-gray-300\"}),/*#__PURE__*/_jsx(\"p\",{children:\"\\uCC44\\uD305 \\uC138\\uC158\\uC774 \\uC5C6\\uC2B5\\uB2C8\\uB2E4\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm\",children:\"\\uC0C8 \\uCC44\\uD305\\uC744 \\uC2DC\\uC791\\uD574\\uBCF4\\uC138\\uC694!\"})]}):/*#__PURE__*/_jsx(\"div\",{className:\"space-y-2 p-4\",children:sessions.map(session=>/*#__PURE__*/_jsx(\"div\",{className:`p-3 rounded-lg cursor-pointer transition-colors ${currentSessionId===session.sessionId?\"bg-blue-100 border border-blue-300\":\"bg-gray-50 hover:bg-gray-100\"}`,onClick:()=>{setCurrentSessionId(session.sessionId);loadChatHistory(session.sessionId);},children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1 min-w-0\",children:[/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm font-medium text-gray-900 truncate\",children:[\"\\uC138\\uC158\",\" \",session.sessionId.split(\"_\")[1]||session.sessionId.slice(-8)]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center text-xs text-gray-500 mt-1\",children:[/*#__PURE__*/_jsx(ClockIcon,{className:\"h-3 w-3 mr-1\"}),formatTimestamp(session.lastActivity)]}),session.messageCount&&/*#__PURE__*/_jsxs(\"div\",{className:\"text-xs text-blue-600 mt-1\",children:[session.messageCount,\"\\uAC1C \\uBA54\\uC2DC\\uC9C0\"]})]}),/*#__PURE__*/_jsx(\"button\",{onClick:e=>{e.stopPropagation();handleDeleteSession(session.sessionId);},className:\"p-1 text-gray-400 hover:text-red-600 transition-colors\",title:\"\\uC138\\uC158 \\uC0AD\\uC81C\",children:/*#__PURE__*/_jsx(TrashIcon,{className:\"h-4 w-4\"})})]})},session.sessionId))})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex-1 flex flex-col\",children:!currentSessionId?/*#__PURE__*/_jsx(\"div\",{className:\"flex-1 flex items-center justify-center bg-gray-50\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(ChatBubbleLeftRightIcon,{className:\"h-24 w-24 mx-auto text-gray-300 mb-4\"}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-medium text-gray-900 mb-2\",children:\"AI \\uCC44\\uD305 \\uC5B4\\uC2DC\\uC2A4\\uD134\\uD2B8\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 mb-6 max-w-md\",children:\"TITLE-NOMICS AI\\uC640 \\uC81C\\uBAA9 \\uC0DD\\uC131, \\uD3B8\\uC9D1 \\uAC00\\uC774\\uB4DC\\uB77C\\uC778\\uC5D0 \\uB300\\uD574 \\uB300\\uD654\\uD574\\uBCF4\\uC138\\uC694. LangChain \\uBA54\\uBAA8\\uB9AC\\uB85C \\uC774\\uC804 \\uB300\\uD654\\uB97C \\uAE30\\uC5B5\\uD569\\uB2C8\\uB2E4.\"}),/*#__PURE__*/_jsxs(\"button\",{onClick:startNewSession,className:\"inline-flex items-center px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors\",children:[/*#__PURE__*/_jsx(PlusIcon,{className:\"h-5 w-5 mr-2\"}),\"\\uC0C8 \\uCC44\\uD305 \\uC2DC\\uC791\"]})]})}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1 overflow-y-auto p-6 bg-white\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"max-w-4xl mx-auto space-y-6\",children:messages.length===0?/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-12\",children:[/*#__PURE__*/_jsx(SparklesIcon,{className:\"h-12 w-12 mx-auto text-blue-600 mb-4\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600\",children:\"\\uC548\\uB155\\uD558\\uC138\\uC694! \\uC81C\\uBAA9 \\uC0DD\\uC131\\uACFC \\uD3B8\\uC9D1\\uC5D0 \\uB300\\uD574 \\uBB34\\uC5C7\\uC774\\uB4E0 \\uBB3C\\uC5B4\\uBCF4\\uC138\\uC694.\"})]}):messages.map(message=>/*#__PURE__*/_jsx(\"div\",{className:`flex ${message.role===\"user\"?\"justify-end\":\"justify-start\"}`,children:/*#__PURE__*/_jsxs(\"div\",{className:`max-w-3xl flex ${message.role===\"user\"?\"flex-row-reverse\":\"flex-row\"}`,children:[/*#__PURE__*/_jsx(\"div\",{className:`flex-shrink-0 w-8 h-8 rounded-full flex items-center justify-center ${message.role===\"user\"?\"bg-blue-600 text-white ml-3\":message.role===\"system\"?\"bg-gray-400 text-white mr-3\":\"bg-green-600 text-white mr-3\"}`,children:getMessageIcon(message.role)}),/*#__PURE__*/_jsxs(\"div\",{className:`rounded-lg px-4 py-3 ${message.role===\"user\"?\"bg-blue-600 text-white\":message.role===\"system\"?\"bg-gray-100 text-gray-900\":\"bg-gray-100 text-gray-900\"}`,children:[/*#__PURE__*/_jsx(\"div\",{className:\"whitespace-pre-wrap\",children:message.content}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mt-2 text-xs opacity-70\",children:[/*#__PURE__*/_jsx(\"span\",{children:formatTimestamp(message.timestamp)}),message.metadata&&Object.keys(message.metadata).length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2 ml-4\",children:[message.metadata.memory_buffer_size&&/*#__PURE__*/_jsxs(\"span\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(CpuChipIcon,{className:\"h-3 w-3 mr-1\"}),\"\\uBA54\\uBAA8\\uB9AC:\",\" \",message.metadata.memory_buffer_size]}),message.metadata.relevant_messages_count&&/*#__PURE__*/_jsxs(\"span\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(DocumentTextIcon,{className:\"h-3 w-3 mr-1\"}),\"\\uAD00\\uB828:\",\" \",message.metadata.relevant_messages_count]})]})]})]})]})},message.id))}),/*#__PURE__*/_jsx(\"div\",{ref:messagesEndRef})]}),/*#__PURE__*/_jsx(\"div\",{className:\"border-t border-gray-200 bg-white p-6\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSendMessage,className:\"max-w-4xl mx-auto\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex-1\",children:/*#__PURE__*/_jsx(\"textarea\",{value:inputMessage,onChange:e=>setInputMessage(e.target.value),placeholder:\"\\uC81C\\uBAA9 \\uC0DD\\uC131\\uC774\\uB098 \\uD3B8\\uC9D1\\uC5D0 \\uB300\\uD574 \\uAD81\\uAE08\\uD55C \\uAC83\\uC744 \\uBB3C\\uC5B4\\uBCF4\\uC138\\uC694...\",className:\"w-full px-4 py-3 border border-gray-300 rounded-lg resize-none focus:ring-2 focus:ring-blue-500 focus:border-transparent\",rows:3,disabled:isLoading,onKeyDown:e=>{if(e.key===\"Enter\"&&!e.shiftKey){e.preventDefault();handleSendMessage(e);}}})}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:!inputMessage.trim()||isLoading,className:\"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center\",children:isLoading?/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-5 w-5 border-b-2 border-white\"}):/*#__PURE__*/_jsx(PaperAirplaneIcon,{className:\"h-5 w-5\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mt-2 text-sm text-gray-500\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Enter\\uB85C \\uC804\\uC1A1, Shift+Enter\\uB85C \\uC904\\uBC14\\uAFC8\"}),inputMessage&&/*#__PURE__*/_jsxs(\"span\",{children:[inputMessage.length,\"\\uC790\"]})]})]})})]})})]});};export default ChatInterface;","map":{"version":3,"names":["React","useState","useEffect","useRef","useCallback","toast","ChatBubbleLeftRightIcon","PaperAirplaneIcon","TrashIcon","PlusIcon","ClockIcon","CpuChipIcon","DocumentTextIcon","UserIcon","SparklesIcon","InformationCircleIcon","chatAPI","handleAPIError","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","ChatInterface","_ref","projectId","projectName","sessions","setSessions","currentSessionId","setCurrentSessionId","messages","setMessages","inputMessage","setInputMessage","isLoading","setIsLoading","sessionLoading","setSessionLoading","messagesEndRef","scrollToBottom","_messagesEndRef$curre","current","scrollIntoView","behavior","loadChatHistory","sessionId","response","getChatHistory","formattedMessages","map","msg","_msg$data","id","sk","role","content","data","timestamp","Date","now","toISOString","metadata","error","errorInfo","message","loadChatSessions","getChatSessions","length","latestSession","sort","a","b","lastActivity","startNewSession","newSessionId","generateSessionId","newSession","userId","createdAt","messageCount","prev","Math","random","toString","substr","handleSendMessage","e","preventDefault","trim","userMessage","userMsgObj","sendMessage","aiMsgObj","session","errorMsgObj","handleDeleteSession","window","confirm","deleteChatSession","filter","s","success","formatTimestamp","toLocaleString","month","day","hour","minute","getMessageIcon","className","children","onClick","title","split","slice","stopPropagation","Object","keys","memory_buffer_size","relevant_messages_count","ref","onSubmit","value","onChange","target","placeholder","rows","disabled","onKeyDown","key","shiftKey","type"],"sources":["/Users/yeong-gwang/Documents/work/서울경제신문/ai_제목달기/frontend/src/components/ChatInterface.js"],"sourcesContent":["import React, { useState, useEffect, useRef, useCallback } from \"react\";\nimport { toast } from \"react-hot-toast\";\nimport {\n  ChatBubbleLeftRightIcon,\n  PaperAirplaneIcon,\n  TrashIcon,\n  PlusIcon,\n  ClockIcon,\n  CpuChipIcon,\n  DocumentTextIcon,\n  UserIcon,\n  SparklesIcon,\n  InformationCircleIcon,\n} from \"@heroicons/react/24/outline\";\nimport { chatAPI, handleAPIError } from \"../services/api\";\n\nconst ChatInterface = ({ projectId, projectName }) => {\n  const [sessions, setSessions] = useState([]);\n  const [currentSessionId, setCurrentSessionId] = useState(null);\n  const [messages, setMessages] = useState([]);\n  const [inputMessage, setInputMessage] = useState(\"\");\n  const [isLoading, setIsLoading] = useState(false);\n  const [sessionLoading, setSessionLoading] = useState(false);\n  const messagesEndRef = useRef(null);\n\n  const scrollToBottom = () => {\n    messagesEndRef.current?.scrollIntoView({ behavior: \"smooth\" });\n  };\n\n  const loadChatHistory = useCallback(async (sessionId) => {\n    try {\n      const response = await chatAPI.getChatHistory(projectId, sessionId);\n\n      // 메시지 포매팅\n      const formattedMessages = response.messages.map((msg) => ({\n        id: msg.sk,\n        role: msg.role || \"user\",\n        content: msg.content || msg.data?.content || \"\",\n        timestamp: new Date(msg.timestamp || Date.now()).toISOString(),\n        metadata: msg.metadata || {},\n      }));\n\n      setMessages(formattedMessages);\n    } catch (error) {\n      const errorInfo = handleAPIError(error);\n      toast.error(`채팅 히스토리 로드 실패: ${errorInfo.message}`);\n      setMessages([]);\n    }\n  }, [projectId]);\n\n  const loadChatSessions = useCallback(async () => {\n    try {\n      setSessionLoading(true);\n      const response = await chatAPI.getChatSessions(projectId);\n      setSessions(response.sessions || []);\n\n      // 가장 최근 세션을 자동 선택\n      if (response.sessions && response.sessions.length > 0) {\n        const latestSession = response.sessions.sort(\n          (a, b) => new Date(b.lastActivity) - new Date(a.lastActivity)\n        )[0];\n        setCurrentSessionId(latestSession.sessionId);\n        loadChatHistory(latestSession.sessionId);\n      }\n    } catch (error) {\n      const errorInfo = handleAPIError(error);\n      toast.error(`세션 목록 로드 실패: ${errorInfo.message}`);\n    } finally {\n      setSessionLoading(false);\n    }\n  }, [projectId, loadChatHistory]);\n\n  useEffect(() => {\n    loadChatSessions();\n  }, [loadChatSessions]);\n\n  useEffect(() => {\n    scrollToBottom();\n  }, [messages]);\n\n\n  const startNewSession = () => {\n    const newSessionId = generateSessionId();\n    setCurrentSessionId(newSessionId);\n    setMessages([]);\n\n    // 새 세션을 세션 목록에 추가\n    const newSession = {\n      sessionId: newSessionId,\n      userId: \"default\",\n      lastActivity: new Date().toISOString(),\n      createdAt: new Date().toISOString(),\n      messageCount: 0,\n    };\n\n    setSessions((prev) => [newSession, ...prev]);\n  };\n\n  const generateSessionId = () => {\n    return `session_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;\n  };\n\n  const handleSendMessage = async (e) => {\n    e.preventDefault();\n\n    if (!inputMessage.trim() || isLoading) return;\n\n    if (!currentSessionId) {\n      startNewSession();\n      return;\n    }\n\n    const userMessage = inputMessage.trim();\n    setInputMessage(\"\");\n    setIsLoading(true);\n\n    // 사용자 메시지를 즉시 UI에 추가\n    const userMsgObj = {\n      id: `user_${Date.now()}`,\n      role: \"user\",\n      content: userMessage,\n      timestamp: new Date().toISOString(),\n      metadata: {},\n    };\n\n    setMessages((prev) => [...prev, userMsgObj]);\n\n    try {\n      // 채팅 API 호출\n      const response = await chatAPI.sendMessage(\n        projectId,\n        userMessage,\n        currentSessionId\n      );\n\n      // AI 응답을 UI에 추가\n      const aiMsgObj = {\n        id: `ai_${Date.now()}`,\n        role: \"assistant\",\n        content: response.message,\n        timestamp: response.timestamp,\n        metadata: response.metadata || {},\n      };\n\n      setMessages((prev) => [...prev, aiMsgObj]);\n\n      // 세션 정보 업데이트\n      setSessions((prev) =>\n        prev.map((session) =>\n          session.sessionId === currentSessionId\n            ? {\n                ...session,\n                lastActivity: response.timestamp,\n                messageCount: (session.messageCount || 0) + 2,\n              }\n            : session\n        )\n      );\n    } catch (error) {\n      const errorInfo = handleAPIError(error);\n      toast.error(`메시지 전송 실패: ${errorInfo.message}`);\n\n      // 오류 메시지 추가\n      const errorMsgObj = {\n        id: `error_${Date.now()}`,\n        role: \"system\",\n        content: `오류: ${errorInfo.message}`,\n        timestamp: new Date().toISOString(),\n        metadata: { error: true },\n      };\n\n      setMessages((prev) => [...prev, errorMsgObj]);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const handleDeleteSession = async (sessionId) => {\n    if (!window.confirm(\"이 채팅 세션을 삭제하시겠습니까?\")) return;\n\n    try {\n      await chatAPI.deleteChatSession(projectId, sessionId);\n      setSessions((prev) => prev.filter((s) => s.sessionId !== sessionId));\n\n      if (currentSessionId === sessionId) {\n        setCurrentSessionId(null);\n        setMessages([]);\n      }\n\n      toast.success(\"채팅 세션이 삭제되었습니다\");\n    } catch (error) {\n      const errorInfo = handleAPIError(error);\n      toast.error(`세션 삭제 실패: ${errorInfo.message}`);\n    }\n  };\n\n  const formatTimestamp = (timestamp) => {\n    return new Date(timestamp).toLocaleString(\"ko-KR\", {\n      month: \"short\",\n      day: \"numeric\",\n      hour: \"2-digit\",\n      minute: \"2-digit\",\n    });\n  };\n\n  const getMessageIcon = (role) => {\n    switch (role) {\n      case \"user\":\n        return <UserIcon className=\"h-4 w-4\" />;\n      case \"assistant\":\n        return <SparklesIcon className=\"h-4 w-4\" />;\n      case \"system\":\n        return <InformationCircleIcon className=\"h-4 w-4\" />;\n      default:\n        return <ChatBubbleLeftRightIcon className=\"h-4 w-4\" />;\n    }\n  };\n\n  return (\n    <div className=\"h-full flex bg-gray-50\">\n      {/* 세션 사이드바 */}\n      <div className=\"w-80 bg-white border-r border-gray-200 flex flex-col\">\n        <div className=\"p-4 border-b border-gray-200\">\n          <div className=\"flex items-center justify-between mb-4\">\n            <h3 className=\"text-lg font-semibold text-gray-900 flex items-center\">\n              <ChatBubbleLeftRightIcon className=\"h-5 w-5 mr-2\" />\n              채팅 세션\n            </h3>\n            <button\n              onClick={startNewSession}\n              className=\"p-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors\"\n              title=\"새 채팅 시작\"\n            >\n              <PlusIcon className=\"h-4 w-4\" />\n            </button>\n          </div>\n\n          <div className=\"text-sm text-gray-600\">\n            프로젝트: <span className=\"font-medium\">{projectName}</span>\n          </div>\n        </div>\n\n        <div className=\"flex-1 overflow-y-auto\">\n          {sessionLoading ? (\n            <div className=\"p-4 text-center\">\n              <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto\"></div>\n              <p className=\"text-sm text-gray-600 mt-2\">세션 로딩 중...</p>\n            </div>\n          ) : sessions.length === 0 ? (\n            <div className=\"p-4 text-center text-gray-500\">\n              <ChatBubbleLeftRightIcon className=\"h-12 w-12 mx-auto mb-2 text-gray-300\" />\n              <p>채팅 세션이 없습니다</p>\n              <p className=\"text-sm\">새 채팅을 시작해보세요!</p>\n            </div>\n          ) : (\n            <div className=\"space-y-2 p-4\">\n              {sessions.map((session) => (\n                <div\n                  key={session.sessionId}\n                  className={`p-3 rounded-lg cursor-pointer transition-colors ${\n                    currentSessionId === session.sessionId\n                      ? \"bg-blue-100 border border-blue-300\"\n                      : \"bg-gray-50 hover:bg-gray-100\"\n                  }`}\n                  onClick={() => {\n                    setCurrentSessionId(session.sessionId);\n                    loadChatHistory(session.sessionId);\n                  }}\n                >\n                  <div className=\"flex items-center justify-between\">\n                    <div className=\"flex-1 min-w-0\">\n                      <p className=\"text-sm font-medium text-gray-900 truncate\">\n                        세션{\" \"}\n                        {session.sessionId.split(\"_\")[1] ||\n                          session.sessionId.slice(-8)}\n                      </p>\n                      <div className=\"flex items-center text-xs text-gray-500 mt-1\">\n                        <ClockIcon className=\"h-3 w-3 mr-1\" />\n                        {formatTimestamp(session.lastActivity)}\n                      </div>\n                      {session.messageCount && (\n                        <div className=\"text-xs text-blue-600 mt-1\">\n                          {session.messageCount}개 메시지\n                        </div>\n                      )}\n                    </div>\n                    <button\n                      onClick={(e) => {\n                        e.stopPropagation();\n                        handleDeleteSession(session.sessionId);\n                      }}\n                      className=\"p-1 text-gray-400 hover:text-red-600 transition-colors\"\n                      title=\"세션 삭제\"\n                    >\n                      <TrashIcon className=\"h-4 w-4\" />\n                    </button>\n                  </div>\n                </div>\n              ))}\n            </div>\n          )}\n        </div>\n      </div>\n\n      {/* 채팅 영역 */}\n      <div className=\"flex-1 flex flex-col\">\n        {!currentSessionId ? (\n          <div className=\"flex-1 flex items-center justify-center bg-gray-50\">\n            <div className=\"text-center\">\n              <ChatBubbleLeftRightIcon className=\"h-24 w-24 mx-auto text-gray-300 mb-4\" />\n              <h3 className=\"text-xl font-medium text-gray-900 mb-2\">\n                AI 채팅 어시스턴트\n              </h3>\n              <p className=\"text-gray-600 mb-6 max-w-md\">\n                TITLE-NOMICS AI와 제목 생성, 편집 가이드라인에 대해\n                대화해보세요. LangChain 메모리로 이전 대화를 기억합니다.\n              </p>\n              <button\n                onClick={startNewSession}\n                className=\"inline-flex items-center px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors\"\n              >\n                <PlusIcon className=\"h-5 w-5 mr-2\" />새 채팅 시작\n              </button>\n            </div>\n          </div>\n        ) : (\n          <>\n            {/* 메시지 영역 */}\n            <div className=\"flex-1 overflow-y-auto p-6 bg-white\">\n              <div className=\"max-w-4xl mx-auto space-y-6\">\n                {messages.length === 0 ? (\n                  <div className=\"text-center py-12\">\n                    <SparklesIcon className=\"h-12 w-12 mx-auto text-blue-600 mb-4\" />\n                    <p className=\"text-gray-600\">\n                      안녕하세요! 제목 생성과 편집에 대해 무엇이든 물어보세요.\n                    </p>\n                  </div>\n                ) : (\n                  messages.map((message) => (\n                    <div\n                      key={message.id}\n                      className={`flex ${\n                        message.role === \"user\"\n                          ? \"justify-end\"\n                          : \"justify-start\"\n                      }`}\n                    >\n                      <div\n                        className={`max-w-3xl flex ${\n                          message.role === \"user\"\n                            ? \"flex-row-reverse\"\n                            : \"flex-row\"\n                        }`}\n                      >\n                        <div\n                          className={`flex-shrink-0 w-8 h-8 rounded-full flex items-center justify-center ${\n                            message.role === \"user\"\n                              ? \"bg-blue-600 text-white ml-3\"\n                              : message.role === \"system\"\n                              ? \"bg-gray-400 text-white mr-3\"\n                              : \"bg-green-600 text-white mr-3\"\n                          }`}\n                        >\n                          {getMessageIcon(message.role)}\n                        </div>\n\n                        <div\n                          className={`rounded-lg px-4 py-3 ${\n                            message.role === \"user\"\n                              ? \"bg-blue-600 text-white\"\n                              : message.role === \"system\"\n                              ? \"bg-gray-100 text-gray-900\"\n                              : \"bg-gray-100 text-gray-900\"\n                          }`}\n                        >\n                          <div className=\"whitespace-pre-wrap\">\n                            {message.content}\n                          </div>\n\n                          <div className=\"flex items-center justify-between mt-2 text-xs opacity-70\">\n                            <span>{formatTimestamp(message.timestamp)}</span>\n\n                            {message.metadata &&\n                              Object.keys(message.metadata).length > 0 && (\n                                <div className=\"flex items-center space-x-2 ml-4\">\n                                  {message.metadata.memory_buffer_size && (\n                                    <span className=\"flex items-center\">\n                                      <CpuChipIcon className=\"h-3 w-3 mr-1\" />\n                                      메모리:{\" \"}\n                                      {message.metadata.memory_buffer_size}\n                                    </span>\n                                  )}\n                                  {message.metadata.relevant_messages_count && (\n                                    <span className=\"flex items-center\">\n                                      <DocumentTextIcon className=\"h-3 w-3 mr-1\" />\n                                      관련:{\" \"}\n                                      {message.metadata.relevant_messages_count}\n                                    </span>\n                                  )}\n                                </div>\n                              )}\n                          </div>\n                        </div>\n                      </div>\n                    </div>\n                  ))\n                )}\n              </div>\n              <div ref={messagesEndRef} />\n            </div>\n\n            {/* 입력 영역 */}\n            <div className=\"border-t border-gray-200 bg-white p-6\">\n              <form onSubmit={handleSendMessage} className=\"max-w-4xl mx-auto\">\n                <div className=\"flex space-x-4\">\n                  <div className=\"flex-1\">\n                    <textarea\n                      value={inputMessage}\n                      onChange={(e) => setInputMessage(e.target.value)}\n                      placeholder=\"제목 생성이나 편집에 대해 궁금한 것을 물어보세요...\"\n                      className=\"w-full px-4 py-3 border border-gray-300 rounded-lg resize-none focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                      rows={3}\n                      disabled={isLoading}\n                      onKeyDown={(e) => {\n                        if (e.key === \"Enter\" && !e.shiftKey) {\n                          e.preventDefault();\n                          handleSendMessage(e);\n                        }\n                      }}\n                    />\n                  </div>\n                  <button\n                    type=\"submit\"\n                    disabled={!inputMessage.trim() || isLoading}\n                    className=\"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center\"\n                  >\n                    {isLoading ? (\n                      <div className=\"animate-spin rounded-full h-5 w-5 border-b-2 border-white\"></div>\n                    ) : (\n                      <PaperAirplaneIcon className=\"h-5 w-5\" />\n                    )}\n                  </button>\n                </div>\n\n                <div className=\"flex items-center justify-between mt-2 text-sm text-gray-500\">\n                  <span>Enter로 전송, Shift+Enter로 줄바꿈</span>\n                  {inputMessage && <span>{inputMessage.length}자</span>}\n                </div>\n              </form>\n            </div>\n          </>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default ChatInterface;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}