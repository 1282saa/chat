{"ast":null,"code":"var _jsxFileName = \"/Users/yeong-gwang/Documents/work/\\u1109\\u1165\\u110B\\u116E\\u11AF\\u1100\\u1167\\u11BC\\u110C\\u1166\\u1109\\u1175\\u11AB\\u1106\\u116E\\u11AB/ai_\\u110C\\u1166\\u1106\\u1169\\u11A8\\u1103\\u1161\\u11AF\\u1100\\u1175/frontend/src/components/ChatInterface.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from \"react\";\nimport { toast } from \"react-hot-toast\";\nimport { ChatBubbleLeftRightIcon, PaperAirplaneIcon, TrashIcon, PlusIcon, ClockIcon, CpuChipIcon, DocumentTextIcon, UserIcon, SparklesIcon, InformationCircleIcon } from \"@heroicons/react/24/outline\";\nimport { chatAPI, handleAPIError } from \"../services/api\";\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst ChatInterface = ({\n  projectId,\n  projectName\n}) => {\n  _s();\n  const [sessions, setSessions] = useState([]);\n  const [currentSessionId, setCurrentSessionId] = useState(null);\n  const [messages, setMessages] = useState([]);\n  const [inputMessage, setInputMessage] = useState(\"\");\n  const [isLoading, setIsLoading] = useState(false);\n  const [sessionLoading, setSessionLoading] = useState(false);\n  const messagesEndRef = useRef(null);\n  useEffect(() => {\n    loadChatSessions();\n  }, [projectId]);\n  useEffect(() => {\n    scrollToBottom();\n  }, [messages]);\n  const scrollToBottom = () => {\n    var _messagesEndRef$curre;\n    (_messagesEndRef$curre = messagesEndRef.current) === null || _messagesEndRef$curre === void 0 ? void 0 : _messagesEndRef$curre.scrollIntoView({\n      behavior: \"smooth\"\n    });\n  };\n  const loadChatSessions = async () => {\n    try {\n      setSessionLoading(true);\n      const response = await chatAPI.getChatSessions(projectId);\n      setSessions(response.sessions || []);\n\n      // 가장 최근 세션을 자동 선택\n      if (response.sessions && response.sessions.length > 0) {\n        const latestSession = response.sessions.sort((a, b) => new Date(b.lastActivity) - new Date(a.lastActivity))[0];\n        setCurrentSessionId(latestSession.sessionId);\n        loadChatHistory(latestSession.sessionId);\n      }\n    } catch (error) {\n      const errorInfo = handleAPIError(error);\n      toast.error(`세션 목록 로드 실패: ${errorInfo.message}`);\n    } finally {\n      setSessionLoading(false);\n    }\n  };\n  const loadChatHistory = async sessionId => {\n    try {\n      const response = await chatAPI.getChatHistory(projectId, sessionId);\n\n      // 메시지 포맷팅\n      const formattedMessages = response.messages.map(msg => {\n        var _msg$data;\n        return {\n          id: msg.sk,\n          role: msg.role || \"user\",\n          content: msg.content || ((_msg$data = msg.data) === null || _msg$data === void 0 ? void 0 : _msg$data.content) || \"\",\n          timestamp: new Date(msg.timestamp || Date.now()).toISOString(),\n          metadata: msg.metadata || {}\n        };\n      });\n      setMessages(formattedMessages);\n    } catch (error) {\n      const errorInfo = handleAPIError(error);\n      toast.error(`채팅 히스토리 로드 실패: ${errorInfo.message}`);\n      setMessages([]);\n    }\n  };\n  const startNewSession = () => {\n    const newSessionId = generateSessionId();\n    setCurrentSessionId(newSessionId);\n    setMessages([]);\n\n    // 새 세션을 세션 목록에 추가\n    const newSession = {\n      sessionId: newSessionId,\n      userId: \"default\",\n      lastActivity: new Date().toISOString(),\n      createdAt: new Date().toISOString(),\n      messageCount: 0\n    };\n    setSessions(prev => [newSession, ...prev]);\n  };\n  const generateSessionId = () => {\n    return `session_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;\n  };\n  const handleSendMessage = async e => {\n    e.preventDefault();\n    if (!inputMessage.trim() || isLoading) return;\n    if (!currentSessionId) {\n      startNewSession();\n      return;\n    }\n    const userMessage = inputMessage.trim();\n    setInputMessage(\"\");\n    setIsLoading(true);\n\n    // 사용자 메시지를 즉시 UI에 추가\n    const userMsgObj = {\n      id: `user_${Date.now()}`,\n      role: \"user\",\n      content: userMessage,\n      timestamp: new Date().toISOString(),\n      metadata: {}\n    };\n    setMessages(prev => [...prev, userMsgObj]);\n    try {\n      // 채팅 API 호출\n      const response = await chatAPI.sendMessage(projectId, userMessage, currentSessionId);\n\n      // AI 응답을 UI에 추가\n      const aiMsgObj = {\n        id: `ai_${Date.now()}`,\n        role: \"assistant\",\n        content: response.message,\n        timestamp: response.timestamp,\n        metadata: response.metadata || {}\n      };\n      setMessages(prev => [...prev, aiMsgObj]);\n\n      // 세션 정보 업데이트\n      setSessions(prev => prev.map(session => session.sessionId === currentSessionId ? {\n        ...session,\n        lastActivity: response.timestamp,\n        messageCount: (session.messageCount || 0) + 2\n      } : session));\n    } catch (error) {\n      const errorInfo = handleAPIError(error);\n      toast.error(`메시지 전송 실패: ${errorInfo.message}`);\n\n      // 오류 메시지 추가\n      const errorMsgObj = {\n        id: `error_${Date.now()}`,\n        role: \"system\",\n        content: `오류: ${errorInfo.message}`,\n        timestamp: new Date().toISOString(),\n        metadata: {\n          error: true\n        }\n      };\n      setMessages(prev => [...prev, errorMsgObj]);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n  const handleDeleteSession = async sessionId => {\n    if (!window.confirm(\"이 채팅 세션을 삭제하시겠습니까?\")) return;\n    try {\n      await chatAPI.deleteChatSession(projectId, sessionId);\n      setSessions(prev => prev.filter(s => s.sessionId !== sessionId));\n      if (currentSessionId === sessionId) {\n        setCurrentSessionId(null);\n        setMessages([]);\n      }\n      toast.success(\"채팅 세션이 삭제되었습니다\");\n    } catch (error) {\n      const errorInfo = handleAPIError(error);\n      toast.error(`세션 삭제 실패: ${errorInfo.message}`);\n    }\n  };\n  const formatTimestamp = timestamp => {\n    return new Date(timestamp).toLocaleString(\"ko-KR\", {\n      month: \"short\",\n      day: \"numeric\",\n      hour: \"2-digit\",\n      minute: \"2-digit\"\n    });\n  };\n  const getMessageIcon = role => {\n    switch (role) {\n      case \"user\":\n        return /*#__PURE__*/_jsxDEV(UserIcon, {\n          className: \"h-4 w-4\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 208,\n          columnNumber: 16\n        }, this);\n      case \"assistant\":\n        return /*#__PURE__*/_jsxDEV(SparklesIcon, {\n          className: \"h-4 w-4\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 210,\n          columnNumber: 16\n        }, this);\n      case \"system\":\n        return /*#__PURE__*/_jsxDEV(InformationCircleIcon, {\n          className: \"h-4 w-4\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 212,\n          columnNumber: 16\n        }, this);\n      default:\n        return /*#__PURE__*/_jsxDEV(ChatBubbleLeftRightIcon, {\n          className: \"h-4 w-4\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 214,\n          columnNumber: 16\n        }, this);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"h-full flex bg-gray-50\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"w-80 bg-white border-r border-gray-200 flex flex-col\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"p-4 border-b border-gray-200\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center justify-between mb-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"text-lg font-semibold text-gray-900 flex items-center\",\n            children: [/*#__PURE__*/_jsxDEV(ChatBubbleLeftRightIcon, {\n              className: \"h-5 w-5 mr-2\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 225,\n              columnNumber: 15\n            }, this), \"\\uCC44\\uD305 \\uC138\\uC158\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 224,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: startNewSession,\n            className: \"p-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors\",\n            title: \"\\uC0C8 \\uCC44\\uD305 \\uC2DC\\uC791\",\n            children: /*#__PURE__*/_jsxDEV(PlusIcon, {\n              className: \"h-4 w-4\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 233,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 228,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 223,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-sm text-gray-600\",\n          children: [\"\\uD504\\uB85C\\uC81D\\uD2B8: \", /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"font-medium\",\n            children: projectName\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 238,\n            columnNumber: 19\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 237,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 222,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex-1 overflow-y-auto\",\n        children: sessionLoading ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"p-4 text-center\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 245,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-sm text-gray-600 mt-2\",\n            children: \"\\uC138\\uC158 \\uB85C\\uB529 \\uC911...\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 246,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 244,\n          columnNumber: 13\n        }, this) : sessions.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"p-4 text-center text-gray-500\",\n          children: [/*#__PURE__*/_jsxDEV(ChatBubbleLeftRightIcon, {\n            className: \"h-12 w-12 mx-auto mb-2 text-gray-300\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 250,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"\\uCC44\\uD305 \\uC138\\uC158\\uC774 \\uC5C6\\uC2B5\\uB2C8\\uB2E4\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 251,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-sm\",\n            children: \"\\uC0C8 \\uCC44\\uD305\\uC744 \\uC2DC\\uC791\\uD574\\uBCF4\\uC138\\uC694!\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 252,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 249,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"space-y-2 p-4\",\n          children: sessions.map(session => /*#__PURE__*/_jsxDEV(\"div\", {\n            className: `p-3 rounded-lg cursor-pointer transition-colors ${currentSessionId === session.sessionId ? \"bg-blue-100 border border-blue-300\" : \"bg-gray-50 hover:bg-gray-100\"}`,\n            onClick: () => {\n              setCurrentSessionId(session.sessionId);\n              loadChatHistory(session.sessionId);\n            },\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center justify-between\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex-1 min-w-0\",\n                children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"text-sm font-medium text-gray-900 truncate\",\n                  children: [\"\\uC138\\uC158\", \" \", session.sessionId.split(\"_\")[1] || session.sessionId.slice(-8)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 271,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex items-center text-xs text-gray-500 mt-1\",\n                  children: [/*#__PURE__*/_jsxDEV(ClockIcon, {\n                    className: \"h-3 w-3 mr-1\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 277,\n                    columnNumber: 25\n                  }, this), formatTimestamp(session.lastActivity)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 276,\n                  columnNumber: 23\n                }, this), session.messageCount && /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"text-xs text-blue-600 mt-1\",\n                  children: [session.messageCount, \"\\uAC1C \\uBA54\\uC2DC\\uC9C0\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 281,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 270,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: e => {\n                  e.stopPropagation();\n                  handleDeleteSession(session.sessionId);\n                },\n                className: \"p-1 text-gray-400 hover:text-red-600 transition-colors\",\n                title: \"\\uC138\\uC158 \\uC0AD\\uC81C\",\n                children: /*#__PURE__*/_jsxDEV(TrashIcon, {\n                  className: \"h-4 w-4\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 294,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 286,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 269,\n              columnNumber: 19\n            }, this)\n          }, session.sessionId, false, {\n            fileName: _jsxFileName,\n            lineNumber: 257,\n            columnNumber: 17\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 255,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 242,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 221,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex-1 flex flex-col\",\n      children: !currentSessionId ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex-1 flex items-center justify-center bg-gray-50\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-center\",\n          children: [/*#__PURE__*/_jsxDEV(ChatBubbleLeftRightIcon, {\n            className: \"h-24 w-24 mx-auto text-gray-300 mb-4\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 309,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"text-xl font-medium text-gray-900 mb-2\",\n            children: \"AI \\uCC44\\uD305 \\uC5B4\\uC2DC\\uC2A4\\uD134\\uD2B8\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 310,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-gray-600 mb-6 max-w-md\",\n            children: \"TITLE-NOMICS AI\\uC640 \\uC81C\\uBAA9 \\uC0DD\\uC131, \\uD3B8\\uC9D1 \\uAC00\\uC774\\uB4DC\\uB77C\\uC778\\uC5D0 \\uB300\\uD574 \\uB300\\uD654\\uD574\\uBCF4\\uC138\\uC694. LangChain \\uBA54\\uBAA8\\uB9AC\\uB85C \\uC774\\uC804 \\uB300\\uD654\\uB97C \\uAE30\\uC5B5\\uD569\\uB2C8\\uB2E4.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 313,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: startNewSession,\n            className: \"inline-flex items-center px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors\",\n            children: [/*#__PURE__*/_jsxDEV(PlusIcon, {\n              className: \"h-5 w-5 mr-2\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 321,\n              columnNumber: 17\n            }, this), \"\\uC0C8 \\uCC44\\uD305 \\uC2DC\\uC791\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 317,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 308,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 307,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex-1 overflow-y-auto p-6 bg-white\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"max-w-4xl mx-auto space-y-6\",\n            children: messages.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-center py-12\",\n              children: [/*#__PURE__*/_jsxDEV(SparklesIcon, {\n                className: \"h-12 w-12 mx-auto text-blue-600 mb-4\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 332,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-gray-600\",\n                children: \"\\uC548\\uB155\\uD558\\uC138\\uC694! \\uC81C\\uBAA9 \\uC0DD\\uC131\\uACFC \\uD3B8\\uC9D1\\uC5D0 \\uB300\\uD574 \\uBB34\\uC5C7\\uC774\\uB4E0 \\uBB3C\\uC5B4\\uBCF4\\uC138\\uC694.\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 333,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 331,\n              columnNumber: 19\n            }, this) : messages.map(message => /*#__PURE__*/_jsxDEV(\"div\", {\n              className: `flex ${message.role === \"user\" ? \"justify-end\" : \"justify-start\"}`,\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: `max-w-3xl flex ${message.role === \"user\" ? \"flex-row-reverse\" : \"flex-row\"}`,\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: `flex-shrink-0 w-8 h-8 rounded-full flex items-center justify-center ${message.role === \"user\" ? \"bg-blue-600 text-white ml-3\" : message.role === \"system\" ? \"bg-gray-400 text-white mr-3\" : \"bg-green-600 text-white mr-3\"}`,\n                  children: getMessageIcon(message.role)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 354,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: `rounded-lg px-4 py-3 ${message.role === \"user\" ? \"bg-blue-600 text-white\" : message.role === \"system\" ? \"bg-gray-100 text-gray-900\" : \"bg-gray-100 text-gray-900\"}`,\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"whitespace-pre-wrap\",\n                    children: message.content\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 375,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"flex items-center justify-between mt-2 text-xs opacity-70\",\n                    children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                      children: formatTimestamp(message.timestamp)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 380,\n                      columnNumber: 29\n                    }, this), message.metadata && Object.keys(message.metadata).length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"flex items-center space-x-2 ml-4\",\n                      children: [message.metadata.memory_buffer_size && /*#__PURE__*/_jsxDEV(\"span\", {\n                        className: \"flex items-center\",\n                        children: [/*#__PURE__*/_jsxDEV(CpuChipIcon, {\n                          className: \"h-3 w-3 mr-1\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 387,\n                          columnNumber: 39\n                        }, this), \"\\uBA54\\uBAA8\\uB9AC:\", \" \", message.metadata.memory_buffer_size]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 386,\n                        columnNumber: 37\n                      }, this), message.metadata.relevant_messages_count && /*#__PURE__*/_jsxDEV(\"span\", {\n                        className: \"flex items-center\",\n                        children: [/*#__PURE__*/_jsxDEV(DocumentTextIcon, {\n                          className: \"h-3 w-3 mr-1\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 394,\n                          columnNumber: 39\n                        }, this), \"\\uAD00\\uB828:\", \" \", message.metadata.relevant_messages_count]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 393,\n                        columnNumber: 37\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 384,\n                      columnNumber: 33\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 379,\n                    columnNumber: 27\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 366,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 347,\n                columnNumber: 23\n              }, this)\n            }, message.id, false, {\n              fileName: _jsxFileName,\n              lineNumber: 339,\n              columnNumber: 21\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 329,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            ref: messagesEndRef\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 408,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 328,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"border-t border-gray-200 bg-white p-6\",\n          children: /*#__PURE__*/_jsxDEV(\"form\", {\n            onSubmit: handleSendMessage,\n            className: \"max-w-4xl mx-auto\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex space-x-4\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex-1\",\n                children: /*#__PURE__*/_jsxDEV(\"textarea\", {\n                  value: inputMessage,\n                  onChange: e => setInputMessage(e.target.value),\n                  placeholder: \"\\uC81C\\uBAA9 \\uC0DD\\uC131\\uC774\\uB098 \\uD3B8\\uC9D1\\uC5D0 \\uB300\\uD574 \\uAD81\\uAE08\\uD55C \\uAC83\\uC744 \\uBB3C\\uC5B4\\uBCF4\\uC138\\uC694...\",\n                  className: \"w-full px-4 py-3 border border-gray-300 rounded-lg resize-none focus:ring-2 focus:ring-blue-500 focus:border-transparent\",\n                  rows: 3,\n                  disabled: isLoading,\n                  onKeyDown: e => {\n                    if (e.key === \"Enter\" && !e.shiftKey) {\n                      e.preventDefault();\n                      handleSendMessage(e);\n                    }\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 416,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 415,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"submit\",\n                disabled: !inputMessage.trim() || isLoading,\n                className: \"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center\",\n                children: isLoading ? /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"animate-spin rounded-full h-5 w-5 border-b-2 border-white\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 437,\n                  columnNumber: 23\n                }, this) : /*#__PURE__*/_jsxDEV(PaperAirplaneIcon, {\n                  className: \"h-5 w-5\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 439,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 431,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 414,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center justify-between mt-2 text-sm text-gray-500\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                children: \"Enter\\uB85C \\uC804\\uC1A1, Shift+Enter\\uB85C \\uC904\\uBC14\\uAFC8\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 445,\n                columnNumber: 19\n              }, this), inputMessage && /*#__PURE__*/_jsxDEV(\"span\", {\n                children: [inputMessage.length, \"\\uC790\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 446,\n                columnNumber: 36\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 444,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 413,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 412,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 305,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 219,\n    columnNumber: 5\n  }, this);\n};\n_s(ChatInterface, \"nb7UVUUqmNpp1YGgEz2iJ9B9CiU=\");\n_c = ChatInterface;\nexport default ChatInterface;\nvar _c;\n$RefreshReg$(_c, \"ChatInterface\");","map":{"version":3,"names":["React","useState","useEffect","useRef","toast","ChatBubbleLeftRightIcon","PaperAirplaneIcon","TrashIcon","PlusIcon","ClockIcon","CpuChipIcon","DocumentTextIcon","UserIcon","SparklesIcon","InformationCircleIcon","chatAPI","handleAPIError","jsxDEV","_jsxDEV","Fragment","_Fragment","ChatInterface","projectId","projectName","_s","sessions","setSessions","currentSessionId","setCurrentSessionId","messages","setMessages","inputMessage","setInputMessage","isLoading","setIsLoading","sessionLoading","setSessionLoading","messagesEndRef","loadChatSessions","scrollToBottom","_messagesEndRef$curre","current","scrollIntoView","behavior","response","getChatSessions","length","latestSession","sort","a","b","Date","lastActivity","sessionId","loadChatHistory","error","errorInfo","message","getChatHistory","formattedMessages","map","msg","_msg$data","id","sk","role","content","data","timestamp","now","toISOString","metadata","startNewSession","newSessionId","generateSessionId","newSession","userId","createdAt","messageCount","prev","Math","random","toString","substr","handleSendMessage","e","preventDefault","trim","userMessage","userMsgObj","sendMessage","aiMsgObj","session","errorMsgObj","handleDeleteSession","window","confirm","deleteChatSession","filter","s","success","formatTimestamp","toLocaleString","month","day","hour","minute","getMessageIcon","className","fileName","_jsxFileName","lineNumber","columnNumber","children","onClick","title","split","slice","stopPropagation","Object","keys","memory_buffer_size","relevant_messages_count","ref","onSubmit","value","onChange","target","placeholder","rows","disabled","onKeyDown","key","shiftKey","type","_c","$RefreshReg$"],"sources":["/Users/yeong-gwang/Documents/work/서울경제신문/ai_제목달기/frontend/src/components/ChatInterface.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from \"react\";\nimport { toast } from \"react-hot-toast\";\nimport {\n  ChatBubbleLeftRightIcon,\n  PaperAirplaneIcon,\n  TrashIcon,\n  PlusIcon,\n  ClockIcon,\n  CpuChipIcon,\n  DocumentTextIcon,\n  UserIcon,\n  SparklesIcon,\n  InformationCircleIcon,\n} from \"@heroicons/react/24/outline\";\nimport { chatAPI, handleAPIError } from \"../services/api\";\n\nconst ChatInterface = ({ projectId, projectName }) => {\n  const [sessions, setSessions] = useState([]);\n  const [currentSessionId, setCurrentSessionId] = useState(null);\n  const [messages, setMessages] = useState([]);\n  const [inputMessage, setInputMessage] = useState(\"\");\n  const [isLoading, setIsLoading] = useState(false);\n  const [sessionLoading, setSessionLoading] = useState(false);\n  const messagesEndRef = useRef(null);\n\n  useEffect(() => {\n    loadChatSessions();\n  }, [projectId]);\n\n  useEffect(() => {\n    scrollToBottom();\n  }, [messages]);\n\n  const scrollToBottom = () => {\n    messagesEndRef.current?.scrollIntoView({ behavior: \"smooth\" });\n  };\n\n  const loadChatSessions = async () => {\n    try {\n      setSessionLoading(true);\n      const response = await chatAPI.getChatSessions(projectId);\n      setSessions(response.sessions || []);\n\n      // 가장 최근 세션을 자동 선택\n      if (response.sessions && response.sessions.length > 0) {\n        const latestSession = response.sessions.sort(\n          (a, b) => new Date(b.lastActivity) - new Date(a.lastActivity)\n        )[0];\n        setCurrentSessionId(latestSession.sessionId);\n        loadChatHistory(latestSession.sessionId);\n      }\n    } catch (error) {\n      const errorInfo = handleAPIError(error);\n      toast.error(`세션 목록 로드 실패: ${errorInfo.message}`);\n    } finally {\n      setSessionLoading(false);\n    }\n  };\n\n  const loadChatHistory = async (sessionId) => {\n    try {\n      const response = await chatAPI.getChatHistory(projectId, sessionId);\n\n      // 메시지 포맷팅\n      const formattedMessages = response.messages.map((msg) => ({\n        id: msg.sk,\n        role: msg.role || \"user\",\n        content: msg.content || msg.data?.content || \"\",\n        timestamp: new Date(msg.timestamp || Date.now()).toISOString(),\n        metadata: msg.metadata || {},\n      }));\n\n      setMessages(formattedMessages);\n    } catch (error) {\n      const errorInfo = handleAPIError(error);\n      toast.error(`채팅 히스토리 로드 실패: ${errorInfo.message}`);\n      setMessages([]);\n    }\n  };\n\n  const startNewSession = () => {\n    const newSessionId = generateSessionId();\n    setCurrentSessionId(newSessionId);\n    setMessages([]);\n\n    // 새 세션을 세션 목록에 추가\n    const newSession = {\n      sessionId: newSessionId,\n      userId: \"default\",\n      lastActivity: new Date().toISOString(),\n      createdAt: new Date().toISOString(),\n      messageCount: 0,\n    };\n\n    setSessions((prev) => [newSession, ...prev]);\n  };\n\n  const generateSessionId = () => {\n    return `session_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;\n  };\n\n  const handleSendMessage = async (e) => {\n    e.preventDefault();\n\n    if (!inputMessage.trim() || isLoading) return;\n\n    if (!currentSessionId) {\n      startNewSession();\n      return;\n    }\n\n    const userMessage = inputMessage.trim();\n    setInputMessage(\"\");\n    setIsLoading(true);\n\n    // 사용자 메시지를 즉시 UI에 추가\n    const userMsgObj = {\n      id: `user_${Date.now()}`,\n      role: \"user\",\n      content: userMessage,\n      timestamp: new Date().toISOString(),\n      metadata: {},\n    };\n\n    setMessages((prev) => [...prev, userMsgObj]);\n\n    try {\n      // 채팅 API 호출\n      const response = await chatAPI.sendMessage(\n        projectId,\n        userMessage,\n        currentSessionId\n      );\n\n      // AI 응답을 UI에 추가\n      const aiMsgObj = {\n        id: `ai_${Date.now()}`,\n        role: \"assistant\",\n        content: response.message,\n        timestamp: response.timestamp,\n        metadata: response.metadata || {},\n      };\n\n      setMessages((prev) => [...prev, aiMsgObj]);\n\n      // 세션 정보 업데이트\n      setSessions((prev) =>\n        prev.map((session) =>\n          session.sessionId === currentSessionId\n            ? {\n                ...session,\n                lastActivity: response.timestamp,\n                messageCount: (session.messageCount || 0) + 2,\n              }\n            : session\n        )\n      );\n    } catch (error) {\n      const errorInfo = handleAPIError(error);\n      toast.error(`메시지 전송 실패: ${errorInfo.message}`);\n\n      // 오류 메시지 추가\n      const errorMsgObj = {\n        id: `error_${Date.now()}`,\n        role: \"system\",\n        content: `오류: ${errorInfo.message}`,\n        timestamp: new Date().toISOString(),\n        metadata: { error: true },\n      };\n\n      setMessages((prev) => [...prev, errorMsgObj]);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const handleDeleteSession = async (sessionId) => {\n    if (!window.confirm(\"이 채팅 세션을 삭제하시겠습니까?\")) return;\n\n    try {\n      await chatAPI.deleteChatSession(projectId, sessionId);\n      setSessions((prev) => prev.filter((s) => s.sessionId !== sessionId));\n\n      if (currentSessionId === sessionId) {\n        setCurrentSessionId(null);\n        setMessages([]);\n      }\n\n      toast.success(\"채팅 세션이 삭제되었습니다\");\n    } catch (error) {\n      const errorInfo = handleAPIError(error);\n      toast.error(`세션 삭제 실패: ${errorInfo.message}`);\n    }\n  };\n\n  const formatTimestamp = (timestamp) => {\n    return new Date(timestamp).toLocaleString(\"ko-KR\", {\n      month: \"short\",\n      day: \"numeric\",\n      hour: \"2-digit\",\n      minute: \"2-digit\",\n    });\n  };\n\n  const getMessageIcon = (role) => {\n    switch (role) {\n      case \"user\":\n        return <UserIcon className=\"h-4 w-4\" />;\n      case \"assistant\":\n        return <SparklesIcon className=\"h-4 w-4\" />;\n      case \"system\":\n        return <InformationCircleIcon className=\"h-4 w-4\" />;\n      default:\n        return <ChatBubbleLeftRightIcon className=\"h-4 w-4\" />;\n    }\n  };\n\n  return (\n    <div className=\"h-full flex bg-gray-50\">\n      {/* 세션 사이드바 */}\n      <div className=\"w-80 bg-white border-r border-gray-200 flex flex-col\">\n        <div className=\"p-4 border-b border-gray-200\">\n          <div className=\"flex items-center justify-between mb-4\">\n            <h3 className=\"text-lg font-semibold text-gray-900 flex items-center\">\n              <ChatBubbleLeftRightIcon className=\"h-5 w-5 mr-2\" />\n              채팅 세션\n            </h3>\n            <button\n              onClick={startNewSession}\n              className=\"p-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors\"\n              title=\"새 채팅 시작\"\n            >\n              <PlusIcon className=\"h-4 w-4\" />\n            </button>\n          </div>\n\n          <div className=\"text-sm text-gray-600\">\n            프로젝트: <span className=\"font-medium\">{projectName}</span>\n          </div>\n        </div>\n\n        <div className=\"flex-1 overflow-y-auto\">\n          {sessionLoading ? (\n            <div className=\"p-4 text-center\">\n              <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto\"></div>\n              <p className=\"text-sm text-gray-600 mt-2\">세션 로딩 중...</p>\n            </div>\n          ) : sessions.length === 0 ? (\n            <div className=\"p-4 text-center text-gray-500\">\n              <ChatBubbleLeftRightIcon className=\"h-12 w-12 mx-auto mb-2 text-gray-300\" />\n              <p>채팅 세션이 없습니다</p>\n              <p className=\"text-sm\">새 채팅을 시작해보세요!</p>\n            </div>\n          ) : (\n            <div className=\"space-y-2 p-4\">\n              {sessions.map((session) => (\n                <div\n                  key={session.sessionId}\n                  className={`p-3 rounded-lg cursor-pointer transition-colors ${\n                    currentSessionId === session.sessionId\n                      ? \"bg-blue-100 border border-blue-300\"\n                      : \"bg-gray-50 hover:bg-gray-100\"\n                  }`}\n                  onClick={() => {\n                    setCurrentSessionId(session.sessionId);\n                    loadChatHistory(session.sessionId);\n                  }}\n                >\n                  <div className=\"flex items-center justify-between\">\n                    <div className=\"flex-1 min-w-0\">\n                      <p className=\"text-sm font-medium text-gray-900 truncate\">\n                        세션{\" \"}\n                        {session.sessionId.split(\"_\")[1] ||\n                          session.sessionId.slice(-8)}\n                      </p>\n                      <div className=\"flex items-center text-xs text-gray-500 mt-1\">\n                        <ClockIcon className=\"h-3 w-3 mr-1\" />\n                        {formatTimestamp(session.lastActivity)}\n                      </div>\n                      {session.messageCount && (\n                        <div className=\"text-xs text-blue-600 mt-1\">\n                          {session.messageCount}개 메시지\n                        </div>\n                      )}\n                    </div>\n                    <button\n                      onClick={(e) => {\n                        e.stopPropagation();\n                        handleDeleteSession(session.sessionId);\n                      }}\n                      className=\"p-1 text-gray-400 hover:text-red-600 transition-colors\"\n                      title=\"세션 삭제\"\n                    >\n                      <TrashIcon className=\"h-4 w-4\" />\n                    </button>\n                  </div>\n                </div>\n              ))}\n            </div>\n          )}\n        </div>\n      </div>\n\n      {/* 채팅 영역 */}\n      <div className=\"flex-1 flex flex-col\">\n        {!currentSessionId ? (\n          <div className=\"flex-1 flex items-center justify-center bg-gray-50\">\n            <div className=\"text-center\">\n              <ChatBubbleLeftRightIcon className=\"h-24 w-24 mx-auto text-gray-300 mb-4\" />\n              <h3 className=\"text-xl font-medium text-gray-900 mb-2\">\n                AI 채팅 어시스턴트\n              </h3>\n              <p className=\"text-gray-600 mb-6 max-w-md\">\n                TITLE-NOMICS AI와 제목 생성, 편집 가이드라인에 대해\n                대화해보세요. LangChain 메모리로 이전 대화를 기억합니다.\n              </p>\n              <button\n                onClick={startNewSession}\n                className=\"inline-flex items-center px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors\"\n              >\n                <PlusIcon className=\"h-5 w-5 mr-2\" />새 채팅 시작\n              </button>\n            </div>\n          </div>\n        ) : (\n          <>\n            {/* 메시지 영역 */}\n            <div className=\"flex-1 overflow-y-auto p-6 bg-white\">\n              <div className=\"max-w-4xl mx-auto space-y-6\">\n                {messages.length === 0 ? (\n                  <div className=\"text-center py-12\">\n                    <SparklesIcon className=\"h-12 w-12 mx-auto text-blue-600 mb-4\" />\n                    <p className=\"text-gray-600\">\n                      안녕하세요! 제목 생성과 편집에 대해 무엇이든 물어보세요.\n                    </p>\n                  </div>\n                ) : (\n                  messages.map((message) => (\n                    <div\n                      key={message.id}\n                      className={`flex ${\n                        message.role === \"user\"\n                          ? \"justify-end\"\n                          : \"justify-start\"\n                      }`}\n                    >\n                      <div\n                        className={`max-w-3xl flex ${\n                          message.role === \"user\"\n                            ? \"flex-row-reverse\"\n                            : \"flex-row\"\n                        }`}\n                      >\n                        <div\n                          className={`flex-shrink-0 w-8 h-8 rounded-full flex items-center justify-center ${\n                            message.role === \"user\"\n                              ? \"bg-blue-600 text-white ml-3\"\n                              : message.role === \"system\"\n                              ? \"bg-gray-400 text-white mr-3\"\n                              : \"bg-green-600 text-white mr-3\"\n                          }`}\n                        >\n                          {getMessageIcon(message.role)}\n                        </div>\n\n                        <div\n                          className={`rounded-lg px-4 py-3 ${\n                            message.role === \"user\"\n                              ? \"bg-blue-600 text-white\"\n                              : message.role === \"system\"\n                              ? \"bg-gray-100 text-gray-900\"\n                              : \"bg-gray-100 text-gray-900\"\n                          }`}\n                        >\n                          <div className=\"whitespace-pre-wrap\">\n                            {message.content}\n                          </div>\n\n                          <div className=\"flex items-center justify-between mt-2 text-xs opacity-70\">\n                            <span>{formatTimestamp(message.timestamp)}</span>\n\n                            {message.metadata &&\n                              Object.keys(message.metadata).length > 0 && (\n                                <div className=\"flex items-center space-x-2 ml-4\">\n                                  {message.metadata.memory_buffer_size && (\n                                    <span className=\"flex items-center\">\n                                      <CpuChipIcon className=\"h-3 w-3 mr-1\" />\n                                      메모리:{\" \"}\n                                      {message.metadata.memory_buffer_size}\n                                    </span>\n                                  )}\n                                  {message.metadata.relevant_messages_count && (\n                                    <span className=\"flex items-center\">\n                                      <DocumentTextIcon className=\"h-3 w-3 mr-1\" />\n                                      관련:{\" \"}\n                                      {message.metadata.relevant_messages_count}\n                                    </span>\n                                  )}\n                                </div>\n                              )}\n                          </div>\n                        </div>\n                      </div>\n                    </div>\n                  ))\n                )}\n              </div>\n              <div ref={messagesEndRef} />\n            </div>\n\n            {/* 입력 영역 */}\n            <div className=\"border-t border-gray-200 bg-white p-6\">\n              <form onSubmit={handleSendMessage} className=\"max-w-4xl mx-auto\">\n                <div className=\"flex space-x-4\">\n                  <div className=\"flex-1\">\n                    <textarea\n                      value={inputMessage}\n                      onChange={(e) => setInputMessage(e.target.value)}\n                      placeholder=\"제목 생성이나 편집에 대해 궁금한 것을 물어보세요...\"\n                      className=\"w-full px-4 py-3 border border-gray-300 rounded-lg resize-none focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                      rows={3}\n                      disabled={isLoading}\n                      onKeyDown={(e) => {\n                        if (e.key === \"Enter\" && !e.shiftKey) {\n                          e.preventDefault();\n                          handleSendMessage(e);\n                        }\n                      }}\n                    />\n                  </div>\n                  <button\n                    type=\"submit\"\n                    disabled={!inputMessage.trim() || isLoading}\n                    className=\"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center\"\n                  >\n                    {isLoading ? (\n                      <div className=\"animate-spin rounded-full h-5 w-5 border-b-2 border-white\"></div>\n                    ) : (\n                      <PaperAirplaneIcon className=\"h-5 w-5\" />\n                    )}\n                  </button>\n                </div>\n\n                <div className=\"flex items-center justify-between mt-2 text-sm text-gray-500\">\n                  <span>Enter로 전송, Shift+Enter로 줄바꿈</span>\n                  {inputMessage && <span>{inputMessage.length}자</span>}\n                </div>\n              </form>\n            </div>\n          </>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default ChatInterface;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}