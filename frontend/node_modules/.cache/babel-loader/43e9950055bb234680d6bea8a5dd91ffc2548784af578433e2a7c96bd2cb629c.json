{"ast":null,"code":"var _jsxFileName = \"/Users/yeong-gwang/Documents/work/\\u1109\\u1165\\u110B\\u116E\\u11AF\\u1100\\u1167\\u11BC\\u110C\\u1166\\u1109\\u1175\\u11AB\\u1106\\u116E\\u11AB/dev/nexus/title_generator_ver1/frontend/src/components/chat/ConversationDrawer.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useRef, useEffect, useCallback, memo } from \"react\";\nimport { useConversations } from \"../../hooks/useConversations\";\nimport { useConversationContext } from \"../../contexts/ConversationContext\";\nimport { conversationAPI } from \"../../services/api\";\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst ConversationDrawer = /*#__PURE__*/_s(/*#__PURE__*/memo(_c = _s(({\n  isOpen,\n  onClose,\n  className = \"\",\n  onCollapsedChange\n}) => {\n  _s();\n  // ConversationContext에서 전역 대화 목록 사용\n  const {\n    currentConversationId,\n    setCurrentConversation,\n    conversations: contextConversations\n  } = useConversationContext();\n\n  // useConversations는 백업용으로만 사용\n  const {\n    conversations: hookConversations,\n    loading,\n    error,\n    hasMore,\n    loadMore,\n    createConversation,\n    deleteConversation,\n    updateConversation\n  } = useConversations();\n\n  // Context 대화가 없으면 hook 대화 사용 (초기 로드)\n  const conversations = (contextConversations === null || contextConversations === void 0 ? void 0 : contextConversations.length) > 0 ? contextConversations : hookConversations;\n\n  // 대화 목록 변경 감지 디버깅\n  useEffect(() => {\n    console.log(\"🎭 [DEBUG] ConversationDrawer - conversations 변경됨:\", {\n      contextCount: (contextConversations === null || contextConversations === void 0 ? void 0 : contextConversations.length) || 0,\n      hookCount: (hookConversations === null || hookConversations === void 0 ? void 0 : hookConversations.length) || 0,\n      finalCount: conversations.length,\n      conversations: conversations.map(c => ({\n        id: c.id,\n        title: c.title\n      }))\n    });\n  }, [contextConversations, hookConversations, conversations]);\n  const [isCreating, setIsCreating] = useState(false);\n  const [isCollapsed, setIsCollapsed] = useState(false);\n  const [createError, setCreateError] = useState(null);\n  const [deletingId, setDeletingId] = useState(null);\n  const [deleteError, setDeleteError] = useState(null);\n  const [activeMenuId, setActiveMenuId] = useState(null);\n  const [editingId, setEditingId] = useState(null);\n  const [editingTitle, setEditingTitle] = useState(\"\");\n\n  // 대화 목록 스크롤을 위한 ref\n  const conversationListRef = useRef(null);\n\n  // 새 대화가 추가될 때마다 맨 아래로 스크롤\n  useEffect(() => {\n    if (conversationListRef.current && conversations.length > 0 && !isCollapsed) {\n      conversationListRef.current.scrollTop = conversationListRef.current.scrollHeight;\n    }\n  }, [conversations.length, isCollapsed]);\n\n  // 외부 클릭 시 메뉴 닫기\n  useEffect(() => {\n    const handleClickOutside = event => {\n      if (activeMenuId && !event.target.closest(\".conversation-menu\")) {\n        setActiveMenuId(null);\n      }\n    };\n    document.addEventListener(\"mousedown\", handleClickOutside);\n    return () => {\n      document.removeEventListener(\"mousedown\", handleClickOutside);\n    };\n  }, [activeMenuId]);\n\n  // 새 대화 시작 (즉시 UI 전환) - 최적화된 버전\n  const handleNewChat = useCallback(async () => {\n    if (isCreating) return;\n\n    // 🚀 즉시 UI 전환 (Optimistic Update)\n    console.log(\"⚡ [FAST] 즉시 새 대화 모드로 전환\");\n    setCurrentConversation(null);\n\n    // 모바일에서 사이드바 닫기\n    if (window.innerWidth < 768) {\n      onClose();\n    }\n\n    // 로딩 상태는 최소한으로만 표시\n    setIsCreating(true);\n\n    // 매우 짧은 시간 후 로딩 해제 (부드러운 전환)\n    setTimeout(() => {\n      setIsCreating(false);\n      console.log(\"⚡ [FAST] 새 대화 준비 완료 - 사용자 입력 대기\");\n    }, 100);\n  }, [setCurrentConversation, onClose]);\n\n  // 대화 선택 - 최적화된 버전\n  const handleSelectConversation = useCallback(conversationId => {\n    setCurrentConversation(conversationId);\n    if (window.innerWidth < 768) {\n      onClose();\n    }\n  }, [setCurrentConversation, onClose]);\n\n  // 대화 삭제\n  const handleDeleteConversation = async (conversationId, event) => {\n    event.stopPropagation(); // 대화 선택을 방지\n\n    if (!window.confirm(\"이 대화를 삭제하시겠습니까?\")) {\n      return;\n    }\n    setDeletingId(conversationId);\n    setDeleteError(null);\n    setActiveMenuId(null); // 메뉴 닫기\n\n    try {\n      await deleteConversation(conversationId);\n\n      // 현재 선택된 대화가 삭제된 경우 첫 번째 대화로 이동\n      if (currentConversationId === conversationId && conversations.length > 1) {\n        const remainingConversations = conversations.filter(conv => conv.id !== conversationId);\n        if (remainingConversations.length > 0) {\n          setCurrentConversation(remainingConversations[0].id);\n        }\n      }\n      console.log(\"대화 삭제 완료:\", conversationId);\n    } catch (error) {\n      console.error(\"대화 삭제 중 오류:\", error);\n      // 일반적으로 API 오류가 발생해도 로컬에서는 삭제되므로 에러 표시하지 않음\n      // setDeleteError('대화를 삭제할 수 없습니다. 다시 시도해주세요.');\n      // setTimeout(() => setDeleteError(null), 3000);\n    } finally {\n      setDeletingId(null);\n    }\n  };\n\n  // 대화 수정 시작\n  const handleStartEdit = (conversationId, currentTitle, event) => {\n    event.stopPropagation();\n    setEditingId(conversationId);\n    setEditingTitle(currentTitle);\n    setActiveMenuId(null); // 메뉴 닫기\n  };\n\n  // 대화 수정 완료\n  const handleSaveEdit = async conversationId => {\n    if (!editingTitle.trim()) {\n      setEditingId(null);\n      setEditingTitle(\"\");\n      return;\n    }\n    try {\n      // API 호출로 대화 제목 업데이트\n      console.log(\"대화 제목 업데이트:\", conversationId, editingTitle);\n      await conversationAPI.updateConversation(conversationId, {\n        title: editingTitle\n      });\n\n      // 로컬 상태도 업데이트\n      updateConversation(conversationId, {\n        title: editingTitle\n      });\n      setEditingId(null);\n      setEditingTitle(\"\");\n      console.log(\"대화 제목 수정 완료\");\n    } catch (error) {\n      console.error(\"대화 제목 수정 중 오류:\", error);\n      // 사용자에게 에러 표시\n      alert(\"제목 수정에 실패했습니다. 다시 시도해주세요.\");\n    }\n  };\n\n  // 대화 수정 취소\n  const handleCancelEdit = () => {\n    setEditingId(null);\n    setEditingTitle(\"\");\n  };\n\n  // 메뉴 토글\n  const handleToggleMenu = (conversationId, event) => {\n    event.stopPropagation();\n    setActiveMenuId(activeMenuId === conversationId ? null : conversationId);\n  };\n\n  // 대화를 날짜별로 그룹화 - 메모이제이션 적용\n  const groupConversationsByDate = useCallback(conversations => {\n    const groups = {};\n    const today = new Date();\n    const yesterday = new Date(today);\n    yesterday.setDate(yesterday.getDate() - 1);\n    conversations.forEach(conversation => {\n      const date = new Date(conversation.lastActivityAt || conversation.createdAt);\n      const isToday = date.toDateString() === today.toDateString();\n      const isYesterday = date.toDateString() === yesterday.toDateString();\n      let key;\n      if (isToday) {\n        key = \"Today\";\n      } else if (isYesterday) {\n        key = \"Yesterday\";\n      } else {\n        const monthYear = date.toLocaleDateString(\"ko-KR\", {\n          year: \"numeric\",\n          month: \"2-digit\"\n        });\n        key = monthYear;\n      }\n      if (!groups[key]) {\n        groups[key] = [];\n      }\n      groups[key].push(conversation);\n    });\n    return groups;\n  }, []);\n\n  // 대화 그룹 최적화 - useMemo로 불필요한 재계산 방지\n  const conversationGroups = React.useMemo(() => groupConversationsByDate(conversations), [conversations, groupConversationsByDate]);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [isOpen && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"fixed inset-0 bg-black/40 backdrop-blur-sm z-40 md:hidden transition-opacity duration-300\",\n      onClick: onClose\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 248,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: `\n        conversation-drawer\n        fixed top-0 left-0 h-full z-[9999]\n        bg-[#0d1117]\n        border-r border-[#21262d] shadow-[inset_0_0_16px_rgba(0,0,0,0.4)]\n        transform transition-all duration-300 ease-out will-change-transform\n        ${isOpen ? \"translate-x-0\" : \"-translate-x-full\"}\n        md:translate-x-0\n        ${isCollapsed ? \"w-14\" : \"w-full md:w-64\"}\n        ${className}\n      `,\n      style: {\n        overscrollBehavior: \"contain\"\n      },\n      children: [!isCollapsed && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center justify-between p-5 border-b border-[#21262d] relative transition-opacity duration-200 ease-in-out will-change-transform\",\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"text-xl font-semibold tracking-tight text-[#e6edf3]\",\n          children: \"TITLE-NOMICS\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 272,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => {\n            const newCollapsed = !isCollapsed;\n            setIsCollapsed(newCollapsed);\n            if (onCollapsedChange) {\n              onCollapsedChange(newCollapsed);\n            }\n          },\n          className: \"w-10 h-10 py-2 rounded-full bg-transparent hover:bg-[#11161f] transition-colors duration-200 flex items-center justify-center group\",\n          title: \"\\uC0AC\\uC774\\uB4DC\\uBC14 \\uC811\\uAE30\",\n          children: /*#__PURE__*/_jsxDEV(\"svg\", {\n            xmlns: \"http://www.w3.org/2000/svg\",\n            fill: \"none\",\n            viewBox: \"0 0 24 24\",\n            strokeWidth: \"1.5\",\n            stroke: \"currentColor\",\n            className: \"w-6 h-6 text-[#88929d] group-hover:text-[#e6edf3] transition-colors duration-200\",\n            children: /*#__PURE__*/_jsxDEV(\"path\", {\n              strokeLinecap: \"round\",\n              strokeLinejoin: \"round\",\n              d: \"M18.75 19.5l-7.5-7.5 7.5-7.5m-6 15L5.25 12l7.5-7.5\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 296,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 288,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 277,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 271,\n        columnNumber: 11\n      }, this), isCollapsed && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"p-2 flex justify-center border-b border-[#21262d]\",\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => {\n            const newCollapsed = !isCollapsed;\n            setIsCollapsed(newCollapsed);\n            if (onCollapsedChange) {\n              onCollapsedChange(newCollapsed);\n            }\n          },\n          className: \"w-10 h-10 py-2 rounded-full bg-transparent hover:bg-[#11161f] transition-colors duration-200 flex items-center justify-center group\",\n          title: \"\\uC0AC\\uC774\\uB4DC\\uBC14 \\uD3BC\\uCE58\\uAE30\",\n          children: /*#__PURE__*/_jsxDEV(\"svg\", {\n            xmlns: \"http://www.w3.org/2000/svg\",\n            fill: \"none\",\n            viewBox: \"0 0 24 24\",\n            strokeWidth: \"1.5\",\n            stroke: \"currentColor\",\n            className: \"w-6 h-6 text-[#88929d] group-hover:text-[#e6edf3] transition-colors duration-200 rotate-180\",\n            children: /*#__PURE__*/_jsxDEV(\"path\", {\n              strokeLinecap: \"round\",\n              strokeLinejoin: \"round\",\n              d: \"M18.75 19.5l-7.5-7.5 7.5-7.5m-6 15L5.25 12l7.5-7.5\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 328,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 320,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 309,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 308,\n        columnNumber: 11\n      }, this), !isCollapsed && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"p-4 border-b border-[#21262d] transition-opacity duration-200 ease-in-out will-change-transform\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: handleNewChat,\n          disabled: isCreating,\n          className: \"group w-full flex items-center justify-start gap-3 px-3 py-2.5 text-[#e6edf3] hover:bg-[#21262d] disabled:bg-[#374151] rounded-lg text-sm transition-all duration-200 focus:outline-none border border-[#6e7681] hover:border-[#8b949e]\",\n          title: \"\\uC0C8 \\uCC44\\uD305\",\n          children: isCreating ? /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex-shrink-0 w-5 h-5 flex items-center justify-center\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"animate-spin rounded-full h-4 w-4 border-b-2 border-[#e6edf3]\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 350,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 349,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"font-medium\",\n              children: \"\\uC0DD\\uC131 \\uC911...\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 352,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex-shrink-0 w-5 h-5 flex items-center justify-center\",\n              children: /*#__PURE__*/_jsxDEV(\"svg\", {\n                xmlns: \"http://www.w3.org/2000/svg\",\n                fill: \"none\",\n                viewBox: \"0 0 24 24\",\n                strokeWidth: \"2\",\n                stroke: \"currentColor\",\n                className: \"h-4 w-4 group-hover:scale-110 transition-transform duration-200\",\n                children: /*#__PURE__*/_jsxDEV(\"path\", {\n                  strokeLinecap: \"round\",\n                  strokeLinejoin: \"round\",\n                  d: \"M12 4.5v15m7.5-7.5h-15\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 365,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 357,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 356,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"font-medium\",\n              children: \"\\uC0C8 \\uCC44\\uD305\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 372,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 341,\n          columnNumber: 13\n        }, this), (createError || deleteError) && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mt-2 p-2 bg-red-500/10 border border-red-500/20 rounded text-center\",\n          children: /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-xs text-red-400\",\n            children: createError || deleteError\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 379,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 378,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 340,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        ref: conversationListRef,\n        className: \"flex flex-col gap-0.5 overflow-y-auto h-[calc(100vh-210px)] custom-scrollbar\",\n        onScroll: e => e.stopPropagation(),\n        children: [/*#__PURE__*/_jsxDEV(\"style\", {\n          jsx: true,\n          children: `\n            /* CSS Custom Properties for Design System */\n            .conversation-drawer {\n              --color-bg-primary: #0d1117;\n              --color-bg-secondary: #11161f;\n              --color-bg-tertiary: #161b22;\n              --color-border: #21262d;\n              --color-text-primary: #e6edf3;\n              --color-text-secondary: #88929d;\n              --color-accent: #10b981;\n              --color-accent-hover: #059669;\n              --color-danger: #f85149;\n              --shadow-depth: inset 0 0 16px rgba(0, 0, 0, 0.4);\n            }\n\n            .custom-scrollbar::-webkit-scrollbar {\n              width: 8px;\n            }\n            .custom-scrollbar::-webkit-scrollbar-track {\n              background: transparent;\n              border-radius: 4px;\n            }\n            .custom-scrollbar::-webkit-scrollbar-thumb {\n              background: var(--color-border);\n              border-radius: 4px;\n              border: 1px solid var(--color-bg-primary);\n            }\n            .custom-scrollbar::-webkit-scrollbar-thumb:hover {\n              background: #30363d;\n            }\n            .custom-scrollbar::-webkit-scrollbar-thumb:active {\n              background: #484f58;\n            }\n            .custom-scrollbar::-webkit-scrollbar-corner {\n              background: transparent;\n            }\n\n            /* 사이드바 스크롤 격리 */\n            .custom-scrollbar {\n              overscroll-behavior: contain;\n              scroll-behavior: smooth;\n            }\n          `\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 393,\n          columnNumber: 11\n        }, this), error && !isCollapsed && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"p-4 text-center bg-red-900/30 rounded-lg border border-red-700/50 mb-4\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-red-300 text-sm font-medium\",\n            children: error\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 439,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 438,\n          columnNumber: 13\n        }, this), conversations.length === 0 && !loading && !error && !isCollapsed && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"p-6 text-center\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"w-12 h-12 mx-auto mb-4 bg-gradient-to-br from-gray-800/50 to-gray-900/50 rounded-2xl flex items-center justify-center shadow-lg border border-gray-700/30\",\n            children: /*#__PURE__*/_jsxDEV(\"svg\", {\n              xmlns: \"http://www.w3.org/2000/svg\",\n              fill: \"none\",\n              viewBox: \"0 0 24 24\",\n              strokeWidth: \"1.5\",\n              stroke: \"currentColor\",\n              className: \"h-6 w-6 text-gray-400\",\n              children: /*#__PURE__*/_jsxDEV(\"path\", {\n                strokeLinecap: \"round\",\n                strokeLinejoin: \"round\",\n                d: \"M20.25 8.511c.884.284 1.5 1.128 1.5 2.097v4.286c0 1.136-.847 2.1-1.98 2.193-.34.027-.68.052-1.02.072v3.091l-3-3c-1.354 0-2.694-.055-4.02-.163a2.115 2.115 0 0 1-.825-.242m9.345-8.334a2.126 2.126 0 0 0-.476-.095 48.64 48.64 0 0 0-8.048 0c-1.131.094-1.976 1.057-1.976 2.192v4.286c0 .837.46 1.58 1.155 1.951m9.345-8.334V6.637c0-1.621-1.152-3.026-2.76-3.235A48.455 48.455 0 0 0 11.25 3c-2.115 0-4.198.137-6.24.402-1.608.209-2.76 1.614-2.76 3.235v6.226c0 1.621 1.152 3.026 2.76 3.235.577.075 1.157.14 1.74.194V21l4.155-4.155\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 454,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 446,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 445,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"text-sm font-medium text-white mb-2 drop-shadow\",\n            children: \"\\uC544\\uC9C1 \\uB300\\uD654\\uAC00 \\uC5C6\\uC2B5\\uB2C8\\uB2E4\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 461,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-xs text-gray-400 leading-snug opacity-80\",\n            children: \"\\uC0C8 \\uB300\\uD654\\uB97C \\uC2DC\\uC791\\uD574\\uC11C AI\\uC640 \\uB300\\uD654\\uD574\\uBCF4\\uC138\\uC694!\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 464,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 444,\n          columnNumber: 13\n        }, this), loading && conversations.length === 0 && !isCollapsed && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex flex-col gap-1\",\n          children: [...Array(5)].map((_, i) => /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"w-full h-10 px-3 bg-gray-900/40 animate-pulse flex items-center\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"h-3 bg-gray-700/40 rounded w-3/4\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 478,\n              columnNumber: 19\n            }, this)\n          }, i, false, {\n            fileName: _jsxFileName,\n            lineNumber: 474,\n            columnNumber: 17\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 472,\n          columnNumber: 13\n        }, this), !isCollapsed && conversations.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex flex-col gap-1 transition-opacity duration-200 ease-in-out will-change-transform\",\n          children: Object.entries(conversationGroups).map(([groupTitle, groupConversations]) => /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-xs text-white/40 uppercase tracking-wide py-2 px-3 font-medium\",\n              children: groupTitle\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 491,\n              columnNumber: 21\n            }, this), groupConversations.map(conversation => /*#__PURE__*/_jsxDEV(\"div\", {\n              className: `\n                        flex items-center justify-between h-10 px-3 py-2 text-sm transition-colors duration-200 relative\n                        ${currentConversationId === conversation.id ? \"bg-[#161b22] text-[#e6edf3] relative before:absolute before:left-0 before:top-0 before:bottom-0 before:w-[2px] before:bg-[#10b981]\" : \"text-[#88929d] hover:bg-[#11161f] hover:text-[#e6edf3]\"}\n                      `,\n              children: editingId === conversation.id ?\n              /*#__PURE__*/\n              // 수정 모드\n              _jsxDEV(\"div\", {\n                className: \"flex-1 flex items-center gap-2\",\n                children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"text\",\n                  value: editingTitle,\n                  onChange: e => setEditingTitle(e.target.value),\n                  onKeyPress: e => {\n                    if (e.key === \"Enter\") {\n                      handleSaveEdit(conversation.id);\n                    } else if (e.key === \"Escape\") {\n                      handleCancelEdit();\n                    }\n                  },\n                  className: \"flex-1 bg-[#0d1117] border border-[#21262d] rounded px-2 py-1 text-sm text-[#e6edf3] focus:outline-none focus:border-[#10b981]\",\n                  autoFocus: true\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 511,\n                  columnNumber: 29\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: () => handleSaveEdit(conversation.id),\n                  className: \"p-1 text-[#10b981] hover:bg-[#161b22] rounded\",\n                  title: \"\\uC800\\uC7A5\",\n                  children: /*#__PURE__*/_jsxDEV(\"svg\", {\n                    xmlns: \"http://www.w3.org/2000/svg\",\n                    fill: \"none\",\n                    viewBox: \"0 0 24 24\",\n                    strokeWidth: \"2\",\n                    stroke: \"currentColor\",\n                    className: \"h-4 w-4\",\n                    children: /*#__PURE__*/_jsxDEV(\"path\", {\n                      strokeLinecap: \"round\",\n                      strokeLinejoin: \"round\",\n                      d: \"m4.5 12.75 6 6 9-13.5\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 538,\n                      columnNumber: 33\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 530,\n                    columnNumber: 31\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 525,\n                  columnNumber: 29\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: handleCancelEdit,\n                  className: \"p-1 text-[#88929d] hover:text-[#f85149] hover:bg-[#161b22] rounded\",\n                  title: \"\\uCDE8\\uC18C\",\n                  children: /*#__PURE__*/_jsxDEV(\"svg\", {\n                    xmlns: \"http://www.w3.org/2000/svg\",\n                    fill: \"none\",\n                    viewBox: \"0 0 24 24\",\n                    strokeWidth: \"2\",\n                    stroke: \"currentColor\",\n                    className: \"h-4 w-4\",\n                    children: /*#__PURE__*/_jsxDEV(\"path\", {\n                      strokeLinecap: \"round\",\n                      strokeLinejoin: \"round\",\n                      d: \"M6 18L18 6M6 6l12 12\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 558,\n                      columnNumber: 33\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 550,\n                    columnNumber: 31\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 545,\n                  columnNumber: 29\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 510,\n                columnNumber: 27\n              }, this) :\n              /*#__PURE__*/\n              // 일반 모드\n              _jsxDEV(_Fragment, {\n                children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: () => handleSelectConversation(conversation.id),\n                  className: \"flex-1 text-left truncate focus:outline-none py-2\",\n                  title: conversation.title,\n                  children: /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"truncate text-sm font-medium\",\n                    children: conversation.title || \"새 대화\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 576,\n                    columnNumber: 31\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 569,\n                  columnNumber: 29\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"conversation-menu relative\",\n                  children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                    onClick: e => handleToggleMenu(conversation.id, e),\n                    className: \"ml-2 py-2 px-2 text-[#88929d] hover:text-[#e6edf3] transition-colors duration-200 flex-shrink-0 rounded-md hover:bg-[#161b22]\",\n                    title: \"\\uBA54\\uB274\",\n                    children: /*#__PURE__*/_jsxDEV(\"svg\", {\n                      xmlns: \"http://www.w3.org/2000/svg\",\n                      fill: \"none\",\n                      viewBox: \"0 0 24 24\",\n                      strokeWidth: \"1.5\",\n                      stroke: \"currentColor\",\n                      className: \"h-5 w-5\",\n                      children: /*#__PURE__*/_jsxDEV(\"path\", {\n                        strokeLinecap: \"round\",\n                        strokeLinejoin: \"round\",\n                        d: \"M6.75 12a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0ZM12.75 12a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0ZM18.75 12a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0Z\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 598,\n                        columnNumber: 35\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 590,\n                      columnNumber: 33\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 583,\n                    columnNumber: 31\n                  }, this), activeMenuId === conversation.id && /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"absolute right-0 top-full mt-1 bg-[#21262d] border border-[#30363d] rounded-md shadow-lg z-50 min-w-[120px]\",\n                    children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                      onClick: e => handleStartEdit(conversation.id, conversation.title, e),\n                      className: \"w-full px-3 py-2 text-sm text-[#e6edf3] hover:bg-[#30363d] flex items-center gap-2 transition-colors duration-200\",\n                      children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n                        xmlns: \"http://www.w3.org/2000/svg\",\n                        fill: \"none\",\n                        viewBox: \"0 0 24 24\",\n                        strokeWidth: \"1.5\",\n                        stroke: \"currentColor\",\n                        className: \"h-4 w-4\",\n                        children: /*#__PURE__*/_jsxDEV(\"path\", {\n                          strokeLinecap: \"round\",\n                          strokeLinejoin: \"round\",\n                          d: \"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L10.582 16.07a4.5 4.5 0 0 1-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 0 1 1.13-1.897l8.932-8.931Zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0 1 15.75 21H5.25A2.25 2.25 0 0 1 3 18.75V8.25A2.25 2.25 0 0 1 5.25 6H10\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 627,\n                          columnNumber: 39\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 619,\n                        columnNumber: 37\n                      }, this), \"\\uC218\\uC815\"]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 609,\n                      columnNumber: 35\n                    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                      onClick: e => handleDeleteConversation(conversation.id, e),\n                      disabled: deletingId === conversation.id,\n                      className: \"w-full px-3 py-2 text-sm text-[#f85149] hover:bg-[#30363d] flex items-center gap-2 transition-colors duration-200 disabled:opacity-50\",\n                      children: [deletingId === conversation.id ? /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"animate-spin rounded-full h-4 w-4 border-b border-[#f85149]\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 646,\n                        columnNumber: 39\n                      }, this) : /*#__PURE__*/_jsxDEV(\"svg\", {\n                        xmlns: \"http://www.w3.org/2000/svg\",\n                        fill: \"none\",\n                        viewBox: \"0 0 24 24\",\n                        strokeWidth: \"1.5\",\n                        stroke: \"currentColor\",\n                        className: \"h-4 w-4\",\n                        children: /*#__PURE__*/_jsxDEV(\"path\", {\n                          strokeLinecap: \"round\",\n                          strokeLinejoin: \"round\",\n                          d: \"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 656,\n                          columnNumber: 41\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 648,\n                        columnNumber: 39\n                      }, this), \"\\uC0AD\\uC81C\"]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 635,\n                      columnNumber: 35\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 608,\n                    columnNumber: 33\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 582,\n                  columnNumber: 29\n                }, this)]\n              }, void 0, true)\n            }, conversation.id, false, {\n              fileName: _jsxFileName,\n              lineNumber: 497,\n              columnNumber: 23\n            }, this))]\n          }, groupTitle, true, {\n            fileName: _jsxFileName,\n            lineNumber: 489,\n            columnNumber: 19\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 486,\n          columnNumber: 13\n        }, this), isCollapsed && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex flex-col items-center p-2 transition-opacity duration-200 ease-in-out will-change-transform\",\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: handleNewChat,\n            disabled: isCreating,\n            className: \"w-10 h-10 bg-[#21262d] hover:bg-[#30363d] disabled:bg-[#374151] text-white rounded-full flex items-center justify-center transition-colors duration-200 focus:outline-none border border-[#30363d] hover:border-[#444c56]\",\n            title: \"\\uC0C8 \\uB300\\uD654\",\n            children: isCreating ? /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"animate-spin rounded-full h-4 w-4 border-b-2 border-white\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 688,\n              columnNumber: 19\n            }, this) : /*#__PURE__*/_jsxDEV(\"svg\", {\n              xmlns: \"http://www.w3.org/2000/svg\",\n              fill: \"none\",\n              viewBox: \"0 0 24 24\",\n              strokeWidth: \"2\",\n              stroke: \"currentColor\",\n              className: \"h-6 w-6\",\n              children: /*#__PURE__*/_jsxDEV(\"path\", {\n                strokeLinecap: \"round\",\n                strokeLinejoin: \"round\",\n                d: \"M12 4.5v15m7.5-7.5h-15\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 698,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 690,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 681,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 680,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 388,\n        columnNumber: 9\n      }, this), loading && conversations.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"p-4 text-center\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-300 mx-auto\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 713,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 712,\n        columnNumber: 11\n      }, this), hasMore && !loading && conversations.length > 0 && !isCollapsed && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"p-4 text-center\",\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: loadMore,\n          className: \"text-xs text-white/60 hover:text-white/80 transition-colors duration-200 px-3 py-1.5 hover:bg-gray-800/40 rounded\",\n          children: \"\\uB354 \\uBCF4\\uAE30\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 720,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 719,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 255,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n}, \"wrFlr2Y8wkp5vr8LRN0RQYmYiUY=\", false, function () {\n  return [useConversationContext, useConversations];\n})), \"wrFlr2Y8wkp5vr8LRN0RQYmYiUY=\", false, function () {\n  return [useConversationContext, useConversations];\n});\n_c2 = ConversationDrawer;\nexport default ConversationDrawer;\nvar _c, _c2;\n$RefreshReg$(_c, \"ConversationDrawer$memo\");\n$RefreshReg$(_c2, \"ConversationDrawer\");","map":{"version":3,"names":["React","useState","useRef","useEffect","useCallback","memo","useConversations","useConversationContext","conversationAPI","jsxDEV","_jsxDEV","Fragment","_Fragment","ConversationDrawer","_s","_c","isOpen","onClose","className","onCollapsedChange","currentConversationId","setCurrentConversation","conversations","contextConversations","hookConversations","loading","error","hasMore","loadMore","createConversation","deleteConversation","updateConversation","length","console","log","contextCount","hookCount","finalCount","map","c","id","title","isCreating","setIsCreating","isCollapsed","setIsCollapsed","createError","setCreateError","deletingId","setDeletingId","deleteError","setDeleteError","activeMenuId","setActiveMenuId","editingId","setEditingId","editingTitle","setEditingTitle","conversationListRef","current","scrollTop","scrollHeight","handleClickOutside","event","target","closest","document","addEventListener","removeEventListener","handleNewChat","window","innerWidth","setTimeout","handleSelectConversation","conversationId","handleDeleteConversation","stopPropagation","confirm","remainingConversations","filter","conv","handleStartEdit","currentTitle","handleSaveEdit","trim","alert","handleCancelEdit","handleToggleMenu","groupConversationsByDate","groups","today","Date","yesterday","setDate","getDate","forEach","conversation","date","lastActivityAt","createdAt","isToday","toDateString","isYesterday","key","monthYear","toLocaleDateString","year","month","push","conversationGroups","useMemo","children","onClick","fileName","_jsxFileName","lineNumber","columnNumber","style","overscrollBehavior","newCollapsed","xmlns","fill","viewBox","strokeWidth","stroke","strokeLinecap","strokeLinejoin","d","disabled","ref","onScroll","e","jsx","Array","_","i","Object","entries","groupTitle","groupConversations","type","value","onChange","onKeyPress","autoFocus","_c2","$RefreshReg$"],"sources":["/Users/yeong-gwang/Documents/work/서울경제신문/dev/nexus/title_generator_ver1/frontend/src/components/chat/ConversationDrawer.js"],"sourcesContent":["import React, { useState, useRef, useEffect, useCallback, memo } from \"react\";\nimport { useConversations } from \"../../hooks/useConversations\";\nimport { useConversationContext } from \"../../contexts/ConversationContext\";\nimport { conversationAPI } from \"../../services/api\";\n\nconst ConversationDrawer = memo(({\n  isOpen,\n  onClose,\n  className = \"\",\n  onCollapsedChange,\n}) => {\n  // ConversationContext에서 전역 대화 목록 사용\n  const { \n    currentConversationId, \n    setCurrentConversation, \n    conversations: contextConversations \n  } = useConversationContext();\n  \n  // useConversations는 백업용으로만 사용\n  const {\n    conversations: hookConversations,\n    loading,\n    error,\n    hasMore,\n    loadMore,\n    createConversation,\n    deleteConversation,\n    updateConversation,\n  } = useConversations();\n\n  // Context 대화가 없으면 hook 대화 사용 (초기 로드)\n  const conversations = contextConversations?.length > 0 ? contextConversations : hookConversations;\n\n  // 대화 목록 변경 감지 디버깅\n  useEffect(() => {\n    console.log(\"🎭 [DEBUG] ConversationDrawer - conversations 변경됨:\", {\n      contextCount: contextConversations?.length || 0,\n      hookCount: hookConversations?.length || 0,\n      finalCount: conversations.length,\n      conversations: conversations.map(c => ({id: c.id, title: c.title}))\n    });\n  }, [contextConversations, hookConversations, conversations]);\n\n  const [isCreating, setIsCreating] = useState(false);\n  const [isCollapsed, setIsCollapsed] = useState(false);\n  const [createError, setCreateError] = useState(null);\n  const [deletingId, setDeletingId] = useState(null);\n  const [deleteError, setDeleteError] = useState(null);\n  const [activeMenuId, setActiveMenuId] = useState(null);\n  const [editingId, setEditingId] = useState(null);\n  const [editingTitle, setEditingTitle] = useState(\"\");\n\n  // 대화 목록 스크롤을 위한 ref\n  const conversationListRef = useRef(null);\n\n  // 새 대화가 추가될 때마다 맨 아래로 스크롤\n  useEffect(() => {\n    if (\n      conversationListRef.current &&\n      conversations.length > 0 &&\n      !isCollapsed\n    ) {\n      conversationListRef.current.scrollTop =\n        conversationListRef.current.scrollHeight;\n    }\n  }, [conversations.length, isCollapsed]);\n\n  // 외부 클릭 시 메뉴 닫기\n  useEffect(() => {\n    const handleClickOutside = (event) => {\n      if (activeMenuId && !event.target.closest(\".conversation-menu\")) {\n        setActiveMenuId(null);\n      }\n    };\n\n    document.addEventListener(\"mousedown\", handleClickOutside);\n    return () => {\n      document.removeEventListener(\"mousedown\", handleClickOutside);\n    };\n  }, [activeMenuId]);\n\n  // 새 대화 시작 (즉시 UI 전환) - 최적화된 버전\n  const handleNewChat = useCallback(async () => {\n    if (isCreating) return;\n\n    // 🚀 즉시 UI 전환 (Optimistic Update)\n    console.log(\"⚡ [FAST] 즉시 새 대화 모드로 전환\");\n    setCurrentConversation(null);\n    \n    // 모바일에서 사이드바 닫기\n    if (window.innerWidth < 768) {\n      onClose();\n    }\n\n    // 로딩 상태는 최소한으로만 표시\n    setIsCreating(true);\n    \n    // 매우 짧은 시간 후 로딩 해제 (부드러운 전환)\n    setTimeout(() => {\n      setIsCreating(false);\n      console.log(\"⚡ [FAST] 새 대화 준비 완료 - 사용자 입력 대기\");\n    }, 100);\n  }, [setCurrentConversation, onClose]);\n\n  // 대화 선택 - 최적화된 버전\n  const handleSelectConversation = useCallback((conversationId) => {\n    setCurrentConversation(conversationId);\n\n    if (window.innerWidth < 768) {\n      onClose();\n    }\n  }, [setCurrentConversation, onClose]);\n\n  // 대화 삭제\n  const handleDeleteConversation = async (conversationId, event) => {\n    event.stopPropagation(); // 대화 선택을 방지\n\n    if (!window.confirm(\"이 대화를 삭제하시겠습니까?\")) {\n      return;\n    }\n\n    setDeletingId(conversationId);\n    setDeleteError(null);\n    setActiveMenuId(null); // 메뉴 닫기\n\n    try {\n      await deleteConversation(conversationId);\n\n      // 현재 선택된 대화가 삭제된 경우 첫 번째 대화로 이동\n      if (\n        currentConversationId === conversationId &&\n        conversations.length > 1\n      ) {\n        const remainingConversations = conversations.filter(\n          (conv) => conv.id !== conversationId\n        );\n        if (remainingConversations.length > 0) {\n          setCurrentConversation(remainingConversations[0].id);\n        }\n      }\n\n      console.log(\"대화 삭제 완료:\", conversationId);\n    } catch (error) {\n      console.error(\"대화 삭제 중 오류:\", error);\n      // 일반적으로 API 오류가 발생해도 로컬에서는 삭제되므로 에러 표시하지 않음\n      // setDeleteError('대화를 삭제할 수 없습니다. 다시 시도해주세요.');\n      // setTimeout(() => setDeleteError(null), 3000);\n    } finally {\n      setDeletingId(null);\n    }\n  };\n\n  // 대화 수정 시작\n  const handleStartEdit = (conversationId, currentTitle, event) => {\n    event.stopPropagation();\n    setEditingId(conversationId);\n    setEditingTitle(currentTitle);\n    setActiveMenuId(null); // 메뉴 닫기\n  };\n\n  // 대화 수정 완료\n  const handleSaveEdit = async (conversationId) => {\n    if (!editingTitle.trim()) {\n      setEditingId(null);\n      setEditingTitle(\"\");\n      return;\n    }\n\n    try {\n      // API 호출로 대화 제목 업데이트\n      console.log(\"대화 제목 업데이트:\", conversationId, editingTitle);\n      await conversationAPI.updateConversation(conversationId, {\n        title: editingTitle,\n      });\n\n      // 로컬 상태도 업데이트\n      updateConversation(conversationId, { title: editingTitle });\n\n      setEditingId(null);\n      setEditingTitle(\"\");\n\n      console.log(\"대화 제목 수정 완료\");\n    } catch (error) {\n      console.error(\"대화 제목 수정 중 오류:\", error);\n      // 사용자에게 에러 표시\n      alert(\"제목 수정에 실패했습니다. 다시 시도해주세요.\");\n    }\n  };\n\n  // 대화 수정 취소\n  const handleCancelEdit = () => {\n    setEditingId(null);\n    setEditingTitle(\"\");\n  };\n\n  // 메뉴 토글\n  const handleToggleMenu = (conversationId, event) => {\n    event.stopPropagation();\n    setActiveMenuId(activeMenuId === conversationId ? null : conversationId);\n  };\n\n  // 대화를 날짜별로 그룹화 - 메모이제이션 적용\n  const groupConversationsByDate = useCallback((conversations) => {\n    const groups = {};\n    const today = new Date();\n    const yesterday = new Date(today);\n    yesterday.setDate(yesterday.getDate() - 1);\n\n    conversations.forEach((conversation) => {\n      const date = new Date(\n        conversation.lastActivityAt || conversation.createdAt\n      );\n      const isToday = date.toDateString() === today.toDateString();\n      const isYesterday = date.toDateString() === yesterday.toDateString();\n\n      let key;\n      if (isToday) {\n        key = \"Today\";\n      } else if (isYesterday) {\n        key = \"Yesterday\";\n      } else {\n        const monthYear = date.toLocaleDateString(\"ko-KR\", {\n          year: \"numeric\",\n          month: \"2-digit\",\n        });\n        key = monthYear;\n      }\n\n      if (!groups[key]) {\n        groups[key] = [];\n      }\n      groups[key].push(conversation);\n    });\n\n    return groups;\n  }, []);\n\n  // 대화 그룹 최적화 - useMemo로 불필요한 재계산 방지\n  const conversationGroups = React.useMemo(() => \n    groupConversationsByDate(conversations), \n    [conversations, groupConversationsByDate]\n  );\n\n  return (\n    <>\n      {/* 모바일 오버레이 */}\n      {isOpen && (\n        <div\n          className=\"fixed inset-0 bg-black/40 backdrop-blur-sm z-40 md:hidden transition-opacity duration-300\"\n          onClick={onClose}\n        />\n      )}\n\n      {/* 드로어 컨테이너 */}\n      <div\n        className={`\n        conversation-drawer\n        fixed top-0 left-0 h-full z-[9999]\n        bg-[#0d1117]\n        border-r border-[#21262d] shadow-[inset_0_0_16px_rgba(0,0,0,0.4)]\n        transform transition-all duration-300 ease-out will-change-transform\n        ${isOpen ? \"translate-x-0\" : \"-translate-x-full\"}\n        md:translate-x-0\n        ${isCollapsed ? \"w-14\" : \"w-full md:w-64\"}\n        ${className}\n      `}\n        style={{ overscrollBehavior: \"contain\" }}\n      >\n        {/* 헤더 - 접힌 상태에서는 숨김 */}\n        {!isCollapsed && (\n          <div className=\"flex items-center justify-between p-5 border-b border-[#21262d] relative transition-opacity duration-200 ease-in-out will-change-transform\">\n            <h1 className=\"text-xl font-semibold tracking-tight text-[#e6edf3]\">\n              TITLE-NOMICS\n            </h1>\n\n            {/* 미니멀 토글 버튼 */}\n            <button\n              onClick={() => {\n                const newCollapsed = !isCollapsed;\n                setIsCollapsed(newCollapsed);\n                if (onCollapsedChange) {\n                  onCollapsedChange(newCollapsed);\n                }\n              }}\n              className=\"w-10 h-10 py-2 rounded-full bg-transparent hover:bg-[#11161f] transition-colors duration-200 flex items-center justify-center group\"\n              title=\"사이드바 접기\"\n            >\n              <svg\n                xmlns=\"http://www.w3.org/2000/svg\"\n                fill=\"none\"\n                viewBox=\"0 0 24 24\"\n                strokeWidth=\"1.5\"\n                stroke=\"currentColor\"\n                className=\"w-6 h-6 text-[#88929d] group-hover:text-[#e6edf3] transition-colors duration-200\"\n              >\n                <path\n                  strokeLinecap=\"round\"\n                  strokeLinejoin=\"round\"\n                  d=\"M18.75 19.5l-7.5-7.5 7.5-7.5m-6 15L5.25 12l7.5-7.5\"\n                />\n              </svg>\n            </button>\n          </div>\n        )}\n\n        {/* 접힌 상태 전용 토글 버튼 */}\n        {isCollapsed && (\n          <div className=\"p-2 flex justify-center border-b border-[#21262d]\">\n            <button\n              onClick={() => {\n                const newCollapsed = !isCollapsed;\n                setIsCollapsed(newCollapsed);\n                if (onCollapsedChange) {\n                  onCollapsedChange(newCollapsed);\n                }\n              }}\n              className=\"w-10 h-10 py-2 rounded-full bg-transparent hover:bg-[#11161f] transition-colors duration-200 flex items-center justify-center group\"\n              title=\"사이드바 펼치기\"\n            >\n              <svg\n                xmlns=\"http://www.w3.org/2000/svg\"\n                fill=\"none\"\n                viewBox=\"0 0 24 24\"\n                strokeWidth=\"1.5\"\n                stroke=\"currentColor\"\n                className=\"w-6 h-6 text-[#88929d] group-hover:text-[#e6edf3] transition-colors duration-200 rotate-180\"\n              >\n                <path\n                  strokeLinecap=\"round\"\n                  strokeLinejoin=\"round\"\n                  d=\"M18.75 19.5l-7.5-7.5 7.5-7.5m-6 15L5.25 12l7.5-7.5\"\n                />\n              </svg>\n            </button>\n          </div>\n        )}\n\n        {/* 새 대화 버튼 */}\n        {!isCollapsed && (\n          <div className=\"p-4 border-b border-[#21262d] transition-opacity duration-200 ease-in-out will-change-transform\">\n            <button\n              onClick={handleNewChat}\n              disabled={isCreating}\n              className=\"group w-full flex items-center justify-start gap-3 px-3 py-2.5 text-[#e6edf3] hover:bg-[#21262d] disabled:bg-[#374151] rounded-lg text-sm transition-all duration-200 focus:outline-none border border-[#6e7681] hover:border-[#8b949e]\"\n              title=\"새 채팅\"\n            >\n              {isCreating ? (\n                <>\n                  <div className=\"flex-shrink-0 w-5 h-5 flex items-center justify-center\">\n                    <div className=\"animate-spin rounded-full h-4 w-4 border-b-2 border-[#e6edf3]\"></div>\n                  </div>\n                  <span className=\"font-medium\">생성 중...</span>\n                </>\n              ) : (\n                <>\n                  <div className=\"flex-shrink-0 w-5 h-5 flex items-center justify-center\">\n                    <svg\n                      xmlns=\"http://www.w3.org/2000/svg\"\n                      fill=\"none\"\n                      viewBox=\"0 0 24 24\"\n                      strokeWidth=\"2\"\n                      stroke=\"currentColor\"\n                      className=\"h-4 w-4 group-hover:scale-110 transition-transform duration-200\"\n                    >\n                      <path\n                        strokeLinecap=\"round\"\n                        strokeLinejoin=\"round\"\n                        d=\"M12 4.5v15m7.5-7.5h-15\"\n                      />\n                    </svg>\n                  </div>\n                  <span className=\"font-medium\">새 채팅</span>\n                </>\n              )}\n            </button>\n\n            {(createError || deleteError) && (\n              <div className=\"mt-2 p-2 bg-red-500/10 border border-red-500/20 rounded text-center\">\n                <p className=\"text-xs text-red-400\">\n                  {createError || deleteError}\n                </p>\n              </div>\n            )}\n          </div>\n        )}\n\n        {/* 대화 목록 */}\n        <div\n          ref={conversationListRef}\n          className=\"flex flex-col gap-0.5 overflow-y-auto h-[calc(100vh-210px)] custom-scrollbar\"\n          onScroll={(e) => e.stopPropagation()}\n        >\n          <style jsx>{`\n            /* CSS Custom Properties for Design System */\n            .conversation-drawer {\n              --color-bg-primary: #0d1117;\n              --color-bg-secondary: #11161f;\n              --color-bg-tertiary: #161b22;\n              --color-border: #21262d;\n              --color-text-primary: #e6edf3;\n              --color-text-secondary: #88929d;\n              --color-accent: #10b981;\n              --color-accent-hover: #059669;\n              --color-danger: #f85149;\n              --shadow-depth: inset 0 0 16px rgba(0, 0, 0, 0.4);\n            }\n\n            .custom-scrollbar::-webkit-scrollbar {\n              width: 8px;\n            }\n            .custom-scrollbar::-webkit-scrollbar-track {\n              background: transparent;\n              border-radius: 4px;\n            }\n            .custom-scrollbar::-webkit-scrollbar-thumb {\n              background: var(--color-border);\n              border-radius: 4px;\n              border: 1px solid var(--color-bg-primary);\n            }\n            .custom-scrollbar::-webkit-scrollbar-thumb:hover {\n              background: #30363d;\n            }\n            .custom-scrollbar::-webkit-scrollbar-thumb:active {\n              background: #484f58;\n            }\n            .custom-scrollbar::-webkit-scrollbar-corner {\n              background: transparent;\n            }\n\n            /* 사이드바 스크롤 격리 */\n            .custom-scrollbar {\n              overscroll-behavior: contain;\n              scroll-behavior: smooth;\n            }\n          `}</style>\n\n          {error && !isCollapsed && (\n            <div className=\"p-4 text-center bg-red-900/30 rounded-lg border border-red-700/50 mb-4\">\n              <div className=\"text-red-300 text-sm font-medium\">{error}</div>\n            </div>\n          )}\n\n          {conversations.length === 0 && !loading && !error && !isCollapsed && (\n            <div className=\"p-6 text-center\">\n              <div className=\"w-12 h-12 mx-auto mb-4 bg-gradient-to-br from-gray-800/50 to-gray-900/50 rounded-2xl flex items-center justify-center shadow-lg border border-gray-700/30\">\n                <svg\n                  xmlns=\"http://www.w3.org/2000/svg\"\n                  fill=\"none\"\n                  viewBox=\"0 0 24 24\"\n                  strokeWidth=\"1.5\"\n                  stroke=\"currentColor\"\n                  className=\"h-6 w-6 text-gray-400\"\n                >\n                  <path\n                    strokeLinecap=\"round\"\n                    strokeLinejoin=\"round\"\n                    d=\"M20.25 8.511c.884.284 1.5 1.128 1.5 2.097v4.286c0 1.136-.847 2.1-1.98 2.193-.34.027-.68.052-1.02.072v3.091l-3-3c-1.354 0-2.694-.055-4.02-.163a2.115 2.115 0 0 1-.825-.242m9.345-8.334a2.126 2.126 0 0 0-.476-.095 48.64 48.64 0 0 0-8.048 0c-1.131.094-1.976 1.057-1.976 2.192v4.286c0 .837.46 1.58 1.155 1.951m9.345-8.334V6.637c0-1.621-1.152-3.026-2.76-3.235A48.455 48.455 0 0 0 11.25 3c-2.115 0-4.198.137-6.24.402-1.608.209-2.76 1.614-2.76 3.235v6.226c0 1.621 1.152 3.026 2.76 3.235.577.075 1.157.14 1.74.194V21l4.155-4.155\"\n                  />\n                </svg>\n              </div>\n              <h3 className=\"text-sm font-medium text-white mb-2 drop-shadow\">\n                아직 대화가 없습니다\n              </h3>\n              <p className=\"text-xs text-gray-400 leading-snug opacity-80\">\n                새 대화를 시작해서 AI와 대화해보세요!\n              </p>\n            </div>\n          )}\n\n          {/* 로딩 상태 */}\n          {loading && conversations.length === 0 && !isCollapsed && (\n            <div className=\"flex flex-col gap-1\">\n              {[...Array(5)].map((_, i) => (\n                <div\n                  key={i}\n                  className=\"w-full h-10 px-3 bg-gray-900/40 animate-pulse flex items-center\"\n                >\n                  <div className=\"h-3 bg-gray-700/40 rounded w-3/4\"></div>\n                </div>\n              ))}\n            </div>\n          )}\n\n          {/* 딥시크 스타일 대화 목록 */}\n          {!isCollapsed && conversations.length > 0 && (\n            <div className=\"flex flex-col gap-1 transition-opacity duration-200 ease-in-out will-change-transform\">\n              {Object.entries(conversationGroups).map(\n                ([groupTitle, groupConversations]) => (\n                  <div key={groupTitle}>\n                    {/* 날짜 그룹 헤더 */}\n                    <div className=\"text-xs text-white/40 uppercase tracking-wide py-2 px-3 font-medium\">\n                      {groupTitle}\n                    </div>\n\n                    {/* 그룹 내 대화들 */}\n                    {groupConversations.map((conversation) => (\n                      <div\n                        key={conversation.id}\n                        className={`\n                        flex items-center justify-between h-10 px-3 py-2 text-sm transition-colors duration-200 relative\n                        ${\n                          currentConversationId === conversation.id\n                            ? \"bg-[#161b22] text-[#e6edf3] relative before:absolute before:left-0 before:top-0 before:bottom-0 before:w-[2px] before:bg-[#10b981]\"\n                            : \"text-[#88929d] hover:bg-[#11161f] hover:text-[#e6edf3]\"\n                        }\n                      `}\n                      >\n                        {editingId === conversation.id ? (\n                          // 수정 모드\n                          <div className=\"flex-1 flex items-center gap-2\">\n                            <input\n                              type=\"text\"\n                              value={editingTitle}\n                              onChange={(e) => setEditingTitle(e.target.value)}\n                              onKeyPress={(e) => {\n                                if (e.key === \"Enter\") {\n                                  handleSaveEdit(conversation.id);\n                                } else if (e.key === \"Escape\") {\n                                  handleCancelEdit();\n                                }\n                              }}\n                              className=\"flex-1 bg-[#0d1117] border border-[#21262d] rounded px-2 py-1 text-sm text-[#e6edf3] focus:outline-none focus:border-[#10b981]\"\n                              autoFocus\n                            />\n                            <button\n                              onClick={() => handleSaveEdit(conversation.id)}\n                              className=\"p-1 text-[#10b981] hover:bg-[#161b22] rounded\"\n                              title=\"저장\"\n                            >\n                              <svg\n                                xmlns=\"http://www.w3.org/2000/svg\"\n                                fill=\"none\"\n                                viewBox=\"0 0 24 24\"\n                                strokeWidth=\"2\"\n                                stroke=\"currentColor\"\n                                className=\"h-4 w-4\"\n                              >\n                                <path\n                                  strokeLinecap=\"round\"\n                                  strokeLinejoin=\"round\"\n                                  d=\"m4.5 12.75 6 6 9-13.5\"\n                                />\n                              </svg>\n                            </button>\n                            <button\n                              onClick={handleCancelEdit}\n                              className=\"p-1 text-[#88929d] hover:text-[#f85149] hover:bg-[#161b22] rounded\"\n                              title=\"취소\"\n                            >\n                              <svg\n                                xmlns=\"http://www.w3.org/2000/svg\"\n                                fill=\"none\"\n                                viewBox=\"0 0 24 24\"\n                                strokeWidth=\"2\"\n                                stroke=\"currentColor\"\n                                className=\"h-4 w-4\"\n                              >\n                                <path\n                                  strokeLinecap=\"round\"\n                                  strokeLinejoin=\"round\"\n                                  d=\"M6 18L18 6M6 6l12 12\"\n                                />\n                              </svg>\n                            </button>\n                          </div>\n                        ) : (\n                          // 일반 모드\n                          <>\n                            <button\n                              onClick={() =>\n                                handleSelectConversation(conversation.id)\n                              }\n                              className=\"flex-1 text-left truncate focus:outline-none py-2\"\n                              title={conversation.title}\n                            >\n                              <span className=\"truncate text-sm font-medium\">\n                                {conversation.title || \"새 대화\"}\n                              </span>\n                            </button>\n\n                            {/* 메뉴 버튼 */}\n                            <div className=\"conversation-menu relative\">\n                              <button\n                                onClick={(e) =>\n                                  handleToggleMenu(conversation.id, e)\n                                }\n                                className=\"ml-2 py-2 px-2 text-[#88929d] hover:text-[#e6edf3] transition-colors duration-200 flex-shrink-0 rounded-md hover:bg-[#161b22]\"\n                                title=\"메뉴\"\n                              >\n                                <svg\n                                  xmlns=\"http://www.w3.org/2000/svg\"\n                                  fill=\"none\"\n                                  viewBox=\"0 0 24 24\"\n                                  strokeWidth=\"1.5\"\n                                  stroke=\"currentColor\"\n                                  className=\"h-5 w-5\"\n                                >\n                                  <path\n                                    strokeLinecap=\"round\"\n                                    strokeLinejoin=\"round\"\n                                    d=\"M6.75 12a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0ZM12.75 12a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0ZM18.75 12a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0Z\"\n                                  />\n                                </svg>\n                              </button>\n\n                              {/* 드롭다운 메뉴 */}\n                              {activeMenuId === conversation.id && (\n                                <div className=\"absolute right-0 top-full mt-1 bg-[#21262d] border border-[#30363d] rounded-md shadow-lg z-50 min-w-[120px]\">\n                                  <button\n                                    onClick={(e) =>\n                                      handleStartEdit(\n                                        conversation.id,\n                                        conversation.title,\n                                        e\n                                      )\n                                    }\n                                    className=\"w-full px-3 py-2 text-sm text-[#e6edf3] hover:bg-[#30363d] flex items-center gap-2 transition-colors duration-200\"\n                                  >\n                                    <svg\n                                      xmlns=\"http://www.w3.org/2000/svg\"\n                                      fill=\"none\"\n                                      viewBox=\"0 0 24 24\"\n                                      strokeWidth=\"1.5\"\n                                      stroke=\"currentColor\"\n                                      className=\"h-4 w-4\"\n                                    >\n                                      <path\n                                        strokeLinecap=\"round\"\n                                        strokeLinejoin=\"round\"\n                                        d=\"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L10.582 16.07a4.5 4.5 0 0 1-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 0 1 1.13-1.897l8.932-8.931Zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0 1 15.75 21H5.25A2.25 2.25 0 0 1 3 18.75V8.25A2.25 2.25 0 0 1 5.25 6H10\"\n                                      />\n                                    </svg>\n                                    수정\n                                  </button>\n                                  <button\n                                    onClick={(e) =>\n                                      handleDeleteConversation(\n                                        conversation.id,\n                                        e\n                                      )\n                                    }\n                                    disabled={deletingId === conversation.id}\n                                    className=\"w-full px-3 py-2 text-sm text-[#f85149] hover:bg-[#30363d] flex items-center gap-2 transition-colors duration-200 disabled:opacity-50\"\n                                  >\n                                    {deletingId === conversation.id ? (\n                                      <div className=\"animate-spin rounded-full h-4 w-4 border-b border-[#f85149]\"></div>\n                                    ) : (\n                                      <svg\n                                        xmlns=\"http://www.w3.org/2000/svg\"\n                                        fill=\"none\"\n                                        viewBox=\"0 0 24 24\"\n                                        strokeWidth=\"1.5\"\n                                        stroke=\"currentColor\"\n                                        className=\"h-4 w-4\"\n                                      >\n                                        <path\n                                          strokeLinecap=\"round\"\n                                          strokeLinejoin=\"round\"\n                                          d=\"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0\"\n                                        />\n                                      </svg>\n                                    )}\n                                    삭제\n                                  </button>\n                                </div>\n                              )}\n                            </div>\n                          </>\n                        )}\n                      </div>\n                    ))}\n                  </div>\n                )\n              )}\n            </div>\n          )}\n\n          {/* 접힌 상태 새 대화 버튼만 표시 */}\n          {isCollapsed && (\n            <div className=\"flex flex-col items-center p-2 transition-opacity duration-200 ease-in-out will-change-transform\">\n              <button\n                onClick={handleNewChat}\n                disabled={isCreating}\n                className=\"w-10 h-10 bg-[#21262d] hover:bg-[#30363d] disabled:bg-[#374151] text-white rounded-full flex items-center justify-center transition-colors duration-200 focus:outline-none border border-[#30363d] hover:border-[#444c56]\"\n                title=\"새 대화\"\n              >\n                {isCreating ? (\n                  <div className=\"animate-spin rounded-full h-4 w-4 border-b-2 border-white\"></div>\n                ) : (\n                  <svg\n                    xmlns=\"http://www.w3.org/2000/svg\"\n                    fill=\"none\"\n                    viewBox=\"0 0 24 24\"\n                    strokeWidth=\"2\"\n                    stroke=\"currentColor\"\n                    className=\"h-6 w-6\"\n                  >\n                    <path\n                      strokeLinecap=\"round\"\n                      strokeLinejoin=\"round\"\n                      d=\"M12 4.5v15m7.5-7.5h-15\"\n                    />\n                  </svg>\n                )}\n              </button>\n            </div>\n          )}\n        </div>\n\n        {/* 추가 로딩 인디케이터 - 더 많은 대화 로드 시 */}\n        {loading && conversations.length > 0 && (\n          <div className=\"p-4 text-center\">\n            <div className=\"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-300 mx-auto\"></div>\n          </div>\n        )}\n\n        {/* 더 보기 버튼 */}\n        {hasMore && !loading && conversations.length > 0 && !isCollapsed && (\n          <div className=\"p-4 text-center\">\n            <button\n              onClick={loadMore}\n              className=\"text-xs text-white/60 hover:text-white/80 transition-colors duration-200 px-3 py-1.5 hover:bg-gray-800/40 rounded\"\n            >\n              더 보기\n            </button>\n          </div>\n        )}\n      </div>\n    </>\n  );\n});\n\nexport default ConversationDrawer;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}