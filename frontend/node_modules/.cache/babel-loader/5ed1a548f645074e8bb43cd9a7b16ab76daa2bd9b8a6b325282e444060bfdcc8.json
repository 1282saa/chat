{"ast":null,"code":"import React,{useState,useEffect,useRef}from'react';import ReactMarkdown from'react-markdown';import{PaperAirplaneIcon,ClipboardDocumentIcon,CheckCircleIcon,UserIcon,CpuChipIcon}from'@heroicons/react/24/outline';import{toast}from'react-hot-toast';import{generateAPI}from'../services/api';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const ChatInterface=_ref=>{let{projectId,projectName}=_ref;const[messages,setMessages]=useState([]);const[inputMessage,setInputMessage]=useState('');const[isLoading,setIsLoading]=useState(false);const[copiedMessage,setCopiedMessage]=useState(null);const[streamingMessage,setStreamingMessage]=useState('');const[isStreaming,setIsStreaming]=useState(false);const messagesEndRef=useRef(null);const inputRef=useRef(null);const streamingRef=useRef(null);// 대화 세션 초기화\nuseEffect(()=>{const welcomeMessage={id:Date.now(),type:'ai',content:`안녕하세요! 저는 ${projectName}의 AI 제목 작가입니다. 🎯\\n\\n기사 내용을 입력해주시면 다양한 스타일의 제목을 제안해드릴게요. 제목을 수정하거나 다른 스타일로 바꾸고 싶으시면 언제든 말씀해주세요!`,timestamp:new Date()};setMessages([welcomeMessage]);},[projectName]);// 메시지 추가 시 스크롤 하단으로\nuseEffect(()=>{scrollToBottom();},[messages]);const scrollToBottom=()=>{var _messagesEndRef$curre;(_messagesEndRef$curre=messagesEndRef.current)===null||_messagesEndRef$curre===void 0?void 0:_messagesEndRef$curre.scrollIntoView({behavior:\"smooth\"});};// 스트리밍 타이핑 효과\nconst simulateStreaming=(text,onComplete)=>{setIsStreaming(true);setStreamingMessage('');let index=0;const interval=setInterval(()=>{if(index<text.length){setStreamingMessage(prev=>prev+text[index]);index++;scrollToBottom();}else{clearInterval(interval);setIsStreaming(false);setStreamingMessage('');onComplete();}},15);// 15ms 간격으로 한 글자씩 출력 (더 빠르게)\nstreamingRef.current=interval;};// 메시지 전송\nconst handleSendMessage=async()=>{if(!inputMessage.trim()||isLoading)return;const userMessage={id:Date.now(),type:'user',content:inputMessage,timestamp:new Date()};setMessages(prev=>[...prev,userMessage]);const currentInput=inputMessage;setInputMessage('');setIsLoading(true);try{// 대화 컨텍스트 생성 (최근 5개 메시지)\nconst recentMessages=messages.slice(-5);const conversationContext=recentMessages.map(msg=>`${msg.type==='user'?'Human':'Assistant'}: ${msg.content}`).join('\\n\\n');const contextualInput=recentMessages.length>0?`[이전 대화 컨텍스트]\\n${conversationContext}\\n\\n[새로운 요청]\\nHuman: ${currentInput}`:currentInput;const result=await generateAPI.generateTitle(projectId,contextualInput,null// onProgress callback\n);// 스트리밍 효과로 AI 응답 출력\nsimulateStreaming(result.result,()=>{const aiMessage={id:Date.now()+1,type:'ai',content:result.result,timestamp:new Date(),debug:result.debug};setMessages(prev=>[...prev,aiMessage]);});}catch(error){console.error('메시지 전송 실패:',error);const errorMessage={id:Date.now()+1,type:'ai',content:'죄송합니다. 메시지 처리 중 오류가 발생했습니다. 다시 시도해주세요.',timestamp:new Date(),isError:true};setMessages(prev=>[...prev,errorMessage]);toast.error('메시지 전송에 실패했습니다.');}finally{setIsLoading(false);}};// Enter 키로 전송\nconst handleKeyPress=e=>{if(e.key==='Enter'&&!e.shiftKey){e.preventDefault();handleSendMessage();}};// 제목만 추출하여 복사\nconst copyTitlesOnly=(text,messageId)=>{const titles=text.match(/• ([^\\n]+)/g);const textToCopy=titles?titles.map(t=>t.replace('• ','')).join('\\n'):text;navigator.clipboard.writeText(textToCopy).then(()=>{setCopiedMessage(messageId);toast.success('제목이 클립보드에 복사되었습니다!');setTimeout(()=>setCopiedMessage(null),2000);}).catch(()=>{toast.error('복사에 실패했습니다.');});};// 전체 텍스트 복사\nconst copyFullText=(text,messageId)=>{navigator.clipboard.writeText(text).then(()=>{setCopiedMessage(messageId+'_full');toast.success('전체 텍스트가 복사되었습니다!');setTimeout(()=>setCopiedMessage(null),2000);}).catch(()=>{toast.error('복사에 실패했습니다.');});};// 제목 추출 함수\nconst extractTitles=text=>{const titleMatches=text.match(/• ([^\\n]+)/g);return titleMatches?titleMatches.map(t=>t.replace('• ','').trim()):[];};// 개별 제목 복사\nconst copyIndividualTitle=(title,messageId,index)=>{navigator.clipboard.writeText(title).then(()=>{setCopiedMessage(`${messageId}_title_${index}`);toast.success('제목이 복사되었습니다!');setTimeout(()=>setCopiedMessage(null),2000);}).catch(()=>{toast.error('복사에 실패했습니다.');});};return/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col h-full bg-white rounded-lg shadow-sm border border-gray-200\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between p-4 border-b border-gray-200 bg-white rounded-t-lg\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(CpuChipIcon,{className:\"h-5 w-5 text-gray-600 mr-2\"}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-md font-medium text-gray-900\",children:\"AI \\uB300\\uD654\"}),/*#__PURE__*/_jsx(\"span\",{className:\"ml-2 text-sm text-gray-500\",children:projectName})]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setMessages(messages.slice(0,1))// 첫 번째 환영 메시지만 남기기\n,className:\"text-sm text-gray-500 hover:text-gray-700 px-2 py-1 rounded hover:bg-gray-100 transition-colors\",children:\"\\uCD08\\uAE30\\uD654\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1 overflow-y-auto p-4 space-y-4 min-h-0\",children:[messages.map(message=>/*#__PURE__*/_jsx(\"div\",{className:`flex ${message.type==='user'?'justify-end':'justify-start'}`,children:/*#__PURE__*/_jsxs(\"div\",{className:`flex max-w-[80%] ${message.type==='user'?'flex-row-reverse':'flex-row'}`,children:[/*#__PURE__*/_jsx(\"div\",{className:`flex-shrink-0 ${message.type==='user'?'ml-3':'mr-3'}`,children:/*#__PURE__*/_jsx(\"div\",{className:`w-8 h-8 rounded-full flex items-center justify-center ${message.type==='user'?'bg-blue-600 text-white':'bg-gray-200 text-gray-600'}`,children:message.type==='user'?/*#__PURE__*/_jsx(UserIcon,{className:\"w-5 h-5\"}):/*#__PURE__*/_jsx(CpuChipIcon,{className:\"w-5 h-5\"})})}),/*#__PURE__*/_jsxs(\"div\",{className:`rounded-lg px-4 py-3 ${message.type==='user'?'bg-blue-500 text-white':message.isError?'bg-red-50 text-red-900 border border-red-200':'bg-gray-50 text-gray-900'}`,children:[message.type==='ai'?/*#__PURE__*/_jsx(\"div\",{className:\"text-sm leading-relaxed\",children:/*#__PURE__*/_jsx(ReactMarkdown,{components:{p:_ref2=>{let{children}=_ref2;return/*#__PURE__*/_jsx(\"p\",{className:\"mb-3 last:mb-0 leading-relaxed\",children:children});},strong:_ref3=>{let{children}=_ref3;return/*#__PURE__*/_jsx(\"strong\",{className:\"font-semibold text-gray-900\",children:children});},ul:_ref4=>{let{children}=_ref4;return/*#__PURE__*/_jsx(\"ul\",{className:\"list-disc list-inside space-y-2 my-3\",children:children});},li:_ref5=>{let{children}=_ref5;return/*#__PURE__*/_jsx(\"li\",{className:\"text-gray-800 leading-relaxed\",children:children});},br:()=>/*#__PURE__*/_jsx(\"br\",{className:\"mb-1\"}),h1:_ref6=>{let{children}=_ref6;return/*#__PURE__*/_jsx(\"h1\",{className:\"text-lg font-bold mb-3 mt-4 first:mt-0\",children:children});},h2:_ref7=>{let{children}=_ref7;return/*#__PURE__*/_jsx(\"h2\",{className:\"text-md font-bold mb-2 mt-3 first:mt-0\",children:children});},h3:_ref8=>{let{children}=_ref8;return/*#__PURE__*/_jsx(\"h3\",{className:\"text-sm font-bold mb-2 mt-3 first:mt-0\",children:children});}},children:message.content})}):/*#__PURE__*/_jsx(\"div\",{className:\"whitespace-pre-wrap text-sm leading-relaxed\",children:message.content}),message.type==='ai'&&!message.isError&&/*#__PURE__*/_jsxs(_Fragment,{children:[extractTitles(message.content).length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"mt-4 p-3 bg-white rounded border border-gray-200\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-sm font-medium text-gray-700 mb-2\",children:\"\\uD83D\\uDCDD \\uCD94\\uCD9C\\uB41C \\uC81C\\uBAA9 (\\uD074\\uB9AD\\uD558\\uC5EC \\uBCF5\\uC0AC)\"}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-2\",children:extractTitles(message.content).map((title,index)=>/*#__PURE__*/_jsx(\"div\",{onClick:()=>copyIndividualTitle(title,message.id,index),className:`text-sm text-gray-800 p-3 rounded-lg cursor-pointer transition-all duration-200 border ${copiedMessage===`${message.id}_title_${index}`?'bg-green-50 border-green-200 text-green-800':'bg-blue-50 border-blue-200 hover:bg-blue-100 hover:border-blue-300'}`,children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"flex-1\",children:title}),copiedMessage===`${message.id}_title_${index}`?/*#__PURE__*/_jsx(CheckCircleIcon,{className:\"w-4 h-4 text-green-600 ml-2 flex-shrink-0\"}):/*#__PURE__*/_jsx(ClipboardDocumentIcon,{className:\"w-4 h-4 text-blue-600 ml-2 flex-shrink-0 opacity-60\"})]})},index))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mt-3 pt-2 border-t border-gray-200\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-xs text-gray-500\",children:message.timestamp.toLocaleTimeString('ko-KR',{hour:'2-digit',minute:'2-digit'})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-2\",children:[extractTitles(message.content).length>0&&/*#__PURE__*/_jsx(\"button\",{onClick:()=>copyTitlesOnly(message.content,message.id),className:\"flex items-center text-xs text-blue-600 hover:text-blue-700 px-2 py-1 rounded hover:bg-blue-50 transition-colors\",children:copiedMessage===message.id?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(CheckCircleIcon,{className:\"w-3 h-3 mr-1 text-green-600\"}),\"\\uC81C\\uBAA9 \\uBCF5\\uC0AC\\uB428\"]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(ClipboardDocumentIcon,{className:\"w-3 h-3 mr-1\"}),\"\\uC81C\\uBAA9\\uB9CC \\uBCF5\\uC0AC\"]})}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>copyFullText(message.content,message.id),className:\"flex items-center text-xs text-gray-500 hover:text-gray-700 px-2 py-1 rounded hover:bg-gray-200 transition-colors\",children:copiedMessage===message.id+'_full'?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(CheckCircleIcon,{className:\"w-3 h-3 mr-1 text-green-600\"}),\"\\uC804\\uCCB4 \\uBCF5\\uC0AC\\uB428\"]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(ClipboardDocumentIcon,{className:\"w-3 h-3 mr-1\"}),\"\\uC804\\uCCB4 \\uBCF5\\uC0AC\"]})})]})]})]}),message.debug&&/*#__PURE__*/_jsxs(\"details\",{className:\"mt-2 text-xs\",children:[/*#__PURE__*/_jsx(\"summary\",{className:\"text-gray-500 cursor-pointer hover:text-gray-700\",children:\"\\uD83D\\uDD0D \\uB514\\uBC84\\uADF8 \\uC815\\uBCF4\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-1 p-2 bg-white rounded border text-gray-600 space-y-1\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[\"\\uD504\\uB86C\\uD504\\uD2B8 \\uC218: \",message.debug.promptCount||0,\"\\uAC1C\"]}),/*#__PURE__*/_jsxs(\"div\",{children:[\"\\uAE30\\uBCF8 \\uAC00\\uC774\\uB4DC\\uB77C\\uC778: \",message.debug.usedDefaultGuidelines?'사용':'미사용']}),message.debug.promptTitles&&/*#__PURE__*/_jsxs(\"div\",{children:[\"\\uC801\\uC6A9\\uB41C \\uD504\\uB86C\\uD504\\uD2B8: \",message.debug.promptTitles.join(', ')]})]})]})]})]})},message.id)),isStreaming&&/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-start\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex mr-3\",children:/*#__PURE__*/_jsx(\"div\",{className:\"w-8 h-8 rounded-full bg-gray-200 flex items-center justify-center\",children:/*#__PURE__*/_jsx(CpuChipIcon,{className:\"w-5 h-5 text-gray-600\"})})}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-gray-50 rounded-lg px-4 py-3 text-gray-900 max-w-[80%]\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm leading-relaxed\",children:[/*#__PURE__*/_jsx(ReactMarkdown,{components:{p:_ref9=>{let{children}=_ref9;return/*#__PURE__*/_jsx(\"p\",{className:\"mb-3 last:mb-0 leading-relaxed\",children:children});},strong:_ref0=>{let{children}=_ref0;return/*#__PURE__*/_jsx(\"strong\",{className:\"font-semibold text-gray-900\",children:children});},ul:_ref1=>{let{children}=_ref1;return/*#__PURE__*/_jsx(\"ul\",{className:\"list-disc list-inside space-y-2 my-3\",children:children});},li:_ref10=>{let{children}=_ref10;return/*#__PURE__*/_jsx(\"li\",{className:\"text-gray-800 leading-relaxed\",children:children});},br:()=>/*#__PURE__*/_jsx(\"br\",{className:\"mb-1\"}),h1:_ref11=>{let{children}=_ref11;return/*#__PURE__*/_jsx(\"h1\",{className:\"text-lg font-bold mb-3 mt-4 first:mt-0\",children:children});},h2:_ref12=>{let{children}=_ref12;return/*#__PURE__*/_jsx(\"h2\",{className:\"text-md font-bold mb-2 mt-3 first:mt-0\",children:children});},h3:_ref13=>{let{children}=_ref13;return/*#__PURE__*/_jsx(\"h3\",{className:\"text-sm font-bold mb-2 mt-3 first:mt-0\",children:children});}},children:streamingMessage}),/*#__PURE__*/_jsx(\"span\",{className:\"animate-pulse text-gray-400\",children:\"|\"})]})})]}),isLoading&&!isStreaming&&/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-start\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex mr-3\",children:/*#__PURE__*/_jsx(\"div\",{className:\"w-8 h-8 rounded-full bg-gray-200 flex items-center justify-center\",children:/*#__PURE__*/_jsx(CpuChipIcon,{className:\"w-5 h-5 text-gray-600\"})})}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-gray-100 rounded-lg px-4 py-3\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-1\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-2 h-2 bg-gray-400 rounded-full animate-bounce\"}),/*#__PURE__*/_jsx(\"div\",{className:\"w-2 h-2 bg-gray-400 rounded-full animate-bounce\",style:{animationDelay:'0.1s'}}),/*#__PURE__*/_jsx(\"div\",{className:\"w-2 h-2 bg-gray-400 rounded-full animate-bounce\",style:{animationDelay:'0.2s'}})]})})]}),/*#__PURE__*/_jsx(\"div\",{ref:messagesEndRef})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"border-t border-gray-200 p-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-end space-x-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex-1\",children:/*#__PURE__*/_jsx(\"textarea\",{ref:inputRef,value:inputMessage,onChange:e=>setInputMessage(e.target.value),onKeyPress:handleKeyPress,placeholder:\"\\uAE30\\uC0AC \\uB0B4\\uC6A9\\uC744 \\uC785\\uB825\\uD558\\uAC70\\uB098 \\uC81C\\uBAA9 \\uC218\\uC815 \\uC694\\uCCAD\\uC744 \\uD574\\uC8FC\\uC138\\uC694...\",className:\"w-full p-3 border border-gray-300 rounded-lg resize-none focus:ring-2 focus:ring-blue-500 focus:border-transparent\",rows:\"3\",disabled:isLoading})}),/*#__PURE__*/_jsx(\"button\",{onClick:handleSendMessage,disabled:!inputMessage.trim()||isLoading,className:\"bg-blue-600 text-white p-3 rounded-lg hover:bg-blue-700 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors\",children:/*#__PURE__*/_jsx(PaperAirplaneIcon,{className:\"w-5 h-5\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mt-2 text-xs text-gray-500\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Shift + Enter\\uB85C \\uC904\\uBC14\\uAFC8, Enter\\uB85C \\uC804\\uC1A1\"}),/*#__PURE__*/_jsxs(\"span\",{children:[inputMessage.length,\"/2000\"]})]})]})]});};export default ChatInterface;","map":{"version":3,"names":["React","useState","useEffect","useRef","ReactMarkdown","PaperAirplaneIcon","ClipboardDocumentIcon","CheckCircleIcon","UserIcon","CpuChipIcon","toast","generateAPI","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","ChatInterface","_ref","projectId","projectName","messages","setMessages","inputMessage","setInputMessage","isLoading","setIsLoading","copiedMessage","setCopiedMessage","streamingMessage","setStreamingMessage","isStreaming","setIsStreaming","messagesEndRef","inputRef","streamingRef","welcomeMessage","id","Date","now","type","content","timestamp","scrollToBottom","_messagesEndRef$curre","current","scrollIntoView","behavior","simulateStreaming","text","onComplete","index","interval","setInterval","length","prev","clearInterval","handleSendMessage","trim","userMessage","currentInput","recentMessages","slice","conversationContext","map","msg","join","contextualInput","result","generateTitle","aiMessage","debug","error","console","errorMessage","isError","handleKeyPress","e","key","shiftKey","preventDefault","copyTitlesOnly","messageId","titles","match","textToCopy","t","replace","navigator","clipboard","writeText","then","success","setTimeout","catch","copyFullText","extractTitles","titleMatches","copyIndividualTitle","title","className","children","onClick","message","components","p","_ref2","strong","_ref3","ul","_ref4","li","_ref5","br","h1","_ref6","h2","_ref7","h3","_ref8","toLocaleTimeString","hour","minute","promptCount","usedDefaultGuidelines","promptTitles","_ref9","_ref0","_ref1","_ref10","_ref11","_ref12","_ref13","style","animationDelay","ref","value","onChange","target","onKeyPress","placeholder","rows","disabled"],"sources":["/Users/yeong-gwang/Documents/work/서울경제신문/ai_제목달기/frontend/src/components/ChatInterface.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport ReactMarkdown from 'react-markdown';\nimport { \n  PaperAirplaneIcon, \n  ClipboardDocumentIcon,\n  CheckCircleIcon,\n  UserIcon,\n  CpuChipIcon \n} from '@heroicons/react/24/outline';\nimport { toast } from 'react-hot-toast';\nimport { generateAPI } from '../services/api';\n\nconst ChatInterface = ({ projectId, projectName }) => {\n  const [messages, setMessages] = useState([]);\n  const [inputMessage, setInputMessage] = useState('');\n  const [isLoading, setIsLoading] = useState(false);\n  const [copiedMessage, setCopiedMessage] = useState(null);\n  const [streamingMessage, setStreamingMessage] = useState('');\n  const [isStreaming, setIsStreaming] = useState(false);\n  const messagesEndRef = useRef(null);\n  const inputRef = useRef(null);\n  const streamingRef = useRef(null);\n\n  // 대화 세션 초기화\n  useEffect(() => {\n    const welcomeMessage = {\n      id: Date.now(),\n      type: 'ai',\n      content: `안녕하세요! 저는 ${projectName}의 AI 제목 작가입니다. 🎯\\n\\n기사 내용을 입력해주시면 다양한 스타일의 제목을 제안해드릴게요. 제목을 수정하거나 다른 스타일로 바꾸고 싶으시면 언제든 말씀해주세요!`,\n      timestamp: new Date()\n    };\n    setMessages([welcomeMessage]);\n  }, [projectName]);\n\n  // 메시지 추가 시 스크롤 하단으로\n  useEffect(() => {\n    scrollToBottom();\n  }, [messages]);\n\n  const scrollToBottom = () => {\n    messagesEndRef.current?.scrollIntoView({ behavior: \"smooth\" });\n  };\n\n  // 스트리밍 타이핑 효과\n  const simulateStreaming = (text, onComplete) => {\n    setIsStreaming(true);\n    setStreamingMessage('');\n    \n    let index = 0;\n    const interval = setInterval(() => {\n      if (index < text.length) {\n        setStreamingMessage(prev => prev + text[index]);\n        index++;\n        scrollToBottom();\n      } else {\n        clearInterval(interval);\n        setIsStreaming(false);\n        setStreamingMessage('');\n        onComplete();\n      }\n    }, 15); // 15ms 간격으로 한 글자씩 출력 (더 빠르게)\n\n    streamingRef.current = interval;\n  };\n\n  // 메시지 전송\n  const handleSendMessage = async () => {\n    if (!inputMessage.trim() || isLoading) return;\n\n    const userMessage = {\n      id: Date.now(),\n      type: 'user',\n      content: inputMessage,\n      timestamp: new Date()\n    };\n\n    setMessages(prev => [...prev, userMessage]);\n    const currentInput = inputMessage;\n    setInputMessage('');\n    setIsLoading(true);\n\n    try {\n      // 대화 컨텍스트 생성 (최근 5개 메시지)\n      const recentMessages = messages.slice(-5);\n      const conversationContext = recentMessages\n        .map(msg => `${msg.type === 'user' ? 'Human' : 'Assistant'}: ${msg.content}`)\n        .join('\\n\\n');\n\n      const contextualInput = recentMessages.length > 0 \n        ? `[이전 대화 컨텍스트]\\n${conversationContext}\\n\\n[새로운 요청]\\nHuman: ${currentInput}`\n        : currentInput;\n\n      const result = await generateAPI.generateTitle(\n        projectId,\n        contextualInput,\n        null // onProgress callback\n      );\n\n      // 스트리밍 효과로 AI 응답 출력\n      simulateStreaming(result.result, () => {\n        const aiMessage = {\n          id: Date.now() + 1,\n          type: 'ai',\n          content: result.result,\n          timestamp: new Date(),\n          debug: result.debug\n        };\n        setMessages(prev => [...prev, aiMessage]);\n      });\n\n    } catch (error) {\n      console.error('메시지 전송 실패:', error);\n      const errorMessage = {\n        id: Date.now() + 1,\n        type: 'ai',\n        content: '죄송합니다. 메시지 처리 중 오류가 발생했습니다. 다시 시도해주세요.',\n        timestamp: new Date(),\n        isError: true\n      };\n      setMessages(prev => [...prev, errorMessage]);\n      toast.error('메시지 전송에 실패했습니다.');\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  // Enter 키로 전송\n  const handleKeyPress = (e) => {\n    if (e.key === 'Enter' && !e.shiftKey) {\n      e.preventDefault();\n      handleSendMessage();\n    }\n  };\n\n  // 제목만 추출하여 복사\n  const copyTitlesOnly = (text, messageId) => {\n    const titles = text.match(/• ([^\\n]+)/g);\n    const textToCopy = titles ? titles.map(t => t.replace('• ', '')).join('\\n') : text;\n    \n    navigator.clipboard.writeText(textToCopy)\n      .then(() => {\n        setCopiedMessage(messageId);\n        toast.success('제목이 클립보드에 복사되었습니다!');\n        setTimeout(() => setCopiedMessage(null), 2000);\n      })\n      .catch(() => {\n        toast.error('복사에 실패했습니다.');\n      });\n  };\n\n  // 전체 텍스트 복사\n  const copyFullText = (text, messageId) => {\n    navigator.clipboard.writeText(text)\n      .then(() => {\n        setCopiedMessage(messageId + '_full');\n        toast.success('전체 텍스트가 복사되었습니다!');\n        setTimeout(() => setCopiedMessage(null), 2000);\n      })\n      .catch(() => {\n        toast.error('복사에 실패했습니다.');\n      });\n  };\n\n  // 제목 추출 함수\n  const extractTitles = (text) => {\n    const titleMatches = text.match(/• ([^\\n]+)/g);\n    return titleMatches ? titleMatches.map(t => t.replace('• ', '').trim()) : [];\n  };\n\n  // 개별 제목 복사\n  const copyIndividualTitle = (title, messageId, index) => {\n    navigator.clipboard.writeText(title)\n      .then(() => {\n        setCopiedMessage(`${messageId}_title_${index}`);\n        toast.success('제목이 복사되었습니다!');\n        setTimeout(() => setCopiedMessage(null), 2000);\n      })\n      .catch(() => {\n        toast.error('복사에 실패했습니다.');\n      });\n  };\n\n  return (\n    <div className=\"flex flex-col h-full bg-white rounded-lg shadow-sm border border-gray-200\">\n      {/* 채팅 헤더 */}\n      <div className=\"flex items-center justify-between p-4 border-b border-gray-200 bg-white rounded-t-lg\">\n        <div className=\"flex items-center\">\n          <CpuChipIcon className=\"h-5 w-5 text-gray-600 mr-2\" />\n          <h3 className=\"text-md font-medium text-gray-900\">AI 대화</h3>\n          <span className=\"ml-2 text-sm text-gray-500\">{projectName}</span>\n        </div>\n        <button\n          onClick={() => setMessages(messages.slice(0, 1))} // 첫 번째 환영 메시지만 남기기\n          className=\"text-sm text-gray-500 hover:text-gray-700 px-2 py-1 rounded hover:bg-gray-100 transition-colors\"\n        >\n          초기화\n        </button>\n      </div>\n\n      {/* 메시지 영역 */}\n      <div className=\"flex-1 overflow-y-auto p-4 space-y-4 min-h-0\">\n        {messages.map((message) => (\n          <div\n            key={message.id}\n            className={`flex ${message.type === 'user' ? 'justify-end' : 'justify-start'}`}\n          >\n            <div className={`flex max-w-[80%] ${message.type === 'user' ? 'flex-row-reverse' : 'flex-row'}`}>\n              {/* 아바타 */}\n              <div className={`flex-shrink-0 ${message.type === 'user' ? 'ml-3' : 'mr-3'}`}>\n                <div className={`w-8 h-8 rounded-full flex items-center justify-center ${\n                  message.type === 'user' \n                    ? 'bg-blue-600 text-white' \n                    : 'bg-gray-200 text-gray-600'\n                }`}>\n                  {message.type === 'user' ? (\n                    <UserIcon className=\"w-5 h-5\" />\n                  ) : (\n                    <CpuChipIcon className=\"w-5 h-5\" />\n                  )}\n                </div>\n              </div>\n\n              {/* 메시지 버블 */}\n              <div className={`rounded-lg px-4 py-3 ${\n                message.type === 'user'\n                  ? 'bg-blue-500 text-white'\n                  : message.isError\n                  ? 'bg-red-50 text-red-900 border border-red-200'\n                  : 'bg-gray-50 text-gray-900'\n              }`}>\n                {message.type === 'ai' ? (\n                  <div className=\"text-sm leading-relaxed\">\n                    <ReactMarkdown\n                      components={{\n                        p: ({ children }) => <p className=\"mb-3 last:mb-0 leading-relaxed\">{children}</p>,\n                        strong: ({ children }) => <strong className=\"font-semibold text-gray-900\">{children}</strong>,\n                        ul: ({ children }) => <ul className=\"list-disc list-inside space-y-2 my-3\">{children}</ul>,\n                        li: ({ children }) => <li className=\"text-gray-800 leading-relaxed\">{children}</li>,\n                        br: () => <br className=\"mb-1\" />,\n                        h1: ({ children }) => <h1 className=\"text-lg font-bold mb-3 mt-4 first:mt-0\">{children}</h1>,\n                        h2: ({ children }) => <h2 className=\"text-md font-bold mb-2 mt-3 first:mt-0\">{children}</h2>,\n                        h3: ({ children }) => <h3 className=\"text-sm font-bold mb-2 mt-3 first:mt-0\">{children}</h3>\n                      }}\n                    >\n                      {message.content}\n                    </ReactMarkdown>\n                  </div>\n                ) : (\n                  <div className=\"whitespace-pre-wrap text-sm leading-relaxed\">\n                    {message.content}\n                  </div>\n                )}\n                \n                {/* AI 메시지에 제목 추출 및 복사 기능 */}\n                {message.type === 'ai' && !message.isError && (\n                  <>\n                    {/* 추출된 제목들 */}\n                    {extractTitles(message.content).length > 0 && (\n                      <div className=\"mt-4 p-3 bg-white rounded border border-gray-200\">\n                        <h4 className=\"text-sm font-medium text-gray-700 mb-2\">📝 추출된 제목 (클릭하여 복사)</h4>\n                        <div className=\"space-y-2\">\n                          {extractTitles(message.content).map((title, index) => (\n                            <div \n                              key={index} \n                              onClick={() => copyIndividualTitle(title, message.id, index)}\n                              className={`text-sm text-gray-800 p-3 rounded-lg cursor-pointer transition-all duration-200 border ${\n                                copiedMessage === `${message.id}_title_${index}`\n                                  ? 'bg-green-50 border-green-200 text-green-800'\n                                  : 'bg-blue-50 border-blue-200 hover:bg-blue-100 hover:border-blue-300'\n                              }`}\n                            >\n                              <div className=\"flex items-center justify-between\">\n                                <span className=\"flex-1\">{title}</span>\n                                {copiedMessage === `${message.id}_title_${index}` ? (\n                                  <CheckCircleIcon className=\"w-4 h-4 text-green-600 ml-2 flex-shrink-0\" />\n                                ) : (\n                                  <ClipboardDocumentIcon className=\"w-4 h-4 text-blue-600 ml-2 flex-shrink-0 opacity-60\" />\n                                )}\n                              </div>\n                            </div>\n                          ))}\n                        </div>\n                      </div>\n                    )}\n                    \n                    {/* 복사 버튼들 */}\n                    <div className=\"flex items-center justify-between mt-3 pt-2 border-t border-gray-200\">\n                      <span className=\"text-xs text-gray-500\">\n                        {message.timestamp.toLocaleTimeString('ko-KR', {\n                          hour: '2-digit',\n                          minute: '2-digit'\n                        })}\n                      </span>\n                      <div className=\"flex space-x-2\">\n                        {extractTitles(message.content).length > 0 && (\n                          <button\n                            onClick={() => copyTitlesOnly(message.content, message.id)}\n                            className=\"flex items-center text-xs text-blue-600 hover:text-blue-700 px-2 py-1 rounded hover:bg-blue-50 transition-colors\"\n                          >\n                            {copiedMessage === message.id ? (\n                              <>\n                                <CheckCircleIcon className=\"w-3 h-3 mr-1 text-green-600\" />\n                                제목 복사됨\n                              </>\n                            ) : (\n                              <>\n                                <ClipboardDocumentIcon className=\"w-3 h-3 mr-1\" />\n                                제목만 복사\n                              </>\n                            )}\n                          </button>\n                        )}\n                        <button\n                          onClick={() => copyFullText(message.content, message.id)}\n                          className=\"flex items-center text-xs text-gray-500 hover:text-gray-700 px-2 py-1 rounded hover:bg-gray-200 transition-colors\"\n                        >\n                          {copiedMessage === message.id + '_full' ? (\n                            <>\n                              <CheckCircleIcon className=\"w-3 h-3 mr-1 text-green-600\" />\n                              전체 복사됨\n                            </>\n                          ) : (\n                            <>\n                              <ClipboardDocumentIcon className=\"w-3 h-3 mr-1\" />\n                              전체 복사\n                            </>\n                          )}\n                        </button>\n                      </div>\n                    </div>\n                  </>\n                )}\n\n                {/* 디버그 정보 (개발 모드) */}\n                {message.debug && (\n                  <details className=\"mt-2 text-xs\">\n                    <summary className=\"text-gray-500 cursor-pointer hover:text-gray-700\">\n                      🔍 디버그 정보\n                    </summary>\n                    <div className=\"mt-1 p-2 bg-white rounded border text-gray-600 space-y-1\">\n                      <div>프롬프트 수: {message.debug.promptCount || 0}개</div>\n                      <div>기본 가이드라인: {message.debug.usedDefaultGuidelines ? '사용' : '미사용'}</div>\n                      {message.debug.promptTitles && (\n                        <div>적용된 프롬프트: {message.debug.promptTitles.join(', ')}</div>\n                      )}\n                    </div>\n                  </details>\n                )}\n              </div>\n            </div>\n          </div>\n        ))}\n\n        {/* 스트리밍 메시지 */}\n        {isStreaming && (\n          <div className=\"flex justify-start\">\n            <div className=\"flex mr-3\">\n              <div className=\"w-8 h-8 rounded-full bg-gray-200 flex items-center justify-center\">\n                <CpuChipIcon className=\"w-5 h-5 text-gray-600\" />\n              </div>\n            </div>\n            <div className=\"bg-gray-50 rounded-lg px-4 py-3 text-gray-900 max-w-[80%]\">\n              <div className=\"text-sm leading-relaxed\">\n                <ReactMarkdown\n                  components={{\n                    p: ({ children }) => <p className=\"mb-3 last:mb-0 leading-relaxed\">{children}</p>,\n                    strong: ({ children }) => <strong className=\"font-semibold text-gray-900\">{children}</strong>,\n                    ul: ({ children }) => <ul className=\"list-disc list-inside space-y-2 my-3\">{children}</ul>,\n                    li: ({ children }) => <li className=\"text-gray-800 leading-relaxed\">{children}</li>,\n                    br: () => <br className=\"mb-1\" />,\n                    h1: ({ children }) => <h1 className=\"text-lg font-bold mb-3 mt-4 first:mt-0\">{children}</h1>,\n                    h2: ({ children }) => <h2 className=\"text-md font-bold mb-2 mt-3 first:mt-0\">{children}</h2>,\n                    h3: ({ children }) => <h3 className=\"text-sm font-bold mb-2 mt-3 first:mt-0\">{children}</h3>\n                  }}\n                >\n                  {streamingMessage}\n                </ReactMarkdown>\n                <span className=\"animate-pulse text-gray-400\">|</span>\n              </div>\n            </div>\n          </div>\n        )}\n\n        {/* 로딩 인디케이터 */}\n        {isLoading && !isStreaming && (\n          <div className=\"flex justify-start\">\n            <div className=\"flex mr-3\">\n              <div className=\"w-8 h-8 rounded-full bg-gray-200 flex items-center justify-center\">\n                <CpuChipIcon className=\"w-5 h-5 text-gray-600\" />\n              </div>\n            </div>\n            <div className=\"bg-gray-100 rounded-lg px-4 py-3\">\n              <div className=\"flex items-center space-x-1\">\n                <div className=\"w-2 h-2 bg-gray-400 rounded-full animate-bounce\"></div>\n                <div className=\"w-2 h-2 bg-gray-400 rounded-full animate-bounce\" style={{animationDelay: '0.1s'}}></div>\n                <div className=\"w-2 h-2 bg-gray-400 rounded-full animate-bounce\" style={{animationDelay: '0.2s'}}></div>\n              </div>\n            </div>\n          </div>\n        )}\n\n        <div ref={messagesEndRef} />\n      </div>\n\n      {/* 입력 영역 */}\n      <div className=\"border-t border-gray-200 p-4\">\n        <div className=\"flex items-end space-x-3\">\n          <div className=\"flex-1\">\n            <textarea\n              ref={inputRef}\n              value={inputMessage}\n              onChange={(e) => setInputMessage(e.target.value)}\n              onKeyPress={handleKeyPress}\n              placeholder=\"기사 내용을 입력하거나 제목 수정 요청을 해주세요...\"\n              className=\"w-full p-3 border border-gray-300 rounded-lg resize-none focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n              rows=\"3\"\n              disabled={isLoading}\n            />\n          </div>\n          <button\n            onClick={handleSendMessage}\n            disabled={!inputMessage.trim() || isLoading}\n            className=\"bg-blue-600 text-white p-3 rounded-lg hover:bg-blue-700 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors\"\n          >\n            <PaperAirplaneIcon className=\"w-5 h-5\" />\n          </button>\n        </div>\n        \n        <div className=\"flex items-center justify-between mt-2 text-xs text-gray-500\">\n          <span>Shift + Enter로 줄바꿈, Enter로 전송</span>\n          <span>{inputMessage.length}/2000</span>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default ChatInterface;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}