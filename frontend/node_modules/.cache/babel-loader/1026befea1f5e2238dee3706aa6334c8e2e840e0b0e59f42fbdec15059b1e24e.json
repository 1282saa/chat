{"ast":null,"code":"import React,{useState,useRef,useEffect}from'react';import{useNavigate}from'react-router-dom';import{useAuth}from'../contexts/AuthContext';import{ChevronDownIcon,UserIcon,CreditCardIcon,ArrowRightOnRectangleIcon}from'@heroicons/react/24/outline';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const AvatarMenu=()=>{var _user$email;const{user,logout}=useAuth();const navigate=useNavigate();const[isOpen,setIsOpen]=useState(false);const menuRef=useRef(null);useEffect(()=>{const handleClickOutside=event=>{if(menuRef.current&&!menuRef.current.contains(event.target)){setIsOpen(false);}};document.addEventListener('mousedown',handleClickOutside);return()=>document.removeEventListener('mousedown',handleClickOutside);},[]);const handleLogout=async()=>{try{await logout();setIsOpen(false);}catch(error){console.error('로그아웃 오류:',error);}};const getInitials=email=>{if(!email)return'U';return email.charAt(0).toUpperCase();};return/*#__PURE__*/_jsxs(\"div\",{className:\"relative\",ref:menuRef,children:[/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setIsOpen(!isOpen),className:\"flex items-center space-x-2 p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors duration-200\",\"aria-expanded\":isOpen,\"aria-haspopup\":\"true\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-8 h-8 bg-blue-600 dark:bg-blue-500 rounded-full flex items-center justify-center text-white font-medium text-sm\",children:getInitials(user===null||user===void 0?void 0:user.email)}),/*#__PURE__*/_jsx(ChevronDownIcon,{className:`h-4 w-4 text-gray-500 dark:text-gray-400 transition-transform duration-200 ${isOpen?'rotate-180':''}`})]}),isOpen&&/*#__PURE__*/_jsxs(\"div\",{className:\"absolute right-0 mt-2 w-64 bg-white dark:bg-gray-800 rounded-lg shadow-lg border border-gray-200 dark:border-gray-700 py-2 z-50\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"px-4 py-3 border-b border-gray-200 dark:border-gray-700\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-10 h-10 bg-blue-600 dark:bg-blue-500 rounded-full flex items-center justify-center text-white font-medium\",children:getInitials(user===null||user===void 0?void 0:user.email)}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1 min-w-0\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-medium text-gray-900 dark:text-white truncate\",children:(user===null||user===void 0?void 0:user.name)||(user===null||user===void 0?void 0:(_user$email=user.email)===null||_user$email===void 0?void 0:_user$email.split('@')[0])}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-500 dark:text-gray-400 truncate\",children:user===null||user===void 0?void 0:user.email}),/*#__PURE__*/_jsx(\"span\",{className:\"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200 mt-1\",children:(user===null||user===void 0?void 0:user.role)==='admin'?'관리자':'사용자'})]})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"py-1\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:()=>{setIsOpen(false);navigate('/dashboard/profile');},className:\"flex items-center px-4 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 w-full text-left transition-colors duration-150\",children:[/*#__PURE__*/_jsx(UserIcon,{className:\"h-4 w-4 mr-3\"}),\"\\uD504\\uB85C\\uD544\"]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>{setIsOpen(false);navigate('/dashboard/plan');},className:\"flex items-center px-4 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 w-full text-left transition-colors duration-150\",children:[/*#__PURE__*/_jsx(CreditCardIcon,{className:\"h-4 w-4 mr-3\"}),\"\\uAD6C\\uB3C5 \\uD50C\\uB79C\"]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"border-t border-gray-200 dark:border-gray-700 my-1\"}),/*#__PURE__*/_jsxs(\"button\",{onClick:handleLogout,className:\"flex items-center px-4 py-2 text-sm text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 w-full text-left transition-colors duration-150\",children:[/*#__PURE__*/_jsx(ArrowRightOnRectangleIcon,{className:\"h-4 w-4 mr-3\"}),\"\\uB85C\\uADF8\\uC544\\uC6C3\"]})]})]});};export default AvatarMenu;","map":{"version":3,"names":["React","useState","useRef","useEffect","useNavigate","useAuth","ChevronDownIcon","UserIcon","CreditCardIcon","ArrowRightOnRectangleIcon","jsx","_jsx","jsxs","_jsxs","AvatarMenu","_user$email","user","logout","navigate","isOpen","setIsOpen","menuRef","handleClickOutside","event","current","contains","target","document","addEventListener","removeEventListener","handleLogout","error","console","getInitials","email","charAt","toUpperCase","className","ref","children","onClick","name","split","role"],"sources":["/Users/yeong-gwang/Documents/work/서울경제신문/dev/nexus/title_generator_ver1/frontend/src/components/AvatarMenu.js"],"sourcesContent":["import React, { useState, useRef, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { useAuth } from '../contexts/AuthContext';\nimport { \n  ChevronDownIcon,\n  UserIcon,\n  CreditCardIcon,\n  ArrowRightOnRectangleIcon\n} from '@heroicons/react/24/outline';\n\nconst AvatarMenu = () => {\n  const { user, logout } = useAuth();\n  const navigate = useNavigate();\n  const [isOpen, setIsOpen] = useState(false);\n  const menuRef = useRef(null);\n\n  useEffect(() => {\n    const handleClickOutside = (event) => {\n      if (menuRef.current && !menuRef.current.contains(event.target)) {\n        setIsOpen(false);\n      }\n    };\n\n    document.addEventListener('mousedown', handleClickOutside);\n    return () => document.removeEventListener('mousedown', handleClickOutside);\n  }, []);\n\n  const handleLogout = async () => {\n    try {\n      await logout();\n      setIsOpen(false);\n    } catch (error) {\n      console.error('로그아웃 오류:', error);\n    }\n  };\n\n  const getInitials = (email) => {\n    if (!email) return 'U';\n    return email.charAt(0).toUpperCase();\n  };\n\n  return (\n    <div className=\"relative\" ref={menuRef}>\n      {/* Avatar Button */}\n      <button\n        onClick={() => setIsOpen(!isOpen)}\n        className=\"flex items-center space-x-2 p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors duration-200\"\n        aria-expanded={isOpen}\n        aria-haspopup=\"true\"\n      >\n        {/* Avatar */}\n        <div className=\"w-8 h-8 bg-blue-600 dark:bg-blue-500 rounded-full flex items-center justify-center text-white font-medium text-sm\">\n          {getInitials(user?.email)}\n        </div>\n        \n        {/* Chevron */}\n        <ChevronDownIcon \n          className={`h-4 w-4 text-gray-500 dark:text-gray-400 transition-transform duration-200 ${\n            isOpen ? 'rotate-180' : ''\n          }`} \n        />\n      </button>\n\n      {/* Dropdown Menu */}\n      {isOpen && (\n        <div className=\"absolute right-0 mt-2 w-64 bg-white dark:bg-gray-800 rounded-lg shadow-lg border border-gray-200 dark:border-gray-700 py-2 z-50\">\n          {/* User Info */}\n          <div className=\"px-4 py-3 border-b border-gray-200 dark:border-gray-700\">\n            <div className=\"flex items-center space-x-3\">\n              <div className=\"w-10 h-10 bg-blue-600 dark:bg-blue-500 rounded-full flex items-center justify-center text-white font-medium\">\n                {getInitials(user?.email)}\n              </div>\n              <div className=\"flex-1 min-w-0\">\n                <p className=\"text-sm font-medium text-gray-900 dark:text-white truncate\">\n                  {user?.name || user?.email?.split('@')[0]}\n                </p>\n                <p className=\"text-xs text-gray-500 dark:text-gray-400 truncate\">\n                  {user?.email}\n                </p>\n                <span className=\"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200 mt-1\">\n                  {user?.role === 'admin' ? '관리자' : '사용자'}\n                </span>\n              </div>\n            </div>\n          </div>\n\n          {/* Menu Items */}\n          <div className=\"py-1\">\n            <button\n              onClick={() => {\n                setIsOpen(false);\n                navigate('/dashboard/profile');\n              }}\n              className=\"flex items-center px-4 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 w-full text-left transition-colors duration-150\"\n            >\n              <UserIcon className=\"h-4 w-4 mr-3\" />\n              프로필\n            </button>\n            \n            <button\n              onClick={() => {\n                setIsOpen(false);\n                navigate('/dashboard/plan');\n              }}\n              className=\"flex items-center px-4 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 w-full text-left transition-colors duration-150\"\n            >\n              <CreditCardIcon className=\"h-4 w-4 mr-3\" />\n              구독 플랜\n            </button>\n          </div>\n\n          {/* Divider */}\n          <div className=\"border-t border-gray-200 dark:border-gray-700 my-1\"></div>\n\n          {/* Logout */}\n          <button\n            onClick={handleLogout}\n            className=\"flex items-center px-4 py-2 text-sm text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 w-full text-left transition-colors duration-150\"\n          >\n            <ArrowRightOnRectangleIcon className=\"h-4 w-4 mr-3\" />\n            로그아웃\n          </button>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default AvatarMenu;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}