{"ast":null,"code":"import React,{useState,useCallback}from\"react\";import{ChatBubbleLeftRightIcon,SparklesIcon,PaperAirplaneIcon,StopIcon}from\"@heroicons/react/24/outline\";import ConversationDrawer from\"./ConversationDrawer\";import ModelSelector from\"../ModelSelector\";import{useChat}from\"../../hooks/useChat\";import{useMessages}from\"../../hooks/useMessages\";import{useConversations}from\"../../hooks/useConversations\";import{useConversationContext}from\"../../contexts/ConversationContext\";import{useAuth}from\"../../contexts/AuthContext\";import SimpleChatMessage from\"../SimpleChatMessage\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const ChatWindow=_ref=>{let{projectId,projectName,promptCards=[]}=_ref;const[sidebarCollapsed,setSidebarCollapsed]=useState(false);// Auth context for user info\nconst{user}=useAuth();// Conversation context\nconst{currentConversationId,addMessage,setCurrentConversation}=useConversationContext();const{createConversation}=useConversations();// Messages hook for current conversation\nconst{messages:historicalMessages,loading:messagesLoading}=useMessages(currentConversationId);// Chat hook for sending messages\nconsole.log(\"🔍 [DEBUG] ChatWindow - useChat 호출:\",{projectId,projectName,currentConversationId,currentConversationIdType:typeof currentConversationId,isCurrentConversationIdNull:currentConversationId===null});const{messages:chatMessages,inputValue,handleInputChange,copiedMessage,isGenerating,inputHeight,handleSendMessage:originalHandleSendMessage,handleStopGeneration,handleKeyPress,handleCopyMessage,handleCopyTitle,wsConnected,wsConnecting,selectedModel,setSelectedModel}=useChat(projectId,projectName,promptCards,currentConversationId);// 통합된 메시지 목록 (과거 메시지 + 현재 세션 메시지)\nconst allMessages=[...historicalMessages,...chatMessages];// 메시지 전송 핸들러 - 대화 생성 후 전송\nconst handleSendMessage=useCallback(async()=>{console.log(\"🔍 [DEBUG] ChatWindow handleSendMessage - 전송 시작:\",{currentConversationId,inputValueLength:inputValue===null||inputValue===void 0?void 0:inputValue.length,isGenerating});if(!inputValue.trim()||isGenerating)return;// 현재 대화 ID가 없으면 새 대화 생성\nlet conversationIdToUse=currentConversationId;if(!conversationIdToUse){console.log(\"🔍 [DEBUG] 대화 ID가 없음 - 새 대화 생성 시작\");try{const newConversation=await createConversation(\"새 대화\");console.log(\"🔍 [DEBUG] 새 대화 생성 완료:\",{newConversationId:newConversation===null||newConversation===void 0?void 0:newConversation.id,newConversation});conversationIdToUse=newConversation.id;setCurrentConversation(conversationIdToUse);// 상태 업데이트를 위한 짧은 대기\nawait new Promise(resolve=>setTimeout(resolve,100));}catch(error){console.error(\"🔍 [DEBUG] 대화 생성 실패:\",error);// 실패해도 계속 진행 (로컬 모드)\n}}console.log(\"🔍 [DEBUG] 메시지 전송 시 conversationId:\",conversationIdToUse);// 원래 핸들러 호출\nawait originalHandleSendMessage();},[inputValue,isGenerating,currentConversationId,allMessages,promptCards,addMessage,originalHandleSendMessage,projectId,user===null||user===void 0?void 0:user.id]);return/*#__PURE__*/_jsxs(\"div\",{className:\"flex h-full overflow-hidden\",children:[/*#__PURE__*/_jsx(ConversationDrawer,{onCollapsedChange:setSidebarCollapsed}),/*#__PURE__*/_jsxs(\"div\",{className:`flex-1 flex flex-col bg-gray-50 dark:bg-dark-primary transition-all duration-500 ease-out relative ${sidebarCollapsed?\"md:ml-14\":\"md:ml-64\"}`,children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex-1 overflow-y-auto px-4 md:px-6 py-4 min-h-0 bg-gray-50 dark:bg-dark-primary transition-all duration-300 pt-4 pb-40\",children:/*#__PURE__*/_jsx(\"div\",{className:\"max-w-4xl mx-auto space-y-6\",children:allMessages.length===0&&!messagesLoading?/*#__PURE__*/// 빈 상태 - 새 대화 시작\n_jsx(\"div\",{className:\"flex flex-col items-center justify-center min-h-[calc(100vh-280px)]\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white dark:bg-dark-secondary rounded-2xl shadow-md p-8 max-w-3xl w-full mx-auto transition-colors duration-300\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-center mb-6\",children:/*#__PURE__*/_jsx(\"div\",{className:\"bg-blue-100 dark:bg-dark-tertiary p-3 rounded-full\",children:/*#__PURE__*/_jsx(ChatBubbleLeftRightIcon,{className:\"h-8 w-8 text-blue-600 dark:text-blue-400\"})})}),/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-semibold text-center text-gray-800 dark:text-white mb-4\",children:\"AI \\uD5E4\\uB4DC\\uB77C\\uC778 \\uC5B4\\uC2DC\\uC2A4\\uD134\\uD2B8\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 dark:text-gray-300 text-center mb-6\",children:\"\\uBCF8\\uBB38\\uC744 \\uC785\\uB825\\uD558\\uBA74 AI\\uAC00 \\uCD5C\\uC801\\uC758 \\uD5E4\\uB4DC\\uB77C\\uC778\\uC744 \\uC81C\\uC548\\uD574 \\uB4DC\\uB9BD\\uB2C8\\uB2E4.\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-start p-3 bg-gray-50 dark:bg-dark-tertiary rounded-lg\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"mr-3 mt-1\",children:/*#__PURE__*/_jsx(SparklesIcon,{className:\"h-5 w-5 text-blue-500 dark:text-blue-400\"})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-700 dark:text-gray-300\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:\"\\uC2DC\\uC791\\uD558\\uB294 \\uBC29\\uBC95:\"}),\" \",\"\\uC544\\uB798 \\uC785\\uB825\\uCC3D\\uC5D0 \\uBCF8\\uBB38\\uC744 \\uBD99\\uC5EC\\uB123\\uACE0 \\uC804\\uC1A1 \\uBC84\\uD2BC\\uC744 \\uD074\\uB9AD\\uD558\\uC138\\uC694\"]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-start p-3 bg-gray-50 dark:bg-dark-tertiary rounded-lg\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"mr-3 mt-1\",children:/*#__PURE__*/_jsx(SparklesIcon,{className:\"h-5 w-5 text-blue-500 dark:text-blue-400\"})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-700 dark:text-gray-300\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:\"\\uB300\\uD654 \\uAE30\\uB85D:\"}),\" \\uC88C\\uCE21 \\uBA54\\uB274\\uC5D0\\uC11C \\uC774\\uC804 \\uB300\\uD654\\uB97C \\uD655\\uC778\\uD558\\uACE0 \\uC774\\uC5B4\\uC11C \\uB300\\uD654\\uD560 \\uC218 \\uC788\\uC2B5\\uB2C8\\uB2E4\"]})})]})]})]})}):/*#__PURE__*/// 메시지 목록\n_jsx(\"div\",{className:\"space-y-6 pt-4\",children:allMessages.map(message=>/*#__PURE__*/_jsx(SimpleChatMessage,{message:message,onCopyMessage:handleCopyMessage,onCopyTitle:handleCopyTitle,copiedMessage:copiedMessage},message.id))})})}),/*#__PURE__*/_jsx(\"div\",{className:`absolute bottom-0 left-0 right-0 bg-gray-50 dark:bg-dark-primary border-t border-gray-200 dark:border-gray-700 transition-all duration-500`,children:/*#__PURE__*/_jsxs(\"div\",{className:\"w-full max-w-4xl mx-auto px-4 md:px-6 py-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"w-full rounded-2xl bg-white dark:bg-[#2E333D] border border-gray-200 dark:border-transparent shadow-sm dark:shadow-none transition-all duration-200\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-3 px-5 py-4\",children:[/*#__PURE__*/_jsx(\"textarea\",{value:inputValue,onChange:e=>handleInputChange(e.target.value),onKeyPress:handleKeyPress,placeholder:isGenerating?\"생성 중입니다...\":\"기사 본문을 입력하세요...\",className:\"flex-1 resize-none bg-transparent text-gray-900 dark:text-gray-100 placeholder-gray-500 dark:placeholder-gray-400 focus:outline-none appearance-none\",rows:1,style:{height:`${Math.max(inputHeight||24,24)}px`,minHeight:\"24px\",maxHeight:\"200px\",lineHeight:\"1.5\",overflowY:inputHeight>120?\"auto\":\"hidden\"},disabled:isGenerating}),isGenerating?/*#__PURE__*/_jsx(\"button\",{onClick:handleStopGeneration,className:\"shrink-0 rounded-full p-2.5 bg-red-500 hover:bg-red-600 text-white transition-all duration-200\",children:/*#__PURE__*/_jsx(StopIcon,{className:\"w-4 h-4\"})}):/*#__PURE__*/_jsx(\"button\",{onClick:handleSendMessage,disabled:!inputValue.trim(),className:`shrink-0 rounded-full p-2.5 transition-all duration-200 ${inputValue.trim()?\"bg-[#5E89FF] hover:bg-[#4A7BFF] text-white\":\"bg-gray-300 dark:bg-gray-600 text-gray-500 dark:text-gray-400 cursor-not-allowed\"}`,children:/*#__PURE__*/_jsx(PaperAirplaneIcon,{className:\"w-4 h-4\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between px-5 pb-3 pt-1\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"scale-90 origin-left\",children:/*#__PURE__*/_jsx(ModelSelector,{selectedModel:selectedModel,onModelChange:setSelectedModel})}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-xs text-gray-500 dark:text-gray-400\",children:[inputValue.length,\"\\uC790\"]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center gap-1.5\",children:wsConnecting?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-1.5 h-1.5 bg-yellow-500 rounded-full animate-pulse\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-xs text-yellow-600 dark:text-yellow-400\",children:\"\\uC5F0\\uACB0 \\uC911\"})]}):wsConnected?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-1.5 h-1.5 bg-green-500 rounded-full animate-pulse\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-xs text-green-600 dark:text-green-400\",children:\"\\uC2E4\\uC2DC\\uAC04 \\uC2A4\\uD2B8\\uB9AC\\uBC0D\"})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-1.5 h-1.5 bg-gray-400 rounded-full\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-xs text-gray-500 dark:text-gray-400\",children:\"\\uC77C\\uBC18 \\uBAA8\\uB4DC\"})]})})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-center mt-4\",children:/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-500 dark:text-gray-400\",children:\"AI\\uB294 \\uC2E4\\uC218\\uB97C \\uD560 \\uC218 \\uC788\\uC2B5\\uB2C8\\uB2E4. \\uC911\\uC694\\uD55C \\uC815\\uBCF4\\uB294 \\uC7AC\\uCC28 \\uD655\\uC778\\uD558\\uC138\\uC694.\"})})]})})]})]});};export default ChatWindow;","map":{"version":3,"names":["React","useState","useCallback","ChatBubbleLeftRightIcon","SparklesIcon","PaperAirplaneIcon","StopIcon","ConversationDrawer","ModelSelector","useChat","useMessages","useConversations","useConversationContext","useAuth","SimpleChatMessage","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","ChatWindow","_ref","projectId","projectName","promptCards","sidebarCollapsed","setSidebarCollapsed","user","currentConversationId","addMessage","setCurrentConversation","createConversation","messages","historicalMessages","loading","messagesLoading","console","log","currentConversationIdType","isCurrentConversationIdNull","chatMessages","inputValue","handleInputChange","copiedMessage","isGenerating","inputHeight","handleSendMessage","originalHandleSendMessage","handleStopGeneration","handleKeyPress","handleCopyMessage","handleCopyTitle","wsConnected","wsConnecting","selectedModel","setSelectedModel","allMessages","inputValueLength","length","trim","conversationIdToUse","newConversation","newConversationId","id","Promise","resolve","setTimeout","error","className","children","onCollapsedChange","map","message","onCopyMessage","onCopyTitle","value","onChange","e","target","onKeyPress","placeholder","rows","style","height","Math","max","minHeight","maxHeight","lineHeight","overflowY","disabled","onClick","onModelChange"],"sources":["/Users/yeong-gwang/Documents/work/서울경제신문/dev/nexus/title_generator_ver1/frontend/src/components/chat/ChatWindow.js"],"sourcesContent":["import React, { useState, useCallback } from \"react\";\nimport { ChatBubbleLeftRightIcon, SparklesIcon, PaperAirplaneIcon, StopIcon } from \"@heroicons/react/24/outline\";\nimport ConversationDrawer from \"./ConversationDrawer\";\nimport ModelSelector from \"../ModelSelector\";\nimport { useChat } from \"../../hooks/useChat\";\nimport { useMessages } from \"../../hooks/useMessages\";\nimport { useConversations } from \"../../hooks/useConversations\";\nimport { useConversationContext } from \"../../contexts/ConversationContext\";\nimport { useAuth } from \"../../contexts/AuthContext\";\nimport SimpleChatMessage from \"../SimpleChatMessage\";\n\nconst ChatWindow = ({ projectId, projectName, promptCards = [] }) => {\n  const [sidebarCollapsed, setSidebarCollapsed] = useState(false);\n\n  // Auth context for user info\n  const { user } = useAuth();\n\n  // Conversation context\n  const { currentConversationId, addMessage, setCurrentConversation } = useConversationContext();\n  const { createConversation } = useConversations();\n\n  // Messages hook for current conversation\n  const {\n    messages: historicalMessages,\n    loading: messagesLoading,\n  } = useMessages(currentConversationId);\n\n  // Chat hook for sending messages\n  console.log(\"🔍 [DEBUG] ChatWindow - useChat 호출:\", {\n    projectId,\n    projectName,\n    currentConversationId,\n    currentConversationIdType: typeof currentConversationId,\n    isCurrentConversationIdNull: currentConversationId === null,\n  });\n  \n  const {\n    messages: chatMessages,\n    inputValue,\n    handleInputChange,\n    copiedMessage,\n    isGenerating,\n    inputHeight,\n    handleSendMessage: originalHandleSendMessage,\n    handleStopGeneration,\n    handleKeyPress,\n    handleCopyMessage,\n    handleCopyTitle,\n    wsConnected,\n    wsConnecting,\n    selectedModel,\n    setSelectedModel,\n  } = useChat(projectId, projectName, promptCards, currentConversationId);\n\n  // 통합된 메시지 목록 (과거 메시지 + 현재 세션 메시지)\n  const allMessages = [...historicalMessages, ...chatMessages];\n\n  // 메시지 전송 핸들러 - 대화 생성 후 전송\n  const handleSendMessage = useCallback(async () => {\n    console.log(\"🔍 [DEBUG] ChatWindow handleSendMessage - 전송 시작:\", {\n      currentConversationId,\n      inputValueLength: inputValue?.length,\n      isGenerating,\n    });\n    \n    if (!inputValue.trim() || isGenerating) return;\n\n    // 현재 대화 ID가 없으면 새 대화 생성\n    let conversationIdToUse = currentConversationId;\n    if (!conversationIdToUse) {\n      console.log(\"🔍 [DEBUG] 대화 ID가 없음 - 새 대화 생성 시작\");\n      try {\n        const newConversation = await createConversation(\"새 대화\");\n        console.log(\"🔍 [DEBUG] 새 대화 생성 완료:\", {\n          newConversationId: newConversation?.id,\n          newConversation,\n        });\n        conversationIdToUse = newConversation.id;\n        setCurrentConversation(conversationIdToUse);\n        \n        // 상태 업데이트를 위한 짧은 대기\n        await new Promise(resolve => setTimeout(resolve, 100));\n      } catch (error) {\n        console.error(\"🔍 [DEBUG] 대화 생성 실패:\", error);\n        // 실패해도 계속 진행 (로컬 모드)\n      }\n    }\n\n    console.log(\"🔍 [DEBUG] 메시지 전송 시 conversationId:\", conversationIdToUse);\n\n    // 원래 핸들러 호출\n    await originalHandleSendMessage();\n  }, [\n    inputValue,\n    isGenerating,\n    currentConversationId,\n    allMessages,\n    promptCards,\n    addMessage,\n    originalHandleSendMessage,\n    projectId,\n    user?.id,\n  ]);\n\n  return (\n    <div className=\"flex h-full overflow-hidden\">\n      {/* 대화 드로어 */}\n      <ConversationDrawer onCollapsedChange={setSidebarCollapsed} />\n\n      {/* 메인 채팅 영역 */}\n      <div className={`flex-1 flex flex-col bg-gray-50 dark:bg-dark-primary transition-all duration-500 ease-out relative ${\n        sidebarCollapsed ? \"md:ml-14\" : \"md:ml-64\"\n      }`}>\n        {/* 메시지 영역 */}\n        <div className=\"flex-1 overflow-y-auto px-4 md:px-6 py-4 min-h-0 bg-gray-50 dark:bg-dark-primary transition-all duration-300 pt-4 pb-40\">\n          <div className=\"max-w-4xl mx-auto space-y-6\">\n            {allMessages.length === 0 && !messagesLoading ? (\n              // 빈 상태 - 새 대화 시작\n              <div className=\"flex flex-col items-center justify-center min-h-[calc(100vh-280px)]\">\n                <div className=\"bg-white dark:bg-dark-secondary rounded-2xl shadow-md p-8 max-w-3xl w-full mx-auto transition-colors duration-300\">\n                  <div className=\"flex justify-center mb-6\">\n                    <div className=\"bg-blue-100 dark:bg-dark-tertiary p-3 rounded-full\">\n                      <ChatBubbleLeftRightIcon className=\"h-8 w-8 text-blue-600 dark:text-blue-400\" />\n                    </div>\n                  </div>\n                  <h2 className=\"text-xl font-semibold text-center text-gray-800 dark:text-white mb-4\">\n                    AI 헤드라인 어시스턴트\n                  </h2>\n                  <p className=\"text-gray-600 dark:text-gray-300 text-center mb-6\">\n                    본문을 입력하면 AI가 최적의 헤드라인을 제안해 드립니다.\n                  </p>\n\n                  <div className=\"space-y-4\">\n                    <div className=\"flex items-start p-3 bg-gray-50 dark:bg-dark-tertiary rounded-lg\">\n                      <div className=\"mr-3 mt-1\">\n                        <SparklesIcon className=\"h-5 w-5 text-blue-500 dark:text-blue-400\" />\n                      </div>\n                      <div>\n                        <p className=\"text-sm text-gray-700 dark:text-gray-300\">\n                          <span className=\"font-medium\">시작하는 방법:</span>{\" \"}\n                          아래 입력창에 본문을 붙여넣고 전송 버튼을 클릭하세요\n                        </p>\n                      </div>\n                    </div>\n                    <div className=\"flex items-start p-3 bg-gray-50 dark:bg-dark-tertiary rounded-lg\">\n                      <div className=\"mr-3 mt-1\">\n                        <SparklesIcon className=\"h-5 w-5 text-blue-500 dark:text-blue-400\" />\n                      </div>\n                      <div>\n                        <p className=\"text-sm text-gray-700 dark:text-gray-300\">\n                          <span className=\"font-medium\">대화 기록:</span> 좌측\n                          메뉴에서 이전 대화를 확인하고 이어서 대화할 수\n                          있습니다\n                        </p>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            ) : (\n              // 메시지 목록\n              <div className=\"space-y-6 pt-4\">\n                {allMessages.map((message) => (\n                  <SimpleChatMessage\n                    key={message.id}\n                    message={message}\n                    onCopyMessage={handleCopyMessage}\n                    onCopyTitle={handleCopyTitle}\n                    copiedMessage={copiedMessage}\n                  />\n                ))}\n              </div>\n            )}\n          </div>\n        </div>\n\n        {/* 고정된 하단 입력 영역 - DeepSeek 스타일 */}\n        <div className={`absolute bottom-0 left-0 right-0 bg-gray-50 dark:bg-dark-primary border-t border-gray-200 dark:border-gray-700 transition-all duration-500`}>\n          <div className=\"w-full max-w-4xl mx-auto px-4 md:px-6 py-6\">\n            {/* 둥근 모서리 통짜 입력창 */}\n            <div className=\"w-full rounded-2xl bg-white dark:bg-[#2E333D] border border-gray-200 dark:border-transparent shadow-sm dark:shadow-none transition-all duration-200\">\n              {/* 메인 입력 영역 */}\n              <div className=\"flex items-center gap-3 px-5 py-4\">\n                {/* 글 입력 영역 */}\n                <textarea\n                  value={inputValue}\n                  onChange={(e) => handleInputChange(e.target.value)}\n                  onKeyPress={handleKeyPress}\n                  placeholder={\n                    isGenerating\n                      ? \"생성 중입니다...\"\n                      : \"기사 본문을 입력하세요...\"\n                  }\n                  className=\"flex-1 resize-none bg-transparent text-gray-900 dark:text-gray-100 placeholder-gray-500 dark:placeholder-gray-400 focus:outline-none appearance-none\"\n                  rows={1}\n                  style={{\n                    height: `${Math.max(inputHeight || 24, 24)}px`,\n                    minHeight: \"24px\",\n                    maxHeight: \"200px\",\n                    lineHeight: \"1.5\",\n                    overflowY: inputHeight > 120 ? \"auto\" : \"hidden\"\n                  }}\n                  disabled={isGenerating}\n                />\n\n                {/* 전송/중단 버튼 */}\n                {isGenerating ? (\n                  <button\n                    onClick={handleStopGeneration}\n                    className=\"shrink-0 rounded-full p-2.5 bg-red-500 hover:bg-red-600 text-white transition-all duration-200\"\n                  >\n                    <StopIcon className=\"w-4 h-4\" />\n                  </button>\n                ) : (\n                  <button\n                    onClick={handleSendMessage}\n                    disabled={!inputValue.trim()}\n                    className={`shrink-0 rounded-full p-2.5 transition-all duration-200 ${\n                      inputValue.trim()\n                        ? \"bg-[#5E89FF] hover:bg-[#4A7BFF] text-white\"\n                        : \"bg-gray-300 dark:bg-gray-600 text-gray-500 dark:text-gray-400 cursor-not-allowed\"\n                    }`}\n                  >\n                    <PaperAirplaneIcon className=\"w-4 h-4\" />\n                  </button>\n                )}\n              </div>\n\n              {/* 하단 정보 영역 - 입력창 안에 위치 */}\n              <div className=\"flex items-center justify-between px-5 pb-3 pt-1\">\n                <div className=\"flex items-center gap-3\">\n                  {/* 모델 선택기 */}\n                  <div className=\"scale-90 origin-left\">\n                    <ModelSelector\n                      selectedModel={selectedModel}\n                      onModelChange={setSelectedModel}\n                    />\n                  </div>\n                  \n                  {/* 글자 수 표시 */}\n                  <div className=\"text-xs text-gray-500 dark:text-gray-400\">\n                    {inputValue.length}자\n                  </div>\n                </div>\n\n                {/* 연결 상태 */}\n                <div className=\"flex items-center gap-1.5\">\n                  {wsConnecting ? (\n                    <>\n                      <div className=\"w-1.5 h-1.5 bg-yellow-500 rounded-full animate-pulse\"></div>\n                      <span className=\"text-xs text-yellow-600 dark:text-yellow-400\">연결 중</span>\n                    </>\n                  ) : wsConnected ? (\n                    <>\n                      <div className=\"w-1.5 h-1.5 bg-green-500 rounded-full animate-pulse\"></div>\n                      <span className=\"text-xs text-green-600 dark:text-green-400\">실시간 스트리밍</span>\n                    </>\n                  ) : (\n                    <>\n                      <div className=\"w-1.5 h-1.5 bg-gray-400 rounded-full\"></div>\n                      <span className=\"text-xs text-gray-500 dark:text-gray-400\">일반 모드</span>\n                    </>\n                  )}\n                </div>\n              </div>\n            </div>\n            \n            {/* 하단 경고 문구 */}\n            <div className=\"text-center mt-4\">\n              <p className=\"text-xs text-gray-500 dark:text-gray-400\">\n                AI는 실수를 할 수 있습니다. 중요한 정보는 재차 확인하세요.\n              </p>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default ChatWindow;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}