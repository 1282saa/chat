{"ast":null,"code":"import React,{useState}from\"react\";import{useNavigate}from\"react-router-dom\";import{PaperAirplaneIcon,DocumentPlusIcon,XMarkIcon,ChatBubbleLeftRightIcon,SparklesIcon,StopIcon}from\"@heroicons/react/24/outline\";import{useChat}from\"../hooks/useChat\";import AnimatedChatMessage from\"./AnimatedChatMessage\";import ModelSelector from\"./ModelSelector\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ChatInterface=_ref=>{let{projectId,projectName,promptCards=[]}=_ref;const navigate=useNavigate();const[uploadedFile,setUploadedFile]=useState(null);const[dragOver,setDragOver]=useState(false);const{messages,inputValue,setInputValue,handleInputChange,copiedMessage,isGenerating,canSendMessage,messagesEndRef,inputRef,inputHeight,handleSendMessage,handleStopGeneration,handleKeyPress,handleCopyMessage,handleCopyTitle,wsConnected,wsConnecting,wsError,// 스크롤 관련 추가\nscrollContainerRef,handleScroll,isUserScrolling,// 모델 선택 관련 추가\nselectedModel,setSelectedModel}=useChat(projectId,projectName,promptCards);const handleFileUpload=event=>{var _event$target$files;const file=(_event$target$files=event.target.files)===null||_event$target$files===void 0?void 0:_event$target$files[0];if(file&&file.type===\"text/plain\"){const reader=new FileReader();reader.onload=e=>{var _e$target;const content=((_e$target=e.target)===null||_e$target===void 0?void 0:_e$target.result)||\"\";handleInputChange(content);// 높이 자동 조절\nsetUploadedFile(file);};reader.readAsText(file);}};const handleDrop=event=>{event.preventDefault();setDragOver(false);const files=event.dataTransfer.files;if(files.length>0){const file=files[0];if(file.type===\"text/plain\"){const reader=new FileReader();reader.onload=e=>{var _e$target2;const content=((_e$target2=e.target)===null||_e$target2===void 0?void 0:_e$target2.result)||\"\";handleInputChange(content);// 높이 자동 조절\nsetUploadedFile(file);};reader.readAsText(file);}}};const handleDragOver=event=>{event.preventDefault();setDragOver(true);};const handleDragLeave=()=>{setDragOver(false);};const removeFile=()=>{setUploadedFile(null);handleInputChange(\"\");// 높이 초기화\n};return/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col h-full bg-gray-50 dark:bg-dark-primary transition-colors duration-300\",children:[/*#__PURE__*/_jsx(\"div\",{ref:scrollContainerRef,onScroll:handleScroll,className:\"flex-1 overflow-y-auto px-6 py-6 min-h-0 bg-gray-50 dark:bg-dark-primary\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-4xl mx-auto space-y-6\",children:[messages.length===0?/*#__PURE__*/_jsx(\"div\",{className:\"flex flex-col items-center justify-center py-24 mt-12\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white dark:bg-dark-secondary card-dark rounded-2xl shadow-md p-8 max-w-2xl w-full transition-colors duration-300\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-center mb-6\",children:/*#__PURE__*/_jsx(\"div\",{className:\"bg-blue-100 dark:bg-dark-tertiary p-3 rounded-full\",children:/*#__PURE__*/_jsx(ChatBubbleLeftRightIcon,{className:\"h-8 w-8 text-blue-600 dark:text-blue-400\"})})}),/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-semibold text-center text-gray-800 dark:text-white mb-4\",children:\"AI \\uD5E4\\uB4DC\\uB77C\\uC778 \\uC5B4\\uC2DC\\uC2A4\\uD134\\uD2B8\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 dark:text-gray-300 text-center mb-6\",children:\"\\uBCF8\\uBB38\\uC744 \\uC785\\uB825\\uD558\\uBA74 AI\\uAC00 \\uCD5C\\uC801\\uC758 \\uD5E4\\uB4DC\\uB77C\\uC778\\uC744 \\uC81C\\uC548\\uD574 \\uB4DC\\uB9BD\\uB2C8\\uB2E4.\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-start p-3 bg-gray-50 dark:bg-dark-tertiary rounded-lg\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"mr-3 mt-1\",children:/*#__PURE__*/_jsx(SparklesIcon,{className:\"h-5 w-5 text-blue-500 dark:text-blue-400\"})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-700 dark:text-gray-300\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:\"\\uC2DC\\uC791\\uD558\\uB294 \\uBC29\\uBC95:\"}),\" \\uC544\\uB798 \\uC785\\uB825\\uCC3D\\uC5D0 \\uBCF8\\uBB38\\uC744 \\uBD99\\uC5EC\\uB123\\uACE0 \\uC804\\uC1A1 \\uBC84\\uD2BC\\uC744 \\uD074\\uB9AD\\uD558\\uC138\\uC694\"]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-start p-3 bg-gray-50 dark:bg-dark-tertiary rounded-lg\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"mr-3 mt-1\",children:/*#__PURE__*/_jsx(SparklesIcon,{className:\"h-5 w-5 text-blue-500 dark:text-blue-400\"})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-700 dark:text-gray-300\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:\"\\uD504\\uB86C\\uD504\\uD2B8 \\uCE74\\uB4DC:\"}),\" \",\"\\uAD00\\uB9AC\\uC790 \\uBAA8\\uB4DC\\uC5D0\\uC11C \\uD504\\uB86C\\uD504\\uD2B8 \\uCE74\\uB4DC\\uB97C \\uC791\\uC131\\uD558\\uC5EC \\uC81C\\uBAA9\\uC744 \\uC0DD\\uC131\\uD558\\uC138\\uC694\"]})})]})]})]})}):messages.map(message=>/*#__PURE__*/_jsx(AnimatedChatMessage,{message:message,onCopyMessage:handleCopyMessage,onCopyTitle:handleCopyTitle,copiedMessage:copiedMessage},message.id)),/*#__PURE__*/_jsx(\"div\",{ref:messagesEndRef})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"flex-shrink-0 px-6 py-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-4xl mx-auto\",children:[uploadedFile&&/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3 p-3 bg-blue-50 dark:bg-dark-tertiary border border-blue-200 dark:border-dark rounded-lg flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2\",children:[/*#__PURE__*/_jsx(DocumentPlusIcon,{className:\"h-4 w-4 text-blue-600 dark:text-blue-400\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm text-blue-700 dark:text-white\",children:uploadedFile.name})]}),/*#__PURE__*/_jsx(\"button\",{onClick:removeFile,className:\"text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300 p-1\",children:/*#__PURE__*/_jsx(XMarkIcon,{className:\"h-4 w-4\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white dark:bg-dark-secondary card-dark rounded-[20px] shadow-md p-4 relative transition-colors duration-300 focus:outline-none flex flex-col gap-6 border-0 dark:border-0\",style:{minHeight:Math.max(128,inputHeight+80),transition:\"min-height 0.2s ease-in-out\"},onDrop:handleDrop,onDragOver:handleDragOver,onDragLeave:handleDragLeave,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1 relative focus:outline-none\",children:[/*#__PURE__*/_jsx(\"textarea\",{ref:inputRef,value:inputValue,onChange:e=>handleInputChange(e.target.value),onKeyPress:handleKeyPress,placeholder:isGenerating?\"생성 중입니다...\":\"기사 본문을 입력하세요...\",className:`w-full pr-14 pl-2 border-0 focus:outline-none resize-none transition-all duration-300 ${dragOver?\"bg-blue-50 dark:bg-dark-tertiary\":isGenerating?\"bg-gray-50 dark:bg-dark-primary\":\"bg-white dark:bg-dark-secondary text-gray-900 dark:text-white\"}`,rows:1,style:{height:`${inputHeight}px`,minHeight:\"24px\",maxHeight:\"400px\",lineHeight:\"1.4\",paddingTop:\"0px\",paddingBottom:\"6px\",overflowY:inputHeight>200?\"auto\":\"hidden\",whiteSpace:\"pre-wrap\",fontSize:\"16px\",fontWeight:\"400\",color:isGenerating?\"var(--text-muted)\":\"inherit\",outline:\"none\",boxShadow:\"none\"},disabled:isGenerating}),/*#__PURE__*/_jsxs(\"div\",{className:\"absolute right-3 bottom-0 flex items-center gap-2\",style:{bottom:\"2px\"},children:[isGenerating&&/*#__PURE__*/_jsx(\"button\",{onClick:handleStopGeneration,className:\"flex-shrink-0 bg-red-600 hover:bg-red-700 text-white p-2 rounded-full transition-colors flex items-center justify-center\",style:{width:\"32px\",height:\"32px\"},title:\"\\uC0DD\\uC131 \\uC911\\uB2E8\",children:/*#__PURE__*/_jsx(StopIcon,{className:\"h-4 w-4\"})}),/*#__PURE__*/_jsx(\"button\",{onClick:handleSendMessage,disabled:!inputValue.trim()||isGenerating,className:\"flex-shrink-0 bg-blue-600 hover:bg-blue-700 text-white p-2 rounded-full disabled:opacity-70 disabled:cursor-not-allowed transition-colors flex items-center justify-center\",style:{width:\"32px\",height:\"32px\"},title:isGenerating?\"생성 중...\":wsConnected?\"실시간 스트리밍 사용 가능\":\"일반 모드 (WebSocket 연결 안됨)\",children:isGenerating?/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-5 w-5 border-b-2 border-white\"}):/*#__PURE__*/_jsx(PaperAirplaneIcon,{className:\"h-5 w-5\"})})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center gap-2 text-xs text-gray-400 dark:text-dark-muted\",children:/*#__PURE__*/_jsxs(\"span\",{children:[inputValue.length,\"\\uC790\"]})}),/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center gap-2\",children:/*#__PURE__*/_jsx(ModelSelector,{selectedModel:selectedModel,onModelChange:setSelectedModel})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-3 text-xs\",children:[isUserScrolling&&/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-1 text-blue-600 dark:text-blue-400\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"\\uD83D\\uDCDC\"}),/*#__PURE__*/_jsx(\"span\",{children:\"\\uC790\\uC720 \\uC2A4\\uD06C\\uB864\"})]}),wsConnecting?/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-1 text-yellow-600 dark:text-yellow-400\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-3 w-3 border-b-2 border-yellow-600\"}),/*#__PURE__*/_jsx(\"span\",{children:\"\\uC5F0\\uACB0 \\uC911...\"})]}):wsConnected?/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-1 text-green-600 dark:text-green-400\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-2 h-2 bg-green-600 rounded-full\"}),/*#__PURE__*/_jsx(\"span\",{children:\"\\uC2E4\\uC2DC\\uAC04 \\uC2A4\\uD2B8\\uB9AC\\uBC0D\"})]}):/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-1 text-gray-500 dark:text-dark-muted\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-2 h-2 bg-gray-400 dark:bg-gray-500 rounded-full\"}),/*#__PURE__*/_jsx(\"span\",{children:\"\\uC77C\\uBC18 \\uBAA8\\uB4DC\"})]}),wsError&&/*#__PURE__*/_jsx(\"div\",{className:\"text-red-500 dark:text-red-400 text-xs\",title:wsError,children:\"\\u26A0\\uFE0F\"})]})]})]})]})})]});};export default ChatInterface;","map":{"version":3,"names":["React","useState","useNavigate","PaperAirplaneIcon","DocumentPlusIcon","XMarkIcon","ChatBubbleLeftRightIcon","SparklesIcon","StopIcon","useChat","AnimatedChatMessage","ModelSelector","jsx","_jsx","jsxs","_jsxs","ChatInterface","_ref","projectId","projectName","promptCards","navigate","uploadedFile","setUploadedFile","dragOver","setDragOver","messages","inputValue","setInputValue","handleInputChange","copiedMessage","isGenerating","canSendMessage","messagesEndRef","inputRef","inputHeight","handleSendMessage","handleStopGeneration","handleKeyPress","handleCopyMessage","handleCopyTitle","wsConnected","wsConnecting","wsError","scrollContainerRef","handleScroll","isUserScrolling","selectedModel","setSelectedModel","handleFileUpload","event","_event$target$files","file","target","files","type","reader","FileReader","onload","e","_e$target","content","result","readAsText","handleDrop","preventDefault","dataTransfer","length","_e$target2","handleDragOver","handleDragLeave","removeFile","className","children","ref","onScroll","map","message","onCopyMessage","onCopyTitle","id","name","onClick","style","minHeight","Math","max","transition","onDrop","onDragOver","onDragLeave","value","onChange","onKeyPress","placeholder","rows","height","maxHeight","lineHeight","paddingTop","paddingBottom","overflowY","whiteSpace","fontSize","fontWeight","color","outline","boxShadow","disabled","bottom","width","title","trim","onModelChange"],"sources":["/Users/yeong-gwang/Documents/work/서울경제신문/ai_제목달기(수)_완성본_스트리밍구현 복사본/frontend/src/components/ChatInterface.js"],"sourcesContent":["import React, { useState } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport {\n  PaperAirplaneIcon,\n  DocumentPlusIcon,\n  XMarkIcon,\n  ChatBubbleLeftRightIcon,\n  SparklesIcon,\n  StopIcon,\n} from \"@heroicons/react/24/outline\";\nimport { useChat } from \"../hooks/useChat\";\nimport AnimatedChatMessage from \"./AnimatedChatMessage\";\nimport ModelSelector from \"./ModelSelector\";\n\nconst ChatInterface = ({ projectId, projectName, promptCards = [] }) => {\n  const navigate = useNavigate();\n  const [uploadedFile, setUploadedFile] = useState(null);\n  const [dragOver, setDragOver] = useState(false);\n\n  const {\n    messages,\n    inputValue,\n    setInputValue,\n    handleInputChange,\n    copiedMessage,\n    isGenerating,\n    canSendMessage,\n    messagesEndRef,\n    inputRef,\n    inputHeight,\n    handleSendMessage,\n    handleStopGeneration,\n    handleKeyPress,\n    handleCopyMessage,\n    handleCopyTitle,\n    wsConnected,\n    wsConnecting,\n    wsError,\n    // 스크롤 관련 추가\n    scrollContainerRef,\n    handleScroll,\n    isUserScrolling,\n    // 모델 선택 관련 추가\n    selectedModel,\n    setSelectedModel,\n  } = useChat(projectId, projectName, promptCards);\n\n  const handleFileUpload = (event) => {\n    const file = event.target.files?.[0];\n    if (file && file.type === \"text/plain\") {\n      const reader = new FileReader();\n      reader.onload = (e) => {\n        const content = e.target?.result || \"\";\n        handleInputChange(content); // 높이 자동 조절\n        setUploadedFile(file);\n      };\n      reader.readAsText(file);\n    }\n  };\n\n  const handleDrop = (event) => {\n    event.preventDefault();\n    setDragOver(false);\n    const files = event.dataTransfer.files;\n    if (files.length > 0) {\n      const file = files[0];\n      if (file.type === \"text/plain\") {\n        const reader = new FileReader();\n        reader.onload = (e) => {\n          const content = e.target?.result || \"\";\n          handleInputChange(content); // 높이 자동 조절\n          setUploadedFile(file);\n        };\n        reader.readAsText(file);\n      }\n    }\n  };\n\n  const handleDragOver = (event) => {\n    event.preventDefault();\n    setDragOver(true);\n  };\n\n  const handleDragLeave = () => {\n    setDragOver(false);\n  };\n\n  const removeFile = () => {\n    setUploadedFile(null);\n    handleInputChange(\"\"); // 높이 초기화\n  };\n\n  return (\n    <div className=\"flex flex-col h-full bg-gray-50 dark:bg-dark-primary transition-colors duration-300\">\n      {/* 메시지 영역 */}\n      <div\n        ref={scrollContainerRef}\n        onScroll={handleScroll}\n        className=\"flex-1 overflow-y-auto px-6 py-6 min-h-0 bg-gray-50 dark:bg-dark-primary\"\n      >\n        <div className=\"max-w-4xl mx-auto space-y-6\">\n          {messages.length === 0 ? (\n            <div className=\"flex flex-col items-center justify-center py-24 mt-12\">\n              <div className=\"bg-white dark:bg-dark-secondary card-dark rounded-2xl shadow-md p-8 max-w-2xl w-full transition-colors duration-300\">\n                <div className=\"flex justify-center mb-6\">\n                  <div className=\"bg-blue-100 dark:bg-dark-tertiary p-3 rounded-full\">\n                    <ChatBubbleLeftRightIcon className=\"h-8 w-8 text-blue-600 dark:text-blue-400\" />\n                  </div>\n                </div>\n                <h2 className=\"text-xl font-semibold text-center text-gray-800 dark:text-white mb-4\">\n                  AI 헤드라인 어시스턴트\n                </h2>\n                <p className=\"text-gray-600 dark:text-gray-300 text-center mb-6\">\n                  본문을 입력하면 AI가 최적의 헤드라인을 제안해 드립니다.\n                </p>\n\n                <div className=\"space-y-4\">\n                  <div className=\"flex items-start p-3 bg-gray-50 dark:bg-dark-tertiary rounded-lg\">\n                    <div className=\"mr-3 mt-1\">\n                      <SparklesIcon className=\"h-5 w-5 text-blue-500 dark:text-blue-400\" />\n                    </div>\n                    <div>\n                      <p className=\"text-sm text-gray-700 dark:text-gray-300\">\n                        <span className=\"font-medium\">시작하는 방법:</span> 아래\n                        입력창에 본문을 붙여넣고 전송 버튼을 클릭하세요\n                      </p>\n                    </div>\n                  </div>\n\n                  <div className=\"flex items-start p-3 bg-gray-50 dark:bg-dark-tertiary rounded-lg\">\n                    <div className=\"mr-3 mt-1\">\n                      <SparklesIcon className=\"h-5 w-5 text-blue-500 dark:text-blue-400\" />\n                    </div>\n                    <div>\n                      <p className=\"text-sm text-gray-700 dark:text-gray-300\">\n                        <span className=\"font-medium\">프롬프트 카드:</span>{\" \"}\n                        관리자 모드에서 프롬프트 카드를 작성하여 제목을\n                        생성하세요\n                      </p>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n          ) : (\n            messages.map((message) => (\n              <AnimatedChatMessage\n                key={message.id}\n                message={message}\n                onCopyMessage={handleCopyMessage}\n                onCopyTitle={handleCopyTitle}\n                copiedMessage={copiedMessage}\n              />\n            ))\n          )}\n          <div ref={messagesEndRef} />\n        </div>\n      </div>\n\n      {/* 입력 영역 */}\n      <div className=\"flex-shrink-0 px-6 py-4\">\n        <div className=\"max-w-4xl mx-auto\">\n          {/* 업로드된 파일 표시 */}\n          {uploadedFile && (\n            <div className=\"mb-3 p-3 bg-blue-50 dark:bg-dark-tertiary border border-blue-200 dark:border-dark rounded-lg flex items-center justify-between\">\n              <div className=\"flex items-center gap-2\">\n                <DocumentPlusIcon className=\"h-4 w-4 text-blue-600 dark:text-blue-400\" />\n                <span className=\"text-sm text-blue-700 dark:text-white\">\n                  {uploadedFile.name}\n                </span>\n              </div>\n              <button\n                onClick={removeFile}\n                className=\"text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300 p-1\"\n              >\n                <XMarkIcon className=\"h-4 w-4\" />\n              </button>\n            </div>\n          )}\n\n          <div\n            className=\"bg-white dark:bg-dark-secondary card-dark rounded-[20px] shadow-md p-4 relative transition-colors duration-300 focus:outline-none flex flex-col gap-6 border-0 dark:border-0\"\n            style={{\n              minHeight: Math.max(128, inputHeight + 80),\n              transition: \"min-height 0.2s ease-in-out\",\n            }}\n            onDrop={handleDrop}\n            onDragOver={handleDragOver}\n            onDragLeave={handleDragLeave}\n          >\n            <div className=\"flex-1 relative focus:outline-none\">\n              <textarea\n                ref={inputRef}\n                value={inputValue}\n                onChange={(e) => handleInputChange(e.target.value)}\n                onKeyPress={handleKeyPress}\n                placeholder={\n                  isGenerating\n                    ? \"생성 중입니다...\"\n                    : \"기사 본문을 입력하세요...\"\n                }\n                className={`w-full pr-14 pl-2 border-0 focus:outline-none resize-none transition-all duration-300 ${\n                  dragOver\n                    ? \"bg-blue-50 dark:bg-dark-tertiary\"\n                    : isGenerating\n                    ? \"bg-gray-50 dark:bg-dark-primary\"\n                    : \"bg-white dark:bg-dark-secondary text-gray-900 dark:text-white\"\n                }`}\n                rows={1}\n                style={{\n                  height: `${inputHeight}px`,\n                  minHeight: \"24px\",\n                  maxHeight: \"400px\",\n                  lineHeight: \"1.4\",\n                  paddingTop: \"0px\",\n                  paddingBottom: \"6px\",\n                  overflowY: inputHeight > 200 ? \"auto\" : \"hidden\",\n                  whiteSpace: \"pre-wrap\",\n                  fontSize: \"16px\",\n                  fontWeight: \"400\",\n                  color: isGenerating ? \"var(--text-muted)\" : \"inherit\",\n                  outline: \"none\",\n                  boxShadow: \"none\",\n                }}\n                disabled={isGenerating}\n              />\n\n              {/* 전송/중단 버튼 - 입력창 내부에 위치 */}\n              <div\n                className=\"absolute right-3 bottom-0 flex items-center gap-2\"\n                style={{ bottom: \"2px\" }}\n              >\n                {isGenerating && (\n                  <button\n                    onClick={handleStopGeneration}\n                    className=\"flex-shrink-0 bg-red-600 hover:bg-red-700 text-white p-2 rounded-full transition-colors flex items-center justify-center\"\n                    style={{ width: \"32px\", height: \"32px\" }}\n                    title=\"생성 중단\"\n                  >\n                    <StopIcon className=\"h-4 w-4\" />\n                  </button>\n                )}\n                <button\n                  onClick={handleSendMessage}\n                  disabled={!inputValue.trim() || isGenerating}\n                  className=\"flex-shrink-0 bg-blue-600 hover:bg-blue-700 text-white p-2 rounded-full disabled:opacity-70 disabled:cursor-not-allowed transition-colors flex items-center justify-center\"\n                  style={{ width: \"32px\", height: \"32px\" }}\n                  title={\n                    isGenerating\n                      ? \"생성 중...\"\n                      : wsConnected\n                      ? \"실시간 스트리밍 사용 가능\"\n                      : \"일반 모드 (WebSocket 연결 안됨)\"\n                  }\n                >\n                  {isGenerating ? (\n                    <div className=\"animate-spin rounded-full h-5 w-5 border-b-2 border-white\"></div>\n                  ) : (\n                    <PaperAirplaneIcon className=\"h-5 w-5\" />\n                  )}\n                </button>\n              </div>\n            </div>\n\n            <div className=\"flex items-center justify-between\">\n              <div className=\"flex items-center gap-4\">\n                {/* 글자 수 표시 */}\n                <div className=\"flex items-center gap-2 text-xs text-gray-400 dark:text-dark-muted\">\n                  <span>{inputValue.length}자</span>\n                </div>\n\n                {/* 모델 선택기 */}\n                <div className=\"flex items-center gap-2\">\n                  <ModelSelector\n                    selectedModel={selectedModel}\n                    onModelChange={setSelectedModel}\n                  />\n                </div>\n              </div>\n\n              {/* WebSocket 연결 상태 및 스크롤 상태 표시 */}\n              <div className=\"flex items-center gap-3 text-xs\">\n                {/* 스크롤 상태 표시 */}\n                {isUserScrolling && (\n                  <div className=\"flex items-center gap-1 text-blue-600 dark:text-blue-400\">\n                    <span>📜</span>\n                    <span>자유 스크롤</span>\n                  </div>\n                )}\n\n                {/* WebSocket 연결 상태 */}\n                {wsConnecting ? (\n                  <div className=\"flex items-center gap-1 text-yellow-600 dark:text-yellow-400\">\n                    <div className=\"animate-spin rounded-full h-3 w-3 border-b-2 border-yellow-600\"></div>\n                    <span>연결 중...</span>\n                  </div>\n                ) : wsConnected ? (\n                  <div className=\"flex items-center gap-1 text-green-600 dark:text-green-400\">\n                    <div className=\"w-2 h-2 bg-green-600 rounded-full\"></div>\n                    <span>실시간 스트리밍</span>\n                  </div>\n                ) : (\n                  <div className=\"flex items-center gap-1 text-gray-500 dark:text-dark-muted\">\n                    <div className=\"w-2 h-2 bg-gray-400 dark:bg-gray-500 rounded-full\"></div>\n                    <span>일반 모드</span>\n                  </div>\n                )}\n                {wsError && (\n                  <div\n                    className=\"text-red-500 dark:text-red-400 text-xs\"\n                    title={wsError}\n                  >\n                    ⚠️\n                  </div>\n                )}\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default ChatInterface;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}