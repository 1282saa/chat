{"ast":null,"code":"import React from\"react\";import ReactMarkdown from\"react-markdown\";import{ClipboardDocumentIcon,CheckCircleIcon,UserIcon,DocumentDuplicateIcon}from\"@heroicons/react/24/outline\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ChatMessage=_ref=>{let{message,onCopyMessage,onCopyTitle,copiedMessage}=_ref;const isUser=message.type===\"user\";return/*#__PURE__*/_jsx(\"div\",{className:`group relative ${isUser?\"ml-16 pr-6\":\"mr-16 pl-6\"} mb-6`,children:/*#__PURE__*/_jsxs(\"div\",{className:`flex ${isUser?\"justify-end\":\"justify-start\"}`,children:[/*#__PURE__*/_jsxs(\"div\",{className:`\n          max-w-[85%] rounded-2xl px-6 py-4 relative shadow-lg backdrop-blur-sm\n          ${isUser?\"bg-gradient-to-br from-blue-500 to-blue-700 text-white shadow-blue-200\":message.isError?\"bg-gradient-to-br from-red-50 to-red-100 text-red-800 border border-red-200 shadow-red-100\":message.isLoading?\"bg-gradient-to-br from-yellow-50 to-yellow-100 text-yellow-800 border border-yellow-200 shadow-yellow-100\":message.isGuidance?\"bg-gradient-to-br from-blue-50 to-blue-100 text-blue-800 border border-blue-200 shadow-blue-100\":\"bg-gradient-to-br from-white to-gray-50 text-gray-800 border border-gray-200 shadow-gray-100\"}\n        `,children:[/*#__PURE__*/_jsx(\"div\",{className:\"whitespace-pre-wrap leading-relaxed\",children:isUser?/*#__PURE__*/_jsx(\"div\",{className:\"text-base font-medium\",children:message.content}):/*#__PURE__*/_jsx(\"div\",{className:\"prose prose-base max-w-none prose-headings:text-gray-900 prose-p:text-gray-800 prose-strong:text-gray-900 prose-ul:text-gray-800 prose-li:text-gray-800\",children:/*#__PURE__*/_jsx(ReactMarkdown,{children:message.content})})}),message.titles&&/*#__PURE__*/_jsx(\"div\",{className:\"mt-3 pt-3 border-t border-gray-200\",children:/*#__PURE__*/_jsx(\"div\",{className:\"flex flex-wrap gap-2\",children:message.titles.map((title,index)=>/*#__PURE__*/_jsxs(\"button\",{onClick:()=>onCopyTitle(title,message.id,index),className:`flex items-center px-2 py-1 rounded text-xs transition-colors ${copiedMessage===`${message.id}_title_${index}`?\"bg-green-100 text-green-700\":\"bg-gray-100 hover:bg-gray-200 text-gray-700\"}`,children:[copiedMessage===`${message.id}_title_${index}`?/*#__PURE__*/_jsx(CheckCircleIcon,{className:\"h-3 w-3 mr-1\"}):/*#__PURE__*/_jsx(DocumentDuplicateIcon,{className:\"h-3 w-3 mr-1\"}),\"\\uC81C\\uBAA9 \",index+1,\" \\uBCF5\\uC0AC\"]},index))})}),!isUser&&/*#__PURE__*/_jsx(\"div\",{className:\"mt-4 flex items-center space-x-2\",children:/*#__PURE__*/_jsxs(\"button\",{onClick:()=>onCopyMessage(message.content,message.id),className:`flex items-center px-3 py-2 rounded-lg text-sm font-medium transition-all duration-200 ${copiedMessage===message.id?\"bg-green-100 text-green-700 border border-green-200 shadow-sm\":\"bg-gray-100 hover:bg-gray-200 text-gray-700 border border-gray-200 hover:shadow-md\"}`,children:[copiedMessage===message.id?/*#__PURE__*/_jsx(CheckCircleIcon,{className:\"h-4 w-4 mr-2\"}):/*#__PURE__*/_jsx(ClipboardDocumentIcon,{className:\"h-4 w-4 mr-2\"}),copiedMessage===message.id?\"복사됨!\":\"복사하기\"]})}),/*#__PURE__*/_jsx(\"div\",{className:`text-xs mt-3 font-medium ${isUser?\"text-blue-100\":\"text-gray-500\"}`,children:message.timestamp.toLocaleTimeString(\"ko-KR\",{hour:\"numeric\",minute:\"2-digit\"})}),message.isLoading&&/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center text-blue-600 mt-2\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600 mr-2\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm\",children:\"AI\\uAC00 \\uC751\\uB2F5\\uC744 \\uC0DD\\uC131\\uD558\\uACE0 \\uC788\\uC2B5\\uB2C8\\uB2E4...\"})]}),message.isError&&/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center text-red-600 mt-2\",children:/*#__PURE__*/_jsx(\"span\",{className:\"text-sm\",children:\"\\u26A0\\uFE0F \\uC624\\uB958\\uAC00 \\uBC1C\\uC0DD\\uD588\\uC2B5\\uB2C8\\uB2E4\"})})]}),isUser&&/*#__PURE__*/_jsx(\"div\",{className:\"flex-shrink-0 ml-3\",children:/*#__PURE__*/_jsx(\"div\",{className:\"w-8 h-8 bg-blue-600 rounded-full flex items-center justify-center\",children:/*#__PURE__*/_jsx(UserIcon,{className:\"h-4 w-4 text-white\"})})})]})});};export default ChatMessage;","map":{"version":3,"names":["React","ReactMarkdown","ClipboardDocumentIcon","CheckCircleIcon","UserIcon","DocumentDuplicateIcon","jsx","_jsx","jsxs","_jsxs","ChatMessage","_ref","message","onCopyMessage","onCopyTitle","copiedMessage","isUser","type","className","children","isError","isLoading","isGuidance","content","titles","map","title","index","onClick","id","timestamp","toLocaleTimeString","hour","minute"],"sources":["/Users/yeong-gwang/Documents/work/서울경제신문/ai_제목달기/frontend/src/components/chat/ChatMessage.js"],"sourcesContent":["import React from \"react\";\nimport ReactMarkdown from \"react-markdown\";\nimport {\n  ClipboardDocumentIcon,\n  CheckCircleIcon,\n  UserIcon,\n  DocumentDuplicateIcon,\n} from \"@heroicons/react/24/outline\";\n\nconst ChatMessage = ({\n  message,\n  onCopyMessage,\n  onCopyTitle,\n  copiedMessage,\n}) => {\n  const isUser = message.type === \"user\";\n\n  return (\n    <div\n      className={`group relative ${isUser ? \"ml-16 pr-6\" : \"mr-16 pl-6\"} mb-6`}\n    >\n      <div className={`flex ${isUser ? \"justify-end\" : \"justify-start\"}`}>\n        <div\n          className={`\n          max-w-[85%] rounded-2xl px-6 py-4 relative shadow-lg backdrop-blur-sm\n          ${\n            isUser\n              ? \"bg-gradient-to-br from-blue-500 to-blue-700 text-white shadow-blue-200\"\n              : message.isError\n              ? \"bg-gradient-to-br from-red-50 to-red-100 text-red-800 border border-red-200 shadow-red-100\"\n              : message.isLoading\n              ? \"bg-gradient-to-br from-yellow-50 to-yellow-100 text-yellow-800 border border-yellow-200 shadow-yellow-100\"\n              : message.isGuidance\n              ? \"bg-gradient-to-br from-blue-50 to-blue-100 text-blue-800 border border-blue-200 shadow-blue-100\"\n              : \"bg-gradient-to-br from-white to-gray-50 text-gray-800 border border-gray-200 shadow-gray-100\"\n          }\n        `}\n        >\n          {/* 메시지 내용 */}\n          <div className=\"whitespace-pre-wrap leading-relaxed\">\n            {isUser ? (\n              <div className=\"text-base font-medium\">{message.content}</div>\n            ) : (\n              <div className=\"prose prose-base max-w-none prose-headings:text-gray-900 prose-p:text-gray-800 prose-strong:text-gray-900 prose-ul:text-gray-800 prose-li:text-gray-800\">\n                <ReactMarkdown>{message.content}</ReactMarkdown>\n              </div>\n            )}\n          </div>\n\n          {/* 제목 복사 버튼들 */}\n          {message.titles && (\n            <div className=\"mt-3 pt-3 border-t border-gray-200\">\n              <div className=\"flex flex-wrap gap-2\">\n                {message.titles.map((title, index) => (\n                  <button\n                    key={index}\n                    onClick={() => onCopyTitle(title, message.id, index)}\n                    className={`flex items-center px-2 py-1 rounded text-xs transition-colors ${\n                      copiedMessage === `${message.id}_title_${index}`\n                        ? \"bg-green-100 text-green-700\"\n                        : \"bg-gray-100 hover:bg-gray-200 text-gray-700\"\n                    }`}\n                  >\n                    {copiedMessage === `${message.id}_title_${index}` ? (\n                      <CheckCircleIcon className=\"h-3 w-3 mr-1\" />\n                    ) : (\n                      <DocumentDuplicateIcon className=\"h-3 w-3 mr-1\" />\n                    )}\n                    제목 {index + 1} 복사\n                  </button>\n                ))}\n              </div>\n            </div>\n          )}\n\n          {/* 복사 버튼 */}\n          {!isUser && (\n            <div className=\"mt-4 flex items-center space-x-2\">\n              <button\n                onClick={() => onCopyMessage(message.content, message.id)}\n                className={`flex items-center px-3 py-2 rounded-lg text-sm font-medium transition-all duration-200 ${\n                  copiedMessage === message.id\n                    ? \"bg-green-100 text-green-700 border border-green-200 shadow-sm\"\n                    : \"bg-gray-100 hover:bg-gray-200 text-gray-700 border border-gray-200 hover:shadow-md\"\n                }`}\n              >\n                {copiedMessage === message.id ? (\n                  <CheckCircleIcon className=\"h-4 w-4 mr-2\" />\n                ) : (\n                  <ClipboardDocumentIcon className=\"h-4 w-4 mr-2\" />\n                )}\n                {copiedMessage === message.id ? \"복사됨!\" : \"복사하기\"}\n              </button>\n            </div>\n          )}\n\n          {/* 타임스탬프 */}\n          <div\n            className={`text-xs mt-3 font-medium ${\n              isUser ? \"text-blue-100\" : \"text-gray-500\"\n            }`}\n          >\n            {message.timestamp.toLocaleTimeString(\"ko-KR\", {\n              hour: \"numeric\",\n              minute: \"2-digit\",\n            })}\n          </div>\n\n          {/* 로딩 상태 */}\n          {message.isLoading && (\n            <div className=\"flex items-center text-blue-600 mt-2\">\n              <div className=\"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600 mr-2\"></div>\n              <span className=\"text-sm\">AI가 응답을 생성하고 있습니다...</span>\n            </div>\n          )}\n\n          {/* 에러 상태 */}\n          {message.isError && (\n            <div className=\"flex items-center text-red-600 mt-2\">\n              <span className=\"text-sm\">⚠️ 오류가 발생했습니다</span>\n            </div>\n          )}\n        </div>\n\n        {/* 사용자 아이콘 */}\n        {isUser && (\n          <div className=\"flex-shrink-0 ml-3\">\n            <div className=\"w-8 h-8 bg-blue-600 rounded-full flex items-center justify-center\">\n              <UserIcon className=\"h-4 w-4 text-white\" />\n            </div>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default ChatMessage;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}