{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useAuth}from'../../contexts/AuthContext';import MetricCard from'./components/MetricCard';import QuotaGauge from'./components/QuotaGauge';import UsageChart from'./components/UsageChart';import LogTable from'./components/LogTable';import{getUsage}from'../../services/api';import{ChartBarIcon,SparklesIcon}from'@heroicons/react/24/outline';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Dashboard=()=>{var _user$email;const{user}=useAuth();const[loading,setLoading]=useState(true);const[usage,setUsage]=useState(null);const[error,setError]=useState(null);useEffect(()=>{const fetchUsageData=async()=>{try{setLoading(true);const data=await getUsage('month');setUsage(data);}catch(err){setError('사용량 데이터를 불러오는데 실패했습니다.');console.error('Usage fetch error:',err);}finally{setLoading(false);}};fetchUsageData();},[]);if(loading){return/*#__PURE__*/_jsxs(\"div\",{className:\"animate-pulse\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8\",children:[...Array(4)].map((_,i)=>/*#__PURE__*/_jsx(\"div\",{className:\"bg-white dark:bg-gray-800 rounded-lg p-6 h-32\"},i))}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 lg:grid-cols-3 gap-6\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"lg:col-span-2 bg-white dark:bg-gray-800 rounded-lg p-6 h-80\"}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-white dark:bg-gray-800 rounded-lg p-6 h-80\"})]})]});}if(error){return/*#__PURE__*/_jsx(\"div\",{className:\"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 text-red-700 dark:text-red-400 px-4 py-3 rounded relative\",children:error});}// Mock data for development\nconst mockData={todayRequests:127,todayTokens:45320,monthlyLimit:1000000,monthlyUsed:523400,chartData:Array.from({length:30},(_,i)=>({date:new Date(Date.now()-(29-i)*24*60*60*1000).toISOString().split('T')[0],tokens:Math.floor(Math.random()*30000)+10000,requests:Math.floor(Math.random()*100)+50})),recentLogs:Array.from({length:20},(_,i)=>({id:`log-${i}`,timestamp:new Date(Date.now()-i*60*60*1000).toISOString(),model:['Claude 3 Sonnet','Claude 3.5 Haiku','Claude 3 Opus'][Math.floor(Math.random()*3)],tokens:Math.floor(Math.random()*5000)+1000,duration:Math.floor(Math.random()*3000)+500,status:Math.random()>0.1?'success':'error'}))};const data=usage||mockData;return/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-8\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl font-bold text-gray-900 dark:text-white\",children:\"\\uB300\\uC2DC\\uBCF4\\uB4DC\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"mt-1 text-sm text-gray-500 dark:text-gray-400\",children:[(user===null||user===void 0?void 0:user.name)||(user===null||user===void 0?void 0:(_user$email=user.email)===null||_user$email===void 0?void 0:_user$email.split('@')[0])||'사용자',\"\\uB2D8\\uC758 \\uC0AC\\uC6A9 \\uD604\\uD669\\uC744 \\uD655\\uC778\\uD558\\uC138\\uC694\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-2 gap-6\",children:[/*#__PURE__*/_jsx(MetricCard,{title:\"\\uC624\\uB298 \\uD638\\uCD9C \\uC218\",value:data.todayRequests.toLocaleString(),icon:ChartBarIcon,trend:\"+12%\",color:\"blue\"}),/*#__PURE__*/_jsx(MetricCard,{title:\"\\uC624\\uB298 \\uD1A0\\uD070 \\uC218\",value:data.todayTokens.toLocaleString(),icon:SparklesIcon,trend:\"+8%\",color:\"green\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 lg:grid-cols-4 gap-6\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"lg:col-span-3\",children:/*#__PURE__*/_jsx(UsageChart,{data:data.chartData})}),/*#__PURE__*/_jsx(\"div\",{className:\"lg:col-span-1\",children:/*#__PURE__*/_jsx(QuotaGauge,{used:data.monthlyUsed,limit:data.monthlyLimit})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-6\",children:/*#__PURE__*/_jsx(LogTable,{logs:data.recentLogs})})]});};export default Dashboard;","map":{"version":3,"names":["React","useState","useEffect","useAuth","MetricCard","QuotaGauge","UsageChart","LogTable","getUsage","ChartBarIcon","SparklesIcon","jsx","_jsx","jsxs","_jsxs","Dashboard","_user$email","user","loading","setLoading","usage","setUsage","error","setError","fetchUsageData","data","err","console","className","children","Array","map","_","i","mockData","todayRequests","todayTokens","monthlyLimit","monthlyUsed","chartData","from","length","date","Date","now","toISOString","split","tokens","Math","floor","random","requests","recentLogs","id","timestamp","model","duration","status","name","email","title","value","toLocaleString","icon","trend","color","used","limit","logs"],"sources":["/Users/yeong-gwang/Documents/work/서울경제신문/dev/nexus/title_generator_ver1/frontend/src/pages/Dashboard/index.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useAuth } from '../../contexts/AuthContext';\nimport MetricCard from './components/MetricCard';\nimport QuotaGauge from './components/QuotaGauge';\nimport UsageChart from './components/UsageChart';\nimport LogTable from './components/LogTable';\nimport { getUsage } from '../../services/api';\nimport { ChartBarIcon, SparklesIcon } from '@heroicons/react/24/outline';\n\nconst Dashboard = () => {\n  const { user } = useAuth();\n  const [loading, setLoading] = useState(true);\n  const [usage, setUsage] = useState(null);\n  const [error, setError] = useState(null);\n\n  useEffect(() => {\n    const fetchUsageData = async () => {\n      try {\n        setLoading(true);\n        const data = await getUsage('month');\n        setUsage(data);\n      } catch (err) {\n        setError('사용량 데이터를 불러오는데 실패했습니다.');\n        console.error('Usage fetch error:', err);\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    fetchUsageData();\n  }, []);\n\n  if (loading) {\n    return (\n      <div className=\"animate-pulse\">\n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8\">\n          {[...Array(4)].map((_, i) => (\n            <div key={i} className=\"bg-white dark:bg-gray-800 rounded-lg p-6 h-32\"></div>\n          ))}\n        </div>\n        <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6\">\n          <div className=\"lg:col-span-2 bg-white dark:bg-gray-800 rounded-lg p-6 h-80\"></div>\n          <div className=\"bg-white dark:bg-gray-800 rounded-lg p-6 h-80\"></div>\n        </div>\n      </div>\n    );\n  }\n\n  if (error) {\n    return (\n      <div className=\"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 text-red-700 dark:text-red-400 px-4 py-3 rounded relative\">\n        {error}\n      </div>\n    );\n  }\n\n  // Mock data for development\n  const mockData = {\n    todayRequests: 127,\n    todayTokens: 45320,\n    monthlyLimit: 1000000,\n    monthlyUsed: 523400,\n    chartData: Array.from({ length: 30 }, (_, i) => ({\n      date: new Date(Date.now() - (29 - i) * 24 * 60 * 60 * 1000).toISOString().split('T')[0],\n      tokens: Math.floor(Math.random() * 30000) + 10000,\n      requests: Math.floor(Math.random() * 100) + 50\n    })),\n    recentLogs: Array.from({ length: 20 }, (_, i) => ({\n      id: `log-${i}`,\n      timestamp: new Date(Date.now() - i * 60 * 60 * 1000).toISOString(),\n      model: ['Claude 3 Sonnet', 'Claude 3.5 Haiku', 'Claude 3 Opus'][Math.floor(Math.random() * 3)],\n      tokens: Math.floor(Math.random() * 5000) + 1000,\n      duration: Math.floor(Math.random() * 3000) + 500,\n      status: Math.random() > 0.1 ? 'success' : 'error'\n    }))\n  };\n\n  const data = usage || mockData;\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Page Header */}\n      <div className=\"mb-8\">\n        <h1 className=\"text-2xl font-bold text-gray-900 dark:text-white\">대시보드</h1>\n        <p className=\"mt-1 text-sm text-gray-500 dark:text-gray-400\">\n          {user?.name || user?.email?.split('@')[0] || '사용자'}님의 사용 현황을 확인하세요\n        </p>\n      </div>\n\n      {/* Metric Cards */}\n      <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-2 gap-6\">\n        <MetricCard\n          title=\"오늘 호출 수\"\n          value={data.todayRequests.toLocaleString()}\n          icon={ChartBarIcon}\n          trend=\"+12%\"\n          color=\"blue\"\n        />\n        <MetricCard\n          title=\"오늘 토큰 수\"\n          value={data.todayTokens.toLocaleString()}\n          icon={SparklesIcon}\n          trend=\"+8%\"\n          color=\"green\"\n        />\n      </div>\n\n      {/* Main Content Grid */}\n      <div className=\"grid grid-cols-1 lg:grid-cols-4 gap-6\">\n        {/* Usage Chart - Takes 3 columns on large screens */}\n        <div className=\"lg:col-span-3\">\n          <UsageChart data={data.chartData} />\n        </div>\n\n        {/* Right Column - Quota Gauge only */}\n        <div className=\"lg:col-span-1\">\n          <QuotaGauge\n            used={data.monthlyUsed}\n            limit={data.monthlyLimit}\n          />\n        </div>\n      </div>\n\n      {/* Log Table */}\n      <div className=\"mt-6\">\n        <LogTable logs={data.recentLogs} />\n      </div>\n    </div>\n  );\n};\n\nexport default Dashboard;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}