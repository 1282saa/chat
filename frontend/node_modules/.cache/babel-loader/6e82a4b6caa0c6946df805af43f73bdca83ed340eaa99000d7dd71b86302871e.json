{"ast":null,"code":"import{useState,useCallback}from\"react\";import{toast}from\"react-hot-toast\";import{generateAPI}from\"../services/api\";/**\n * 제목 생성 실행 및 결과 폴링을 위한 커스텀 훅\n * @param {string} projectId - 프로젝트 ID\n * @returns {Object} - 제목 생성 관련 상태와 함수들\n */export const useOrchestration=projectId=>{const[isExecuting,setIsExecuting]=useState(false);const[currentExecution,setCurrentExecution]=useState(null);const[executionStatus,setExecutionStatus]=useState(null);const[isStreaming,setIsStreaming]=useState(false);/**\n   * 제목 생성 실행\n   * @param {string} userInput - 사용자 입력\n   * @param {Object} options - 추가 옵션 (예: chat_history, useStreaming)\n   * @returns {Promise<Object>} - 생성 결과\n   */const executeOrchestration=useCallback(async function(userInput){let options=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};if(!userInput.trim()){toast.error(\"메시지를 입력해주세요.\");return null;}try{setIsExecuting(true);setExecutionStatus(\"STARTING\");// chat_history와 userInput을 포함하는 data 객체 생성\nconst data={userInput:userInput,chat_history:options.chat_history||[]};console.log(\"🚀 대화 생성 요청 시작:\",{projectId,inputLength:userInput.length,historyLength:data.chat_history.length,useStreaming:options.useStreaming===true,timestamp:new Date().toISOString()});// 🔧 스트리밍 사용 여부 확인 - 더 안전한 로직\nif(options.useStreaming===true){setIsStreaming(true);// 스트리밍 콜백 함수 설정\nconst onChunk=options.onChunk||(()=>{});const onError=error=>{var _error$message,_error$message2,_error$message3,_error$message4;console.error(\"🔧 스트리밍 오류 처리:\",error);setIsExecuting(false);setIsStreaming(false);setExecutionStatus(\"FAILED\");// 🔧 개선: 오류 타입에 따른 적절한 메시지\nif((_error$message=error.message)!==null&&_error$message!==void 0&&_error$message.includes(\"Gateway Timeout\")||(_error$message2=error.message)!==null&&_error$message2!==void 0&&_error$message2.includes(\"504\")||error.code===\"ECONNABORTED\"){toast.error(\"서버 응답 시간이 초과되었습니다. 요청을 간단히 하거나 잠시 후 다시 시도해주세요.\");}else if((_error$message3=error.message)!==null&&_error$message3!==void 0&&_error$message3.includes(\"CORS\")||(_error$message4=error.message)!==null&&_error$message4!==void 0&&_error$message4.includes(\"Network Error\")){toast.error(\"서버 연결에 문제가 있습니다. 새로고침 후 다시 시도해주세요.\");}else{toast.error(\"처리 중 오류가 발생했습니다. 잠시 후 다시 시도해주세요.\");}if(options.onError)options.onError(error);};const onComplete=response=>{var _response$result;console.log(\"✅ 스트리밍 완료:\",{resultLength:((_response$result=response.result)===null||_response$result===void 0?void 0:_response$result.length)||0,timestamp:new Date().toISOString()});setIsExecuting(false);setIsStreaming(false);setExecutionStatus(\"COMPLETED\");if(options.onComplete)options.onComplete(response);};try{// 🔧 개선: 스트리밍 API 호출 (내부에서 폴백 처리됨)\nreturn await generateAPI.generateTitleStream(projectId,data,onChunk,onError,onComplete);}catch(streamError){console.error(\"🔧 스트리밍 최종 실패:\",streamError);// 🔧 스트리밍 완전 실패 시에도 폴백이 내부에서 처리되므로\n// 여기서는 사용자에게 알림만\nsetIsStreaming(false);setIsExecuting(false);setExecutionStatus(\"FAILED\");// 최종 실패 메시지\ntoast.error(\"서비스에 일시적인 문제가 있습니다. 잠시 후 다시 시도해주세요.\");throw streamError;}}// 🔧 일반 API 호출 (스트리밍 미사용)\nconsole.log(\"📄 일반 API 호출 시작...\");const response=await generateAPI.generateTitle(projectId,data);console.log(\"✅ 대화 생성 완료:\",{mode:response.mode,message:response.message,timestamp:new Date().toISOString()});setIsExecuting(false);setExecutionStatus(\"COMPLETED\");return response;}catch(error){var _error$response,_error$response2,_error$message5,_error$response3,_error$response4,_error$response4$data,_error$response5,_error$response6,_error$response7;console.error(\"❌ 제목 생성 실패:\",{error:error.message,code:error.code,status:(_error$response=error.response)===null||_error$response===void 0?void 0:_error$response.status,timestamp:new Date().toISOString()});setIsExecuting(false);setIsStreaming(false);setExecutionStatus(\"FAILED\");// 🔧 개선: 상세한 오류 처리\nif(((_error$response2=error.response)===null||_error$response2===void 0?void 0:_error$response2.status)===504){toast.error(\"서버 응답 시간이 초과되었습니다. 입력을 간소화하거나 잠시 후 다시 시도해주세요.\");}else if((_error$message5=error.message)!==null&&_error$message5!==void 0&&_error$message5.includes(\"CORS\")||error.code===\"ERR_NETWORK\"){toast.error(\"서버 연결에 문제가 있습니다. 페이지를 새로고침하고 다시 시도해주세요.\");}else if(((_error$response3=error.response)===null||_error$response3===void 0?void 0:_error$response3.status)===400&&(_error$response4=error.response)!==null&&_error$response4!==void 0&&(_error$response4$data=_error$response4.data)!==null&&_error$response4$data!==void 0&&_error$response4$data.setup_required){toast.error(\"프롬프트 카드를 먼저 설정해주세요!\");}else if(error.code===\"ECONNABORTED\"){toast.error(\"요청 처리 시간이 초과되었습니다. 입력을 줄이거나 잠시 후 다시 시도해주세요.\");}else if(((_error$response5=error.response)===null||_error$response5===void 0?void 0:_error$response5.status)===500){toast.error(\"서버에 일시적인 문제가 있습니다. 잠시 후 다시 시도해주세요.\");}else if(((_error$response6=error.response)===null||_error$response6===void 0?void 0:_error$response6.status)===403){toast.error(\"권한이 없습니다. 로그인 상태를 확인해주세요.\");}else if(((_error$response7=error.response)===null||_error$response7===void 0?void 0:_error$response7.status)===429){toast.error(\"요청이 너무 많습니다. 잠시 후 다시 시도해주세요.\");}else{toast.error(\"처리 중 오류가 발생했습니다. 네트워크 연결을 확인하고 다시 시도해주세요.\");}throw error;}},[projectId]);/**\n   * 실행 상태 조회 (Step Functions 사용 시)\n   * @param {string} executionArn - 실행 ARN\n   * @param {Function} onComplete - 완료 시 콜백\n   * @param {Function} onError - 에러 시 콜백\n   */const pollOrchestrationResult=useCallback(async(executionArn,onComplete,onError)=>{// 스트리밍 모드에서는 폴링이 필요 없음\nif(isStreaming){return;}const poll=async()=>{try{const result=await generateAPI.getExecutionStatus(executionArn);setExecutionStatus(result.status);if(result.status===\"SUCCEEDED\"){setIsExecuting(false);setExecutionStatus(\"COMPLETED\");if(onComplete){onComplete(result);}}else if(result.status===\"FAILED\"){setIsExecuting(false);setExecutionStatus(\"FAILED\");if(onError){onError(new Error(\"처리 실패\"));}}else if(result.status===\"RUNNING\"){// 3초 후 다시 폴링\nsetTimeout(poll,3000);}}catch(error){console.error(\"실행 상태 조회 실패:\",error);setIsExecuting(false);setExecutionStatus(\"FAILED\");if(onError){onError(error);}}};poll();},[projectId,isStreaming]);/**\n   * 오케스트레이션 상태 초기화\n   */const resetOrchestration=useCallback(()=>{setIsExecuting(false);setIsStreaming(false);setCurrentExecution(null);setExecutionStatus(null);},[]);return{isExecuting,isStreaming,currentExecution,executionStatus,executeOrchestration,pollOrchestrationResult,resetOrchestration};};","map":{"version":3,"names":["useState","useCallback","toast","generateAPI","useOrchestration","projectId","isExecuting","setIsExecuting","currentExecution","setCurrentExecution","executionStatus","setExecutionStatus","isStreaming","setIsStreaming","executeOrchestration","userInput","options","arguments","length","undefined","trim","error","data","chat_history","console","log","inputLength","historyLength","useStreaming","timestamp","Date","toISOString","onChunk","onError","_error$message","_error$message2","_error$message3","_error$message4","message","includes","code","onComplete","response","_response$result","resultLength","result","generateTitleStream","streamError","generateTitle","mode","_error$response","_error$response2","_error$message5","_error$response3","_error$response4","_error$response4$data","_error$response5","_error$response6","_error$response7","status","setup_required","pollOrchestrationResult","executionArn","poll","getExecutionStatus","Error","setTimeout","resetOrchestration"],"sources":["/Users/yeong-gwang/Documents/work/서울경제신문/ai_제목달기(수)_완성본_스트리밍구현 복사본/frontend/src/hooks/useOrchestration.js"],"sourcesContent":["import { useState, useCallback } from \"react\";\nimport { toast } from \"react-hot-toast\";\nimport { generateAPI } from \"../services/api\";\n\n/**\n * 제목 생성 실행 및 결과 폴링을 위한 커스텀 훅\n * @param {string} projectId - 프로젝트 ID\n * @returns {Object} - 제목 생성 관련 상태와 함수들\n */\nexport const useOrchestration = (projectId) => {\n  const [isExecuting, setIsExecuting] = useState(false);\n  const [currentExecution, setCurrentExecution] = useState(null);\n  const [executionStatus, setExecutionStatus] = useState(null);\n  const [isStreaming, setIsStreaming] = useState(false);\n\n  /**\n   * 제목 생성 실행\n   * @param {string} userInput - 사용자 입력\n   * @param {Object} options - 추가 옵션 (예: chat_history, useStreaming)\n   * @returns {Promise<Object>} - 생성 결과\n   */\n  const executeOrchestration = useCallback(\n    async (userInput, options = {}) => {\n      if (!userInput.trim()) {\n        toast.error(\"메시지를 입력해주세요.\");\n        return null;\n      }\n\n      try {\n        setIsExecuting(true);\n        setExecutionStatus(\"STARTING\");\n\n        // chat_history와 userInput을 포함하는 data 객체 생성\n        const data = {\n          userInput: userInput,\n          chat_history: options.chat_history || [],\n        };\n\n        console.log(\"🚀 대화 생성 요청 시작:\", {\n          projectId,\n          inputLength: userInput.length,\n          historyLength: data.chat_history.length,\n          useStreaming: options.useStreaming === true,\n          timestamp: new Date().toISOString(),\n        });\n\n        // 🔧 스트리밍 사용 여부 확인 - 더 안전한 로직\n        if (options.useStreaming === true) {\n          setIsStreaming(true);\n\n          // 스트리밍 콜백 함수 설정\n          const onChunk = options.onChunk || (() => {});\n          const onError = (error) => {\n            console.error(\"🔧 스트리밍 오류 처리:\", error);\n            setIsExecuting(false);\n            setIsStreaming(false);\n            setExecutionStatus(\"FAILED\");\n\n            // 🔧 개선: 오류 타입에 따른 적절한 메시지\n            if (\n              error.message?.includes(\"Gateway Timeout\") ||\n              error.message?.includes(\"504\") ||\n              error.code === \"ECONNABORTED\"\n            ) {\n              toast.error(\n                \"서버 응답 시간이 초과되었습니다. 요청을 간단히 하거나 잠시 후 다시 시도해주세요.\"\n              );\n            } else if (\n              error.message?.includes(\"CORS\") ||\n              error.message?.includes(\"Network Error\")\n            ) {\n              toast.error(\n                \"서버 연결에 문제가 있습니다. 새로고침 후 다시 시도해주세요.\"\n              );\n            } else {\n              toast.error(\n                \"처리 중 오류가 발생했습니다. 잠시 후 다시 시도해주세요.\"\n              );\n            }\n\n            if (options.onError) options.onError(error);\n          };\n\n          const onComplete = (response) => {\n            console.log(\"✅ 스트리밍 완료:\", {\n              resultLength: response.result?.length || 0,\n              timestamp: new Date().toISOString(),\n            });\n            setIsExecuting(false);\n            setIsStreaming(false);\n            setExecutionStatus(\"COMPLETED\");\n            if (options.onComplete) options.onComplete(response);\n          };\n\n          try {\n            // 🔧 개선: 스트리밍 API 호출 (내부에서 폴백 처리됨)\n            return await generateAPI.generateTitleStream(\n              projectId,\n              data,\n              onChunk,\n              onError,\n              onComplete\n            );\n          } catch (streamError) {\n            console.error(\"🔧 스트리밍 최종 실패:\", streamError);\n\n            // 🔧 스트리밍 완전 실패 시에도 폴백이 내부에서 처리되므로\n            // 여기서는 사용자에게 알림만\n            setIsStreaming(false);\n            setIsExecuting(false);\n            setExecutionStatus(\"FAILED\");\n\n            // 최종 실패 메시지\n            toast.error(\n              \"서비스에 일시적인 문제가 있습니다. 잠시 후 다시 시도해주세요.\"\n            );\n            throw streamError;\n          }\n        }\n\n        // 🔧 일반 API 호출 (스트리밍 미사용)\n        console.log(\"📄 일반 API 호출 시작...\");\n        const response = await generateAPI.generateTitle(projectId, data);\n\n        console.log(\"✅ 대화 생성 완료:\", {\n          mode: response.mode,\n          message: response.message,\n          timestamp: new Date().toISOString(),\n        });\n\n        setIsExecuting(false);\n        setExecutionStatus(\"COMPLETED\");\n\n        return response;\n      } catch (error) {\n        console.error(\"❌ 제목 생성 실패:\", {\n          error: error.message,\n          code: error.code,\n          status: error.response?.status,\n          timestamp: new Date().toISOString(),\n        });\n\n        setIsExecuting(false);\n        setIsStreaming(false);\n        setExecutionStatus(\"FAILED\");\n\n        // 🔧 개선: 상세한 오류 처리\n        if (error.response?.status === 504) {\n          toast.error(\n            \"서버 응답 시간이 초과되었습니다. 입력을 간소화하거나 잠시 후 다시 시도해주세요.\"\n          );\n        } else if (\n          error.message?.includes(\"CORS\") ||\n          error.code === \"ERR_NETWORK\"\n        ) {\n          toast.error(\n            \"서버 연결에 문제가 있습니다. 페이지를 새로고침하고 다시 시도해주세요.\"\n          );\n        } else if (\n          error.response?.status === 400 &&\n          error.response?.data?.setup_required\n        ) {\n          toast.error(\"프롬프트 카드를 먼저 설정해주세요!\");\n        } else if (error.code === \"ECONNABORTED\") {\n          toast.error(\n            \"요청 처리 시간이 초과되었습니다. 입력을 줄이거나 잠시 후 다시 시도해주세요.\"\n          );\n        } else if (error.response?.status === 500) {\n          toast.error(\n            \"서버에 일시적인 문제가 있습니다. 잠시 후 다시 시도해주세요.\"\n          );\n        } else if (error.response?.status === 403) {\n          toast.error(\"권한이 없습니다. 로그인 상태를 확인해주세요.\");\n        } else if (error.response?.status === 429) {\n          toast.error(\"요청이 너무 많습니다. 잠시 후 다시 시도해주세요.\");\n        } else {\n          toast.error(\n            \"처리 중 오류가 발생했습니다. 네트워크 연결을 확인하고 다시 시도해주세요.\"\n          );\n        }\n\n        throw error;\n      }\n    },\n    [projectId]\n  );\n\n  /**\n   * 실행 상태 조회 (Step Functions 사용 시)\n   * @param {string} executionArn - 실행 ARN\n   * @param {Function} onComplete - 완료 시 콜백\n   * @param {Function} onError - 에러 시 콜백\n   */\n  const pollOrchestrationResult = useCallback(\n    async (executionArn, onComplete, onError) => {\n      // 스트리밍 모드에서는 폴링이 필요 없음\n      if (isStreaming) {\n        return;\n      }\n\n      const poll = async () => {\n        try {\n          const result = await generateAPI.getExecutionStatus(executionArn);\n\n          setExecutionStatus(result.status);\n\n          if (result.status === \"SUCCEEDED\") {\n            setIsExecuting(false);\n            setExecutionStatus(\"COMPLETED\");\n\n            if (onComplete) {\n              onComplete(result);\n            }\n          } else if (result.status === \"FAILED\") {\n            setIsExecuting(false);\n            setExecutionStatus(\"FAILED\");\n\n            if (onError) {\n              onError(new Error(\"처리 실패\"));\n            }\n          } else if (result.status === \"RUNNING\") {\n            // 3초 후 다시 폴링\n            setTimeout(poll, 3000);\n          }\n        } catch (error) {\n          console.error(\"실행 상태 조회 실패:\", error);\n          setIsExecuting(false);\n          setExecutionStatus(\"FAILED\");\n\n          if (onError) {\n            onError(error);\n          }\n        }\n      };\n\n      poll();\n    },\n    [projectId, isStreaming]\n  );\n\n  /**\n   * 오케스트레이션 상태 초기화\n   */\n  const resetOrchestration = useCallback(() => {\n    setIsExecuting(false);\n    setIsStreaming(false);\n    setCurrentExecution(null);\n    setExecutionStatus(null);\n  }, []);\n\n  return {\n    isExecuting,\n    isStreaming,\n    currentExecution,\n    executionStatus,\n    executeOrchestration,\n    pollOrchestrationResult,\n    resetOrchestration,\n  };\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}