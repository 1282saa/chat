{"ast":null,"code":"import React,{useState,useEffect}from\"react\";import{useParams,useNavigate}from\"react-router-dom\";import{toast}from\"react-hot-toast\";import{projectAPI,handleAPIError}from\"../services/api\";import AdminView from\"./AdminView\";import UserView from\"./UserView\";import{useAuth}from\"../contexts/AuthContext\";import{ChatInterfaceSkeleton}from\"./skeleton/SkeletonComponents\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ProjectDetail=()=>{const{projectId}=useParams();const navigate=useNavigate();const{user}=useAuth();const[project,setProject]=useState(null);const[loading,setLoading]=useState(true);useEffect(()=>{loadProjectData();},[projectId,navigate]);const loadProjectData=async()=>{try{setLoading(true);// 일반 사용자인 경우 고정된 프로젝트나 기본 프로젝트를 사용\nlet projectData;if((user===null||user===void 0?void 0:user.role)===\"user\"){// 일반 사용자용 기본 프로젝트 사용\nif(projectId&&projectId!==\"default\"){try{projectData=await projectAPI.getProject(projectId);}catch(error){console.log(\"API 호출 실패, 기본 프로젝트 사용:\",error);projectData={projectId:\"chat\",name:\"AI 채팅\",description:\"AI와 자유롭게 대화하세요\",promptCards:[],createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};}}else{// 기본 프로젝트 직접 생성\nprojectData={projectId:\"chat\",name:\"AI 채팅\",description:\"AI와 자유롭게 대화하세요\",promptCards:[],createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};}}else{// 관리자인 경우\ntry{projectData=await projectAPI.getProject(projectId);}catch(error){console.error(\"관리자 프로젝트 로드 실패:\",error);throw error;// 관리자는 에러를 그대로 전파\n}}setProject(projectData);}catch(error){console.error(\"프로젝트 로드 실패:\",error);const errorInfo=handleAPIError(error);toast.error(errorInfo.message);// 권한에 따른 리다이렉트\nif((user===null||user===void 0?void 0:user.role)===\"admin\"){navigate(\"/projects\");}else{navigate(\"/dashboard\");}}finally{setLoading(false);}};if(loading){return/*#__PURE__*/_jsx(ChatInterfaceSkeleton,{});}if(!project){return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center transition-colors duration-200\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-semibold text-gray-900 dark:text-white mb-4\",children:\"\\uD504\\uB85C\\uC81D\\uD2B8\\uB97C \\uCC3E\\uC744 \\uC218 \\uC5C6\\uC2B5\\uB2C8\\uB2E4\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{if((user===null||user===void 0?void 0:user.role)===\"admin\"){navigate(\"/projects\");}else{navigate(\"/dashboard\");}},className:\"inline-flex items-center px-4 py-2 text-sm font-medium rounded-md text-blue-700 dark:text-blue-300 bg-blue-100 dark:bg-blue-900 hover:bg-blue-200 dark:hover:bg-blue-800 focus:outline-none transition-colors duration-200\",children:(user===null||user===void 0?void 0:user.role)===\"admin\"?\"프로젝트 목록으로\":\"대시보드로\"})]})});}return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen w-full bg-gray-50 dark:bg-dark-primary transition-all duration-500\",children:(user===null||user===void 0?void 0:user.role)===\"admin\"?/*#__PURE__*/// 관리자 모드: 프롬프트 카드 관리 + 채팅\n_jsx(AdminView,{projectId:project.projectId||projectId,projectName:project.name}):/*#__PURE__*/// 사용자 모드: 채팅만\n_jsx(UserView,{projectId:project.projectId||projectId,projectName:project.name})});};export default ProjectDetail;","map":{"version":3,"names":["React","useState","useEffect","useParams","useNavigate","toast","projectAPI","handleAPIError","AdminView","UserView","useAuth","ChatInterfaceSkeleton","jsx","_jsx","jsxs","_jsxs","ProjectDetail","projectId","navigate","user","project","setProject","loading","setLoading","loadProjectData","projectData","role","getProject","error","console","log","name","description","promptCards","createdAt","Date","toISOString","updatedAt","errorInfo","message","className","children","onClick","projectName"],"sources":["/Users/yeong-gwang/Documents/work/서울경제신문/dev/nexus/title_generator_ver1/frontend/src/components/ProjectDetail.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { useParams, useNavigate } from \"react-router-dom\";\nimport { toast } from \"react-hot-toast\";\nimport { projectAPI, handleAPIError } from \"../services/api\";\nimport AdminView from \"./AdminView\";\nimport UserView from \"./UserView\";\nimport { useAuth } from \"../contexts/AuthContext\";\nimport { ChatInterfaceSkeleton } from \"./skeleton/SkeletonComponents\";\n\nconst ProjectDetail = () => {\n  const { projectId } = useParams();\n  const navigate = useNavigate();\n  const { user } = useAuth();\n  const [project, setProject] = useState(null);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    loadProjectData();\n  }, [projectId, navigate]);\n\n  const loadProjectData = async () => {\n    try {\n      setLoading(true);\n\n      // 일반 사용자인 경우 고정된 프로젝트나 기본 프로젝트를 사용\n      let projectData;\n      if (user?.role === \"user\") {\n        // 일반 사용자용 기본 프로젝트 사용\n        if (projectId && projectId !== \"default\") {\n          try {\n            projectData = await projectAPI.getProject(projectId);\n          } catch (error) {\n            console.log(\"API 호출 실패, 기본 프로젝트 사용:\", error);\n            projectData = {\n              projectId: \"chat\",\n              name: \"AI 채팅\",\n              description: \"AI와 자유롭게 대화하세요\",\n              promptCards: [],\n              createdAt: new Date().toISOString(),\n              updatedAt: new Date().toISOString(),\n            };\n          }\n        } else {\n          // 기본 프로젝트 직접 생성\n          projectData = {\n            projectId: \"chat\",\n            name: \"AI 채팅\",\n            description: \"AI와 자유롭게 대화하세요\",\n            promptCards: [],\n            createdAt: new Date().toISOString(),\n            updatedAt: new Date().toISOString(),\n          };\n        }\n      } else {\n        // 관리자인 경우\n        try {\n          projectData = await projectAPI.getProject(projectId);\n        } catch (error) {\n          console.error(\"관리자 프로젝트 로드 실패:\", error);\n          throw error; // 관리자는 에러를 그대로 전파\n        }\n      }\n\n      setProject(projectData);\n    } catch (error) {\n      console.error(\"프로젝트 로드 실패:\", error);\n      const errorInfo = handleAPIError(error);\n      toast.error(errorInfo.message);\n\n      // 권한에 따른 리다이렉트\n      if (user?.role === \"admin\") {\n        navigate(\"/projects\");\n      } else {\n        navigate(\"/dashboard\");\n      }\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  if (loading) {\n    return <ChatInterfaceSkeleton />;\n  }\n\n  if (!project) {\n    return (\n      <div className=\"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center transition-colors duration-200\">\n        <div className=\"text-center\">\n          <h2 className=\"text-xl font-semibold text-gray-900 dark:text-white mb-4\">\n            프로젝트를 찾을 수 없습니다\n          </h2>\n          <button\n            onClick={() => {\n              if (user?.role === \"admin\") {\n                navigate(\"/projects\");\n              } else {\n                navigate(\"/dashboard\");\n              }\n            }}\n            className=\"inline-flex items-center px-4 py-2 text-sm font-medium rounded-md text-blue-700 dark:text-blue-300 bg-blue-100 dark:bg-blue-900 hover:bg-blue-200 dark:hover:bg-blue-800 focus:outline-none transition-colors duration-200\"\n          >\n            {user?.role === \"admin\" ? \"프로젝트 목록으로\" : \"대시보드로\"}\n          </button>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen w-full bg-gray-50 dark:bg-dark-primary transition-all duration-500\">\n      {user?.role === \"admin\" ? (\n        // 관리자 모드: 프롬프트 카드 관리 + 채팅\n        <AdminView\n          projectId={project.projectId || projectId}\n          projectName={project.name}\n        />\n      ) : (\n        // 사용자 모드: 채팅만\n        <UserView\n          projectId={project.projectId || projectId}\n          projectName={project.name}\n        />\n      )}\n    </div>\n  );\n};\n\nexport default ProjectDetail;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}