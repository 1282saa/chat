{"ast":null,"code":"import React,{useState,useEffect,useRef}from\"react\";import{toast}from\"react-hot-toast\";import{ChatBubbleLeftRightIcon,PaperAirplaneIcon,TrashIcon,PlusIcon,ClockIcon,CpuChipIcon,DocumentTextIcon,UserIcon,SparklesIcon,InformationCircleIcon,BeakerIcon,CogIcon}from\"@heroicons/react/24/outline\";import{agentChatAPI,handleAPIError}from\"../services/api\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const BedrockAgentChat=_ref=>{let{projectId,projectName,projectInfo}=_ref;const[sessions,setSessions]=useState([]);const[currentSessionId,setCurrentSessionId]=useState(null);const[messages,setMessages]=useState([]);const[inputMessage,setInputMessage]=useState(\"\");const[isLoading,setIsLoading]=useState(false);const[sessionLoading,setSessionLoading]=useState(false);const messagesEndRef=useRef(null);useEffect(()=>{loadAgentChatSessions();},[projectId]);useEffect(()=>{scrollToBottom();},[messages]);const scrollToBottom=()=>{var _messagesEndRef$curre;(_messagesEndRef$curre=messagesEndRef.current)===null||_messagesEndRef$curre===void 0?void 0:_messagesEndRef$curre.scrollIntoView({behavior:\"smooth\"});};const loadAgentChatSessions=async()=>{try{setSessionLoading(true);const response=await agentChatAPI.getAgentChatSessions(projectId);setSessions(response.sessions||[]);// 가장 최근 세션을 자동 선택\nif(response.sessions&&response.sessions.length>0){const latestSession=response.sessions.sort((a,b)=>new Date(b.lastActivity)-new Date(a.lastActivity))[0];setCurrentSessionId(latestSession.sessionId);loadAgentChatHistory(latestSession.sessionId);}}catch(error){const errorInfo=handleAPIError(error);toast.error(`Agent 세션 목록 로드 실패: ${errorInfo.message}`);}finally{setSessionLoading(false);}};const loadAgentChatHistory=async sessionId=>{try{const response=await agentChatAPI.getAgentChatHistory(projectId,sessionId);// Bedrock Agent는 세션 히스토리를 내부적으로 관리하므로\n// 여기서는 UI 상태만 초기화\nsetMessages([]);}catch(error){const errorInfo=handleAPIError(error);toast.error(`Agent 채팅 히스토리 로드 실패: ${errorInfo.message}`);setMessages([]);}};const startNewAgentSession=()=>{const newSessionId=generateSessionId();setCurrentSessionId(newSessionId);setMessages([]);// 새 세션을 세션 목록에 추가\nconst newSession={sessionId:newSessionId,userId:\"default\",lastActivity:new Date().toISOString(),createdAt:new Date().toISOString(),agentSession:true,messageCount:0};setSessions(prev=>[newSession,...prev]);};const generateSessionId=()=>{return`agent_session_${Date.now()}_${Math.random().toString(36).substr(2,9)}`;};const handleSendAgentMessage=async e=>{e.preventDefault();if(!inputMessage.trim()||isLoading)return;if(!currentSessionId){startNewAgentSession();return;}const userMessage=inputMessage.trim();setInputMessage(\"\");setIsLoading(true);// 사용자 메시지를 즉시 UI에 추가\nconst userMsgObj={id:`user_${Date.now()}`,role:\"user\",content:userMessage,timestamp:new Date().toISOString(),metadata:{}};setMessages(prev=>[...prev,userMsgObj]);try{var _response$agentRespon;// Bedrock Agent 채팅 API 호출\nconst response=await agentChatAPI.sendAgentMessage(projectId,userMessage,currentSessionId);// AI 응답을 UI에 추가\nconst aiMsgObj={id:`agent_${Date.now()}`,role:\"assistant\",content:response.message,timestamp:response.timestamp,metadata:{...response.metadata,agentResponse:true,agentId:(_response$agentRespon=response.agentResponse)===null||_response$agentRespon===void 0?void 0:_response$agentRespon.sessionId}};setMessages(prev=>[...prev,aiMsgObj]);// 세션 정보 업데이트\nsetSessions(prev=>prev.map(session=>session.sessionId===currentSessionId?{...session,lastActivity:response.timestamp,messageCount:(session.messageCount||0)+2}:session));}catch(error){const errorInfo=handleAPIError(error);toast.error(`Agent 메시지 전송 실패: ${errorInfo.message}`);// 오류 메시지 추가\nconst errorMsgObj={id:`error_${Date.now()}`,role:\"system\",content:`오류: ${errorInfo.message}`,timestamp:new Date().toISOString(),metadata:{error:true}};setMessages(prev=>[...prev,errorMsgObj]);}finally{setIsLoading(false);}};const handleDeleteAgentSession=async sessionId=>{if(!window.confirm(\"이 Agent 채팅 세션을 삭제하시겠습니까?\"))return;try{await agentChatAPI.deleteAgentChatSession(projectId,sessionId);setSessions(prev=>prev.filter(s=>s.sessionId!==sessionId));if(currentSessionId===sessionId){setCurrentSessionId(null);setMessages([]);}toast.success(\"Agent 채팅 세션이 삭제되었습니다\");}catch(error){const errorInfo=handleAPIError(error);toast.error(`Agent 세션 삭제 실패: ${errorInfo.message}`);}};const formatTimestamp=timestamp=>{return new Date(timestamp).toLocaleString(\"ko-KR\",{month:\"short\",day:\"numeric\",hour:\"2-digit\",minute:\"2-digit\"});};const getMessageIcon=role=>{switch(role){case\"user\":return/*#__PURE__*/_jsx(UserIcon,{className:\"h-4 w-4\"});case\"assistant\":return/*#__PURE__*/_jsx(BeakerIcon,{className:\"h-4 w-4\"});case\"system\":return/*#__PURE__*/_jsx(InformationCircleIcon,{className:\"h-4 w-4\"});default:return/*#__PURE__*/_jsx(ChatBubbleLeftRightIcon,{className:\"h-4 w-4\"});}};// 프로젝트 AI 커스터마이징 정보 표시\nconst ProjectCustomizationInfo=()=>/*#__PURE__*/_jsxs(\"div\",{className:\"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center mb-2\",children:[/*#__PURE__*/_jsx(CogIcon,{className:\"h-5 w-5 text-blue-600 mr-2\"}),/*#__PURE__*/_jsx(\"h4\",{className:\"font-medium text-blue-900\",children:\"\\uD504\\uB85C\\uC81D\\uD2B8 AI \\uC124\\uC815\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-2 gap-4 text-sm\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-blue-700 font-medium\",children:\"AI \\uC5ED\\uD560:\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-blue-600\",children:(projectInfo===null||projectInfo===void 0?void 0:projectInfo.aiRole)||\"제목 생성 전문가\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-blue-700 font-medium\",children:\"\\uD0C0\\uAC9F \\uB3C5\\uC790:\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-blue-600\",children:(projectInfo===null||projectInfo===void 0?void 0:projectInfo.targetAudience)||\"일반독자\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-blue-700 font-medium\",children:\"\\uCD9C\\uB825 \\uD615\\uC2DD:\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-blue-600\",children:(projectInfo===null||projectInfo===void 0?void 0:projectInfo.outputFormat)===\"single\"?\"단일 제목\":(projectInfo===null||projectInfo===void 0?void 0:projectInfo.outputFormat)===\"detailed\"?\"상세 설명 포함\":\"다중 제목\"})]}),(projectInfo===null||projectInfo===void 0?void 0:projectInfo.styleGuidelines)&&/*#__PURE__*/_jsxs(\"div\",{className:\"col-span-2\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-blue-700 font-medium\",children:\"\\uC2A4\\uD0C0\\uC77C \\uAC00\\uC774\\uB4DC:\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-blue-600 text-xs\",children:projectInfo.styleGuidelines})]})]})]});return/*#__PURE__*/_jsxs(\"div\",{className:\"h-full flex bg-gray-50\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"w-80 bg-white border-r border-gray-200 flex flex-col\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"p-4 border-b border-gray-200\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-4\",children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"text-lg font-semibold text-gray-900 flex items-center\",children:[/*#__PURE__*/_jsx(BeakerIcon,{className:\"h-5 w-5 mr-2 text-blue-600\"}),\"Bedrock Agent\"]}),/*#__PURE__*/_jsx(\"button\",{onClick:startNewAgentSession,className:\"p-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors\",title:\"\\uC0C8 Agent \\uCC44\\uD305 \\uC2DC\\uC791\",children:/*#__PURE__*/_jsx(PlusIcon,{className:\"h-4 w-4\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm text-gray-600\",children:[\"\\uD504\\uB85C\\uC81D\\uD2B8: \",/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:projectName})]}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-2 text-xs text-blue-600 bg-blue-50 p-2 rounded\",children:\"\\uD83D\\uDD2C \\uB3D9\\uC801 \\uD504\\uB86C\\uD504\\uD2B8 \\uC801\\uC6A9\\uB41C AI \\uC5B4\\uC2DC\\uC2A4\\uD134\\uD2B8\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex-1 overflow-y-auto\",children:sessionLoading?/*#__PURE__*/_jsxs(\"div\",{className:\"p-4 text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600 mt-2\",children:\"Agent \\uC138\\uC158 \\uB85C\\uB529 \\uC911...\"})]}):sessions.length===0?/*#__PURE__*/_jsxs(\"div\",{className:\"p-4 text-center text-gray-500\",children:[/*#__PURE__*/_jsx(BeakerIcon,{className:\"h-12 w-12 mx-auto mb-2 text-gray-300\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Agent \\uCC44\\uD305 \\uC138\\uC158\\uC774 \\uC5C6\\uC2B5\\uB2C8\\uB2E4\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm\",children:\"\\uC0C8 Agent \\uCC44\\uD305\\uC744 \\uC2DC\\uC791\\uD574\\uBCF4\\uC138\\uC694!\"})]}):/*#__PURE__*/_jsx(\"div\",{className:\"space-y-2 p-4\",children:sessions.map(session=>/*#__PURE__*/_jsx(\"div\",{className:`p-3 rounded-lg cursor-pointer transition-colors ${currentSessionId===session.sessionId?\"bg-blue-100 border border-blue-300\":\"bg-gray-50 hover:bg-gray-100\"}`,onClick:()=>{setCurrentSessionId(session.sessionId);loadAgentChatHistory(session.sessionId);},children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1 min-w-0\",children:[/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm font-medium text-gray-900 truncate flex items-center\",children:[/*#__PURE__*/_jsx(BeakerIcon,{className:\"h-3 w-3 mr-1 text-blue-600\"}),\"Agent \",session.sessionId.split(\"_\")[2]||session.sessionId.slice(-8)]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center text-xs text-gray-500 mt-1\",children:[/*#__PURE__*/_jsx(ClockIcon,{className:\"h-3 w-3 mr-1\"}),formatTimestamp(session.lastActivity)]}),session.messageCount&&/*#__PURE__*/_jsxs(\"div\",{className:\"text-xs text-blue-600 mt-1\",children:[session.messageCount,\"\\uAC1C \\uBA54\\uC2DC\\uC9C0\"]})]}),/*#__PURE__*/_jsx(\"button\",{onClick:e=>{e.stopPropagation();handleDeleteAgentSession(session.sessionId);},className:\"p-1 text-gray-400 hover:text-red-600 transition-colors\",title:\"Agent \\uC138\\uC158 \\uC0AD\\uC81C\",children:/*#__PURE__*/_jsx(TrashIcon,{className:\"h-4 w-4\"})})]})},session.sessionId))})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex-1 flex flex-col\",children:!currentSessionId?/*#__PURE__*/_jsx(\"div\",{className:\"flex-1 flex items-center justify-center bg-gray-50\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center max-w-lg\",children:[/*#__PURE__*/_jsx(BeakerIcon,{className:\"h-24 w-24 mx-auto text-blue-300 mb-4\"}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-medium text-gray-900 mb-2\",children:\"Bedrock Agent AI \\uC5B4\\uC2DC\\uC2A4\\uD134\\uD2B8\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 mb-6\",children:\"\\uD504\\uB85C\\uC81D\\uD2B8\\uBCC4 AI \\uCEE4\\uC2A4\\uD130\\uB9C8\\uC774\\uC9D5\\uC774 \\uC801\\uC6A9\\uB41C Bedrock Agent\\uC640 \\uB300\\uD654\\uD574\\uBCF4\\uC138\\uC694. \\uB3D9\\uC801 \\uD504\\uB86C\\uD504\\uD2B8\\uB97C \\uD1B5\\uD574 \\uD504\\uB85C\\uC81D\\uD2B8 \\uC124\\uC815\\uC5D0 \\uB9DE\\uB294 \\uB9DE\\uCDA4\\uD615 \\uB2F5\\uBCC0\\uC744 \\uC81C\\uACF5\\uD569\\uB2C8\\uB2E4.\"}),projectInfo&&/*#__PURE__*/_jsx(ProjectCustomizationInfo,{}),/*#__PURE__*/_jsxs(\"button\",{onClick:startNewAgentSession,className:\"inline-flex items-center px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors\",children:[/*#__PURE__*/_jsx(PlusIcon,{className:\"h-5 w-5 mr-2\"}),\"\\uC0C8 Agent \\uCC44\\uD305 \\uC2DC\\uC791\"]})]})}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1 overflow-y-auto p-6 bg-white\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-4xl mx-auto space-y-6\",children:[projectInfo&&/*#__PURE__*/_jsx(ProjectCustomizationInfo,{}),messages.length===0?/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-12\",children:[/*#__PURE__*/_jsx(BeakerIcon,{className:\"h-12 w-12 mx-auto text-blue-600 mb-4\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600\",children:\"\\uC548\\uB155\\uD558\\uC138\\uC694! \\uD504\\uB85C\\uC81D\\uD2B8 \\uC124\\uC815\\uC5D0 \\uB9DE\\uCDB0 \\uC81C\\uBAA9 \\uC0DD\\uC131\\uACFC \\uD3B8\\uC9D1\\uC5D0 \\uB300\\uD574 \\uB3C4\\uC6C0\\uB4DC\\uB9AC\\uACA0\\uC2B5\\uB2C8\\uB2E4.\"})]}):messages.map(message=>{var _message$metadata;return/*#__PURE__*/_jsx(\"div\",{className:`flex ${message.role===\"user\"?\"justify-end\":\"justify-start\"}`,children:/*#__PURE__*/_jsxs(\"div\",{className:`max-w-3xl flex ${message.role===\"user\"?\"flex-row-reverse\":\"flex-row\"}`,children:[/*#__PURE__*/_jsx(\"div\",{className:`flex-shrink-0 w-8 h-8 rounded-full flex items-center justify-center ${message.role===\"user\"?\"bg-blue-600 text-white ml-3\":message.role===\"system\"?\"bg-gray-400 text-white mr-3\":\"bg-purple-600 text-white mr-3\"}`,children:getMessageIcon(message.role)}),/*#__PURE__*/_jsxs(\"div\",{className:`rounded-lg px-4 py-3 ${message.role===\"user\"?\"bg-blue-600 text-white\":message.role===\"system\"?\"bg-gray-100 text-gray-900\":\"bg-purple-50 text-gray-900 border border-purple-200\"}`,children:[/*#__PURE__*/_jsx(\"div\",{className:\"whitespace-pre-wrap\",children:message.content}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mt-2 text-xs opacity-70\",children:[/*#__PURE__*/_jsx(\"span\",{children:formatTimestamp(message.timestamp)}),((_message$metadata=message.metadata)===null||_message$metadata===void 0?void 0:_message$metadata.agentResponse)&&/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center space-x-2 ml-4\",children:/*#__PURE__*/_jsxs(\"span\",{className:\"flex items-center text-purple-600\",children:[/*#__PURE__*/_jsx(BeakerIcon,{className:\"h-3 w-3 mr-1\"}),\"Bedrock Agent\"]})})]})]})]})},message.id);})]}),/*#__PURE__*/_jsx(\"div\",{ref:messagesEndRef})]}),/*#__PURE__*/_jsx(\"div\",{className:\"border-t border-gray-200 bg-white p-6\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSendAgentMessage,className:\"max-w-4xl mx-auto\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex-1\",children:/*#__PURE__*/_jsx(\"textarea\",{value:inputMessage,onChange:e=>setInputMessage(e.target.value),placeholder:\"\\uD504\\uB85C\\uC81D\\uD2B8 \\uC124\\uC815\\uC5D0 \\uB9DE\\uB294 \\uC81C\\uBAA9 \\uC0DD\\uC131\\uC774\\uB098 \\uD3B8\\uC9D1 \\uC870\\uC5B8\\uC744 \\uC694\\uCCAD\\uD574\\uBCF4\\uC138\\uC694...\",className:\"w-full px-4 py-3 border border-gray-300 rounded-lg resize-none focus:ring-2 focus:ring-blue-500 focus:border-transparent\",rows:3,disabled:isLoading,onKeyDown:e=>{if(e.key===\"Enter\"&&!e.shiftKey){e.preventDefault();handleSendAgentMessage(e);}}})}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:!inputMessage.trim()||isLoading,className:\"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center\",children:isLoading?/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-5 w-5 border-b-2 border-white\"}):/*#__PURE__*/_jsx(PaperAirplaneIcon,{className:\"h-5 w-5\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mt-2 text-sm text-gray-500\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Enter\\uB85C \\uC804\\uC1A1, Shift+Enter\\uB85C \\uC904\\uBC14\\uAFC8\"}),inputMessage&&/*#__PURE__*/_jsxs(\"span\",{children:[inputMessage.length,\"\\uC790\"]})]})]})})]})})]});};export default BedrockAgentChat;","map":{"version":3,"names":["React","useState","useEffect","useRef","toast","ChatBubbleLeftRightIcon","PaperAirplaneIcon","TrashIcon","PlusIcon","ClockIcon","CpuChipIcon","DocumentTextIcon","UserIcon","SparklesIcon","InformationCircleIcon","BeakerIcon","CogIcon","agentChatAPI","handleAPIError","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","BedrockAgentChat","_ref","projectId","projectName","projectInfo","sessions","setSessions","currentSessionId","setCurrentSessionId","messages","setMessages","inputMessage","setInputMessage","isLoading","setIsLoading","sessionLoading","setSessionLoading","messagesEndRef","loadAgentChatSessions","scrollToBottom","_messagesEndRef$curre","current","scrollIntoView","behavior","response","getAgentChatSessions","length","latestSession","sort","a","b","Date","lastActivity","sessionId","loadAgentChatHistory","error","errorInfo","message","getAgentChatHistory","startNewAgentSession","newSessionId","generateSessionId","newSession","userId","toISOString","createdAt","agentSession","messageCount","prev","now","Math","random","toString","substr","handleSendAgentMessage","e","preventDefault","trim","userMessage","userMsgObj","id","role","content","timestamp","metadata","_response$agentRespon","sendAgentMessage","aiMsgObj","agentResponse","agentId","map","session","errorMsgObj","handleDeleteAgentSession","window","confirm","deleteAgentChatSession","filter","s","success","formatTimestamp","toLocaleString","month","day","hour","minute","getMessageIcon","className","ProjectCustomizationInfo","children","aiRole","targetAudience","outputFormat","styleGuidelines","onClick","title","split","slice","stopPropagation","_message$metadata","ref","onSubmit","value","onChange","target","placeholder","rows","disabled","onKeyDown","key","shiftKey","type"],"sources":["/Users/yeong-gwang/Documents/work/서울경제신문/ai_제목달기/frontend/src/components/BedrockAgentChat.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from \"react\";\nimport { toast } from \"react-hot-toast\";\nimport {\n  ChatBubbleLeftRightIcon,\n  PaperAirplaneIcon,\n  TrashIcon,\n  PlusIcon,\n  ClockIcon,\n  CpuChipIcon,\n  DocumentTextIcon,\n  UserIcon,\n  SparklesIcon,\n  InformationCircleIcon,\n  BeakerIcon,\n  CogIcon,\n} from \"@heroicons/react/24/outline\";\nimport { agentChatAPI, handleAPIError } from \"../services/api\";\n\nconst BedrockAgentChat = ({ projectId, projectName, projectInfo }) => {\n  const [sessions, setSessions] = useState([]);\n  const [currentSessionId, setCurrentSessionId] = useState(null);\n  const [messages, setMessages] = useState([]);\n  const [inputMessage, setInputMessage] = useState(\"\");\n  const [isLoading, setIsLoading] = useState(false);\n  const [sessionLoading, setSessionLoading] = useState(false);\n  const messagesEndRef = useRef(null);\n\n  useEffect(() => {\n    loadAgentChatSessions();\n  }, [projectId]);\n\n  useEffect(() => {\n    scrollToBottom();\n  }, [messages]);\n\n  const scrollToBottom = () => {\n    messagesEndRef.current?.scrollIntoView({ behavior: \"smooth\" });\n  };\n\n  const loadAgentChatSessions = async () => {\n    try {\n      setSessionLoading(true);\n      const response = await agentChatAPI.getAgentChatSessions(projectId);\n      setSessions(response.sessions || []);\n\n      // 가장 최근 세션을 자동 선택\n      if (response.sessions && response.sessions.length > 0) {\n        const latestSession = response.sessions.sort(\n          (a, b) => new Date(b.lastActivity) - new Date(a.lastActivity)\n        )[0];\n        setCurrentSessionId(latestSession.sessionId);\n        loadAgentChatHistory(latestSession.sessionId);\n      }\n    } catch (error) {\n      const errorInfo = handleAPIError(error);\n      toast.error(`Agent 세션 목록 로드 실패: ${errorInfo.message}`);\n    } finally {\n      setSessionLoading(false);\n    }\n  };\n\n  const loadAgentChatHistory = async (sessionId) => {\n    try {\n      const response = await agentChatAPI.getAgentChatHistory(projectId, sessionId);\n      \n      // Bedrock Agent는 세션 히스토리를 내부적으로 관리하므로\n      // 여기서는 UI 상태만 초기화\n      setMessages([]);\n    } catch (error) {\n      const errorInfo = handleAPIError(error);\n      toast.error(`Agent 채팅 히스토리 로드 실패: ${errorInfo.message}`);\n      setMessages([]);\n    }\n  };\n\n  const startNewAgentSession = () => {\n    const newSessionId = generateSessionId();\n    setCurrentSessionId(newSessionId);\n    setMessages([]);\n\n    // 새 세션을 세션 목록에 추가\n    const newSession = {\n      sessionId: newSessionId,\n      userId: \"default\",\n      lastActivity: new Date().toISOString(),\n      createdAt: new Date().toISOString(),\n      agentSession: true,\n      messageCount: 0,\n    };\n\n    setSessions((prev) => [newSession, ...prev]);\n  };\n\n  const generateSessionId = () => {\n    return `agent_session_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;\n  };\n\n  const handleSendAgentMessage = async (e) => {\n    e.preventDefault();\n\n    if (!inputMessage.trim() || isLoading) return;\n\n    if (!currentSessionId) {\n      startNewAgentSession();\n      return;\n    }\n\n    const userMessage = inputMessage.trim();\n    setInputMessage(\"\");\n    setIsLoading(true);\n\n    // 사용자 메시지를 즉시 UI에 추가\n    const userMsgObj = {\n      id: `user_${Date.now()}`,\n      role: \"user\",\n      content: userMessage,\n      timestamp: new Date().toISOString(),\n      metadata: {},\n    };\n\n    setMessages((prev) => [...prev, userMsgObj]);\n\n    try {\n      // Bedrock Agent 채팅 API 호출\n      const response = await agentChatAPI.sendAgentMessage(\n        projectId,\n        userMessage,\n        currentSessionId\n      );\n\n      // AI 응답을 UI에 추가\n      const aiMsgObj = {\n        id: `agent_${Date.now()}`,\n        role: \"assistant\",\n        content: response.message,\n        timestamp: response.timestamp,\n        metadata: {\n          ...response.metadata,\n          agentResponse: true,\n          agentId: response.agentResponse?.sessionId,\n        },\n      };\n\n      setMessages((prev) => [...prev, aiMsgObj]);\n\n      // 세션 정보 업데이트\n      setSessions((prev) =>\n        prev.map((session) =>\n          session.sessionId === currentSessionId\n            ? {\n                ...session,\n                lastActivity: response.timestamp,\n                messageCount: (session.messageCount || 0) + 2,\n              }\n            : session\n        )\n      );\n    } catch (error) {\n      const errorInfo = handleAPIError(error);\n      toast.error(`Agent 메시지 전송 실패: ${errorInfo.message}`);\n\n      // 오류 메시지 추가\n      const errorMsgObj = {\n        id: `error_${Date.now()}`,\n        role: \"system\",\n        content: `오류: ${errorInfo.message}`,\n        timestamp: new Date().toISOString(),\n        metadata: { error: true },\n      };\n\n      setMessages((prev) => [...prev, errorMsgObj]);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const handleDeleteAgentSession = async (sessionId) => {\n    if (!window.confirm(\"이 Agent 채팅 세션을 삭제하시겠습니까?\")) return;\n\n    try {\n      await agentChatAPI.deleteAgentChatSession(projectId, sessionId);\n      setSessions((prev) => prev.filter((s) => s.sessionId !== sessionId));\n\n      if (currentSessionId === sessionId) {\n        setCurrentSessionId(null);\n        setMessages([]);\n      }\n\n      toast.success(\"Agent 채팅 세션이 삭제되었습니다\");\n    } catch (error) {\n      const errorInfo = handleAPIError(error);\n      toast.error(`Agent 세션 삭제 실패: ${errorInfo.message}`);\n    }\n  };\n\n  const formatTimestamp = (timestamp) => {\n    return new Date(timestamp).toLocaleString(\"ko-KR\", {\n      month: \"short\",\n      day: \"numeric\",\n      hour: \"2-digit\",\n      minute: \"2-digit\",\n    });\n  };\n\n  const getMessageIcon = (role) => {\n    switch (role) {\n      case \"user\":\n        return <UserIcon className=\"h-4 w-4\" />;\n      case \"assistant\":\n        return <BeakerIcon className=\"h-4 w-4\" />;\n      case \"system\":\n        return <InformationCircleIcon className=\"h-4 w-4\" />;\n      default:\n        return <ChatBubbleLeftRightIcon className=\"h-4 w-4\" />;\n    }\n  };\n\n  // 프로젝트 AI 커스터마이징 정보 표시\n  const ProjectCustomizationInfo = () => (\n    <div className=\"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-4\">\n      <div className=\"flex items-center mb-2\">\n        <CogIcon className=\"h-5 w-5 text-blue-600 mr-2\" />\n        <h4 className=\"font-medium text-blue-900\">프로젝트 AI 설정</h4>\n      </div>\n      <div className=\"grid grid-cols-2 gap-4 text-sm\">\n        <div>\n          <span className=\"text-blue-700 font-medium\">AI 역할:</span>\n          <p className=\"text-blue-600\">{projectInfo?.aiRole || \"제목 생성 전문가\"}</p>\n        </div>\n        <div>\n          <span className=\"text-blue-700 font-medium\">타겟 독자:</span>\n          <p className=\"text-blue-600\">{projectInfo?.targetAudience || \"일반독자\"}</p>\n        </div>\n        <div>\n          <span className=\"text-blue-700 font-medium\">출력 형식:</span>\n          <p className=\"text-blue-600\">\n            {projectInfo?.outputFormat === \"single\" ? \"단일 제목\" : \n             projectInfo?.outputFormat === \"detailed\" ? \"상세 설명 포함\" : \"다중 제목\"}\n          </p>\n        </div>\n        {projectInfo?.styleGuidelines && (\n          <div className=\"col-span-2\">\n            <span className=\"text-blue-700 font-medium\">스타일 가이드:</span>\n            <p className=\"text-blue-600 text-xs\">{projectInfo.styleGuidelines}</p>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n\n  return (\n    <div className=\"h-full flex bg-gray-50\">\n      {/* 세션 사이드바 */}\n      <div className=\"w-80 bg-white border-r border-gray-200 flex flex-col\">\n        <div className=\"p-4 border-b border-gray-200\">\n          <div className=\"flex items-center justify-between mb-4\">\n            <h3 className=\"text-lg font-semibold text-gray-900 flex items-center\">\n              <BeakerIcon className=\"h-5 w-5 mr-2 text-blue-600\" />\n              Bedrock Agent\n            </h3>\n            <button\n              onClick={startNewAgentSession}\n              className=\"p-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors\"\n              title=\"새 Agent 채팅 시작\"\n            >\n              <PlusIcon className=\"h-4 w-4\" />\n            </button>\n          </div>\n\n          <div className=\"text-sm text-gray-600\">\n            프로젝트: <span className=\"font-medium\">{projectName}</span>\n          </div>\n          \n          <div className=\"mt-2 text-xs text-blue-600 bg-blue-50 p-2 rounded\">\n            🔬 동적 프롬프트 적용된 AI 어시스턴트\n          </div>\n        </div>\n\n        <div className=\"flex-1 overflow-y-auto\">\n          {sessionLoading ? (\n            <div className=\"p-4 text-center\">\n              <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto\"></div>\n              <p className=\"text-sm text-gray-600 mt-2\">Agent 세션 로딩 중...</p>\n            </div>\n          ) : sessions.length === 0 ? (\n            <div className=\"p-4 text-center text-gray-500\">\n              <BeakerIcon className=\"h-12 w-12 mx-auto mb-2 text-gray-300\" />\n              <p>Agent 채팅 세션이 없습니다</p>\n              <p className=\"text-sm\">새 Agent 채팅을 시작해보세요!</p>\n            </div>\n          ) : (\n            <div className=\"space-y-2 p-4\">\n              {sessions.map((session) => (\n                <div\n                  key={session.sessionId}\n                  className={`p-3 rounded-lg cursor-pointer transition-colors ${\n                    currentSessionId === session.sessionId\n                      ? \"bg-blue-100 border border-blue-300\"\n                      : \"bg-gray-50 hover:bg-gray-100\"\n                  }`}\n                  onClick={() => {\n                    setCurrentSessionId(session.sessionId);\n                    loadAgentChatHistory(session.sessionId);\n                  }}\n                >\n                  <div className=\"flex items-center justify-between\">\n                    <div className=\"flex-1 min-w-0\">\n                      <p className=\"text-sm font-medium text-gray-900 truncate flex items-center\">\n                        <BeakerIcon className=\"h-3 w-3 mr-1 text-blue-600\" />\n                        Agent {session.sessionId.split(\"_\")[2] || session.sessionId.slice(-8)}\n                      </p>\n                      <div className=\"flex items-center text-xs text-gray-500 mt-1\">\n                        <ClockIcon className=\"h-3 w-3 mr-1\" />\n                        {formatTimestamp(session.lastActivity)}\n                      </div>\n                      {session.messageCount && (\n                        <div className=\"text-xs text-blue-600 mt-1\">\n                          {session.messageCount}개 메시지\n                        </div>\n                      )}\n                    </div>\n                    <button\n                      onClick={(e) => {\n                        e.stopPropagation();\n                        handleDeleteAgentSession(session.sessionId);\n                      }}\n                      className=\"p-1 text-gray-400 hover:text-red-600 transition-colors\"\n                      title=\"Agent 세션 삭제\"\n                    >\n                      <TrashIcon className=\"h-4 w-4\" />\n                    </button>\n                  </div>\n                </div>\n              ))}\n            </div>\n          )}\n        </div>\n      </div>\n\n      {/* 채팅 영역 */}\n      <div className=\"flex-1 flex flex-col\">\n        {!currentSessionId ? (\n          <div className=\"flex-1 flex items-center justify-center bg-gray-50\">\n            <div className=\"text-center max-w-lg\">\n              <BeakerIcon className=\"h-24 w-24 mx-auto text-blue-300 mb-4\" />\n              <h3 className=\"text-xl font-medium text-gray-900 mb-2\">\n                Bedrock Agent AI 어시스턴트\n              </h3>\n              <p className=\"text-gray-600 mb-6\">\n                프로젝트별 AI 커스터마이징이 적용된 Bedrock Agent와 대화해보세요. \n                동적 프롬프트를 통해 프로젝트 설정에 맞는 맞춤형 답변을 제공합니다.\n              </p>\n              \n              {projectInfo && <ProjectCustomizationInfo />}\n              \n              <button\n                onClick={startNewAgentSession}\n                className=\"inline-flex items-center px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors\"\n              >\n                <PlusIcon className=\"h-5 w-5 mr-2\" />새 Agent 채팅 시작\n              </button>\n            </div>\n          </div>\n        ) : (\n          <>\n            {/* 메시지 영역 */}\n            <div className=\"flex-1 overflow-y-auto p-6 bg-white\">\n              <div className=\"max-w-4xl mx-auto space-y-6\">\n                {projectInfo && <ProjectCustomizationInfo />}\n                \n                {messages.length === 0 ? (\n                  <div className=\"text-center py-12\">\n                    <BeakerIcon className=\"h-12 w-12 mx-auto text-blue-600 mb-4\" />\n                    <p className=\"text-gray-600\">\n                      안녕하세요! 프로젝트 설정에 맞춰 제목 생성과 편집에 대해 도움드리겠습니다.\n                    </p>\n                  </div>\n                ) : (\n                  messages.map((message) => (\n                    <div\n                      key={message.id}\n                      className={`flex ${\n                        message.role === \"user\"\n                          ? \"justify-end\"\n                          : \"justify-start\"\n                      }`}\n                    >\n                      <div\n                        className={`max-w-3xl flex ${\n                          message.role === \"user\"\n                            ? \"flex-row-reverse\"\n                            : \"flex-row\"\n                        }`}\n                      >\n                        <div\n                          className={`flex-shrink-0 w-8 h-8 rounded-full flex items-center justify-center ${\n                            message.role === \"user\"\n                              ? \"bg-blue-600 text-white ml-3\"\n                              : message.role === \"system\"\n                              ? \"bg-gray-400 text-white mr-3\"\n                              : \"bg-purple-600 text-white mr-3\"\n                          }`}\n                        >\n                          {getMessageIcon(message.role)}\n                        </div>\n\n                        <div\n                          className={`rounded-lg px-4 py-3 ${\n                            message.role === \"user\"\n                              ? \"bg-blue-600 text-white\"\n                              : message.role === \"system\"\n                              ? \"bg-gray-100 text-gray-900\"\n                              : \"bg-purple-50 text-gray-900 border border-purple-200\"\n                          }`}\n                        >\n                          <div className=\"whitespace-pre-wrap\">\n                            {message.content}\n                          </div>\n\n                          <div className=\"flex items-center justify-between mt-2 text-xs opacity-70\">\n                            <span>{formatTimestamp(message.timestamp)}</span>\n\n                            {message.metadata?.agentResponse && (\n                              <div className=\"flex items-center space-x-2 ml-4\">\n                                <span className=\"flex items-center text-purple-600\">\n                                  <BeakerIcon className=\"h-3 w-3 mr-1\" />\n                                  Bedrock Agent\n                                </span>\n                              </div>\n                            )}\n                          </div>\n                        </div>\n                      </div>\n                    </div>\n                  ))\n                )}\n              </div>\n              <div ref={messagesEndRef} />\n            </div>\n\n            {/* 입력 영역 */}\n            <div className=\"border-t border-gray-200 bg-white p-6\">\n              <form onSubmit={handleSendAgentMessage} className=\"max-w-4xl mx-auto\">\n                <div className=\"flex space-x-4\">\n                  <div className=\"flex-1\">\n                    <textarea\n                      value={inputMessage}\n                      onChange={(e) => setInputMessage(e.target.value)}\n                      placeholder=\"프로젝트 설정에 맞는 제목 생성이나 편집 조언을 요청해보세요...\"\n                      className=\"w-full px-4 py-3 border border-gray-300 rounded-lg resize-none focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                      rows={3}\n                      disabled={isLoading}\n                      onKeyDown={(e) => {\n                        if (e.key === \"Enter\" && !e.shiftKey) {\n                          e.preventDefault();\n                          handleSendAgentMessage(e);\n                        }\n                      }}\n                    />\n                  </div>\n                  <button\n                    type=\"submit\"\n                    disabled={!inputMessage.trim() || isLoading}\n                    className=\"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center\"\n                  >\n                    {isLoading ? (\n                      <div className=\"animate-spin rounded-full h-5 w-5 border-b-2 border-white\"></div>\n                    ) : (\n                      <PaperAirplaneIcon className=\"h-5 w-5\" />\n                    )}\n                  </button>\n                </div>\n\n                <div className=\"flex items-center justify-between mt-2 text-sm text-gray-500\">\n                  <span>Enter로 전송, Shift+Enter로 줄바꿈</span>\n                  {inputMessage && <span>{inputMessage.length}자</span>}\n                </div>\n              </form>\n            </div>\n          </>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default BedrockAgentChat;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}