{"ast":null,"code":"import React,{useState,useEffect,useCallback}from\"react\";import{useParams,useNavigate}from\"react-router-dom\";import{toast}from\"react-hot-toast\";import{ArrowLeftIcon,ChatBubbleLeftRightIcon,Cog6ToothIcon}from\"@heroicons/react/24/outline\";import{projectAPI,handleAPIError,promptCardAPI}from\"../services/api\";import PromptCardManager from\"./PromptCardManager\";import ChatInterface from\"./ChatInterface\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ProjectDetail=()=>{const{projectId}=useParams();const navigate=useNavigate();const[project,setProject]=useState(null);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);const[activeTab,setActiveTab]=useState(\"chat\");const[promptCards,setPromptCards]=useState([]);const loadProject=useCallback(async()=>{try{setLoading(true);setError(null);const projectData=await projectAPI.getProject(projectId);setProject(projectData);}catch(err){const errorInfo=handleAPIError(err);setError(errorInfo.message);toast.error(errorInfo.message);}finally{setLoading(false);}},[projectId]);const loadPromptCards=useCallback(async()=>{try{const response=await promptCardAPI.getPromptCards(projectId,false,true);setPromptCards(response.promptCards||[]);}catch(error){console.error(\"프롬프트 카드 로딩 실패:\",error);setPromptCards([]);}},[projectId]);useEffect(()=>{loadProject();loadPromptCards();},[loadProject,loadPromptCards]);if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen bg-gray-50 flex items-center justify-center\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600\",children:\"\\uD504\\uB85C\\uC81D\\uD2B8 \\uB85C\\uB529 \\uC911...\"})]})});}if(error){return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen bg-gray-50 flex items-center justify-center\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-red-600 mb-4\",children:error}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigate(-1),className:\"text-blue-600 hover:underline\",children:\"\\uB3CC\\uC544\\uAC00\\uAE30\"})]})});}return/*#__PURE__*/_jsxs(\"div\",{className:\"min-h-screen bg-white\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"bg-white border-b border-gray-200 mb-6\",children:/*#__PURE__*/_jsx(\"div\",{className:\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4\",children:/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-between\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-4\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:()=>navigate(-1),className:\"flex items-center text-gray-600 hover:text-gray-900 px-2 py-1 rounded hover:bg-gray-100 transition-colors\",children:[/*#__PURE__*/_jsx(ArrowLeftIcon,{className:\"h-4 w-4 mr-1\"}),/*#__PURE__*/_jsx(\"span\",{children:\"\\uBAA9\\uB85D\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"border-l border-gray-300 h-4\"}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"h1\",{className:\"text-xl font-semibold text-gray-900\",children:project===null||project===void 0?void 0:project.name})})]})})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"mb-6\",children:/*#__PURE__*/_jsx(\"div\",{className:\"bg-white rounded-lg border border-gray-200 shadow-sm\",children:/*#__PURE__*/_jsxs(\"nav\",{className:\"flex\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setActiveTab(\"chat\"),className:`flex items-center px-6 py-3 text-sm font-medium border-r border-gray-200 transition-all duration-200 ${activeTab===\"chat\"?\"bg-blue-50 text-blue-700 border-b-2 border-blue-500\":\"text-gray-600 hover:text-blue-600 hover:bg-blue-50/50\"}`,children:[/*#__PURE__*/_jsx(ChatBubbleLeftRightIcon,{className:`h-4 w-4 mr-2 ${activeTab===\"chat\"?\"text-blue-600\":\"\"}`}),\"AI \\uB300\\uD654\"]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setActiveTab(\"prompt-cards\"),className:`flex items-center px-6 py-3 text-sm font-medium transition-all duration-200 ${activeTab===\"prompt-cards\"?\"bg-green-50 text-green-700 border-b-2 border-green-500\":\"text-gray-600 hover:text-green-600 hover:bg-green-50/50\"}`,children:[/*#__PURE__*/_jsx(Cog6ToothIcon,{className:`h-4 w-4 mr-2 ${activeTab===\"prompt-cards\"?\"text-green-600\":\"\"}`}),\"\\uC124\\uC815\",/*#__PURE__*/_jsx(\"span\",{className:`ml-2 px-2 py-0.5 text-xs rounded-full ${activeTab===\"prompt-cards\"?\"bg-green-100 text-green-700\":\"bg-gray-200 text-gray-600\"}`,children:promptCards.length})]})]})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"min-h-screen\",children:[activeTab===\"prompt-cards\"&&/*#__PURE__*/_jsx(PromptCardManager,{projectId:projectId,onCardsChanged:loadPromptCards}),activeTab===\"chat\"&&/*#__PURE__*/_jsx(\"div\",{className:\"h-[calc(100vh-300px)]\",children:/*#__PURE__*/_jsx(ChatInterface,{projectId:projectId,projectName:project===null||project===void 0?void 0:project.name})})]})]})]});};export default ProjectDetail;","map":{"version":3,"names":["React","useState","useEffect","useCallback","useParams","useNavigate","toast","ArrowLeftIcon","ChatBubbleLeftRightIcon","Cog6ToothIcon","projectAPI","handleAPIError","promptCardAPI","PromptCardManager","ChatInterface","jsx","_jsx","jsxs","_jsxs","ProjectDetail","projectId","navigate","project","setProject","loading","setLoading","error","setError","activeTab","setActiveTab","promptCards","setPromptCards","loadProject","projectData","getProject","err","errorInfo","message","loadPromptCards","response","getPromptCards","console","className","children","onClick","name","length","onCardsChanged","projectName"],"sources":["/Users/yeong-gwang/Documents/work/서울경제신문/ai_제목달기/frontend/src/components/ProjectDetail.js"],"sourcesContent":["import React, { useState, useEffect, useCallback } from \"react\";\nimport { useParams, useNavigate } from \"react-router-dom\";\nimport { toast } from \"react-hot-toast\";\nimport {\n  ArrowLeftIcon,\n  ChatBubbleLeftRightIcon,\n  Cog6ToothIcon,\n} from \"@heroicons/react/24/outline\";\nimport {\n  projectAPI,\n  handleAPIError,\n  promptCardAPI,\n} from \"../services/api\";\nimport PromptCardManager from \"./PromptCardManager\";\nimport ChatInterface from \"./ChatInterface\";\n\nconst ProjectDetail = () => {\n  const { projectId } = useParams();\n  const navigate = useNavigate();\n\n  const [project, setProject] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [activeTab, setActiveTab] = useState(\"chat\");\n  const [promptCards, setPromptCards] = useState([]);\n\n\n  const loadProject = useCallback(async () => {\n    try {\n      setLoading(true);\n      setError(null);\n      const projectData = await projectAPI.getProject(projectId);\n      setProject(projectData);\n    } catch (err) {\n      const errorInfo = handleAPIError(err);\n      setError(errorInfo.message);\n      toast.error(errorInfo.message);\n    } finally {\n      setLoading(false);\n    }\n  }, [projectId]);\n\n  const loadPromptCards = useCallback(async () => {\n    try {\n      const response = await promptCardAPI.getPromptCards(\n        projectId,\n        false,\n        true\n      );\n      setPromptCards(response.promptCards || []);\n    } catch (error) {\n      console.error(\"프롬프트 카드 로딩 실패:\", error);\n      setPromptCards([]);\n    }\n  }, [projectId]);\n\n  useEffect(() => {\n    loadProject();\n    loadPromptCards();\n  }, [loadProject, loadPromptCards]);\n\n\n  if (loading) {\n    return (\n      <div className=\"min-h-screen bg-gray-50 flex items-center justify-center\">\n        <div className=\"text-center\">\n          <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4\"></div>\n          <p className=\"text-gray-600\">프로젝트 로딩 중...</p>\n        </div>\n      </div>\n    );\n  }\n\n  if (error) {\n    return (\n      <div className=\"min-h-screen bg-gray-50 flex items-center justify-center\">\n        <div className=\"text-center\">\n          <p className=\"text-red-600 mb-4\">{error}</p>\n          <button\n            onClick={() => navigate(-1)}\n            className=\"text-blue-600 hover:underline\"\n          >\n            돌아가기\n          </button>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-white\">\n      {/* 헤더 */}\n      <div className=\"bg-white border-b border-gray-200 mb-6\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4\">\n          <div className=\"flex items-center justify-between\">\n            <div className=\"flex items-center space-x-4\">\n              <button\n                onClick={() => navigate(-1)}\n                className=\"flex items-center text-gray-600 hover:text-gray-900 px-2 py-1 rounded hover:bg-gray-100 transition-colors\"\n              >\n                <ArrowLeftIcon className=\"h-4 w-4 mr-1\" />\n                <span>목록</span>\n              </button>\n              <div className=\"border-l border-gray-300 h-4\"></div>\n              <div>\n                <h1 className=\"text-xl font-semibold text-gray-900\">\n                  {project?.name}\n                </h1>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* 탭 네비게이션 */}\n      <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n        <div className=\"mb-6\">\n          <div className=\"bg-white rounded-lg border border-gray-200 shadow-sm\">\n            <nav className=\"flex\">\n              <button\n                onClick={() => setActiveTab(\"chat\")}\n                className={`flex items-center px-6 py-3 text-sm font-medium border-r border-gray-200 transition-all duration-200 ${\n                  activeTab === \"chat\"\n                    ? \"bg-blue-50 text-blue-700 border-b-2 border-blue-500\"\n                    : \"text-gray-600 hover:text-blue-600 hover:bg-blue-50/50\"\n                }`}\n              >\n                <ChatBubbleLeftRightIcon className={`h-4 w-4 mr-2 ${activeTab === \"chat\" ? \"text-blue-600\" : \"\"}`} />\n                AI 대화\n              </button>\n\n              <button\n                onClick={() => setActiveTab(\"prompt-cards\")}\n                className={`flex items-center px-6 py-3 text-sm font-medium transition-all duration-200 ${\n                  activeTab === \"prompt-cards\"\n                    ? \"bg-green-50 text-green-700 border-b-2 border-green-500\"\n                    : \"text-gray-600 hover:text-green-600 hover:bg-green-50/50\"\n                }`}\n              >\n                <Cog6ToothIcon className={`h-4 w-4 mr-2 ${activeTab === \"prompt-cards\" ? \"text-green-600\" : \"\"}`} />\n                설정\n                <span className={`ml-2 px-2 py-0.5 text-xs rounded-full ${\n                  activeTab === \"prompt-cards\" \n                    ? \"bg-green-100 text-green-700\" \n                    : \"bg-gray-200 text-gray-600\"\n                }`}>\n                  {promptCards.length}\n                </span>\n              </button>\n            </nav>\n          </div>\n        </div>\n\n\n        {/* 탭 콘텐츠 */}\n        <div className=\"min-h-screen\">\n          {activeTab === \"prompt-cards\" && (\n            <PromptCardManager\n              projectId={projectId}\n              onCardsChanged={loadPromptCards}\n            />\n          )}\n\n          {activeTab === \"chat\" && (\n            <div className=\"h-[calc(100vh-300px)]\">\n              <ChatInterface\n                projectId={projectId}\n                projectName={project?.name}\n              />\n            </div>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n};\n\n\nexport default ProjectDetail;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}