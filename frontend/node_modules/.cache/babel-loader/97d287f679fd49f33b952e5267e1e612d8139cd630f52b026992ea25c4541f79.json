{"ast":null,"code":"var _jsxFileName = \"/Users/yeong-gwang/Documents/work/\\u1109\\u1165\\u110B\\u116E\\u11AF\\u1100\\u1167\\u11BC\\u110C\\u1166\\u1109\\u1175\\u11AB\\u1106\\u116E\\u11AB/ai_\\u110C\\u1166\\u1106\\u1169\\u11A8\\u1103\\u1161\\u11AF\\u1100\\u1175/frontend/src/components/ProjectDetail.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useCallback } from \"react\";\nimport { useParams, useNavigate } from \"react-router-dom\";\nimport { toast } from \"react-hot-toast\";\nimport { ArrowLeftIcon, CloudArrowUpIcon, DocumentTextIcon, SparklesIcon, CheckCircleIcon, ExclamationTriangleIcon, Cog8ToothIcon, ChatBubbleLeftRightIcon, BeakerIcon } from \"@heroicons/react/24/outline\";\nimport { projectAPI, generateAPI, uploadAPI, handleAPIError, PROMPT_CATEGORIES, promptCardAPI } from \"../services/api\";\nimport PromptUpload from \"./PromptUpload\";\nimport PromptCardManager from \"./PromptCardManager\";\nimport ArticleInput from \"./ArticleInput\";\nimport ResultDisplay from \"./ResultDisplay\";\nimport ChatInterface from \"./ChatInterface\";\nimport BedrockAgentChat from \"./BedrockAgentChat\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ProjectDetail = () => {\n  _s();\n  const {\n    projectId\n  } = useParams();\n  const navigate = useNavigate();\n  const [project, setProject] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [activeTab, setActiveTab] = useState(\"prompt-cards\");\n  const [promptStatus, setPromptStatus] = useState({});\n  const [promptCards, setPromptCards] = useState([]);\n  const [generationResult, setGenerationResult] = useState(null);\n  const [isGenerating, setIsGenerating] = useState(false);\n  const [executionProgress, setExecutionProgress] = useState(null);\n  const loadProject = useCallback(async () => {\n    try {\n      setLoading(true);\n      setError(null);\n      const projectData = await projectAPI.getProject(projectId);\n      setProject(projectData);\n\n      // 프롬프트 상태 초기화\n      const status = {};\n      PROMPT_CATEGORIES.forEach(category => {\n        status[category.id] = {\n          uploaded: false,\n          indexed: false,\n          fileName: null\n        };\n      });\n      setPromptStatus(status);\n    } catch (err) {\n      const errorInfo = handleAPIError(err);\n      setError(errorInfo.message);\n      toast.error(errorInfo.message);\n    } finally {\n      setLoading(false);\n    }\n  }, [projectId]);\n  const loadPromptCards = useCallback(async () => {\n    try {\n      const response = await promptCardAPI.getPromptCards(projectId, false, true);\n      setPromptCards(response.promptCards || []);\n    } catch (error) {\n      console.error(\"프롬프트 카드 로딩 실패:\", error);\n      // 에러가 발생해도 기존 기능은 유지되도록 함\n      setPromptCards([]);\n    }\n  }, [projectId]);\n  useEffect(() => {\n    loadProject();\n    loadPromptCards();\n  }, [loadProject, loadPromptCards]);\n  const handlePromptUpload = async (categoryId, file) => {\n    try {\n      // 업로드 URL 요청\n      const uploadData = await projectAPI.getUploadUrl(projectId, categoryId, file.name);\n\n      // S3에 파일 업로드\n      await uploadAPI.uploadFile(uploadData.uploadUrl, file);\n\n      // 상태 업데이트\n      setPromptStatus(prev => ({\n        ...prev,\n        [categoryId]: {\n          uploaded: true,\n          indexed: false,\n          // 색인은 Lambda에서 자동으로 처리\n          fileName: file.name\n        }\n      }));\n      toast.success(`${file.name} 업로드 완료! 색인 중...`);\n\n      // 색인 완료 확인 (간단한 폴링)\n      setTimeout(() => {\n        setPromptStatus(prev => ({\n          ...prev,\n          [categoryId]: {\n            ...prev[categoryId],\n            indexed: true\n          }\n        }));\n        toast.success(`${file.name} 색인 완료!`);\n      }, 3000);\n    } catch (err) {\n      const errorInfo = handleAPIError(err);\n      toast.error(`업로드 실패: ${errorInfo.message}`);\n    }\n  };\n  const handleGenerateTitle = async (article, onProgress) => {\n    try {\n      setIsGenerating(true);\n      setGenerationResult(null);\n      setExecutionProgress(null);\n\n      // 진행 상황 콜백 설정\n      const progressCallback = progress => {\n        setExecutionProgress(progress);\n        if (onProgress) {\n          onProgress(progress);\n        }\n      };\n\n      // Step Functions 기반 제목 생성\n      const result = await generateAPI.generateTitle(projectId, article, progressCallback);\n      setGenerationResult(result);\n      setActiveTab(\"result\");\n      toast.success(\"제목 생성 완료!\");\n    } catch (err) {\n      const errorInfo = handleAPIError(err);\n      toast.error(`제목 생성 실패: ${errorInfo.message}`);\n      setExecutionProgress({\n        status: \"failed\",\n        message: errorInfo.message\n      });\n    } finally {\n      setIsGenerating(false);\n    }\n  };\n  const canGenerate = () => {\n    // 새로운 프롬프트 카드 시스템: 최소 1개의 활성화된 카드가 있으면 생성 가능\n    const enabledPromptCards = promptCards.filter(card => card.enabled);\n    if (enabledPromptCards.length > 0) {\n      return true;\n    }\n\n    // 레거시 시스템: 기존 필수 카테고리 체크 (하위 호환성)\n    const requiredCategories = PROMPT_CATEGORIES.filter(cat => cat.required);\n    return requiredCategories.every(cat => {\n      var _promptStatus$cat$id;\n      return (_promptStatus$cat$id = promptStatus[cat.id]) === null || _promptStatus$cat$id === void 0 ? void 0 : _promptStatus$cat$id.indexed;\n    });\n  };\n  const getGenerationStatusIcon = () => {\n    if (!executionProgress) return null;\n    switch (executionProgress.status) {\n      case \"started\":\n        return /*#__PURE__*/_jsxDEV(Cog8ToothIcon, {\n          className: \"h-5 w-5 text-blue-600 animate-spin\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 178,\n          columnNumber: 16\n        }, this);\n      case \"completed\":\n        return /*#__PURE__*/_jsxDEV(CheckCircleIcon, {\n          className: \"h-5 w-5 text-green-600\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 180,\n          columnNumber: 16\n        }, this);\n      case \"failed\":\n        return /*#__PURE__*/_jsxDEV(ExclamationTriangleIcon, {\n          className: \"h-5 w-5 text-red-600\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 182,\n          columnNumber: 16\n        }, this);\n      default:\n        return /*#__PURE__*/_jsxDEV(SparklesIcon, {\n          className: \"h-5 w-5 text-blue-600 animate-pulse\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 184,\n          columnNumber: 16\n        }, this);\n    }\n  };\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex justify-center items-center h-64\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 191,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 190,\n      columnNumber: 7\n    }, this);\n  }\n  if (error) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"text-center py-12\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-red-600 mb-4\",\n        children: \"\\u26A0\\uFE0F \\uC624\\uB958\\uAC00 \\uBC1C\\uC0DD\\uD588\\uC2B5\\uB2C8\\uB2E4\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 199,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-gray-600 mb-6\",\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 200,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: loadProject,\n        className: \"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700\",\n        children: \"\\uB2E4\\uC2DC \\uC2DC\\uB3C4\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 201,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 198,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"max-w-6xl mx-auto\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mb-8\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => navigate(\"/\"),\n        className: \"flex items-center text-gray-600 hover:text-gray-900 mb-4\",\n        children: [/*#__PURE__*/_jsxDEV(ArrowLeftIcon, {\n          className: \"h-5 w-5 mr-2\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 219,\n          columnNumber: 11\n        }, this), \"\\uD504\\uB85C\\uC81D\\uD2B8 \\uBAA9\\uB85D\\uC73C\\uB85C\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 215,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center justify-between\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center space-x-3\",\n          children: [/*#__PURE__*/_jsxDEV(DocumentTextIcon, {\n            className: \"h-8 w-8 text-blue-600\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 225,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n              className: \"text-2xl font-bold text-gray-900\",\n              children: project === null || project === void 0 ? void 0 : project.name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 227,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-gray-600 mt-1\",\n              children: (project === null || project === void 0 ? void 0 : project.description) || \"프로젝트 설명 없음\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 230,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 226,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 224,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center space-x-2\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: `inline-flex items-center px-3 py-1 rounded-full text-sm font-medium ${canGenerate() ? \"bg-green-100 text-green-800\" : \"bg-yellow-100 text-yellow-800\"}`,\n            children: canGenerate() ? `제목 생성 준비됨 (${promptCards.filter(card => card.enabled).length}개 카드 활성)` : \"프롬프트 카드 또는 파일 업로드 필요\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 237,\n            columnNumber: 13\n          }, this), executionProgress && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center space-x-2\",\n            children: [getGenerationStatusIcon(), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-sm font-medium text-gray-700\",\n              children: [executionProgress.status === \"started\" && \"실행 중\", executionProgress.status === \"completed\" && \"완료\", executionProgress.status === \"failed\" && \"실패\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 253,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 251,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 236,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 223,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 214,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mb-8\",\n      children: /*#__PURE__*/_jsxDEV(\"nav\", {\n        className: \"flex space-x-8\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => setActiveTab(\"setup\"),\n          className: `py-2 px-1 border-b-2 font-medium text-sm ${activeTab === \"setup\" ? \"border-blue-500 text-blue-600\" : \"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300\"}`,\n          children: [/*#__PURE__*/_jsxDEV(CloudArrowUpIcon, {\n            className: \"h-5 w-5 inline mr-2\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 275,\n            columnNumber: 13\n          }, this), \"\\uD504\\uB86C\\uD504\\uD2B8 \\uC124\\uC815 (\\uB808\\uAC70\\uC2DC)\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 267,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => setActiveTab(\"prompt-cards\"),\n          className: `py-2 px-1 border-b-2 font-medium text-sm ${activeTab === \"prompt-cards\" ? \"border-blue-500 text-blue-600\" : \"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300\"}`,\n          children: [/*#__PURE__*/_jsxDEV(DocumentTextIcon, {\n            className: \"h-5 w-5 inline mr-2\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 286,\n            columnNumber: 13\n          }, this), \"\\uD504\\uB86C\\uD504\\uD2B8 \\uCE74\\uB4DC\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 278,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => setActiveTab(\"generate\"),\n          className: `py-2 px-1 border-b-2 font-medium text-sm ${activeTab === \"generate\" ? \"border-blue-500 text-blue-600\" : \"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300\"}`,\n          children: [/*#__PURE__*/_jsxDEV(SparklesIcon, {\n            className: \"h-5 w-5 inline mr-2\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 297,\n            columnNumber: 13\n          }, this), \"\\uC81C\\uBAA9 \\uC0DD\\uC131\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 289,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => setActiveTab(\"chat\"),\n          className: `py-2 px-1 border-b-2 font-medium text-sm ${activeTab === \"chat\" ? \"border-blue-500 text-blue-600\" : \"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300\"}`,\n          children: [/*#__PURE__*/_jsxDEV(ChatBubbleLeftRightIcon, {\n            className: \"h-5 w-5 inline mr-2\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 308,\n            columnNumber: 13\n          }, this), \"LangChain \\uCC44\\uD305\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 300,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => setActiveTab(\"agent-chat\"),\n          className: `py-2 px-1 border-b-2 font-medium text-sm ${activeTab === \"agent-chat\" ? \"border-blue-500 text-blue-600\" : \"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300\"}`,\n          children: [/*#__PURE__*/_jsxDEV(BeakerIcon, {\n            className: \"h-5 w-5 inline mr-2\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 319,\n            columnNumber: 13\n          }, this), \"Bedrock Agent \\uCC44\\uD305\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 311,\n          columnNumber: 11\n        }, this), generationResult && /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => setActiveTab(\"result\"),\n          className: `py-2 px-1 border-b-2 font-medium text-sm ${activeTab === \"result\" ? \"border-blue-500 text-blue-600\" : \"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300\"}`,\n          children: [/*#__PURE__*/_jsxDEV(CheckCircleIcon, {\n            className: \"h-5 w-5 inline mr-2\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 331,\n            columnNumber: 15\n          }, this), \"\\uACB0\\uACFC \\uD655\\uC778\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 323,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 266,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 265,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"min-h-screen\",\n      children: [activeTab === \"setup\" && /*#__PURE__*/_jsxDEV(PromptUpload, {\n        categories: PROMPT_CATEGORIES,\n        promptStatus: promptStatus,\n        onUpload: handlePromptUpload\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 341,\n        columnNumber: 11\n      }, this), activeTab === \"prompt-cards\" && /*#__PURE__*/_jsxDEV(PromptCardManager, {\n        projectId: projectId,\n        onCardsChanged: loadPromptCards\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 349,\n        columnNumber: 11\n      }, this), activeTab === \"generate\" && /*#__PURE__*/_jsxDEV(ArticleInput, {\n        canGenerate: canGenerate(),\n        isGenerating: isGenerating,\n        onGenerate: handleGenerateTitle\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 356,\n        columnNumber: 11\n      }, this), activeTab === \"chat\" && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"h-[calc(100vh-16rem)]\",\n        children: /*#__PURE__*/_jsxDEV(ChatInterface, {\n          projectId: projectId,\n          projectName: project === null || project === void 0 ? void 0 : project.name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 365,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 364,\n        columnNumber: 11\n      }, this), activeTab === \"agent-chat\" && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"h-[calc(100vh-16rem)]\",\n        children: /*#__PURE__*/_jsxDEV(BedrockAgentChat, {\n          projectId: projectId,\n          projectName: project === null || project === void 0 ? void 0 : project.name,\n          projectInfo: project\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 371,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 370,\n        columnNumber: 11\n      }, this), activeTab === \"result\" && generationResult && /*#__PURE__*/_jsxDEV(ResultDisplay, {\n        result: generationResult,\n        projectName: project === null || project === void 0 ? void 0 : project.name\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 380,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 339,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 212,\n    columnNumber: 5\n  }, this);\n};\n_s(ProjectDetail, \"arVgdExI/yKPP632gdiuNPuVUdA=\", false, function () {\n  return [useParams, useNavigate];\n});\n_c = ProjectDetail;\nexport default ProjectDetail;\nvar _c;\n$RefreshReg$(_c, \"ProjectDetail\");","map":{"version":3,"names":["React","useState","useEffect","useCallback","useParams","useNavigate","toast","ArrowLeftIcon","CloudArrowUpIcon","DocumentTextIcon","SparklesIcon","CheckCircleIcon","ExclamationTriangleIcon","Cog8ToothIcon","ChatBubbleLeftRightIcon","BeakerIcon","projectAPI","generateAPI","uploadAPI","handleAPIError","PROMPT_CATEGORIES","promptCardAPI","PromptUpload","PromptCardManager","ArticleInput","ResultDisplay","ChatInterface","BedrockAgentChat","jsxDEV","_jsxDEV","ProjectDetail","_s","projectId","navigate","project","setProject","loading","setLoading","error","setError","activeTab","setActiveTab","promptStatus","setPromptStatus","promptCards","setPromptCards","generationResult","setGenerationResult","isGenerating","setIsGenerating","executionProgress","setExecutionProgress","loadProject","projectData","getProject","status","forEach","category","id","uploaded","indexed","fileName","err","errorInfo","message","loadPromptCards","response","getPromptCards","console","handlePromptUpload","categoryId","file","uploadData","getUploadUrl","name","uploadFile","uploadUrl","prev","success","setTimeout","handleGenerateTitle","article","onProgress","progressCallback","progress","result","generateTitle","canGenerate","enabledPromptCards","filter","card","enabled","length","requiredCategories","cat","required","every","_promptStatus$cat$id","getGenerationStatusIcon","className","_jsxFileName","lineNumber","columnNumber","children","onClick","description","categories","onUpload","onCardsChanged","onGenerate","projectName","projectInfo","_c","$RefreshReg$"],"sources":["/Users/yeong-gwang/Documents/work/서울경제신문/ai_제목달기/frontend/src/components/ProjectDetail.js"],"sourcesContent":["import React, { useState, useEffect, useCallback } from \"react\";\nimport { useParams, useNavigate } from \"react-router-dom\";\nimport { toast } from \"react-hot-toast\";\nimport {\n  ArrowLeftIcon,\n  CloudArrowUpIcon,\n  DocumentTextIcon,\n  SparklesIcon,\n  CheckCircleIcon,\n  ExclamationTriangleIcon,\n  Cog8ToothIcon,\n  ChatBubbleLeftRightIcon,\n  BeakerIcon,\n} from \"@heroicons/react/24/outline\";\nimport {\n  projectAPI,\n  generateAPI,\n  uploadAPI,\n  handleAPIError,\n  PROMPT_CATEGORIES,\n  promptCardAPI,\n} from \"../services/api\";\nimport PromptUpload from \"./PromptUpload\";\nimport PromptCardManager from \"./PromptCardManager\";\nimport ArticleInput from \"./ArticleInput\";\nimport ResultDisplay from \"./ResultDisplay\";\nimport ChatInterface from \"./ChatInterface\";\nimport BedrockAgentChat from \"./BedrockAgentChat\";\n\nconst ProjectDetail = () => {\n  const { projectId } = useParams();\n  const navigate = useNavigate();\n\n  const [project, setProject] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [activeTab, setActiveTab] = useState(\"prompt-cards\");\n  const [promptStatus, setPromptStatus] = useState({});\n  const [promptCards, setPromptCards] = useState([]);\n  const [generationResult, setGenerationResult] = useState(null);\n  const [isGenerating, setIsGenerating] = useState(false);\n  const [executionProgress, setExecutionProgress] = useState(null);\n\n  const loadProject = useCallback(async () => {\n    try {\n      setLoading(true);\n      setError(null);\n      const projectData = await projectAPI.getProject(projectId);\n      setProject(projectData);\n\n      // 프롬프트 상태 초기화\n      const status = {};\n      PROMPT_CATEGORIES.forEach((category) => {\n        status[category.id] = {\n          uploaded: false,\n          indexed: false,\n          fileName: null,\n        };\n      });\n      setPromptStatus(status);\n    } catch (err) {\n      const errorInfo = handleAPIError(err);\n      setError(errorInfo.message);\n      toast.error(errorInfo.message);\n    } finally {\n      setLoading(false);\n    }\n  }, [projectId]);\n\n  const loadPromptCards = useCallback(async () => {\n    try {\n      const response = await promptCardAPI.getPromptCards(projectId, false, true);\n      setPromptCards(response.promptCards || []);\n    } catch (error) {\n      console.error(\"프롬프트 카드 로딩 실패:\", error);\n      // 에러가 발생해도 기존 기능은 유지되도록 함\n      setPromptCards([]);\n    }\n  }, [projectId]);\n\n  useEffect(() => {\n    loadProject();\n    loadPromptCards();\n  }, [loadProject, loadPromptCards]);\n\n  const handlePromptUpload = async (categoryId, file) => {\n    try {\n      // 업로드 URL 요청\n      const uploadData = await projectAPI.getUploadUrl(\n        projectId,\n        categoryId,\n        file.name\n      );\n\n      // S3에 파일 업로드\n      await uploadAPI.uploadFile(uploadData.uploadUrl, file);\n\n      // 상태 업데이트\n      setPromptStatus((prev) => ({\n        ...prev,\n        [categoryId]: {\n          uploaded: true,\n          indexed: false, // 색인은 Lambda에서 자동으로 처리\n          fileName: file.name,\n        },\n      }));\n\n      toast.success(`${file.name} 업로드 완료! 색인 중...`);\n\n      // 색인 완료 확인 (간단한 폴링)\n      setTimeout(() => {\n        setPromptStatus((prev) => ({\n          ...prev,\n          [categoryId]: {\n            ...prev[categoryId],\n            indexed: true,\n          },\n        }));\n        toast.success(`${file.name} 색인 완료!`);\n      }, 3000);\n    } catch (err) {\n      const errorInfo = handleAPIError(err);\n      toast.error(`업로드 실패: ${errorInfo.message}`);\n    }\n  };\n\n  const handleGenerateTitle = async (article, onProgress) => {\n    try {\n      setIsGenerating(true);\n      setGenerationResult(null);\n      setExecutionProgress(null);\n\n      // 진행 상황 콜백 설정\n      const progressCallback = (progress) => {\n        setExecutionProgress(progress);\n        if (onProgress) {\n          onProgress(progress);\n        }\n      };\n\n      // Step Functions 기반 제목 생성\n      const result = await generateAPI.generateTitle(\n        projectId,\n        article,\n        progressCallback\n      );\n\n      setGenerationResult(result);\n      setActiveTab(\"result\");\n\n      toast.success(\"제목 생성 완료!\");\n    } catch (err) {\n      const errorInfo = handleAPIError(err);\n      toast.error(`제목 생성 실패: ${errorInfo.message}`);\n      setExecutionProgress({ status: \"failed\", message: errorInfo.message });\n    } finally {\n      setIsGenerating(false);\n    }\n  };\n\n  const canGenerate = () => {\n    // 새로운 프롬프트 카드 시스템: 최소 1개의 활성화된 카드가 있으면 생성 가능\n    const enabledPromptCards = promptCards.filter(card => card.enabled);\n    if (enabledPromptCards.length > 0) {\n      return true;\n    }\n\n    // 레거시 시스템: 기존 필수 카테고리 체크 (하위 호환성)\n    const requiredCategories = PROMPT_CATEGORIES.filter((cat) => cat.required);\n    return requiredCategories.every((cat) => promptStatus[cat.id]?.indexed);\n  };\n\n  const getGenerationStatusIcon = () => {\n    if (!executionProgress) return null;\n\n    switch (executionProgress.status) {\n      case \"started\":\n        return <Cog8ToothIcon className=\"h-5 w-5 text-blue-600 animate-spin\" />;\n      case \"completed\":\n        return <CheckCircleIcon className=\"h-5 w-5 text-green-600\" />;\n      case \"failed\":\n        return <ExclamationTriangleIcon className=\"h-5 w-5 text-red-600\" />;\n      default:\n        return <SparklesIcon className=\"h-5 w-5 text-blue-600 animate-pulse\" />;\n    }\n  };\n\n  if (loading) {\n    return (\n      <div className=\"flex justify-center items-center h-64\">\n        <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600\"></div>\n      </div>\n    );\n  }\n\n  if (error) {\n    return (\n      <div className=\"text-center py-12\">\n        <div className=\"text-red-600 mb-4\">⚠️ 오류가 발생했습니다</div>\n        <p className=\"text-gray-600 mb-6\">{error}</p>\n        <button\n          onClick={loadProject}\n          className=\"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700\"\n        >\n          다시 시도\n        </button>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"max-w-6xl mx-auto\">\n      {/* 헤더 */}\n      <div className=\"mb-8\">\n        <button\n          onClick={() => navigate(\"/\")}\n          className=\"flex items-center text-gray-600 hover:text-gray-900 mb-4\"\n        >\n          <ArrowLeftIcon className=\"h-5 w-5 mr-2\" />\n          프로젝트 목록으로\n        </button>\n\n        <div className=\"flex items-center justify-between\">\n          <div className=\"flex items-center space-x-3\">\n            <DocumentTextIcon className=\"h-8 w-8 text-blue-600\" />\n            <div>\n              <h1 className=\"text-2xl font-bold text-gray-900\">\n                {project?.name}\n              </h1>\n              <p className=\"text-gray-600 mt-1\">\n                {project?.description || \"프로젝트 설명 없음\"}\n              </p>\n            </div>\n          </div>\n\n          <div className=\"flex items-center space-x-2\">\n            <span\n              className={`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium ${\n                canGenerate()\n                  ? \"bg-green-100 text-green-800\"\n                  : \"bg-yellow-100 text-yellow-800\"\n              }`}\n            >\n              {canGenerate() \n                ? `제목 생성 준비됨 (${promptCards.filter(card => card.enabled).length}개 카드 활성)` \n                : \"프롬프트 카드 또는 파일 업로드 필요\"}\n            </span>\n\n            {/* 실행 상태 표시 */}\n            {executionProgress && (\n              <div className=\"flex items-center space-x-2\">\n                {getGenerationStatusIcon()}\n                <span className=\"text-sm font-medium text-gray-700\">\n                  {executionProgress.status === \"started\" && \"실행 중\"}\n                  {executionProgress.status === \"completed\" && \"완료\"}\n                  {executionProgress.status === \"failed\" && \"실패\"}\n                </span>\n              </div>\n            )}\n          </div>\n        </div>\n      </div>\n\n      {/* 탭 네비게이션 */}\n      <div className=\"mb-8\">\n        <nav className=\"flex space-x-8\">\n          <button\n            onClick={() => setActiveTab(\"setup\")}\n            className={`py-2 px-1 border-b-2 font-medium text-sm ${\n              activeTab === \"setup\"\n                ? \"border-blue-500 text-blue-600\"\n                : \"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300\"\n            }`}\n          >\n            <CloudArrowUpIcon className=\"h-5 w-5 inline mr-2\" />\n            프롬프트 설정 (레거시)\n          </button>\n          <button\n            onClick={() => setActiveTab(\"prompt-cards\")}\n            className={`py-2 px-1 border-b-2 font-medium text-sm ${\n              activeTab === \"prompt-cards\"\n                ? \"border-blue-500 text-blue-600\"\n                : \"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300\"\n            }`}\n          >\n            <DocumentTextIcon className=\"h-5 w-5 inline mr-2\" />\n            프롬프트 카드\n          </button>\n          <button\n            onClick={() => setActiveTab(\"generate\")}\n            className={`py-2 px-1 border-b-2 font-medium text-sm ${\n              activeTab === \"generate\"\n                ? \"border-blue-500 text-blue-600\"\n                : \"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300\"\n            }`}\n          >\n            <SparklesIcon className=\"h-5 w-5 inline mr-2\" />\n            제목 생성\n          </button>\n          <button\n            onClick={() => setActiveTab(\"chat\")}\n            className={`py-2 px-1 border-b-2 font-medium text-sm ${\n              activeTab === \"chat\"\n                ? \"border-blue-500 text-blue-600\"\n                : \"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300\"\n            }`}\n          >\n            <ChatBubbleLeftRightIcon className=\"h-5 w-5 inline mr-2\" />\n            LangChain 채팅\n          </button>\n          <button\n            onClick={() => setActiveTab(\"agent-chat\")}\n            className={`py-2 px-1 border-b-2 font-medium text-sm ${\n              activeTab === \"agent-chat\"\n                ? \"border-blue-500 text-blue-600\"\n                : \"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300\"\n            }`}\n          >\n            <BeakerIcon className=\"h-5 w-5 inline mr-2\" />\n            Bedrock Agent 채팅\n          </button>\n          {generationResult && (\n            <button\n              onClick={() => setActiveTab(\"result\")}\n              className={`py-2 px-1 border-b-2 font-medium text-sm ${\n                activeTab === \"result\"\n                  ? \"border-blue-500 text-blue-600\"\n                  : \"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300\"\n              }`}\n            >\n              <CheckCircleIcon className=\"h-5 w-5 inline mr-2\" />\n              결과 확인\n            </button>\n          )}\n        </nav>\n      </div>\n\n      {/* 탭 컨텐츠 */}\n      <div className=\"min-h-screen\">\n        {activeTab === \"setup\" && (\n          <PromptUpload\n            categories={PROMPT_CATEGORIES}\n            promptStatus={promptStatus}\n            onUpload={handlePromptUpload}\n          />\n        )}\n\n        {activeTab === \"prompt-cards\" && (\n          <PromptCardManager \n            projectId={projectId} \n            onCardsChanged={loadPromptCards}\n          />\n        )}\n\n        {activeTab === \"generate\" && (\n          <ArticleInput\n            canGenerate={canGenerate()}\n            isGenerating={isGenerating}\n            onGenerate={handleGenerateTitle}\n          />\n        )}\n\n        {activeTab === \"chat\" && (\n          <div className=\"h-[calc(100vh-16rem)]\">\n            <ChatInterface projectId={projectId} projectName={project?.name} />\n          </div>\n        )}\n\n        {activeTab === \"agent-chat\" && (\n          <div className=\"h-[calc(100vh-16rem)]\">\n            <BedrockAgentChat \n              projectId={projectId} \n              projectName={project?.name} \n              projectInfo={project}\n            />\n          </div>\n        )}\n\n        {activeTab === \"result\" && generationResult && (\n          <ResultDisplay\n            result={generationResult}\n            projectName={project?.name}\n          />\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default ProjectDetail;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}